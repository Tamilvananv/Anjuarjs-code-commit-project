{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{\"4c7A\":function(e,t,n){\"use strict\";n.r(t),t.default='    <div class=\"col-md-12\">\\r\\n    <div class=\"row\">\\r\\n        <div class=\"col-md-12 \" style=\"padding-top: 30px;\">\\r\\n          <div class=\"row \">\\r\\n              <div class=\"col-md-2\">\\r\\n                  <label for=\"EquipmentName\" class=\"control-label col-form-label\">Equipment Name:</label>\\r\\n               </div>\\r\\n               <div class=\"col-md-2\">\\r\\n                  <ejs-dropdownlist id=\\'ObjEquipmentTypeList\\'  [fields]=\\'fields\\'  [dataSource]=\\'ObjEquipmentTypeList\\'\\r\\n                  [popupHeight]=\\'height\\' [allowFiltering]=\\'true\\' [placeholder]=\\'watermark\\'  (change)=\"GetEquipmentIdByName($event)\"\\r\\n                  width=100% >\\r\\n                </ejs-dropdownlist>\\r\\n                </div>\\r\\n                <div class=\"col-md-2\">\\r\\n                <label for=\"EquipmentID\" class=\"control-label col-form-label\">Equipment Id:</label>\\r\\n              </div>\\r\\n              <div class=\"col-md-2\">\\r\\n                 <ejs-dropdownlist id=\\'EquipmentID\\'  [fields]=\\'fields\\' (change)=\"GetEquipmentListById($event)\"\\r\\n                 [popupHeight]=\\'height\\' [allowFiltering]=\\'true\\' [placeholder]=\\'watermark\\' [dataSource]=\\'ObjEquipmentListNew\\'\\r\\n                 width=100%  >\\r\\n               </ejs-dropdownlist>\\r\\n               </div>\\r\\n          </div>\\r\\n         \\r\\n        </div>\\r\\n       \\r\\n      </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<div class=\"row\">\\r\\n  <div class=\"col-lg-12\">\\r\\n    <div class=\"card\">\\r\\n      <div class=\" no-block align-items-center\" *ngIf=\"PageAccessRight.HasWriteAccess\">\\r\\n        <h4 class=\"card-title\"> </h4>\\r\\n       <div class=\"ml-auto mb-2  buttons_padding\" style=\"padding-left: 87%\" >\\r\\n    \\x3c!--   <button class=\"addbtn_style\" ejs-button (click)=\"openAddModal(content3)\">\\r\\n             <i class=\"fas fa-plus-circle\"></i>\\r\\n         <img src=\"assets/images/Add_Ico.ico\"   />  comment \\r\\n            &nbsp;&nbsp;Add Maintenance</button> --\\x3e\\r\\n        </div> \\r\\n      </div>\\r\\n      <div *ngIf=\"!PageAccessRight.HasWriteAccess\"><br /> <br /></div>\\r\\n   <div *ngIf=\"show\">  \\r\\n      <div class=\"table-responsive\">\\r\\n        <ejs-grid #grid id=\\'Grid\\' [dataSource]=\\'ObjMaintenanceListNew\\' [allowPaging]=\\'true\\'  [pageSettings]=\\'pageSettings\\' [allowSelection]=\\'true\\' allowFiltering=\\'true\\' [filterSettings]=\\'filterOptions\\' [toolbar]=\\'toolbarOptions\\' [allowExcelExport]=\\'true\\'\\r\\n          (toolbarClick)=\\'toolbarClick($event)\\' [gridLines]=\"lines\" [enableHover]=\\'false\\' [allowSorting]=\\'true\\'[toolbar]=\\'toolbar\\'          e-gridheader=\\'\\' height=\\'363px\\'  allowTextWrap=\\'true\\'  [textWrapSettings]=\\'wrapSettings\\'  [showColumnMenu]=\"true\" [allowGrouping]=\"true\"\\r\\n          (excelQueryCellInfo)=\\'excelQueryCellInfo($event)\\'  (excelExportComplete)=\\'excelExportComplete()\\' [allowPdfExport]=\"true\" (pdfHeaderQueryCellInfo)=\\'pdfHeaderQueryCellInfo($event)\\'\\r\\n          (created)=\"created($event)\"  (commandClick)=\"actionMaintennace($event)\"   [groupSettings]=\"groupOptions\"\\r\\n          (rowDataBound)=\"rowDataBound($event)\"  (queryCellInfo)=\"queryCellInfo($event)\"\\r\\n           >\\r\\n          <e-columns>\\r\\n            \\x3c!-- <e-column headerText=\\'Action\\' textAlign=\\'center\\'  [commands]=\"commands\" width=\\'120\\'> --\\x3e\\r\\n              <div *ngIf=\"PageAccessRight.HasWriteAccess\">\\r\\n             <e-column headerText=\\'Action\\' textAlign=\\'center\\'  width=\\'200\\'>\\r\\n                <div class=\"col-md-12\">\\r\\n                    <div class=\"row\">\\r\\n                        <div class=\"col-md-12\">\\r\\n                            <ng-template #template let-data>\\r\\n                            <div class=\"row\">\\r\\n                              <div class=\"col-md-6\">\\r\\n                                  <button class=\"addbtn1_style\"  [disabled]=\"!data.ShowMaintenanceEditButton\" (click)=\"EditMaintennace($event,data)\" ejs-button >\\r\\n                                      <i class=\"fa fa-edit\"></i>        \\r\\n                                      &nbsp;Edit</button>\\r\\n                \\r\\n                              </div>\\r\\n                              <div class=\"col-md-6\">\\r\\n                                  <button class=\"addbtn1_style\" [disabled]=\"!data.ShowMaintenanceAddButton\"  (click)=\"addMaintennace($event,data)\" ejs-button >\\r\\n                                      <i class=\"fas fa-plus-circle\"></i>        \\r\\n                                      &nbsp;Add</button>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            </ng-template>\\r\\n                          </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n            \\x3c!--   <ng-template #template let-data>\\r\\n                <div class=\"loc\">\\r\\n              \\r\\n                <button class=\"addbtn_style\"  [disabled]=\"!data.ShowMaintenanceEditButton\" (click)=\"EditMaintennace($event,data)\" ejs-button >\\r\\n                      <i class=\"fa fa-edit\"></i>        \\r\\n                      &nbsp;Edit</button>\\r\\n\\r\\n\\r\\n                             <button class=\"addbtn_style\" [disabled]=\"!data.ShowMaintenanceAddButton\"  (click)=\"addMaintennace($event,data)\" ejs-button >\\r\\n                      <i class=\"fas fa-plus-circle\"></i>        \\r\\n                      &nbsp;Add</button>\\r\\n             \\r\\n                </div>\\r\\n              </ng-template>  --\\x3e\\r\\n            </e-column>\\r\\n           </div>\\r\\n\\r\\n            <e-column field=\\'EquipmentId\\' headerText=\\'Equipment Id\\' headerTextAlign=\"center\" textAlign=\"left\" width=130>\\r\\n            </e-column>\\r\\n            <e-column field=\\'EquipmentTypeName\\' headerText=\\'Equipment Name\\'  headerTextAlign=\\'center\\' textAlign=\\'left\\'\\r\\n              format=\\'C2\\' width=160>\\r\\n            </e-column>\\r\\n            <e-column field=\\'MaintenanceMasterType\\' headerText=\\'Type of Action\\' headerTextAlign=\\'center\\' textAlign=\\'left\\' width=130></e-column>\\r\\n            <e-column field=\\'EqsMaintenanceDueDate\\' headerText=\\'Due Date\\'headerTextAlign=\\'center\\' textAlign=\\'left\\' [format]=\\'formatOptions\\' [filter]=\\'filter\\' width=130>\\r\\n            </e-column>\\r\\n            <e-column field=\\'EqsMaintenancePerformDate\\' headerText=\\'Performed Date\\' headerTextAlign=\\'center\\' textAlign=\\'left\\'  [format]=\\'formatOptions\\' [filter]=\\'filter\\'\\r\\n              width=150></e-column>\\r\\n            <e-column field=\\'EqsMaintenanceNextDueDate\\' headerText=\\'Next Due Date\\'headerTextAlign=\\'center\\' textAlign=\\'left\\'  [format]=\\'formatOptions\\'  [filter]=\\'filter\\' width=150>\\r\\n            </e-column>\\r\\n            <e-column headerText=\"Attachment\" textAlign=\"center\" width=\"150\">\\r\\n              <ng-template #template let-data>\\r\\n                  <div><a (click)=\"openAddModal(content4);setRowId(data);\"><i [ngClass]=\"(data.HasAttachments===true)?\\'far fa-folder-open\\':\\'far fa-folder\\'\"></i></a></div>\\r\\n              </ng-template>\\r\\n            </e-column>\\r\\n            <e-column field=\\'EqsMaintenanceDescription\\' headerText=\\'Description\\' headerTextAlign=\\'center\\' textAlign=\\'left\\' format=\\'yMd\\'\\r\\n              width=130></e-column>\\r\\n          </e-columns>\\r\\n        </ejs-grid>\\r\\n         </div>\\r\\n        </div> \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<ng-template #content3 let-modal>\\r\\n  <div class=\"modal_header\">\\r\\n    \\x3c!-- <h5 class=\"modal-title\" *ngIf=\"!IsMaintenanceEdit\">Add Maintenance Details</h5>\\r\\n    <h5 class=\"modal-title\" *ngIf=\"IsMaintenanceEdit\">Edit Maintenance Details</h5>\\r\\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss(\\'Cross click\\')\">\\r\\n      <span aria-hidden=\"true\">&times;</span>\\r\\n    </button> --\\x3e\\r\\n    <div class=\"col-md-12\">\\r\\n      <div class=\"row\">\\r\\n          <div class=\"col-md-6\">\\r\\n            <h5 class=\"modal-title\" *ngIf=\"!IsMaintenanceEdit\">Add Maintenance </h5>\\r\\n            <h5 class=\"modal-title\" *ngIf=\"IsMaintenanceEdit\">Edit Maintenance </h5>\\r\\n          </div>\\r\\n          <div class=\"col-md-6\" class=\"Close_Popup\">\\r\\n                  <i class=\"fas fa-times\" (click)=\"modal.dismiss(\\'Cross click\\')\" ></i>\\r\\n          </div>\\r\\n\\r\\n      </div>\\r\\n  </div>\\r\\n  </div>\\r\\n  <div class=\"modal-body\">\\r\\n    <form [formGroup]=\\'MaintenanceForm\\'>\\r\\n      <div class=\"row\">\\r\\n        <div class=\"col-md-12\">\\r\\n          <div class=\"row\">\\r\\n            <div class=\"col-md-4\">\\r\\n              <div class=\"form-group\">\\r\\n                <label for=\"EquipmentID\" class=\"control-label col-form-label\">Equipment ID:</label><span\\r\\n                  class=\"text-danger\">*</span>\\r\\n                <ejs-dropdownlist id=\\'EquipmentID\\' [dataSource]=\\'ObjEquipmentList\\' [fields]=\\'fields\\'\\r\\n                   [popupHeight]=\\'height\\' [allowFiltering]=\\'true\\'\\r\\n                  [placeholder]=\\'watermark\\' (change)=\\'GetEquipmentTypeAndMaintenanceTypeById($event)\\'\\r\\n                  formControlName=\"EqsEquipmentId\" [disableControl]=\"IsMaintenanceEdit\" width=76%>\\r\\n                </ejs-dropdownlist>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\"col-md-4\">\\r\\n              <div class=\"form-group\">\\r\\n                <label for=\"EquipmentType\" class=\"control-label col-form-label\">Equipment Name:</label>\\r\\n                \\x3c!--   <div class=\"UnderLine_Type\"  ><label class=\"col-form-label\">{{objEquipmentType[\\'Name\\']}}</label>  --\\x3e\\r\\n                   <div class=\"UnderLine_Type\"  ><label class=\"col-form-label\">{{ObjEquipmentTypeName}}</label>\\r\\n                   </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\"col-md-4\">\\r\\n              <div class=\"form-group\">\\r\\n                <label for=\"Type\" style=\"padding-left: 2px;\" class=\"control-label col-form-label ml-auto offset-1 p-l-40\"> Maintenance Type:</label><span class=\"text-danger\">*</span>\\r\\n                <ejs-dropdownlist id=\\'Type\\' [dataSource]=\\'objMaintenanceType\\' [fields]=\\'fields\\'\\r\\n                  (filtering)=\\'onFiltering($event)\\' [popupHeight]=\\'height\\' [allowFiltering]=\\'true\\'\\r\\n                  [placeholder]=\\'watermark\\' name=\"MaintenanceTypeMasterId\" (change)=\\'ValidateEquipmentMaintenance($event)\\'\\r\\n                  formControlName=\"MaintenanceTypeMasterId\"   ></ejs-dropdownlist>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <hr style=\"background-color: #a9a9a9;\">\\r\\n      <div class=\"col-md-12\" style=\"margin-top: 10px;\">\\r\\n        <div class=\"row\">\\r\\n          <div class=\"col-md-6\">\\r\\n            <div class=\"row\">\\r\\n              <div class=\"col-md-6\">\\r\\n                <label for=\"PerformanceDate\" class=\"control-label col-form-label\">Performance Date:</label><span\\r\\n                  class=\"text-danger\">*</span>\\r\\n              </div>\\r\\n              <div class=\"col-md-6\">\\r\\n                <ejs-datepicker [value]=\\'dateValue\\' placeholder=\\'Enter date\\' name=\\'EqsMaintenancePerformDate\\'\\r\\n                  formControlName=\"EqsMaintenancePerformDate\"></ejs-datepicker>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\"col-md-6\">\\r\\n            <div class=\"row\">\\r\\n              <div class=\"col-md-3\">\\r\\n                <label style=\"padding-top: 20px;\" for=\"Attachment\" class=\" control-label col-form-label\">Attachment:</label>\\r\\n              </div>\\r\\n              <div class=\"col-md-9\">\\r\\n              <ejs-uploader\\r\\n                  #defaultupload\\r\\n                  [autoUpload]=\"false\"\\r\\n                  [dropArea]=\"dropEle\"\\r\\n                  formArrayName=\\'AttachmentList\\'\\r\\n                  (selected)=\"onFileSelect($event)\"\\r\\n                ></ejs-uploader>\\r\\n                <small class=\"form-text link\">* multiple attachment</small>\\r\\n                <div *ngFor=\"let item of AttachmentList\">\\r\\n                  \\x3c!-- <label for=\"\">{{item.AttachmentPath}}</label> --\\x3e\\r\\n                  <label class=\"link\" (click)=\"DownLoadFile(item.AttachmentPath)\">{{item.ImageName}}</label>\\r\\n                  </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\"row\">\\r\\n        <div class=\"col-md-12\" style=\"margin-top: 10px;\">\\r\\n          <div class=\"row\">\\r\\n            <div class=\"col-md-3\">\\r\\n              <div class=\"col-md-12\">\\r\\n                <label for=\"Description\" class=\"control-label col-form-label\">Description:</label>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\"col-md-9\">\\r\\n              <div class=\"col-md-12\">\\r\\n                <textarea class=\"form-control frm_tabtxtarea cye-lf-tag\" rows=\"5\" name=\\'EqsMaintenanceDescription\\'\\r\\n                  formControlName=\"EqsMaintenanceDescription\"></textarea>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n  <div class=\"modal-footer\">\\r\\n    <button class=\"addmodal_style\" ejs-button\\r\\n      (click)=\"SaveMaintenance()\" *ngIf=\"!IsMaintenanceEdit\">\\r\\n      Add</button>\\r\\n    <button class=\"addmodal_style\"  (click)=\"UpdateMaintenance()\"\\r\\n      *ngIf=\"IsMaintenanceEdit\" ejs-button>\\r\\n      Update\\r\\n    </button>\\r\\n    <button class=\"cancel_style\" (click)=\"modal.close(\\'Close click\\');resetForm();\" ejs-button>cancel</button>\\r\\n  </div>\\r\\n</ng-template>\\r\\n<ng-template #content4 let-modal>\\r\\n  <div class=\"modal_header\">\\r\\n    \\x3c!-- <h5 class=\"modal-title\">Attachments</h5>\\r\\n    <button\\r\\n      type=\"button\"\\r\\n      class=\"close\"\\r\\n      aria-label=\"Close\"\\r\\n      (click)=\"modal.dismiss(\\'Cross click\\')\">\\r\\n      <span aria-hidden=\"true\">&times;</span>\\r\\n    </button> --\\x3e\\r\\n    <div class=\"col-md-12\">\\r\\n        <div class=\"row\">\\r\\n          <div class=\"col-md-6\">\\r\\n              <h5 class=\"modal-title\">Attachments</h5>\\r\\n          </div>\\r\\n          <div class=\"col-md-6\" class=\"Close_Popup\">\\r\\n            <i class=\"fas fa-times\" (click)=\"modal.dismiss(\\'Cross click\\')\"></i>\\r\\n          </div>\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n  </div>\\r\\n  <div class=\"modal-body\">\\r\\n    <ejs-filemanager id=\\'overview\\' #fileManagerCtrl [ajaxSettings]=\\'ajaxSettings\\' [searchSettings]=\\'searchSettings\\' (beforeDownload)=\"beforeSend($event)\"\\r\\n        (beforeImageLoad)=\"beforeSend($event)\" [rootAliasName]=\"\\'Attachments\\'\" (beforeSend)=\"beforeSend($event)\" [contextMenuSettings]=\\'contextMenuSettings\\' [toolbarSettings]=\\'toolbarSettings\\' view=\\'Details\\'>\\r\\n    </ejs-filemanager>\\r\\n  </div>\\r\\n</ng-template>\\r\\n'},JLCN:function(e,t,n){\"use strict\";n.r(t),t.default=\"\"},LcVl:function(e,t,n){\"use strict\";n.r(t);var a=n(\"CcnG\"),i=n(\"Ip0R\"),r=n(\"ZYCi\"),s=n(\"4GxJ\"),o=n(\"SZbH\"),c=n(\"22mB\"),l=n(\"LYUm\"),d=n(\"t/Na\"),p=n(\"AytR\"),u=n(\"xYOl\"),m=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},f=function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,n){this._http=e,this._toastr=t,this._eqsCommonService=n,this._urlEqsMaintenance=p.a.apiUrl+\"/api/EqsMaintenance/\",this._urlEqsCommon=p.a.apiUrl+\"/api/EQSCommon/\"}return e.prototype.GetEquipmentList=function(){return this._eqsCommonService.GetEquipmentList()},e.prototype.GetEquipmentTypeById=function(e){return this._eqsCommonService.GetEquipmentTypeById(e)},e.prototype.GetMaintenanceTypeByEquipmentId=function(e){return this._eqsCommonService.GetMaintenanceTypeByEquipmentId(e)},e.prototype.SaveEqsMaintenance=function(e,t){var n=new FormData;return n.append(\"MaintenanceObj\",JSON.stringify(e)),t.forEach((function(e){n.append(\"file\",e.Attachment)})),this._http.post(this._urlEqsMaintenance+\"SaveMaintenance\",n)},e.prototype.GetMaintenanceList=function(){return this._http.get(this._urlEqsMaintenance+\"Get\")},e.prototype.GetMaintenanceDetail=function(e){return this._http.post(this._urlEqsMaintenance+\"GetMaintenanceDetail/\"+e,e)},e.prototype.UpdateEqsMaintenance=function(e,t){var n=new FormData;return n.append(\"MaintenanceObj\",JSON.stringify(e)),t.forEach((function(e){n.append(\"file\",e.Attachment)})),this._http.post(this._urlEqsMaintenance+\"UpdateMaintenance\",n)},e.prototype.getAccessRight=function(){return this._http.get(this._urlEqsMaintenance+\"GetAccessRight\")},e.prototype.SaveReportDownloadLogInAudit=function(e){return this._http.post(this._urlEqsCommon+\"ReportDownloadlog\",e)},e.prototype.DeleteMaintenance=function(e){var t=new d.HttpParams;return t=t.append(\"EqsMaintenanceRecordId\",e.toString()),this._http.get(this._urlEqsMaintenance+\"DeleteMaintenance\",{params:t})},e.prototype.GetEquipmentTypeList=function(){return this._eqsCommonService.GetEquipmentTypeList()},e.prototype.GetEquipmentAndMaintenanceType=function(e){return this._http.post(this._urlEqsMaintenance+\"GetEquipmentAndMaintenanceType/\"+e,e)},e.prototype.SaveMaintenanceRecord=function(e){return this._http.post(this._urlEqsMaintenance+\"SaveMaintenanceRecord\",e)},e.ctorParameters=function(){return[{type:d.HttpClient},{type:o.b},{type:u.a}]},e=m([Object(a.Injectable)({providedIn:\"root\"}),f(\"design:paramtypes\",[d.HttpClient,o.b,u.a])],e)}(),M=n(\"gIcY\"),b=n(\"MCLT\"),v=n(\"HNZf\"),y=n(\"gyId\"),g=n(\"13/J\"),E=n(\"fejc\"),q=n(\"teG2\"),w=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},I=function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},D=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{c(a.next(e))}catch(t){r(t)}}function o(e){try{c(a.throw(e))}catch(t){r(t)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,o)}c((a=a.apply(e,t||[])).next())}))},j=function(e,t){var n,a,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},\"function\"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(n)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,a=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(o){r=[6,o],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}},x=function(e){return e&&e.__esModule?e:{default:e}},S=function(){function e(e,t,n,a,i,r,s,o,c){var d=this;this.routes=e,this.modalService=t,this.toastr=n,this._eqsMaintenanceService=a,this._eqsCommonService=i,this.formBuilder=r,this.formErrorDisplay=s,this._common=o,this.confirmationDialogService=c,this.dateValue=new Date,this.objEquipmentType={},this.IsMaintenanceEdit=!1,this.PageAccessRight={},this.flag=!1,this.show=!0,this.data3=[{Name:\"Select\",Code:\"S\"}],this.fields={text:\"Name\",value:\"Id\"},this.height=\"220px\",this.watermark=\"Select\",this.watermark1=\"Select Type\",this.onFiltering=function(e){var t=new l.b;t=\"\"!==e.text?t.where(\"Name\",\"startswith\",e.text,!0):t,e.updateData(d.data3,t)},this.items2=[{text:\"Preventive Maintenance\"},{text:\"Breakdown\"}],this._restApi=p.a.apiUrl+\"/FileManager/\",this.path={saveUrl:\"https://ej2.syncfusion.com/services/api/uploadbox/Save\",removeUrl:\"https://ej2.syncfusion.com/services/api/uploadbox/Remove\"},this.onUploadSuccess=function(e){for(var t=document.body.querySelectorAll(\".e-upload-file-list\"),n=0;n<t.length;n++)t[n].getAttribute(\"data-file-name\")==e.file.name&&(t[n].addEventListener(\"click\",(function(){d.openFile(e,event)})),t[n].setAttribute(\"file-path\",e.e.target.statusText))},this.onFileSelect=function(e){e.filesData.forEach((function(e){d.MaintenanceForm.controls.AttachmentList.push(d.formBuilder.group({Attachment:e.rawFile}))}))}}return e.prototype.openFile=function(e,t){if(!t.target.classList.contains(\"e-file-delete-btn\")&&!t.target.classList.contains(\"e-file-remove-btn\")){var n=new XMLHttpRequest;n.open(\"POST\",\"/Home/openFile\");for(var a=document.getElementsByClassName(\"e-upload\")[0].querySelectorAll(\".e-upload-file-list\"),i=0;i<a.length;i++)a[i].getAttribute(\"data-file-name\")==e.file.name&&n.setRequestHeader(\"filePath\",a[i].getAttribute(\"file-path\").toString());n.send()}},e.prototype.ngOnInit=function(){var e=this;this.show=!1,this._eqsMaintenanceService.getAccessRight().subscribe((function(t){e.PageAccessRight=t.Object,0==e.PageAccessRight.HasWriteAccess&&e.grid.hideColumns([\"Action\"])})),this.load(),this.setForm(),this.initFileManager(),this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:\"Dialog\"},this.commands=[{type:\"Edit\",buttonOption:{iconCss:\"fa fa-edit\",cssClass:\"e-flat\"}},{buttonOption:{content:\"Add\",iconCss:\"e-icons e-add\",cssClass:\"e-flat\"}}],this.lines=\"Both\",this.filterOptions={type:\"Menu\"},this.filter={params:{format:\"dd-MMM-yyyy\"}},this.Dateformat={type:\"date\",format:\"dd-MMM-yyyy\"},this.formatOptions={type:\"date\",format:\"dd-MMM-yyyy\",skeleton:\"dd-MMM-yyyy\"},this.toolbarOptions=[\"ExcelExport\",\"Search\",\"PdfExport\"],this.toolbar=[\"Search\"],this.pageSettings={pageSize:10},this.wrapSettings={wrapMode:\"Content\"},this.groupOptions={showDropArea:!0,showUngroupButton:!0,columns:[\"MaintenanceMasterType\"]}},e.prototype.initFileManager=function(){this.ajaxSettings={url:this._restApi+\"FileOperations\",getImageUrl:this._restApi+\"GetImage\",uploadUrl:this._restApi+\"Upload\",downloadUrl:this._restApi+\"Download\"},this.searchSettings={allowSearchOnTyping:!1},this.navigationPaneSettings=p.a.navigationPaneSettings,this.contextMenuSettings=p.a.contextMenuSettings,this.toolbarSettings=p.a.toolbarSettings},e.prototype.toolbarClick=function(e){var t=this;switch(e.item.id){case\"Grid_excelexport\":this.grid.columns[7].visible=!1;var n={fileName:\"Equipment_Maintenance.xlsx\"},a={FeatureName:\"Maintenance\",Description:\"Excel Report Is Downloaded.\"};this._eqsMaintenanceService.SaveReportDownloadLogInAudit(a).subscribe((function(e){e.Result&&t.grid.excelExport(n)}));break;case\"Grid_pdfexport\":var i={fileName:\"Equipment_Maintenance.pdf\",pageOrientation:\"Landscape\"};a={FeatureName:\"Maintenance\",Description:\"Pdf Report Is Downloaded.\"};this._eqsMaintenanceService.SaveReportDownloadLogInAudit(a).subscribe((function(e){e.Result&&t.grid.pdfExport(i)}))}},e.prototype.created=function(e){var t=this.grid.element,n=document.createElement(\"span\");n.className=\"e-clear-icon\",n.id=t.id+\"clear\",n.onclick=this.cancelBtnClick.bind(this),t.querySelector(\".e-toolbar-item .e-input-group\").appendChild(n)},e.prototype.cancelBtnClick=function(e){this.grid.searchSettings.key=\"\",this.grid.element.querySelector(\".e-input-group.e-search .e-input\").value=\"\"},e.prototype.openAddModal=function(e){var t=this;this.IsMaintenanceEdit=!1,this.objEquipmentType={},this.ObjEquipmentTypeName=null,this.resetForm(),this.modalService.open(e,{centered:!0,size:\"lg\",backdrop:\"static\",keyboard:!1}).result.then((function(e){t.closeResult=\"Closed with: \"+e}),(function(e){t.closeResult=\"Dismissed \"+t.getDismissReason(e)}))},e.prototype.getDismissReason=function(e){return e===s.a.ESC?\"by pressing ESC\":e===s.a.BACKDROP_CLICK?\"by clicking on a backdrop\":\"with: \"+e},e.prototype.load=function(){this.GetEquipmentList(),this.GetMaintenanceList(),this.EqsMaintenanceTypeList(),this.GetEquipmentTypeList()},e.prototype.setForm=function(){this.MaintenanceForm=this.formBuilder.group({EqsMaintenanceRecordId:[\"\"],EqsEquipmentId:[\"\",M.l.required],EquipmentTypeId:[\"\"],MaintenanceTypeMasterId:[\"\",M.l.required],EqsMaintenancePerformDate:[\"\",M.l.required],EqsMaintenanceDescription:[\"\"],AttachmentList:new M.b([])})},e.prototype.resetForm=function(){this.MaintenanceForm.reset(),this.AttachmentList=[]},e.prototype.GetEquipmentTypeAndMaintenanceTypeById=function(e){var t=this;this._eqsCommonService.GetEquipmentTypeById(e.value).subscribe((function(e){t.objEquipmentType=e.Object,t.ObjEquipmentTypeName=t.objEquipmentType.Name})),this._eqsMaintenanceService.GetMaintenanceTypeByEquipmentId(e.value).subscribe((function(e){t.objEquipmentMaintenanceType=e.Object}))},e.prototype.GetEquipmentList=function(){var e=this;this._eqsMaintenanceService.GetEquipmentList().subscribe((function(t){e.ObjEquipmentList=t.Object,e.ObjEquipmentListNew=e.ObjEquipmentList}))},e.prototype.GetMaintenanceList=function(){var e=this;this._eqsMaintenanceService.GetMaintenanceList().subscribe((function(t){e.ObjMaintenanceList=t.Object;for(var n=0;n<e.ObjMaintenanceList.length;n++)null!=e.ObjMaintenanceList[n].EqsMaintenanceDueDate&&(e.ObjMaintenanceList[n].EqsMaintenanceDueDate=new Date(e.ObjMaintenanceList[n].EqsMaintenanceDueDate)),null!=e.ObjMaintenanceList[n].EqsMaintenancePerformDate&&(e.ObjMaintenanceList[n].EqsMaintenancePerformDate=new Date(e.ObjMaintenanceList[n].EqsMaintenancePerformDate),e.ObjMaintenanceList[n].ShowMaintenanceAddButton=!1,e.ObjMaintenanceList[n].ShowMaintenanceEditButton=!0),null!=e.ObjMaintenanceList[n].EqsMaintenanceNextDueDate&&(e.ObjMaintenanceList[n].EqsMaintenanceNextDueDate=new Date(e.ObjMaintenanceList[n].EqsMaintenanceNextDueDate));e.ObjMaintenanceList=g.a.parse.parseJson(e.ObjMaintenanceList),1==e.flag&&e.GetEquipmentListById(e.id)}))},e.prototype.EqsMaintenanceTypeList=function(){var e=this;this._eqsCommonService.EqsMaintenanceTypeList().subscribe((function(t){e.objMaintenanceType=t.Object}))},e.prototype.SaveMaintenance=function(){var e=this;if(this.MaintenanceForm.valid){this.MaintenanceForm.patchValue({EquipmentTypeId:this.objEquipmentType.Id});var t=this.MaintenanceForm.get(\"AttachmentList\").value;this._eqsMaintenanceService.SaveEqsMaintenance(this.MaintenanceForm.value,t).subscribe((function(t){if(t.Result){e.toastr.success(t.ResultMessage),e.flag=!0;var n=t.Id;e.id=n,e.GetMaintenanceList(),e.resetForm(),e.closeQualificationModal()}else e.toastr.error(t.ResultMessage)}))}else this.formErrorDisplay.showErrors(this.MaintenanceForm)},e.prototype.closeQualificationModal=function(){this.modalService.dismissAll()},e.prototype.editMaintenance=function(e,t){var n=this;this._eqsMaintenanceService.GetMaintenanceDetail(e).subscribe((function(e){var a=e.Object;n.AttachmentList=a.AttachmentList,null!=a?(n.MaintenanceForm.patchValue({EqsMaintenanceRecordId:a.EqsMaintenanceRecordId,EqsEquipmentId:a.EqsEquipmentId,MaintenanceTypeMasterId:a.MaintenanceTypeMasterId,EqsMaintenancePerformDate:a.EqsMaintenancePerformDate,EqsMaintenanceDescription:a.EqsMaintenanceDescription}),0==t&&(n.ObjEquipmentTypeName=a.EquipmentTypeName,n.IsMaintenanceEdit=!0)):n.MaintenanceForm.patchValue({EqsMaintenanceRecordId:null,EqsEquipmentId:null,MaintenanceTypeMasterId:null,EqsMaintenancePerformDate:null,EqsMaintenanceDescription:null})}))},e.prototype.UpdateMaintenance=function(){var e=this;if(this.MaintenanceForm.valid){this.MaintenanceForm.patchValue({EquipmentTypeId:this.objEquipmentType.Id});var t=this.MaintenanceForm.get(\"AttachmentList\").value;this._eqsMaintenanceService.UpdateEqsMaintenance(this.MaintenanceForm.value,t).subscribe((function(t){if(t.Result){e.toastr.success(t.ResultMessage),e.flag=!0;var n=t.Id;e.id=n,e.GetMaintenanceList(),e.resetForm(),e.closeQualificationModal()}else e.toastr.error(t.ResultMessage)}))}else this.formErrorDisplay.showErrors(this.MaintenanceForm)},e.prototype.DownLoadFile=function(e){this._common.DownLoadFile(e).subscribe((function(e){var t=URL.createObjectURL(e);window.open(t,\"_blank\")}))},e.prototype.setRowId=function(e){this.EqsMaintenanceRecordId=e.EqsMaintenanceRecordId,this.EqsEquipmentId=e.EqsEquipmentId},e.prototype.beforeSend=function(e){var t=\"EQSMaintenance/Equip_\"+this.EqsEquipmentId+\"/\"+this.EqsMaintenanceRecordId;if(\"beforeImageLoad\"==e.name&&-1==e.imageUrl.indexOf(t)){var n=e.imageUrl.indexOf(\"path=\")+5;e.imageUrl=e.imageUrl.substring(0,n)+t+e.imageUrl.substring(n)}else if(\"beforeDownload\"==e.name)-1==e.data.path.indexOf(t)&&(e.data.path=t+e.data.path);else{var a=JSON.parse(e.ajaxSettings.data);\"Upload\"==e.action?-1==a[0].path.indexOf(t)&&(a[0].path=t+a[0].path):-1==a.path.indexOf(t)&&(a.path=t+a.path,\"move\"==e.action&&(a.targetPath=t+a.targetPath)),e.ajaxSettings.data=JSON.stringify(a)}},e.prototype.excelQueryCellInfo=function(e){if(\"EqsMaintenanceDueDate\"===e.column.field){var t=(new E.n).getDateFormat({format:\"dd-MMM-yyyy\"})(e.value);e.value=t}if(\"EqsMaintenancePerformDate\"===e.column.field){t=(new E.n).getDateFormat({format:\"dd-MMM-yyyy\"})(e.value);e.value=t}if(\"EqsMaintenanceNextDueDate\"===e.column.field){t=(new E.n).getDateFormat({format:\"dd-MMM-yyyy\"})(e.value);e.value=t}},e.prototype.excelExportComplete=function(){this.grid.columns[7].visible=!0},e.prototype.pdfHeaderQueryCellInfo=function(e){e.cell.row.pdfGrid.repeatHeader=!0},e.prototype.actionMaintennace=function(e){switch(e.commandColumn.type){case\"Delete\":this.openAddModal(this.MaintenanceModal),e.rowData.EqsMaintenanceRecordId>0?(this.editMaintenance(e.rowData.EqsMaintenanceRecordId,!0),this.ObjEquipmentTypeName=this.ObjMaintenanceListNew[0].EquipmentTypeName):this.ShowRecordOnAddMaintenance(e,!0);break;case\"Edit\":this.openAddModal(this.MaintenanceModal),this.editMaintenance(e.rowData.EqsMaintenanceRecordId,!1)}\"Add\"==e.commandColumn.buttonOption.content&&(this.openAddModal(this.MaintenanceModal),e.rowData.EqsMaintenanceRecordId>0?(this.editMaintenance(e.rowData.EqsMaintenanceRecordId,!0),this.ObjEquipmentTypeName=this.ObjMaintenanceListNew[0].EquipmentTypeName):this.ShowRecordOnAddMaintenance(e,!0))},e.prototype.DeleteMaintenance=function(e){var t=this;this._eqsMaintenanceService.DeleteMaintenance(e).subscribe((function(e){e.Result?(t.toastr.success(e.ResultMessage),t.GetMaintenanceList()):t.toastr.error(e.ResultMessage)}))},e.prototype.ValidateEquipmentMaintenance=function(e){var t=this.objEquipmentMaintenanceType.filter((function(t){return t.Name==e.itemData.Name})),n=e.itemData.Name+\" Maintenance Is Not Added For This Equipment.Please Go To Equipment Master And Edit The Equipment And Add Maintenance.\";0==t.length&&this.toastr.error(n)},e.prototype.GetEquipmentTypeList=function(){var e=this;this._eqsMaintenanceService.GetEquipmentTypeList().subscribe((function(t){e.ObjEquipmentTypeList=t.Object}))},e.prototype.GetEquipmentIdByName=function(e){var t=this.ObjEquipmentList.filter((function(t){return t.EquipmentTypeId==e.value}));this.ObjEquipmentListNew=t},e.prototype.GetEquipmentMaintenanceList=function(e){var t=this;this.ObjMaintenanceListNewRec=null,this._eqsMaintenanceService.GetEquipmentAndMaintenanceType(e).subscribe((function(e){t.ObjMaintenanceListNewRec=e.Object;for(var n=0;n<t.ObjMaintenanceListNewRec.length;n++)null!=t.ObjMaintenanceListNewRec[n].EqsMaintenanceDueDate&&(t.ObjMaintenanceListNewRec[n].EqsMaintenanceDueDate=new Date(t.ObjMaintenanceListNewRec[n].EqsMaintenanceDueDate));t.ObjMaintenanceListNewRec=g.a.parse.parseJson(t.ObjMaintenanceListNewRec)}))},e.prototype.GetEquipmentListById=function(e){return D(this,void 0,void 0,(function(){var t,n,a,i,r=this;return j(this,(function(s){switch(s.label){case 0:return t=[],a=[],i=!1,this.flag=!1,this.show=!0,this.ObjMaintenanceListNew=null,[],Object(b.isNullOrUndefined)(e.value)?(t=this.ObjMaintenanceList.filter((function(t){return t.EqsEquipmentId==e})),n=e,i=!0):(t=this.ObjMaintenanceList.filter((function(t){return t.EqsEquipmentId==e.value})),n=e.value,i=!1),[4,this._eqsMaintenanceService.GetEquipmentAndMaintenanceType(n).subscribe((function(e){a=e.Object;for(var n=0;n<a.length;n++)null!=a[n].EqsMaintenanceDueDate&&(a[n].EqsMaintenanceDueDate=new Date(a[n].EqsMaintenanceDueDate));if(a=g.a.parse.parseJson(a),t=t.concat(a),0==i&&t.length>0){var s=!1,o=!1,c=!1,l=null,d=null,p=null,u=null,m={AnnualId:null,BreakDownnId:null,PreventiveId:null,EqsEquipmentId:null};for(n=0;n<t.length;n++)u=t[n].EqsEquipmentId,1==t[n].MaintenanceTypeMasterId&&null==t[n].EqsMaintenancePerformDate?s=!0:2==t[n].MaintenanceTypeMasterId&&null==t[n].EqsMaintenancePerformDate?o=!0:3==t[n].MaintenanceTypeMasterId&&null==t[n].EqsMaintenancePerformDate&&(c=!0),1==t[n].MaintenanceTypeMasterId?l=t[n].MaintenanceTypeMasterId:2==t[n].MaintenanceTypeMasterId?d=t[n].MaintenanceTypeMasterId:3==t[n].MaintenanceTypeMasterId&&(p=t[n].MaintenanceTypeMasterId);if(0==s&&0==o&&0==c)m.AnnualId=l,m.BreakDownnId=d,m.PreventiveId=p,m.EqsEquipmentId=u,r._eqsMaintenanceService.SaveMaintenanceRecord(m).subscribe((function(e){e.Result&&(r.flag=!0,r.id=m.EqsEquipmentId,r.GetMaintenanceList())}));else{var f=!1;0==s&&(m.AnnualId=l,f=!0),0==o&&(m.BreakDownnId=d,f=!0),0==c&&(m.PreventiveId=p,f=!0),m.EqsEquipmentId=u,1==f&&r._eqsMaintenanceService.SaveMaintenanceRecord(m).subscribe((function(e){e.Result&&(r.flag=!0,r.id=m.EqsEquipmentId,r.GetMaintenanceList())}))}}r.ObjMaintenanceListNew=t,0==r.ObjMaintenanceListNew.length&&r.toastr.warning(\"Maintenance is not added for this Equipment. Please Add Maintenance for this Equipment.\")}))];case 1:return s.sent(),[2]}}))}))},e.prototype.ShowRecordOnAddMaintenance=function(e,t){null!=this.ObjMaintenanceListNew&&(this.MaintenanceForm.patchValue({EqsEquipmentId:e.EqsEquipmentId,EquipmentId:e.EquipmentId,EquipmentTypeId:e.EquipmentTypeId,MaintenanceTypeMasterId:e.MaintenanceTypeMasterId}),this.ObjEquipmentTypeName=e.EquipmentTypeName)},e.prototype.rowDataBound=function(e){},e.prototype.HideIcon=function(e){if(null!=e.data.EqsMaintenancePerformDate){var t=e.row.getElementsByClassName(\"e-add\")[0];t.classList.add(\"e-hide\"),t.classList.remove(\"e-add\")}},e.prototype.addMaintennace=function(e,t){this.openAddModal(this.MaintenanceModal),t.EqsMaintenanceRecordId>0?(this.editMaintenance(t.EqsMaintenanceRecordId,!0),this.ObjEquipmentTypeName=this.ObjMaintenanceListNew[0].EquipmentTypeName):this.ShowRecordOnAddMaintenance(t,!0)},e.prototype.EditMaintennace=function(e,t){this.openAddModal(this.MaintenanceModal),this.editMaintenance(t.EqsMaintenanceRecordId,!1)},e.prototype.GetEquipmentTypeByEquipmentId=function(e){},e.prototype.queryCellInfo=function(e){\"BreakDown\"==e.data.MaintenanceMasterType&&(\"EqsMaintenanceNextDueDate\"===e.column.field&&\"\"==e.cell.innerText&&(e.cell.innerText=\"NA\"),\"EqsMaintenanceDueDate\"===e.column.field&&\"\"==e.cell.innerText&&(e.cell.innerText=\"NA\"))},e.ctorParameters=function(){return[{type:r.Router},{type:s.c},{type:o.b},{type:h},{type:u.a},{type:M.c},{type:v.a},{type:y.a},{type:q.a}]},w([Object(a.ViewChild)(\"grid\",{static:!1}),I(\"design:type\",c.h)],e.prototype,\"grid\",void 0),w([Object(a.ViewChild)(\"content3\",{static:!1}),I(\"design:type\",Object)],e.prototype,\"MaintenanceModal\",void 0),e=w([Object(a.Component)({selector:\"app-eqs-maintenance\",template:x(n(\"4c7A\")).default,providers:[c.f,c.p],styles:[x(n(\"JLCN\")).default]}),I(\"design:paramtypes\",[r.Router,s.c,o.b,h,u.a,M.c,v.a,y.a,q.a])],e)}(),A=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},O=[{path:\"\",children:[{path:\"\",data:{urls:[{title:\"Home\",url:\"/landing\"},{title:\"EQS\",url:\"/eqs-home\"},{title:\" Maintenance\"}]},component:S}]}],T=function(){function e(){}return e=A([Object(a.NgModule)({imports:[r.RouterModule.forChild(O)],exports:[r.RouterModule]})],e)}(),L=n(\"UPmj\"),R=n(\"ERWf\"),N=n(\"WaL4\"),_=n(\"sE5F\"),C=n(\"1sLA\"),k=n(\"TkSO\"),P=n(\"Cqot\"),G=n(\"g0hO\");n.d(t,\"EqsMaintenanceModule\",(function(){return B}));var F=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},B=function(){function e(){}return e=F([Object(a.NgModule)({declarations:[S],imports:[i.CommonModule,T,L.b,c.i,R.a,N.c,k.c,P.b,_.a,_.b,M.k,G.a,k.e,C.d],providers:[c.k,c.o,c.f,c.j,c.a,c.g,C.e,C.f,C.a,c.b,c.d,c.e,C.f,c.l]})],e)}()}}]);","extractedComments":[]}