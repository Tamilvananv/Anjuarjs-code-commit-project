{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BSjz:function(e,t,n){\"use strict\";var i=n(\"CcnG\"),r=function(){function e(e){this.elementRef=e,this.options=this.options||{},this.onBeginEvent=new i.EventEmitter,this.onEndEvent=new i.EventEmitter}return e.prototype.ngAfterContentInit=function(){var e=n(\"cCNl\").default,t=this.elementRef.nativeElement.querySelector(\"canvas\");this.options.canvasHeight&&(t.height=this.options.canvasHeight),this.options.canvasWidth&&(t.width=this.options.canvasWidth),this.signaturePad=new e(t,this.options),this.signaturePad.onBegin=this.onBegin.bind(this),this.signaturePad.onEnd=this.onEnd.bind(this)},e.prototype.ngOnDestroy=function(){var e=this.elementRef.nativeElement.querySelector(\"canvas\");e.width=0,e.height=0},e.prototype.resizeCanvas=function(){var e=Math.max(window.devicePixelRatio||1,1),t=this.signaturePad._canvas;t.width=t.offsetWidth*e,t.height=t.offsetHeight*e,t.getContext(\"2d\").scale(e,e),this.signaturePad.clear()},e.prototype.toData=function(){return this.signaturePad?this.signaturePad.toData():[]},e.prototype.fromData=function(e){this.signaturePad.fromData(e)},e.prototype.toDataURL=function(e,t){return this.signaturePad.toDataURL(e,t)},e.prototype.fromDataURL=function(e,t){void 0===t&&(t={}),!t.hasOwnProperty(\"height\")&&this.options.canvasHeight&&(t.height=this.options.canvasHeight),!t.hasOwnProperty(\"width\")&&this.options.canvasWidth&&(t.width=this.options.canvasWidth),this.signaturePad.fromDataURL(e,t)},e.prototype.clear=function(){this.signaturePad.clear()},e.prototype.isEmpty=function(){return this.signaturePad.isEmpty()},e.prototype.off=function(){this.signaturePad.off()},e.prototype.on=function(){this.signaturePad.on()},e.prototype.set=function(e,t){switch(e){case\"canvasHeight\":this.signaturePad._canvas.height=t;break;case\"canvasWidth\":this.signaturePad._canvas.width=t;break;default:this.signaturePad[e]=t}},e.prototype.onBegin=function(){this.onBeginEvent.emit(!0)},e.prototype.onEnd=function(){this.onEndEvent.emit(!0)},e.prototype.queryPad=function(){return this.signaturePad},e.decorators=[{type:i.Component,args:[{template:\"<canvas></canvas>\",selector:\"signature-pad\"}]}],e.ctorParameters=[{type:i.ElementRef}],e.propDecorators={options:[{type:i.Input}],onBeginEvent:[{type:i.Output}],onEndEvent:[{type:i.Output}]},e}();t.SignaturePad=r},GPNb:function(e,t){function n(e){var t=new Error(\"Cannot find module '\"+e+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=\"GPNb\"},IhCJ:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return l}));var i=n(\"CcnG\"),r=n(\"t/Na\"),o=n(\"SZbH\"),a=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},s=function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t){this._http=e,this._toastr=t,this.monthsList=[{Name:\"Select\",Id:0},{Name:\"1\",Id:1},{Name:\"2\",Id:2},{Name:\"3\",Id:3},{Name:\"4\",Id:4},{Name:\"5\",Id:5},{Name:\"6\",Id:6},{Name:\"7\",Id:7},{Name:\"8\",Id:8},{Name:\"9\",Id:9},{Name:\"10\",Id:10},{Name:\"11\",Id:11},{Name:\"12\",Id:12}],this.monthsWithNAList=[{Name:\"Select\",Id:\"0\"},{Name:\"NA\",Id:\"-1\"},{Name:\"1\",Id:\"1\"},{Name:\"2\",Id:\"2\"},{Name:\"3\",Id:\"3\"},{Name:\"4\",Id:\"4\"},{Name:\"5\",Id:\"5\"},{Name:\"6\",Id:\"6\"},{Name:\"7\",Id:\"7\"},{Name:\"8\",Id:\"8\"},{Name:\"9\",Id:\"9\"},{Name:\"10\",Id:\"10\"},{Name:\"11\",Id:\"11\"},{Name:\"12\",Id:\"12\"}],this.tools={type:\"Expand\",items:[\"Bold\",\"Italic\",\"Underline\",\"|\",\"Formats\",\"Alignments\",\"OrderedList\",\"UnorderedList\",\"|\",\"CreateLink\",\"Image\",\"|\",\"SourceCode\",\"Undo\",\"Redo\",\"FontColor\",\"BackgroundColor\",\"StrikeThrough\",\"FontName\",\"FontSize\",\"CreateTable\",\"Print\",\"LowerCase\",\"UpperCase\",\"|\",\"Outdent\",\"Indent\",\"|\",\"ClearFormat\",\"SourceCode\",\"FullScreen\",\"|\",{tooltipText:\"Save Template\",template:' <span><i class=\"ti-save\"></i></span>'},{tooltipText:\"Import Template\",template:' <span><i class=\"ti-import\"></i></span>'}]}}return e.prototype.GetMonthList=function(){return this.monthsList},e.prototype.GetMonthsWithNAList=function(){return this.monthsWithNAList},e.prototype.GetTools=function(){return this.tools},e.ctorParameters=function(){return[{type:r.HttpClient},{type:o.b}]},e=a([Object(i.Injectable)({providedIn:\"root\"}),s(\"design:paramtypes\",[r.HttpClient,o.b])],e)}()},LvDl:function(e,t,n){(function(e){var i;(function(){var r=\"Expected a function\",o=\"__lodash_placeholder__\",a=[[\"ary\",128],[\"bind\",1],[\"bindKey\",2],[\"curry\",8],[\"curryRight\",16],[\"flip\",512],[\"partial\",32],[\"partialRight\",64],[\"rearg\",256]],s=\"[object Arguments]\",l=\"[object Array]\",c=\"[object Boolean]\",d=\"[object Date]\",h=\"[object Error]\",p=\"[object Function]\",u=\"[object GeneratorFunction]\",m=\"[object Map]\",f=\"[object Number]\",g=\"[object Object]\",b=\"[object RegExp]\",v=\"[object Set]\",y=\"[object String]\",C=\"[object Symbol]\",O=\"[object WeakMap]\",S=\"[object ArrayBuffer]\",k=\"[object DataView]\",w=\"[object Float32Array]\",T=\"[object Float64Array]\",E=\"[object Int8Array]\",j=\"[object Int16Array]\",x=\"[object Int32Array]\",N=\"[object Uint8Array]\",L=\"[object Uint16Array]\",D=\"[object Uint32Array]\",M=/\\b__p \\+= '';/g,I=/\\b(__p \\+=) '' \\+/g,R=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,P=/&(?:amp|lt|gt|quot|#39);/g,B=/[&<>\"']/g,A=RegExp(P.source),_=RegExp(B.source),H=/<%-([\\s\\S]+?)%>/g,W=/<%([\\s\\S]+?)%>/g,z=/<%=([\\s\\S]+?)%>/g,F=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,q=/^\\w*$/,U=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,V=/[\\\\^$.*+?()[\\]{}|]/g,Q=RegExp(V.source),G=/^\\s+|\\s+$/g,K=/^\\s+/,X=/\\s+$/,Y=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,J=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,$=/,? & /,Z=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,ee=/\\\\(\\\\)?/g,te=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,ne=/\\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,oe=/^\\[object .+?Constructor\\]$/,ae=/^0o[0-7]+$/i,se=/^(?:0|[1-9]\\d*)$/,le=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,ce=/($^)/,de=/['\\n\\r\\u2028\\u2029\\\\]/g,he=\"\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\",pe=\"\\\\xac\\\\xb1\\\\xd7\\\\xf7\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\\\\u2000-\\\\u206f \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\",ue=\"[\\\\ud800-\\\\udfff]\",me=\"[\"+pe+\"]\",fe=\"[\"+he+\"]\",ge=\"\\\\d+\",be=\"[\\\\u2700-\\\\u27bf]\",ve=\"[a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff]\",ye=\"[^\\\\ud800-\\\\udfff\"+pe+ge+\"\\\\u2700-\\\\u27bfa-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xffA-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]\",Ce=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",Oe=\"[^\\\\ud800-\\\\udfff]\",Se=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",ke=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",we=\"[A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde]\",Te=\"(?:\"+ve+\"|\"+ye+\")\",Ee=\"(?:\"+we+\"|\"+ye+\")\",je=\"(?:\"+fe+\"|\"+Ce+\")\"+\"?\",xe=\"[\\\\ufe0e\\\\ufe0f]?\"+je+(\"(?:\\\\u200d(?:\"+[Oe,Se,ke].join(\"|\")+\")[\\\\ufe0e\\\\ufe0f]?\"+je+\")*\"),Ne=\"(?:\"+[be,Se,ke].join(\"|\")+\")\"+xe,Le=\"(?:\"+[Oe+fe+\"?\",fe,Se,ke,ue].join(\"|\")+\")\",De=RegExp(\"['’]\",\"g\"),Me=RegExp(fe,\"g\"),Ie=RegExp(Ce+\"(?=\"+Ce+\")|\"+Le+xe,\"g\"),Re=RegExp([we+\"?\"+ve+\"+(?:['’](?:d|ll|m|re|s|t|ve))?(?=\"+[me,we,\"$\"].join(\"|\")+\")\",Ee+\"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=\"+[me,we+Te,\"$\"].join(\"|\")+\")\",we+\"?\"+Te+\"+(?:['’](?:d|ll|m|re|s|t|ve))?\",we+\"+(?:['’](?:D|LL|M|RE|S|T|VE))?\",\"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\",\"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\",ge,Ne].join(\"|\"),\"g\"),Pe=RegExp(\"[\\\\u200d\\\\ud800-\\\\udfff\"+he+\"\\\\ufe0e\\\\ufe0f]\"),Be=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ae=[\"Array\",\"Buffer\",\"DataView\",\"Date\",\"Error\",\"Float32Array\",\"Float64Array\",\"Function\",\"Int8Array\",\"Int16Array\",\"Int32Array\",\"Map\",\"Math\",\"Object\",\"Promise\",\"RegExp\",\"Set\",\"String\",\"Symbol\",\"TypeError\",\"Uint8Array\",\"Uint8ClampedArray\",\"Uint16Array\",\"Uint32Array\",\"WeakMap\",\"_\",\"clearTimeout\",\"isFinite\",\"parseInt\",\"setTimeout\"],_e=-1,He={};He[w]=He[T]=He[E]=He[j]=He[x]=He[N]=He[\"[object Uint8ClampedArray]\"]=He[L]=He[D]=!0,He[s]=He[l]=He[S]=He[c]=He[k]=He[d]=He[h]=He[p]=He[m]=He[f]=He[g]=He[b]=He[v]=He[y]=He[O]=!1;var We={};We[s]=We[l]=We[S]=We[k]=We[c]=We[d]=We[w]=We[T]=We[E]=We[j]=We[x]=We[m]=We[f]=We[g]=We[b]=We[v]=We[y]=We[C]=We[N]=We[\"[object Uint8ClampedArray]\"]=We[L]=We[D]=!0,We[h]=We[p]=We[O]=!1;var ze={\"\\\\\":\"\\\\\",\"'\":\"'\",\"\\n\":\"n\",\"\\r\":\"r\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},Fe=parseFloat,qe=parseInt,Ue=\"object\"==typeof global&&global&&global.Object===Object&&global,Ve=\"object\"==typeof self&&self&&self.Object===Object&&self,Qe=Ue||Ve||Function(\"return this\")(),Ge=t&&!t.nodeType&&t,Ke=Ge&&\"object\"==typeof e&&e&&!e.nodeType&&e,Xe=Ke&&Ke.exports===Ge,Ye=Xe&&Ue.process,Je=function(){try{var e=Ke&&Ke.require&&Ke.require(\"util\").types;return e||Ye&&Ye.binding&&Ye.binding(\"util\")}catch(t){}}(),$e=Je&&Je.isArrayBuffer,Ze=Je&&Je.isDate,et=Je&&Je.isMap,tt=Je&&Je.isRegExp,nt=Je&&Je.isSet,it=Je&&Je.isTypedArray;function rt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ot(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var a=e[r];t(i,a,n(a),e)}return i}function at(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function lt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function ct(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}function dt(e,t){return!!(null==e?0:e.length)&&Ct(e,t,0)>-1}function ht(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function pt(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function ut(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function mt(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function ft(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function gt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var bt=wt(\"length\");function vt(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function yt(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function Ct(e,t,n){return t==t?function(e,t,n){var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):yt(e,St,n)}function Ot(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function St(e){return e!=e}function kt(e,t){var n=null==e?0:e.length;return n?jt(e,t)/n:NaN}function wt(e){return function(t){return null==t?void 0:t[e]}}function Tt(e){return function(t){return null==e?void 0:e[t]}}function Et(e,t,n,i,r){return r(e,(function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)})),n}function jt(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function xt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Nt(e){return function(t){return e(t)}}function Lt(e,t){return pt(t,(function(t){return e[t]}))}function Dt(e,t){return e.has(t)}function Mt(e,t){for(var n=-1,i=e.length;++n<i&&Ct(t,e[n],0)>-1;);return n}function It(e,t){for(var n=e.length;n--&&Ct(t,e[n],0)>-1;);return n}function Rt(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}var Pt=Tt({\"À\":\"A\",\"Á\":\"A\",\"Â\":\"A\",\"Ã\":\"A\",\"Ä\":\"A\",\"Å\":\"A\",\"à\":\"a\",\"á\":\"a\",\"â\":\"a\",\"ã\":\"a\",\"ä\":\"a\",\"å\":\"a\",\"Ç\":\"C\",\"ç\":\"c\",\"Ð\":\"D\",\"ð\":\"d\",\"È\":\"E\",\"É\":\"E\",\"Ê\":\"E\",\"Ë\":\"E\",\"è\":\"e\",\"é\":\"e\",\"ê\":\"e\",\"ë\":\"e\",\"Ì\":\"I\",\"Í\":\"I\",\"Î\":\"I\",\"Ï\":\"I\",\"ì\":\"i\",\"í\":\"i\",\"î\":\"i\",\"ï\":\"i\",\"Ñ\":\"N\",\"ñ\":\"n\",\"Ò\":\"O\",\"Ó\":\"O\",\"Ô\":\"O\",\"Õ\":\"O\",\"Ö\":\"O\",\"Ø\":\"O\",\"ò\":\"o\",\"ó\":\"o\",\"ô\":\"o\",\"õ\":\"o\",\"ö\":\"o\",\"ø\":\"o\",\"Ù\":\"U\",\"Ú\":\"U\",\"Û\":\"U\",\"Ü\":\"U\",\"ù\":\"u\",\"ú\":\"u\",\"û\":\"u\",\"ü\":\"u\",\"Ý\":\"Y\",\"ý\":\"y\",\"ÿ\":\"y\",\"Æ\":\"Ae\",\"æ\":\"ae\",\"Þ\":\"Th\",\"þ\":\"th\",\"ß\":\"ss\",\"Ā\":\"A\",\"Ă\":\"A\",\"Ą\":\"A\",\"ā\":\"a\",\"ă\":\"a\",\"ą\":\"a\",\"Ć\":\"C\",\"Ĉ\":\"C\",\"Ċ\":\"C\",\"Č\":\"C\",\"ć\":\"c\",\"ĉ\":\"c\",\"ċ\":\"c\",\"č\":\"c\",\"Ď\":\"D\",\"Đ\":\"D\",\"ď\":\"d\",\"đ\":\"d\",\"Ē\":\"E\",\"Ĕ\":\"E\",\"Ė\":\"E\",\"Ę\":\"E\",\"Ě\":\"E\",\"ē\":\"e\",\"ĕ\":\"e\",\"ė\":\"e\",\"ę\":\"e\",\"ě\":\"e\",\"Ĝ\":\"G\",\"Ğ\":\"G\",\"Ġ\":\"G\",\"Ģ\":\"G\",\"ĝ\":\"g\",\"ğ\":\"g\",\"ġ\":\"g\",\"ģ\":\"g\",\"Ĥ\":\"H\",\"Ħ\":\"H\",\"ĥ\":\"h\",\"ħ\":\"h\",\"Ĩ\":\"I\",\"Ī\":\"I\",\"Ĭ\":\"I\",\"Į\":\"I\",\"İ\":\"I\",\"ĩ\":\"i\",\"ī\":\"i\",\"ĭ\":\"i\",\"į\":\"i\",\"ı\":\"i\",\"Ĵ\":\"J\",\"ĵ\":\"j\",\"Ķ\":\"K\",\"ķ\":\"k\",\"ĸ\":\"k\",\"Ĺ\":\"L\",\"Ļ\":\"L\",\"Ľ\":\"L\",\"Ŀ\":\"L\",\"Ł\":\"L\",\"ĺ\":\"l\",\"ļ\":\"l\",\"ľ\":\"l\",\"ŀ\":\"l\",\"ł\":\"l\",\"Ń\":\"N\",\"Ņ\":\"N\",\"Ň\":\"N\",\"Ŋ\":\"N\",\"ń\":\"n\",\"ņ\":\"n\",\"ň\":\"n\",\"ŋ\":\"n\",\"Ō\":\"O\",\"Ŏ\":\"O\",\"Ő\":\"O\",\"ō\":\"o\",\"ŏ\":\"o\",\"ő\":\"o\",\"Ŕ\":\"R\",\"Ŗ\":\"R\",\"Ř\":\"R\",\"ŕ\":\"r\",\"ŗ\":\"r\",\"ř\":\"r\",\"Ś\":\"S\",\"Ŝ\":\"S\",\"Ş\":\"S\",\"Š\":\"S\",\"ś\":\"s\",\"ŝ\":\"s\",\"ş\":\"s\",\"š\":\"s\",\"Ţ\":\"T\",\"Ť\":\"T\",\"Ŧ\":\"T\",\"ţ\":\"t\",\"ť\":\"t\",\"ŧ\":\"t\",\"Ũ\":\"U\",\"Ū\":\"U\",\"Ŭ\":\"U\",\"Ů\":\"U\",\"Ű\":\"U\",\"Ų\":\"U\",\"ũ\":\"u\",\"ū\":\"u\",\"ŭ\":\"u\",\"ů\":\"u\",\"ű\":\"u\",\"ų\":\"u\",\"Ŵ\":\"W\",\"ŵ\":\"w\",\"Ŷ\":\"Y\",\"ŷ\":\"y\",\"Ÿ\":\"Y\",\"Ź\":\"Z\",\"Ż\":\"Z\",\"Ž\":\"Z\",\"ź\":\"z\",\"ż\":\"z\",\"ž\":\"z\",\"Ĳ\":\"IJ\",\"ĳ\":\"ij\",\"Œ\":\"Oe\",\"œ\":\"oe\",\"ŉ\":\"'n\",ſ:\"s\"}),Bt=Tt({\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"});function At(e){return\"\\\\\"+ze[e]}function _t(e){return Pe.test(e)}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function Wt(e,t){return function(n){return e(t(n))}}function zt(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var s=e[n];s!==t&&s!==o||(e[n]=o,a[r++]=n)}return a}function Ft(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function qt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function Ut(e){return _t(e)?function(e){var t=Ie.lastIndex=0;for(;Ie.test(e);)++t;return t}(e):bt(e)}function Vt(e){return _t(e)?function(e){return e.match(Ie)||[]}(e):function(e){return e.split(\"\")}(e)}var Qt=Tt({\"&amp;\":\"&\",\"&lt;\":\"<\",\"&gt;\":\">\",\"&quot;\":'\"',\"&#39;\":\"'\"});var Gt=function e(t){var n,i=(t=null==t?Qe:Gt.defaults(Qe.Object(),t,Gt.pick(Qe,Ae))).Array,he=t.Date,pe=t.Error,ue=t.Function,me=t.Math,fe=t.Object,ge=t.RegExp,be=t.String,ve=t.TypeError,ye=i.prototype,Ce=ue.prototype,Oe=fe.prototype,Se=t[\"__core-js_shared__\"],ke=Ce.toString,we=Oe.hasOwnProperty,Te=0,Ee=(n=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+n:\"\",je=Oe.toString,xe=ke.call(fe),Ne=Qe._,Le=ge(\"^\"+ke.call(we).replace(V,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),Ie=Xe?t.Buffer:void 0,Pe=t.Symbol,ze=t.Uint8Array,Ue=Ie?Ie.allocUnsafe:void 0,Ve=Wt(fe.getPrototypeOf,fe),Ge=fe.create,Ke=Oe.propertyIsEnumerable,Ye=ye.splice,Je=Pe?Pe.isConcatSpreadable:void 0,bt=Pe?Pe.iterator:void 0,Tt=Pe?Pe.toStringTag:void 0,Kt=function(){try{var e=Zr(fe,\"defineProperty\");return e({},\"\",{}),e}catch(t){}}(),Xt=t.clearTimeout!==Qe.clearTimeout&&t.clearTimeout,Yt=he&&he.now!==Qe.Date.now&&he.now,Jt=t.setTimeout!==Qe.setTimeout&&t.setTimeout,$t=me.ceil,Zt=me.floor,en=fe.getOwnPropertySymbols,tn=Ie?Ie.isBuffer:void 0,nn=t.isFinite,rn=ye.join,on=Wt(fe.keys,fe),an=me.max,sn=me.min,ln=he.now,cn=t.parseInt,dn=me.random,hn=ye.reverse,pn=Zr(t,\"DataView\"),un=Zr(t,\"Map\"),mn=Zr(t,\"Promise\"),fn=Zr(t,\"Set\"),gn=Zr(t,\"WeakMap\"),bn=Zr(fe,\"create\"),vn=gn&&new gn,yn={},Cn=jo(pn),On=jo(un),Sn=jo(mn),kn=jo(fn),wn=jo(gn),Tn=Pe?Pe.prototype:void 0,En=Tn?Tn.valueOf:void 0,jn=Tn?Tn.toString:void 0;function xn(e){if(Ua(e)&&!Ia(e)&&!(e instanceof Mn)){if(e instanceof Dn)return e;if(we.call(e,\"__wrapped__\"))return xo(e)}return new Dn(e)}var Nn=function(){function e(){}return function(t){if(!qa(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Ln(){}function Dn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function Mn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function In(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Pn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Bn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Pn;++t<n;)this.add(e[t])}function An(e){var t=this.__data__=new Rn(e);this.size=t.size}function _n(e,t){var n=Ia(e),i=!n&&Ma(e),r=!n&&!i&&Aa(e),o=!n&&!i&&!r&&$a(e),a=n||i||r||o,s=a?xt(e.length,be):[],l=s.length;for(var c in e)!t&&!we.call(e,c)||a&&(\"length\"==c||r&&(\"offset\"==c||\"parent\"==c)||o&&(\"buffer\"==c||\"byteLength\"==c||\"byteOffset\"==c)||ao(c,l))||s.push(c);return s}function Hn(e){var t=e.length;return t?e[Bi(0,t-1)]:void 0}function Wn(e,t){return wo(br(e),Xn(t,0,e.length))}function zn(e){return wo(br(e))}function Fn(e,t,n){(void 0!==n&&!Na(e[t],n)||void 0===n&&!(t in e))&&Gn(e,t,n)}function qn(e,t,n){var i=e[t];we.call(e,t)&&Na(i,n)&&(void 0!==n||t in e)||Gn(e,t,n)}function Un(e,t){for(var n=e.length;n--;)if(Na(e[n][0],t))return n;return-1}function Vn(e,t,n,i){return ei(e,(function(e,r,o){t(i,e,n(e),o)})),i}function Qn(e,t){return e&&vr(t,Cs(t),e)}function Gn(e,t,n){\"__proto__\"==t&&Kt?Kt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Kn(e,t){for(var n=-1,r=t.length,o=i(r),a=null==e;++n<r;)o[n]=a?void 0:fs(e,t[n]);return o}function Xn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Yn(e,t,n,i,r,o){var a,l=1&t,h=2&t,O=4&t;if(n&&(a=r?n(e,i,r,o):n(e)),void 0!==a)return a;if(!qa(e))return e;var M=Ia(e);if(M){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&\"string\"==typeof e[0]&&we.call(e,\"index\")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return br(e,a)}else{var I=no(e),R=I==p||I==u;if(Aa(e))return hr(e,l);if(I==g||I==s||R&&!r){if(a=h||R?{}:ro(e),!l)return h?function(e,t){return vr(e,to(e),t)}(e,function(e,t){return e&&vr(t,Os(t),e)}(a,e)):function(e,t){return vr(e,eo(e),t)}(e,Qn(a,e))}else{if(!We[I])return r?e:{};a=function(e,t,n){var i=e.constructor;switch(t){case S:return pr(e);case c:case d:return new i(+e);case k:return function(e,t){var n=t?pr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case w:case T:case E:case j:case x:case N:case\"[object Uint8ClampedArray]\":case L:case D:return ur(e,n);case m:return new i;case f:case y:return new i(e);case b:return function(e){var t=new e.constructor(e.source,ne.exec(e));return t.lastIndex=e.lastIndex,t}(e);case v:return new i;case C:return r=e,En?fe(En.call(r)):{}}var r}(e,I,l)}}o||(o=new An);var P=o.get(e);if(P)return P;o.set(e,a),Xa(e)?e.forEach((function(i){a.add(Yn(i,t,n,i,e,o))})):Va(e)&&e.forEach((function(i,r){a.set(r,Yn(i,t,n,r,e,o))}));var B=M?void 0:(O?h?Qr:Vr:h?Os:Cs)(e);return at(B||e,(function(i,r){B&&(i=e[r=i]),qn(a,r,Yn(i,t,n,r,e,o))})),a}function Jn(e,t,n){var i=n.length;if(null==e)return!i;for(e=fe(e);i--;){var r=n[i],o=t[r],a=e[r];if(void 0===a&&!(r in e)||!o(a))return!1}return!0}function $n(e,t,n){if(\"function\"!=typeof e)throw new ve(r);return Co((function(){e.apply(void 0,n)}),t)}function Zn(e,t,n,i){var r=-1,o=dt,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=pt(t,Nt(n))),i?(o=ht,a=!1):t.length>=200&&(o=Dt,a=!1,t=new Bn(t));e:for(;++r<s;){var d=e[r],h=null==n?d:n(d);if(d=i||0!==d?d:0,a&&h==h){for(var p=c;p--;)if(t[p]===h)continue e;l.push(d)}else o(t,h,i)||l.push(d)}return l}xn.templateSettings={escape:H,evaluate:W,interpolate:z,variable:\"\",imports:{_:xn}},xn.prototype=Ln.prototype,xn.prototype.constructor=xn,Dn.prototype=Nn(Ln.prototype),Dn.prototype.constructor=Dn,Mn.prototype=Nn(Ln.prototype),Mn.prototype.constructor=Mn,In.prototype.clear=function(){this.__data__=bn?bn(null):{},this.size=0},In.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},In.prototype.get=function(e){var t=this.__data__;if(bn){var n=t[e];return\"__lodash_hash_undefined__\"===n?void 0:n}return we.call(t,e)?t[e]:void 0},In.prototype.has=function(e){var t=this.__data__;return bn?void 0!==t[e]:we.call(t,e)},In.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=bn&&void 0===t?\"__lodash_hash_undefined__\":t,this},Rn.prototype.clear=function(){this.__data__=[],this.size=0},Rn.prototype.delete=function(e){var t=this.__data__,n=Un(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Rn.prototype.get=function(e){var t=this.__data__,n=Un(t,e);return n<0?void 0:t[n][1]},Rn.prototype.has=function(e){return Un(this.__data__,e)>-1},Rn.prototype.set=function(e,t){var n=this.__data__,i=Un(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Pn.prototype.clear=function(){this.size=0,this.__data__={hash:new In,map:new(un||Rn),string:new In}},Pn.prototype.delete=function(e){var t=Jr(this,e).delete(e);return this.size-=t?1:0,t},Pn.prototype.get=function(e){return Jr(this,e).get(e)},Pn.prototype.has=function(e){return Jr(this,e).has(e)},Pn.prototype.set=function(e,t){var n=Jr(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Bn.prototype.add=Bn.prototype.push=function(e){return this.__data__.set(e,\"__lodash_hash_undefined__\"),this},Bn.prototype.has=function(e){return this.__data__.has(e)},An.prototype.clear=function(){this.__data__=new Rn,this.size=0},An.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},An.prototype.get=function(e){return this.__data__.get(e)},An.prototype.has=function(e){return this.__data__.has(e)},An.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Rn){var i=n.__data__;if(!un||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Pn(i)}return n.set(e,t),this.size=n.size,this};var ei=Or(li),ti=Or(ci,!0);function ni(e,t){var n=!0;return ei(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function ii(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],a=t(o);if(null!=a&&(void 0===s?a==a&&!Ja(a):n(a,s)))var s=a,l=o}return l}function ri(e,t){var n=[];return ei(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function oi(e,t,n,i,r){var o=-1,a=e.length;for(n||(n=oo),r||(r=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?oi(s,t-1,n,i,r):ut(r,s):i||(r[r.length]=s)}return r}var ai=Sr(),si=Sr(!0);function li(e,t){return e&&ai(e,t,Cs)}function ci(e,t){return e&&si(e,t,Cs)}function di(e,t){return ct(t,(function(t){return Wa(e[t])}))}function hi(e,t){for(var n=0,i=(t=sr(t,e)).length;null!=e&&n<i;)e=e[Eo(t[n++])];return n&&n==i?e:void 0}function pi(e,t,n){var i=t(e);return Ia(e)?i:ut(i,n(e))}function ui(e){return null==e?void 0===e?\"[object Undefined]\":\"[object Null]\":Tt&&Tt in fe(e)?function(e){var t=we.call(e,Tt),n=e[Tt];try{e[Tt]=void 0;var i=!0}catch(o){}var r=je.call(e);i&&(t?e[Tt]=n:delete e[Tt]);return r}(e):function(e){return je.call(e)}(e)}function mi(e,t){return e>t}function fi(e,t){return null!=e&&we.call(e,t)}function gi(e,t){return null!=e&&t in fe(e)}function bi(e,t,n){for(var r=n?ht:dt,o=e[0].length,a=e.length,s=a,l=i(a),c=1/0,d=[];s--;){var h=e[s];s&&t&&(h=pt(h,Nt(t))),c=sn(h.length,c),l[s]=!n&&(t||o>=120&&h.length>=120)?new Bn(s&&h):void 0}h=e[0];var p=-1,u=l[0];e:for(;++p<o&&d.length<c;){var m=h[p],f=t?t(m):m;if(m=n||0!==m?m:0,!(u?Dt(u,f):r(d,f,n))){for(s=a;--s;){var g=l[s];if(!(g?Dt(g,f):r(e[s],f,n)))continue e}u&&u.push(f),d.push(m)}}return d}function vi(e,t,n){var i=null==(e=go(e,t=sr(t,e)))?e:e[Eo(Ho(t))];return null==i?void 0:rt(i,e,n)}function yi(e){return Ua(e)&&ui(e)==s}function Ci(e,t,n,i,r){return e===t||(null==e||null==t||!Ua(e)&&!Ua(t)?e!=e&&t!=t:function(e,t,n,i,r,o){var a=Ia(e),p=Ia(t),u=a?l:no(e),O=p?l:no(t),w=(u=u==s?g:u)==g,T=(O=O==s?g:O)==g,E=u==O;if(E&&Aa(e)){if(!Aa(t))return!1;a=!0,w=!1}if(E&&!w)return o||(o=new An),a||$a(e)?qr(e,t,n,i,r,o):function(e,t,n,i,r,o,a){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!o(new ze(e),new ze(t)));case c:case d:case f:return Na(+e,+t);case h:return e.name==t.name&&e.message==t.message;case b:case y:return e==t+\"\";case m:var s=Ht;case v:var l=1&i;if(s||(s=Ft),e.size!=t.size&&!l)return!1;var p=a.get(e);if(p)return p==t;i|=2,a.set(e,t);var u=qr(s(e),s(t),i,r,o,a);return a.delete(e),u;case C:if(En)return En.call(e)==En.call(t)}return!1}(e,t,u,n,i,r,o);if(!(1&n)){var j=w&&we.call(e,\"__wrapped__\"),x=T&&we.call(t,\"__wrapped__\");if(j||x){var N=j?e.value():e,L=x?t.value():t;return o||(o=new An),r(N,L,n,i,o)}}if(!E)return!1;return o||(o=new An),function(e,t,n,i,r,o){var a=1&n,s=Vr(e),l=s.length,c=Vr(t).length;if(l!=c&&!a)return!1;var d=l;for(;d--;){var h=s[d];if(!(a?h in t:we.call(t,h)))return!1}var p=o.get(e),u=o.get(t);if(p&&u)return p==t&&u==e;var m=!0;o.set(e,t),o.set(t,e);var f=a;for(;++d<l;){h=s[d];var g=e[h],b=t[h];if(i)var v=a?i(b,g,h,t,e,o):i(g,b,h,e,t,o);if(!(void 0===v?g===b||r(g,b,n,i,o):v)){m=!1;break}f||(f=\"constructor\"==h)}if(m&&!f){var y=e.constructor,C=t.constructor;y==C||!(\"constructor\"in e)||!(\"constructor\"in t)||\"function\"==typeof y&&y instanceof y&&\"function\"==typeof C&&C instanceof C||(m=!1)}return o.delete(e),o.delete(t),m}(e,t,n,i,r,o)}(e,t,n,i,Ci,r))}function Oi(e,t,n,i){var r=n.length,o=r,a=!i;if(null==e)return!o;for(e=fe(e);r--;){var s=n[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){var l=(s=n[r])[0],c=e[l],d=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new An;if(i)var p=i(c,d,l,e,t,h);if(!(void 0===p?Ci(d,c,3,i,h):p))return!1}}return!0}function Si(e){return!(!qa(e)||(t=e,Ee&&Ee in t))&&(Wa(e)?Le:oe).test(jo(e));var t}function ki(e){return\"function\"==typeof e?e:null==e?Qs:\"object\"==typeof e?Ia(e)?Ni(e[0],e[1]):xi(e):tl(e)}function wi(e){if(!po(e))return on(e);var t=[];for(var n in fe(e))we.call(e,n)&&\"constructor\"!=n&&t.push(n);return t}function Ti(e){if(!qa(e))return function(e){var t=[];if(null!=e)for(var n in fe(e))t.push(n);return t}(e);var t=po(e),n=[];for(var i in e)(\"constructor\"!=i||!t&&we.call(e,i))&&n.push(i);return n}function Ei(e,t){return e<t}function ji(e,t){var n=-1,r=Pa(e)?i(e.length):[];return ei(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function xi(e){var t=$r(e);return 1==t.length&&t[0][2]?mo(t[0][0],t[0][1]):function(n){return n===e||Oi(n,e,t)}}function Ni(e,t){return lo(e)&&uo(t)?mo(Eo(e),t):function(n){var i=fs(n,e);return void 0===i&&i===t?gs(n,e):Ci(t,i,3)}}function Li(e,t,n,i,r){e!==t&&ai(t,(function(o,a){if(r||(r=new An),qa(o))!function(e,t,n,i,r,o,a){var s=vo(e,n),l=vo(t,n),c=a.get(l);if(c)return void Fn(e,n,c);var d=o?o(s,l,n+\"\",e,t,a):void 0,h=void 0===d;if(h){var p=Ia(l),u=!p&&Aa(l),m=!p&&!u&&$a(l);d=l,p||u||m?Ia(s)?d=s:Ba(s)?d=br(s):u?(h=!1,d=hr(l,!0)):m?(h=!1,d=ur(l,!0)):d=[]:Ga(l)||Ma(l)?(d=s,Ma(s)?d=as(s):qa(s)&&!Wa(s)||(d=ro(l))):h=!1}h&&(a.set(l,d),r(d,l,i,o,a),a.delete(l));Fn(e,n,d)}(e,t,a,n,Li,i,r);else{var s=i?i(vo(e,a),o,a+\"\",e,t,r):void 0;void 0===s&&(s=o),Fn(e,a,s)}}),Os)}function Di(e,t){var n=e.length;if(n)return ao(t+=t<0?n:0,n)?e[t]:void 0}function Mi(e,t,n){t=t.length?pt(t,(function(e){return Ia(e)?function(t){return hi(t,1===e.length?e[0]:e)}:e})):[Qs];var i=-1;return t=pt(t,Nt(Yr())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(ji(e,(function(e,n,r){return{criteria:pt(t,(function(t){return t(e)})),index:++i,value:e}})),(function(e,t){return function(e,t,n){var i=-1,r=e.criteria,o=t.criteria,a=r.length,s=n.length;for(;++i<a;){var l=mr(r[i],o[i]);if(l){if(i>=s)return l;var c=n[i];return l*(\"desc\"==c?-1:1)}}return e.index-t.index}(e,t,n)}))}function Ii(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var a=t[i],s=hi(e,a);n(s,a)&&zi(o,sr(a,e),s)}return o}function Ri(e,t,n,i){var r=i?Ot:Ct,o=-1,a=t.length,s=e;for(e===t&&(t=br(t)),n&&(s=pt(e,Nt(n)));++o<a;)for(var l=0,c=t[o],d=n?n(c):c;(l=r(s,d,l,i))>-1;)s!==e&&Ye.call(s,l,1),Ye.call(e,l,1);return e}function Pi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;ao(r)?Ye.call(e,r,1):Zi(e,r)}}return e}function Bi(e,t){return e+Zt(dn()*(t-e+1))}function Ai(e,t){var n=\"\";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Zt(t/2))&&(e+=e)}while(t);return n}function _i(e,t){return Oo(fo(e,t,Qs),e+\"\")}function Hi(e){return Hn(Ns(e))}function Wi(e,t){var n=Ns(e);return wo(n,Xn(t,0,n.length))}function zi(e,t,n,i){if(!qa(e))return e;for(var r=-1,o=(t=sr(t,e)).length,a=o-1,s=e;null!=s&&++r<o;){var l=Eo(t[r]),c=n;if(\"__proto__\"===l||\"constructor\"===l||\"prototype\"===l)return e;if(r!=a){var d=s[l];void 0===(c=i?i(d,l,s):void 0)&&(c=qa(d)?d:ao(t[r+1])?[]:{})}qn(s,l,c),s=s[l]}return e}var Fi=vn?function(e,t){return vn.set(e,t),e}:Qs,qi=Kt?function(e,t){return Kt(e,\"toString\",{configurable:!0,enumerable:!1,value:qs(t),writable:!0})}:Qs;function Ui(e){return wo(Ns(e))}function Vi(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=i(o);++r<o;)a[r]=e[r+t];return a}function Qi(e,t){var n;return ei(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function Gi(e,t,n){var i=0,r=null==e?i:e.length;if(\"number\"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=e[o];null!==a&&!Ja(a)&&(n?a<=t:a<t)?i=o+1:r=o}return r}return Ki(e,t,Qs,n)}function Ki(e,t,n,i){var r=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!=t,s=null===t,l=Ja(t),c=void 0===t;r<o;){var d=Zt((r+o)/2),h=n(e[d]),p=void 0!==h,u=null===h,m=h==h,f=Ja(h);if(a)var g=i||m;else g=c?m&&(i||p):s?m&&p&&(i||!u):l?m&&p&&!u&&(i||!f):!u&&!f&&(i?h<=t:h<t);g?r=d+1:o=d}return sn(o,4294967294)}function Xi(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n],s=t?t(a):a;if(!n||!Na(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function Yi(e){return\"number\"==typeof e?e:Ja(e)?NaN:+e}function Ji(e){if(\"string\"==typeof e)return e;if(Ia(e))return pt(e,Ji)+\"\";if(Ja(e))return jn?jn.call(e):\"\";var t=e+\"\";return\"0\"==t&&1/e==-1/0?\"-0\":t}function $i(e,t,n){var i=-1,r=dt,o=e.length,a=!0,s=[],l=s;if(n)a=!1,r=ht;else if(o>=200){var c=t?null:Ar(e);if(c)return Ft(c);a=!1,r=Dt,l=new Bn}else l=t?[]:s;e:for(;++i<o;){var d=e[i],h=t?t(d):d;if(d=n||0!==d?d:0,a&&h==h){for(var p=l.length;p--;)if(l[p]===h)continue e;t&&l.push(h),s.push(d)}else r(l,h,n)||(l!==s&&l.push(h),s.push(d))}return s}function Zi(e,t){return null==(e=go(e,t=sr(t,e)))||delete e[Eo(Ho(t))]}function er(e,t,n,i){return zi(e,t,n(hi(e,t)),i)}function tr(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?Vi(e,i?0:o,i?o+1:r):Vi(e,i?o+1:0,i?r:o)}function nr(e,t){var n=e;return n instanceof Mn&&(n=n.value()),mt(t,(function(e,t){return t.func.apply(t.thisArg,ut([e],t.args))}),n)}function ir(e,t,n){var r=e.length;if(r<2)return r?$i(e[0]):[];for(var o=-1,a=i(r);++o<r;)for(var s=e[o],l=-1;++l<r;)l!=o&&(a[o]=Zn(a[o]||s,e[l],t,n));return $i(oi(a,1),t,n)}function rr(e,t,n){for(var i=-1,r=e.length,o=t.length,a={};++i<r;){var s=i<o?t[i]:void 0;n(a,e[i],s)}return a}function or(e){return Ba(e)?e:[]}function ar(e){return\"function\"==typeof e?e:Qs}function sr(e,t){return Ia(e)?e:lo(e,t)?[e]:To(ss(e))}var lr=_i;function cr(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:Vi(e,t,n)}var dr=Xt||function(e){return Qe.clearTimeout(e)};function hr(e,t){if(t)return e.slice();var n=e.length,i=Ue?Ue(n):new e.constructor(n);return e.copy(i),i}function pr(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function ur(e,t){var n=t?pr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function mr(e,t){if(e!==t){var n=void 0!==e,i=null===e,r=e==e,o=Ja(e),a=void 0!==t,s=null===t,l=t==t,c=Ja(t);if(!s&&!c&&!o&&e>t||o&&a&&l&&!s&&!c||i&&a&&l||!n&&l||!r)return 1;if(!i&&!o&&!c&&e<t||c&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!l)return-1}return 0}function fr(e,t,n,r){for(var o=-1,a=e.length,s=n.length,l=-1,c=t.length,d=an(a-s,0),h=i(c+d),p=!r;++l<c;)h[l]=t[l];for(;++o<s;)(p||o<a)&&(h[n[o]]=e[o]);for(;d--;)h[l++]=e[o++];return h}function gr(e,t,n,r){for(var o=-1,a=e.length,s=-1,l=n.length,c=-1,d=t.length,h=an(a-l,0),p=i(h+d),u=!r;++o<h;)p[o]=e[o];for(var m=o;++c<d;)p[m+c]=t[c];for(;++s<l;)(u||o<a)&&(p[m+n[s]]=e[o++]);return p}function br(e,t){var n=-1,r=e.length;for(t||(t=i(r));++n<r;)t[n]=e[n];return t}function vr(e,t,n,i){var r=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=i?i(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),r?Gn(n,s,l):qn(n,s,l)}return n}function yr(e,t){return function(n,i){var r=Ia(n)?ot:Vn,o=t?t():{};return r(n,e,Yr(i,2),o)}}function Cr(e){return _i((function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(o=e.length>3&&\"function\"==typeof o?(r--,o):void 0,a&&so(n[0],n[1],a)&&(o=r<3?void 0:o,r=1),t=fe(t);++i<r;){var s=n[i];s&&e(t,s,i,o)}return t}))}function Or(e,t){return function(n,i){if(null==n)return n;if(!Pa(n))return e(n,i);for(var r=n.length,o=t?r:-1,a=fe(n);(t?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function Sr(e){return function(t,n,i){for(var r=-1,o=fe(t),a=i(t),s=a.length;s--;){var l=a[e?s:++r];if(!1===n(o[l],l,o))break}return t}}function kr(e){return function(t){var n=_t(t=ss(t))?Vt(t):void 0,i=n?n[0]:t.charAt(0),r=n?cr(n,1).join(\"\"):t.slice(1);return i[e]()+r}}function wr(e){return function(t){return mt(Ws(Ms(t).replace(De,\"\")),e,\"\")}}function Tr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Nn(e.prototype),i=e.apply(n,t);return qa(i)?i:n}}function Er(e){return function(t,n,i){var r=fe(t);if(!Pa(t)){var o=Yr(n,3);t=Cs(t),n=function(e){return o(r[e],e,r)}}var a=e(t,n,i);return a>-1?r[o?t[a]:a]:void 0}}function jr(e){return Ur((function(t){var n=t.length,i=n,o=Dn.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if(\"function\"!=typeof a)throw new ve(r);if(o&&!s&&\"wrapper\"==Kr(a))var s=new Dn([],!0)}for(i=s?i:n;++i<n;){var l=Kr(a=t[i]),c=\"wrapper\"==l?Gr(a):void 0;s=c&&co(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Kr(c[0])].apply(s,c[3]):1==a.length&&co(a)?s[l]():s.thru(a)}return function(){var e=arguments,i=e[0];if(s&&1==e.length&&Ia(i))return s.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}}))}function xr(e,t,n,r,o,a,s,l,c,d){var h=128&t,p=1&t,u=2&t,m=24&t,f=512&t,g=u?void 0:Tr(e);return function b(){for(var v=arguments.length,y=i(v),C=v;C--;)y[C]=arguments[C];if(m)var O=Xr(b),S=Rt(y,O);if(r&&(y=fr(y,r,o,m)),a&&(y=gr(y,a,s,m)),v-=S,m&&v<d){var k=zt(y,O);return Pr(e,t,xr,b.placeholder,n,y,k,l,c,d-v)}var w=p?n:this,T=u?w[e]:e;return v=y.length,l?y=bo(y,l):f&&v>1&&y.reverse(),h&&c<v&&(y.length=c),this&&this!==Qe&&this instanceof b&&(T=g||Tr(T)),T.apply(w,y)}}function Nr(e,t){return function(n,i){return function(e,t,n,i){return li(e,(function(e,r,o){t(i,n(e),r,o)})),i}(n,e,t(i),{})}}function Lr(e,t){return function(n,i){var r;if(void 0===n&&void 0===i)return t;if(void 0!==n&&(r=n),void 0!==i){if(void 0===r)return i;\"string\"==typeof n||\"string\"==typeof i?(n=Ji(n),i=Ji(i)):(n=Yi(n),i=Yi(i)),r=e(n,i)}return r}}function Dr(e){return Ur((function(t){return t=pt(t,Nt(Yr())),_i((function(n){var i=this;return e(t,(function(e){return rt(e,i,n)}))}))}))}function Mr(e,t){var n=(t=void 0===t?\" \":Ji(t)).length;if(n<2)return n?Ai(t,e):t;var i=Ai(t,$t(e/Ut(t)));return _t(t)?cr(Vt(i),0,e).join(\"\"):i.slice(0,e)}function Ir(e){return function(t,n,r){return r&&\"number\"!=typeof r&&so(t,n,r)&&(n=r=void 0),t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n,r){for(var o=-1,a=an($t((t-e)/(n||1)),0),s=i(a);a--;)s[r?a:++o]=e,e+=n;return s}(t,n,r=void 0===r?t<n?1:-1:ns(r),e)}}function Rr(e){return function(t,n){return\"string\"==typeof t&&\"string\"==typeof n||(t=os(t),n=os(n)),e(t,n)}}function Pr(e,t,n,i,r,o,a,s,l,c){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var h=[e,t,r,d?o:void 0,d?a:void 0,d?void 0:o,d?void 0:a,s,l,c],p=n.apply(void 0,h);return co(e)&&yo(p,h),p.placeholder=i,So(p,e,t)}function Br(e){var t=me[e];return function(e,n){if(e=os(e),(n=null==n?0:sn(is(n),292))&&nn(e)){var i=(ss(e)+\"e\").split(\"e\");return+((i=(ss(t(i[0]+\"e\"+(+i[1]+n)))+\"e\").split(\"e\"))[0]+\"e\"+(+i[1]-n))}return t(e)}}var Ar=fn&&1/Ft(new fn([,-0]))[1]==1/0?function(e){return new fn(e)}:Js;function _r(e){return function(t){var n=no(t);return n==m?Ht(t):n==v?qt(t):function(e,t){return pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Hr(e,t,n,a,s,l,c,d){var h=2&t;if(!h&&\"function\"!=typeof e)throw new ve(r);var p=a?a.length:0;if(p||(t&=-97,a=s=void 0),c=void 0===c?c:an(is(c),0),d=void 0===d?d:is(d),p-=s?s.length:0,64&t){var u=a,m=s;a=s=void 0}var f=h?void 0:Gr(e),g=[e,t,n,a,s,u,m,l,c,d];if(f&&function(e,t){var n=e[1],i=t[1],r=n|i,a=r<131,s=128==i&&8==n||128==i&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!a&&!s)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?fr(c,l,t[4]):l,e[4]=c?zt(e[3],o):t[4]}(l=t[5])&&(c=e[5],e[5]=c?gr(c,l,t[6]):l,e[6]=c?zt(e[5],o):t[6]);(l=t[7])&&(e[7]=l);128&i&&(e[8]=null==e[8]?t[8]:sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(g,f),e=g[0],t=g[1],n=g[2],a=g[3],s=g[4],!(d=g[9]=void 0===g[9]?h?0:e.length:an(g[9]-p,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var r=Tr(e);return function o(){for(var a=arguments.length,s=i(a),l=a,c=Xr(o);l--;)s[l]=arguments[l];var d=a<3&&s[0]!==c&&s[a-1]!==c?[]:zt(s,c);if((a-=d.length)<n)return Pr(e,t,xr,o.placeholder,void 0,s,d,void 0,void 0,n-a);var h=this&&this!==Qe&&this instanceof o?r:e;return rt(h,this,s)}}(e,t,d):32!=t&&33!=t||s.length?xr.apply(void 0,g):function(e,t,n,r){var o=1&t,a=Tr(e);return function t(){for(var s=-1,l=arguments.length,c=-1,d=r.length,h=i(d+l),p=this&&this!==Qe&&this instanceof t?a:e;++c<d;)h[c]=r[c];for(;l--;)h[c++]=arguments[++s];return rt(p,o?n:this,h)}}(e,t,n,a);else var b=function(e,t,n){var i=1&t,r=Tr(e);return function t(){var o=this&&this!==Qe&&this instanceof t?r:e;return o.apply(i?n:this,arguments)}}(e,t,n);return So((f?Fi:yo)(b,g),e,t)}function Wr(e,t,n,i){return void 0===e||Na(e,Oe[n])&&!we.call(i,n)?t:e}function zr(e,t,n,i,r,o){return qa(e)&&qa(t)&&(o.set(t,e),Li(e,t,void 0,zr,o),o.delete(t)),e}function Fr(e){return Ga(e)?void 0:e}function qr(e,t,n,i,r,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),d=o.get(t);if(c&&d)return c==t&&d==e;var h=-1,p=!0,u=2&n?new Bn:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var m=e[h],f=t[h];if(i)var g=a?i(f,m,h,t,e,o):i(m,f,h,e,t,o);if(void 0!==g){if(g)continue;p=!1;break}if(u){if(!gt(t,(function(e,t){if(!Dt(u,t)&&(m===e||r(m,e,n,i,o)))return u.push(t)}))){p=!1;break}}else if(m!==f&&!r(m,f,n,i,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function Ur(e){return Oo(fo(e,void 0,Ro),e+\"\")}function Vr(e){return pi(e,Cs,eo)}function Qr(e){return pi(e,Os,to)}var Gr=vn?function(e){return vn.get(e)}:Js;function Kr(e){for(var t=e.name+\"\",n=yn[t],i=we.call(yn,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function Xr(e){return(we.call(xn,\"placeholder\")?xn:e).placeholder}function Yr(){var e=xn.iteratee||Gs;return e=e===Gs?ki:e,arguments.length?e(arguments[0],arguments[1]):e}function Jr(e,t){var n,i,r=e.__data__;return(\"string\"==(i=typeof(n=t))||\"number\"==i||\"symbol\"==i||\"boolean\"==i?\"__proto__\"!==n:null===n)?r[\"string\"==typeof t?\"string\":\"hash\"]:r.map}function $r(e){for(var t=Cs(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,uo(r)]}return t}function Zr(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Si(n)?n:void 0}var eo=en?function(e){return null==e?[]:(e=fe(e),ct(en(e),(function(t){return Ke.call(e,t)})))}:rl,to=en?function(e){for(var t=[];e;)ut(t,eo(e)),e=Ve(e);return t}:rl,no=ui;function io(e,t,n){for(var i=-1,r=(t=sr(t,e)).length,o=!1;++i<r;){var a=Eo(t[i]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&Fa(r)&&ao(a,r)&&(Ia(e)||Ma(e))}function ro(e){return\"function\"!=typeof e.constructor||po(e)?{}:Nn(Ve(e))}function oo(e){return Ia(e)||Ma(e)||!!(Je&&e&&e[Je])}function ao(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&(\"number\"==n||\"symbol\"!=n&&se.test(e))&&e>-1&&e%1==0&&e<t}function so(e,t,n){if(!qa(n))return!1;var i=typeof t;return!!(\"number\"==i?Pa(n)&&ao(t,n.length):\"string\"==i&&t in n)&&Na(n[t],e)}function lo(e,t){if(Ia(e))return!1;var n=typeof e;return!(\"number\"!=n&&\"symbol\"!=n&&\"boolean\"!=n&&null!=e&&!Ja(e))||(q.test(e)||!F.test(e)||null!=t&&e in fe(t))}function co(e){var t=Kr(e),n=xn[t];if(\"function\"!=typeof n||!(t in Mn.prototype))return!1;if(e===n)return!0;var i=Gr(n);return!!i&&e===i[0]}(pn&&no(new pn(new ArrayBuffer(1)))!=k||un&&no(new un)!=m||mn&&\"[object Promise]\"!=no(mn.resolve())||fn&&no(new fn)!=v||gn&&no(new gn)!=O)&&(no=function(e){var t=ui(e),n=t==g?e.constructor:void 0,i=n?jo(n):\"\";if(i)switch(i){case Cn:return k;case On:return m;case Sn:return\"[object Promise]\";case kn:return v;case wn:return O}return t});var ho=Se?Wa:ol;function po(e){var t=e&&e.constructor;return e===(\"function\"==typeof t&&t.prototype||Oe)}function uo(e){return e==e&&!qa(e)}function mo(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in fe(n)))}}function fo(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=an(r.length-t,0),s=i(a);++o<a;)s[o]=r[t+o];o=-1;for(var l=i(t+1);++o<t;)l[o]=r[o];return l[t]=n(s),rt(e,this,l)}}function go(e,t){return t.length<2?e:hi(e,Vi(t,0,-1))}function bo(e,t){for(var n=e.length,i=sn(t.length,n),r=br(e);i--;){var o=t[i];e[i]=ao(o,n)?r[o]:void 0}return e}function vo(e,t){if((\"constructor\"!==t||\"function\"!=typeof e[t])&&\"__proto__\"!=t)return e[t]}var yo=ko(Fi),Co=Jt||function(e,t){return Qe.setTimeout(e,t)},Oo=ko(qi);function So(e,t,n){var i=t+\"\";return Oo(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?\"& \":\"\")+t[i],t=t.join(n>2?\", \":\" \"),e.replace(Y,\"{\\n/* [wrapped with \"+t+\"] */\\n\")}(i,function(e,t){return at(a,(function(n){var i=\"_.\"+n[0];t&n[1]&&!dt(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(J);return t?t[1].split($):[]}(i),n)))}function ko(e){var t=0,n=0;return function(){var i=ln(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function wo(e,t){var n=-1,i=e.length,r=i-1;for(t=void 0===t?i:t;++n<t;){var o=Bi(n,r),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var To=function(e){var t=ka(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(\"\"),e.replace(U,(function(e,n,i,r){t.push(i?r.replace(ee,\"$1\"):n||e)})),t}));function Eo(e){if(\"string\"==typeof e||Ja(e))return e;var t=e+\"\";return\"0\"==t&&1/e==-1/0?\"-0\":t}function jo(e){if(null!=e){try{return ke.call(e)}catch(t){}try{return e+\"\"}catch(t){}}return\"\"}function xo(e){if(e instanceof Mn)return e.clone();var t=new Dn(e.__wrapped__,e.__chain__);return t.__actions__=br(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var No=_i((function(e,t){return Ba(e)?Zn(e,oi(t,1,Ba,!0)):[]})),Lo=_i((function(e,t){var n=Ho(t);return Ba(n)&&(n=void 0),Ba(e)?Zn(e,oi(t,1,Ba,!0),Yr(n,2)):[]})),Do=_i((function(e,t){var n=Ho(t);return Ba(n)&&(n=void 0),Ba(e)?Zn(e,oi(t,1,Ba,!0),void 0,n):[]}));function Mo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:is(n);return r<0&&(r=an(i+r,0)),yt(e,Yr(t,3),r)}function Io(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return void 0!==n&&(r=is(n),r=n<0?an(i+r,0):sn(r,i-1)),yt(e,Yr(t,3),r,!0)}function Ro(e){return(null==e?0:e.length)?oi(e,1):[]}function Po(e){return e&&e.length?e[0]:void 0}var Bo=_i((function(e){var t=pt(e,or);return t.length&&t[0]===e[0]?bi(t):[]})),Ao=_i((function(e){var t=Ho(e),n=pt(e,or);return t===Ho(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?bi(n,Yr(t,2)):[]})),_o=_i((function(e){var t=Ho(e),n=pt(e,or);return(t=\"function\"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?bi(n,void 0,t):[]}));function Ho(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Wo=_i(zo);function zo(e,t){return e&&e.length&&t&&t.length?Ri(e,t):e}var Fo=Ur((function(e,t){var n=null==e?0:e.length,i=Kn(e,t);return Pi(e,pt(t,(function(e){return ao(e,n)?+e:e})).sort(mr)),i}));function qo(e){return null==e?e:hn.call(e)}var Uo=_i((function(e){return $i(oi(e,1,Ba,!0))})),Vo=_i((function(e){var t=Ho(e);return Ba(t)&&(t=void 0),$i(oi(e,1,Ba,!0),Yr(t,2))})),Qo=_i((function(e){var t=Ho(e);return t=\"function\"==typeof t?t:void 0,$i(oi(e,1,Ba,!0),void 0,t)}));function Go(e){if(!e||!e.length)return[];var t=0;return e=ct(e,(function(e){if(Ba(e))return t=an(e.length,t),!0})),xt(t,(function(t){return pt(e,wt(t))}))}function Ko(e,t){if(!e||!e.length)return[];var n=Go(e);return null==t?n:pt(n,(function(e){return rt(t,void 0,e)}))}var Xo=_i((function(e,t){return Ba(e)?Zn(e,t):[]})),Yo=_i((function(e){return ir(ct(e,Ba))})),Jo=_i((function(e){var t=Ho(e);return Ba(t)&&(t=void 0),ir(ct(e,Ba),Yr(t,2))})),$o=_i((function(e){var t=Ho(e);return t=\"function\"==typeof t?t:void 0,ir(ct(e,Ba),void 0,t)})),Zo=_i(Go);var ea=_i((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=\"function\"==typeof n?(e.pop(),n):void 0,Ko(e,n)}));function ta(e){var t=xn(e);return t.__chain__=!0,t}function na(e,t){return t(e)}var ia=Ur((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return Kn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Mn&&ao(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:na,args:[r],thisArg:void 0}),new Dn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(r)}));var ra=yr((function(e,t,n){we.call(e,n)?++e[n]:Gn(e,n,1)}));var oa=Er(Mo),aa=Er(Io);function sa(e,t){return(Ia(e)?at:ei)(e,Yr(t,3))}function la(e,t){return(Ia(e)?st:ti)(e,Yr(t,3))}var ca=yr((function(e,t,n){we.call(e,n)?e[n].push(t):Gn(e,n,[t])}));var da=_i((function(e,t,n){var r=-1,o=\"function\"==typeof t,a=Pa(e)?i(e.length):[];return ei(e,(function(e){a[++r]=o?rt(t,e,n):vi(e,t,n)})),a})),ha=yr((function(e,t,n){Gn(e,n,t)}));function pa(e,t){return(Ia(e)?pt:ji)(e,Yr(t,3))}var ua=yr((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var ma=_i((function(e,t){if(null==e)return[];var n=t.length;return n>1&&so(e,t[0],t[1])?t=[]:n>2&&so(t[0],t[1],t[2])&&(t=[t[0]]),Mi(e,oi(t,1),[])})),fa=Yt||function(){return Qe.Date.now()};function ga(e,t,n){return t=n?void 0:t,Hr(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ba(e,t){var n;if(\"function\"!=typeof t)throw new ve(r);return e=is(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var va=_i((function(e,t,n){var i=1;if(n.length){var r=zt(n,Xr(va));i|=32}return Hr(e,i,t,n,r)})),ya=_i((function(e,t,n){var i=3;if(n.length){var r=zt(n,Xr(ya));i|=32}return Hr(t,i,e,n,r)}));function Ca(e,t,n){var i,o,a,s,l,c,d=0,h=!1,p=!1,u=!0;if(\"function\"!=typeof e)throw new ve(r);function m(t){var n=i,r=o;return i=o=void 0,d=t,s=e.apply(r,n)}function f(e){return d=e,l=Co(b,t),h?m(e):s}function g(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-d>=a}function b(){var e=fa();if(g(e))return v(e);l=Co(b,function(e){var n=t-(e-c);return p?sn(n,a-(e-d)):n}(e))}function v(e){return l=void 0,u&&i?m(e):(i=o=void 0,s)}function y(){var e=fa(),n=g(e);if(i=arguments,o=this,c=e,n){if(void 0===l)return f(c);if(p)return dr(l),l=Co(b,t),m(c)}return void 0===l&&(l=Co(b,t)),s}return t=os(t)||0,qa(n)&&(h=!!n.leading,a=(p=\"maxWait\"in n)?an(os(n.maxWait)||0,t):a,u=\"trailing\"in n?!!n.trailing:u),y.cancel=function(){void 0!==l&&dr(l),d=0,i=c=o=l=void 0},y.flush=function(){return void 0===l?s:v(fa())},y}var Oa=_i((function(e,t){return $n(e,1,t)})),Sa=_i((function(e,t,n){return $n(e,os(t)||0,n)}));function ka(e,t){if(\"function\"!=typeof e||null!=t&&\"function\"!=typeof t)throw new ve(r);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(ka.Cache||Pn),n}function wa(e){if(\"function\"!=typeof e)throw new ve(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ka.Cache=Pn;var Ta=lr((function(e,t){var n=(t=1==t.length&&Ia(t[0])?pt(t[0],Nt(Yr())):pt(oi(t,1),Nt(Yr()))).length;return _i((function(i){for(var r=-1,o=sn(i.length,n);++r<o;)i[r]=t[r].call(this,i[r]);return rt(e,this,i)}))})),Ea=_i((function(e,t){return Hr(e,32,void 0,t,zt(t,Xr(Ea)))})),ja=_i((function(e,t){return Hr(e,64,void 0,t,zt(t,Xr(ja)))})),xa=Ur((function(e,t){return Hr(e,256,void 0,void 0,void 0,t)}));function Na(e,t){return e===t||e!=e&&t!=t}var La=Rr(mi),Da=Rr((function(e,t){return e>=t})),Ma=yi(function(){return arguments}())?yi:function(e){return Ua(e)&&we.call(e,\"callee\")&&!Ke.call(e,\"callee\")},Ia=i.isArray,Ra=$e?Nt($e):function(e){return Ua(e)&&ui(e)==S};function Pa(e){return null!=e&&Fa(e.length)&&!Wa(e)}function Ba(e){return Ua(e)&&Pa(e)}var Aa=tn||ol,_a=Ze?Nt(Ze):function(e){return Ua(e)&&ui(e)==d};function Ha(e){if(!Ua(e))return!1;var t=ui(e);return t==h||\"[object DOMException]\"==t||\"string\"==typeof e.message&&\"string\"==typeof e.name&&!Ga(e)}function Wa(e){if(!qa(e))return!1;var t=ui(e);return t==p||t==u||\"[object AsyncFunction]\"==t||\"[object Proxy]\"==t}function za(e){return\"number\"==typeof e&&e==is(e)}function Fa(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function qa(e){var t=typeof e;return null!=e&&(\"object\"==t||\"function\"==t)}function Ua(e){return null!=e&&\"object\"==typeof e}var Va=et?Nt(et):function(e){return Ua(e)&&no(e)==m};function Qa(e){return\"number\"==typeof e||Ua(e)&&ui(e)==f}function Ga(e){if(!Ua(e)||ui(e)!=g)return!1;var t=Ve(e);if(null===t)return!0;var n=we.call(t,\"constructor\")&&t.constructor;return\"function\"==typeof n&&n instanceof n&&ke.call(n)==xe}var Ka=tt?Nt(tt):function(e){return Ua(e)&&ui(e)==b};var Xa=nt?Nt(nt):function(e){return Ua(e)&&no(e)==v};function Ya(e){return\"string\"==typeof e||!Ia(e)&&Ua(e)&&ui(e)==y}function Ja(e){return\"symbol\"==typeof e||Ua(e)&&ui(e)==C}var $a=it?Nt(it):function(e){return Ua(e)&&Fa(e.length)&&!!He[ui(e)]};var Za=Rr(Ei),es=Rr((function(e,t){return e<=t}));function ts(e){if(!e)return[];if(Pa(e))return Ya(e)?Vt(e):br(e);if(bt&&e[bt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[bt]());var t=no(e);return(t==m?Ht:t==v?Ft:Ns)(e)}function ns(e){return e?(e=os(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function is(e){var t=ns(e),n=t%1;return t==t?n?t-n:t:0}function rs(e){return e?Xn(is(e),0,4294967295):0}function os(e){if(\"number\"==typeof e)return e;if(Ja(e))return NaN;if(qa(e)){var t=\"function\"==typeof e.valueOf?e.valueOf():e;e=qa(t)?t+\"\":t}if(\"string\"!=typeof e)return 0===e?e:+e;e=e.replace(G,\"\");var n=re.test(e);return n||ae.test(e)?qe(e.slice(2),n?2:8):ie.test(e)?NaN:+e}function as(e){return vr(e,Os(e))}function ss(e){return null==e?\"\":Ji(e)}var ls=Cr((function(e,t){if(po(t)||Pa(t))vr(t,Cs(t),e);else for(var n in t)we.call(t,n)&&qn(e,n,t[n])})),cs=Cr((function(e,t){vr(t,Os(t),e)})),ds=Cr((function(e,t,n,i){vr(t,Os(t),e,i)})),hs=Cr((function(e,t,n,i){vr(t,Cs(t),e,i)})),ps=Ur(Kn);var us=_i((function(e,t){e=fe(e);var n=-1,i=t.length,r=i>2?t[2]:void 0;for(r&&so(t[0],t[1],r)&&(i=1);++n<i;)for(var o=t[n],a=Os(o),s=-1,l=a.length;++s<l;){var c=a[s],d=e[c];(void 0===d||Na(d,Oe[c])&&!we.call(e,c))&&(e[c]=o[c])}return e})),ms=_i((function(e){return e.push(void 0,zr),rt(ks,void 0,e)}));function fs(e,t,n){var i=null==e?void 0:hi(e,t);return void 0===i?n:i}function gs(e,t){return null!=e&&io(e,t,gi)}var bs=Nr((function(e,t,n){null!=t&&\"function\"!=typeof t.toString&&(t=je.call(t)),e[t]=n}),qs(Qs)),vs=Nr((function(e,t,n){null!=t&&\"function\"!=typeof t.toString&&(t=je.call(t)),we.call(e,t)?e[t].push(n):e[t]=[n]}),Yr),ys=_i(vi);function Cs(e){return Pa(e)?_n(e):wi(e)}function Os(e){return Pa(e)?_n(e,!0):Ti(e)}var Ss=Cr((function(e,t,n){Li(e,t,n)})),ks=Cr((function(e,t,n,i){Li(e,t,n,i)})),ws=Ur((function(e,t){var n={};if(null==e)return n;var i=!1;t=pt(t,(function(t){return t=sr(t,e),i||(i=t.length>1),t})),vr(e,Qr(e),n),i&&(n=Yn(n,7,Fr));for(var r=t.length;r--;)Zi(n,t[r]);return n}));var Ts=Ur((function(e,t){return null==e?{}:function(e,t){return Ii(e,t,(function(t,n){return gs(e,n)}))}(e,t)}));function Es(e,t){if(null==e)return{};var n=pt(Qr(e),(function(e){return[e]}));return t=Yr(t),Ii(e,n,(function(e,n){return t(e,n[0])}))}var js=_r(Cs),xs=_r(Os);function Ns(e){return null==e?[]:Lt(e,Cs(e))}var Ls=wr((function(e,t,n){return t=t.toLowerCase(),e+(n?Ds(t):t)}));function Ds(e){return Hs(ss(e).toLowerCase())}function Ms(e){return(e=ss(e))&&e.replace(le,Pt).replace(Me,\"\")}var Is=wr((function(e,t,n){return e+(n?\"-\":\"\")+t.toLowerCase()})),Rs=wr((function(e,t,n){return e+(n?\" \":\"\")+t.toLowerCase()})),Ps=kr(\"toLowerCase\");var Bs=wr((function(e,t,n){return e+(n?\"_\":\"\")+t.toLowerCase()}));var As=wr((function(e,t,n){return e+(n?\" \":\"\")+Hs(t)}));var _s=wr((function(e,t,n){return e+(n?\" \":\"\")+t.toUpperCase()})),Hs=kr(\"toUpperCase\");function Ws(e,t,n){return e=ss(e),void 0===(t=n?void 0:t)?function(e){return Be.test(e)}(e)?function(e){return e.match(Re)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(t)||[]}var zs=_i((function(e,t){try{return rt(e,void 0,t)}catch(n){return Ha(n)?n:new pe(n)}})),Fs=Ur((function(e,t){return at(t,(function(t){t=Eo(t),Gn(e,t,va(e[t],e))})),e}));function qs(e){return function(){return e}}var Us=jr(),Vs=jr(!0);function Qs(e){return e}function Gs(e){return ki(\"function\"==typeof e?e:Yn(e,1))}var Ks=_i((function(e,t){return function(n){return vi(n,e,t)}})),Xs=_i((function(e,t){return function(n){return vi(e,n,t)}}));function Ys(e,t,n){var i=Cs(t),r=di(t,i);null!=n||qa(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=di(t,Cs(t)));var o=!(qa(n)&&\"chain\"in n&&!n.chain),a=Wa(e);return at(r,(function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),r=n.__actions__=br(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,ut([this.value()],arguments))})})),e}function Js(){}var $s=Dr(pt),Zs=Dr(lt),el=Dr(gt);function tl(e){return lo(e)?wt(Eo(e)):function(e){return function(t){return hi(t,e)}}(e)}var nl=Ir(),il=Ir(!0);function rl(){return[]}function ol(){return!1}var al=Lr((function(e,t){return e+t}),0),sl=Br(\"ceil\"),ll=Lr((function(e,t){return e/t}),1),cl=Br(\"floor\");var dl,hl=Lr((function(e,t){return e*t}),1),pl=Br(\"round\"),ul=Lr((function(e,t){return e-t}),0);return xn.after=function(e,t){if(\"function\"!=typeof t)throw new ve(r);return e=is(e),function(){if(--e<1)return t.apply(this,arguments)}},xn.ary=ga,xn.assign=ls,xn.assignIn=cs,xn.assignInWith=ds,xn.assignWith=hs,xn.at=ps,xn.before=ba,xn.bind=va,xn.bindAll=Fs,xn.bindKey=ya,xn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ia(e)?e:[e]},xn.chain=ta,xn.chunk=function(e,t,n){t=(n?so(e,t,n):void 0===t)?1:an(is(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,a=0,s=i($t(r/t));o<r;)s[a++]=Vi(e,o,o+=t);return s},xn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r},xn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return ut(Ia(n)?br(n):[n],oi(t,1))},xn.cond=function(e){var t=null==e?0:e.length,n=Yr();return e=t?pt(e,(function(e){if(\"function\"!=typeof e[1])throw new ve(r);return[n(e[0]),e[1]]})):[],_i((function(n){for(var i=-1;++i<t;){var r=e[i];if(rt(r[0],this,n))return rt(r[1],this,n)}}))},xn.conforms=function(e){return function(e){var t=Cs(e);return function(n){return Jn(n,e,t)}}(Yn(e,1))},xn.constant=qs,xn.countBy=ra,xn.create=function(e,t){var n=Nn(e);return null==t?n:Qn(n,t)},xn.curry=function e(t,n,i){var r=Hr(t,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=e.placeholder,r},xn.curryRight=function e(t,n,i){var r=Hr(t,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=e.placeholder,r},xn.debounce=Ca,xn.defaults=us,xn.defaultsDeep=ms,xn.defer=Oa,xn.delay=Sa,xn.difference=No,xn.differenceBy=Lo,xn.differenceWith=Do,xn.drop=function(e,t,n){var i=null==e?0:e.length;return i?Vi(e,(t=n||void 0===t?1:is(t))<0?0:t,i):[]},xn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Vi(e,0,(t=i-(t=n||void 0===t?1:is(t)))<0?0:t):[]},xn.dropRightWhile=function(e,t){return e&&e.length?tr(e,Yr(t,3),!0,!0):[]},xn.dropWhile=function(e,t){return e&&e.length?tr(e,Yr(t,3),!0):[]},xn.fill=function(e,t,n,i){var r=null==e?0:e.length;return r?(n&&\"number\"!=typeof n&&so(e,t,n)&&(n=0,i=r),function(e,t,n,i){var r=e.length;for((n=is(n))<0&&(n=-n>r?0:r+n),(i=void 0===i||i>r?r:is(i))<0&&(i+=r),i=n>i?0:rs(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},xn.filter=function(e,t){return(Ia(e)?ct:ri)(e,Yr(t,3))},xn.flatMap=function(e,t){return oi(pa(e,t),1)},xn.flatMapDeep=function(e,t){return oi(pa(e,t),1/0)},xn.flatMapDepth=function(e,t,n){return n=void 0===n?1:is(n),oi(pa(e,t),n)},xn.flatten=Ro,xn.flattenDeep=function(e){return(null==e?0:e.length)?oi(e,1/0):[]},xn.flattenDepth=function(e,t){return(null==e?0:e.length)?oi(e,t=void 0===t?1:is(t)):[]},xn.flip=function(e){return Hr(e,512)},xn.flow=Us,xn.flowRight=Vs,xn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},xn.functions=function(e){return null==e?[]:di(e,Cs(e))},xn.functionsIn=function(e){return null==e?[]:di(e,Os(e))},xn.groupBy=ca,xn.initial=function(e){return(null==e?0:e.length)?Vi(e,0,-1):[]},xn.intersection=Bo,xn.intersectionBy=Ao,xn.intersectionWith=_o,xn.invert=bs,xn.invertBy=vs,xn.invokeMap=da,xn.iteratee=Gs,xn.keyBy=ha,xn.keys=Cs,xn.keysIn=Os,xn.map=pa,xn.mapKeys=function(e,t){var n={};return t=Yr(t,3),li(e,(function(e,i,r){Gn(n,t(e,i,r),e)})),n},xn.mapValues=function(e,t){var n={};return t=Yr(t,3),li(e,(function(e,i,r){Gn(n,i,t(e,i,r))})),n},xn.matches=function(e){return xi(Yn(e,1))},xn.matchesProperty=function(e,t){return Ni(e,Yn(t,1))},xn.memoize=ka,xn.merge=Ss,xn.mergeWith=ks,xn.method=Ks,xn.methodOf=Xs,xn.mixin=Ys,xn.negate=wa,xn.nthArg=function(e){return e=is(e),_i((function(t){return Di(t,e)}))},xn.omit=ws,xn.omitBy=function(e,t){return Es(e,wa(Yr(t)))},xn.once=function(e){return ba(2,e)},xn.orderBy=function(e,t,n,i){return null==e?[]:(Ia(t)||(t=null==t?[]:[t]),Ia(n=i?void 0:n)||(n=null==n?[]:[n]),Mi(e,t,n))},xn.over=$s,xn.overArgs=Ta,xn.overEvery=Zs,xn.overSome=el,xn.partial=Ea,xn.partialRight=ja,xn.partition=ua,xn.pick=Ts,xn.pickBy=Es,xn.property=tl,xn.propertyOf=function(e){return function(t){return null==e?void 0:hi(e,t)}},xn.pull=Wo,xn.pullAll=zo,xn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ri(e,t,Yr(n,2)):e},xn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ri(e,t,void 0,n):e},xn.pullAt=Fo,xn.range=nl,xn.rangeRight=il,xn.rearg=xa,xn.reject=function(e,t){return(Ia(e)?ct:ri)(e,wa(Yr(t,3)))},xn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=Yr(t,3);++i<o;){var a=e[i];t(a,i,e)&&(n.push(a),r.push(i))}return Pi(e,r),n},xn.rest=function(e,t){if(\"function\"!=typeof e)throw new ve(r);return _i(e,t=void 0===t?t:is(t))},xn.reverse=qo,xn.sampleSize=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:is(t),(Ia(e)?Wn:Wi)(e,t)},xn.set=function(e,t,n){return null==e?e:zi(e,t,n)},xn.setWith=function(e,t,n,i){return i=\"function\"==typeof i?i:void 0,null==e?e:zi(e,t,n,i)},xn.shuffle=function(e){return(Ia(e)?zn:Ui)(e)},xn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&\"number\"!=typeof n&&so(e,t,n)?(t=0,n=i):(t=null==t?0:is(t),n=void 0===n?i:is(n)),Vi(e,t,n)):[]},xn.sortBy=ma,xn.sortedUniq=function(e){return e&&e.length?Xi(e):[]},xn.sortedUniqBy=function(e,t){return e&&e.length?Xi(e,Yr(t,2)):[]},xn.split=function(e,t,n){return n&&\"number\"!=typeof n&&so(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ss(e))&&(\"string\"==typeof t||null!=t&&!Ka(t))&&!(t=Ji(t))&&_t(e)?cr(Vt(e),0,n):e.split(t,n):[]},xn.spread=function(e,t){if(\"function\"!=typeof e)throw new ve(r);return t=null==t?0:an(is(t),0),_i((function(n){var i=n[t],r=cr(n,0,t);return i&&ut(r,i),rt(e,this,r)}))},xn.tail=function(e){var t=null==e?0:e.length;return t?Vi(e,1,t):[]},xn.take=function(e,t,n){return e&&e.length?Vi(e,0,(t=n||void 0===t?1:is(t))<0?0:t):[]},xn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Vi(e,(t=i-(t=n||void 0===t?1:is(t)))<0?0:t,i):[]},xn.takeRightWhile=function(e,t){return e&&e.length?tr(e,Yr(t,3),!1,!0):[]},xn.takeWhile=function(e,t){return e&&e.length?tr(e,Yr(t,3)):[]},xn.tap=function(e,t){return t(e),e},xn.throttle=function(e,t,n){var i=!0,o=!0;if(\"function\"!=typeof e)throw new ve(r);return qa(n)&&(i=\"leading\"in n?!!n.leading:i,o=\"trailing\"in n?!!n.trailing:o),Ca(e,t,{leading:i,maxWait:t,trailing:o})},xn.thru=na,xn.toArray=ts,xn.toPairs=js,xn.toPairsIn=xs,xn.toPath=function(e){return Ia(e)?pt(e,Eo):Ja(e)?[e]:br(To(ss(e)))},xn.toPlainObject=as,xn.transform=function(e,t,n){var i=Ia(e),r=i||Aa(e)||$a(e);if(t=Yr(t,4),null==n){var o=e&&e.constructor;n=r?i?new o:[]:qa(e)&&Wa(o)?Nn(Ve(e)):{}}return(r?at:li)(e,(function(e,i,r){return t(n,e,i,r)})),n},xn.unary=function(e){return ga(e,1)},xn.union=Uo,xn.unionBy=Vo,xn.unionWith=Qo,xn.uniq=function(e){return e&&e.length?$i(e):[]},xn.uniqBy=function(e,t){return e&&e.length?$i(e,Yr(t,2)):[]},xn.uniqWith=function(e,t){return t=\"function\"==typeof t?t:void 0,e&&e.length?$i(e,void 0,t):[]},xn.unset=function(e,t){return null==e||Zi(e,t)},xn.unzip=Go,xn.unzipWith=Ko,xn.update=function(e,t,n){return null==e?e:er(e,t,ar(n))},xn.updateWith=function(e,t,n,i){return i=\"function\"==typeof i?i:void 0,null==e?e:er(e,t,ar(n),i)},xn.values=Ns,xn.valuesIn=function(e){return null==e?[]:Lt(e,Os(e))},xn.without=Xo,xn.words=Ws,xn.wrap=function(e,t){return Ea(ar(t),e)},xn.xor=Yo,xn.xorBy=Jo,xn.xorWith=$o,xn.zip=Zo,xn.zipObject=function(e,t){return rr(e||[],t||[],qn)},xn.zipObjectDeep=function(e,t){return rr(e||[],t||[],zi)},xn.zipWith=ea,xn.entries=js,xn.entriesIn=xs,xn.extend=cs,xn.extendWith=ds,Ys(xn,xn),xn.add=al,xn.attempt=zs,xn.camelCase=Ls,xn.capitalize=Ds,xn.ceil=sl,xn.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=os(n))==n?n:0),void 0!==t&&(t=(t=os(t))==t?t:0),Xn(os(e),t,n)},xn.clone=function(e){return Yn(e,4)},xn.cloneDeep=function(e){return Yn(e,5)},xn.cloneDeepWith=function(e,t){return Yn(e,5,t=\"function\"==typeof t?t:void 0)},xn.cloneWith=function(e,t){return Yn(e,4,t=\"function\"==typeof t?t:void 0)},xn.conformsTo=function(e,t){return null==t||Jn(e,t,Cs(t))},xn.deburr=Ms,xn.defaultTo=function(e,t){return null==e||e!=e?t:e},xn.divide=ll,xn.endsWith=function(e,t,n){e=ss(e),t=Ji(t);var i=e.length,r=n=void 0===n?i:Xn(is(n),0,i);return(n-=t.length)>=0&&e.slice(n,r)==t},xn.eq=Na,xn.escape=function(e){return(e=ss(e))&&_.test(e)?e.replace(B,Bt):e},xn.escapeRegExp=function(e){return(e=ss(e))&&Q.test(e)?e.replace(V,\"\\\\$&\"):e},xn.every=function(e,t,n){var i=Ia(e)?lt:ni;return n&&so(e,t,n)&&(t=void 0),i(e,Yr(t,3))},xn.find=oa,xn.findIndex=Mo,xn.findKey=function(e,t){return vt(e,Yr(t,3),li)},xn.findLast=aa,xn.findLastIndex=Io,xn.findLastKey=function(e,t){return vt(e,Yr(t,3),ci)},xn.floor=cl,xn.forEach=sa,xn.forEachRight=la,xn.forIn=function(e,t){return null==e?e:ai(e,Yr(t,3),Os)},xn.forInRight=function(e,t){return null==e?e:si(e,Yr(t,3),Os)},xn.forOwn=function(e,t){return e&&li(e,Yr(t,3))},xn.forOwnRight=function(e,t){return e&&ci(e,Yr(t,3))},xn.get=fs,xn.gt=La,xn.gte=Da,xn.has=function(e,t){return null!=e&&io(e,t,fi)},xn.hasIn=gs,xn.head=Po,xn.identity=Qs,xn.includes=function(e,t,n,i){e=Pa(e)?e:Ns(e),n=n&&!i?is(n):0;var r=e.length;return n<0&&(n=an(r+n,0)),Ya(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Ct(e,t,n)>-1},xn.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:is(n);return r<0&&(r=an(i+r,0)),Ct(e,t,r)},xn.inRange=function(e,t,n){return t=ns(t),void 0===n?(n=t,t=0):n=ns(n),function(e,t,n){return e>=sn(t,n)&&e<an(t,n)}(e=os(e),t,n)},xn.invoke=ys,xn.isArguments=Ma,xn.isArray=Ia,xn.isArrayBuffer=Ra,xn.isArrayLike=Pa,xn.isArrayLikeObject=Ba,xn.isBoolean=function(e){return!0===e||!1===e||Ua(e)&&ui(e)==c},xn.isBuffer=Aa,xn.isDate=_a,xn.isElement=function(e){return Ua(e)&&1===e.nodeType&&!Ga(e)},xn.isEmpty=function(e){if(null==e)return!0;if(Pa(e)&&(Ia(e)||\"string\"==typeof e||\"function\"==typeof e.splice||Aa(e)||$a(e)||Ma(e)))return!e.length;var t=no(e);if(t==m||t==v)return!e.size;if(po(e))return!wi(e).length;for(var n in e)if(we.call(e,n))return!1;return!0},xn.isEqual=function(e,t){return Ci(e,t)},xn.isEqualWith=function(e,t,n){var i=(n=\"function\"==typeof n?n:void 0)?n(e,t):void 0;return void 0===i?Ci(e,t,void 0,n):!!i},xn.isError=Ha,xn.isFinite=function(e){return\"number\"==typeof e&&nn(e)},xn.isFunction=Wa,xn.isInteger=za,xn.isLength=Fa,xn.isMap=Va,xn.isMatch=function(e,t){return e===t||Oi(e,t,$r(t))},xn.isMatchWith=function(e,t,n){return n=\"function\"==typeof n?n:void 0,Oi(e,t,$r(t),n)},xn.isNaN=function(e){return Qa(e)&&e!=+e},xn.isNative=function(e){if(ho(e))throw new pe(\"Unsupported core-js use. Try https://npms.io/search?q=ponyfill.\");return Si(e)},xn.isNil=function(e){return null==e},xn.isNull=function(e){return null===e},xn.isNumber=Qa,xn.isObject=qa,xn.isObjectLike=Ua,xn.isPlainObject=Ga,xn.isRegExp=Ka,xn.isSafeInteger=function(e){return za(e)&&e>=-9007199254740991&&e<=9007199254740991},xn.isSet=Xa,xn.isString=Ya,xn.isSymbol=Ja,xn.isTypedArray=$a,xn.isUndefined=function(e){return void 0===e},xn.isWeakMap=function(e){return Ua(e)&&no(e)==O},xn.isWeakSet=function(e){return Ua(e)&&\"[object WeakSet]\"==ui(e)},xn.join=function(e,t){return null==e?\"\":rn.call(e,t)},xn.kebabCase=Is,xn.last=Ho,xn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return void 0!==n&&(r=(r=is(n))<0?an(i+r,0):sn(r,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,r):yt(e,St,r,!0)},xn.lowerCase=Rs,xn.lowerFirst=Ps,xn.lt=Za,xn.lte=es,xn.max=function(e){return e&&e.length?ii(e,Qs,mi):void 0},xn.maxBy=function(e,t){return e&&e.length?ii(e,Yr(t,2),mi):void 0},xn.mean=function(e){return kt(e,Qs)},xn.meanBy=function(e,t){return kt(e,Yr(t,2))},xn.min=function(e){return e&&e.length?ii(e,Qs,Ei):void 0},xn.minBy=function(e,t){return e&&e.length?ii(e,Yr(t,2),Ei):void 0},xn.stubArray=rl,xn.stubFalse=ol,xn.stubObject=function(){return{}},xn.stubString=function(){return\"\"},xn.stubTrue=function(){return!0},xn.multiply=hl,xn.nth=function(e,t){return e&&e.length?Di(e,is(t)):void 0},xn.noConflict=function(){return Qe._===this&&(Qe._=Ne),this},xn.noop=Js,xn.now=fa,xn.pad=function(e,t,n){e=ss(e);var i=(t=is(t))?Ut(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return Mr(Zt(r),n)+e+Mr($t(r),n)},xn.padEnd=function(e,t,n){e=ss(e);var i=(t=is(t))?Ut(e):0;return t&&i<t?e+Mr(t-i,n):e},xn.padStart=function(e,t,n){e=ss(e);var i=(t=is(t))?Ut(e):0;return t&&i<t?Mr(t-i,n)+e:e},xn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),cn(ss(e).replace(K,\"\"),t||0)},xn.random=function(e,t,n){if(n&&\"boolean\"!=typeof n&&so(e,t,n)&&(t=n=void 0),void 0===n&&(\"boolean\"==typeof t?(n=t,t=void 0):\"boolean\"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ns(e),void 0===t?(t=e,e=0):t=ns(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=dn();return sn(e+r*(t-e+Fe(\"1e-\"+((r+\"\").length-1))),t)}return Bi(e,t)},xn.reduce=function(e,t,n){var i=Ia(e)?mt:Et,r=arguments.length<3;return i(e,Yr(t,4),n,r,ei)},xn.reduceRight=function(e,t,n){var i=Ia(e)?ft:Et,r=arguments.length<3;return i(e,Yr(t,4),n,r,ti)},xn.repeat=function(e,t,n){return t=(n?so(e,t,n):void 0===t)?1:is(t),Ai(ss(e),t)},xn.replace=function(){var e=arguments,t=ss(e[0]);return e.length<3?t:t.replace(e[1],e[2])},xn.result=function(e,t,n){var i=-1,r=(t=sr(t,e)).length;for(r||(r=1,e=void 0);++i<r;){var o=null==e?void 0:e[Eo(t[i])];void 0===o&&(i=r,o=n),e=Wa(o)?o.call(e):o}return e},xn.round=pl,xn.runInContext=e,xn.sample=function(e){return(Ia(e)?Hn:Hi)(e)},xn.size=function(e){if(null==e)return 0;if(Pa(e))return Ya(e)?Ut(e):e.length;var t=no(e);return t==m||t==v?e.size:wi(e).length},xn.snakeCase=Bs,xn.some=function(e,t,n){var i=Ia(e)?gt:Qi;return n&&so(e,t,n)&&(t=void 0),i(e,Yr(t,3))},xn.sortedIndex=function(e,t){return Gi(e,t)},xn.sortedIndexBy=function(e,t,n){return Ki(e,t,Yr(n,2))},xn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Gi(e,t);if(i<n&&Na(e[i],t))return i}return-1},xn.sortedLastIndex=function(e,t){return Gi(e,t,!0)},xn.sortedLastIndexBy=function(e,t,n){return Ki(e,t,Yr(n,2),!0)},xn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Gi(e,t,!0)-1;if(Na(e[n],t))return n}return-1},xn.startCase=As,xn.startsWith=function(e,t,n){return e=ss(e),n=null==n?0:Xn(is(n),0,e.length),t=Ji(t),e.slice(n,n+t.length)==t},xn.subtract=ul,xn.sum=function(e){return e&&e.length?jt(e,Qs):0},xn.sumBy=function(e,t){return e&&e.length?jt(e,Yr(t,2)):0},xn.template=function(e,t,n){var i=xn.templateSettings;n&&so(e,t,n)&&(t=void 0),e=ss(e),t=ds({},t,i,Wr);var r,o,a=ds({},t.imports,i.imports,Wr),s=Cs(a),l=Lt(a,s),c=0,d=t.interpolate||ce,h=\"__p += '\",p=ge((t.escape||ce).source+\"|\"+d.source+\"|\"+(d===z?te:ce).source+\"|\"+(t.evaluate||ce).source+\"|$\",\"g\"),u=\"//# sourceURL=\"+(we.call(t,\"sourceURL\")?(t.sourceURL+\"\").replace(/\\s/g,\" \"):\"lodash.templateSources[\"+ ++_e+\"]\")+\"\\n\";e.replace(p,(function(t,n,i,a,s,l){return i||(i=a),h+=e.slice(c,l).replace(de,At),n&&(r=!0,h+=\"' +\\n__e(\"+n+\") +\\n'\"),s&&(o=!0,h+=\"';\\n\"+s+\";\\n__p += '\"),i&&(h+=\"' +\\n((__t = (\"+i+\")) == null ? '' : __t) +\\n'\"),c=l+t.length,t})),h+=\"';\\n\";var m=we.call(t,\"variable\")&&t.variable;m||(h=\"with (obj) {\\n\"+h+\"\\n}\\n\"),h=(o?h.replace(M,\"\"):h).replace(I,\"$1\").replace(R,\"$1;\"),h=\"function(\"+(m||\"obj\")+\") {\\n\"+(m?\"\":\"obj || (obj = {});\\n\")+\"var __t, __p = ''\"+(r?\", __e = _.escape\":\"\")+(o?\", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, '') }\\n\":\";\\n\")+h+\"return __p\\n}\";var f=zs((function(){return ue(s,u+\"return \"+h).apply(void 0,l)}));if(f.source=h,Ha(f))throw f;return f},xn.times=function(e,t){if((e=is(e))<1||e>9007199254740991)return[];var n=4294967295,i=sn(e,4294967295);e-=4294967295;for(var r=xt(i,t=Yr(t));++n<e;)t(n);return r},xn.toFinite=ns,xn.toInteger=is,xn.toLength=rs,xn.toLower=function(e){return ss(e).toLowerCase()},xn.toNumber=os,xn.toSafeInteger=function(e){return e?Xn(is(e),-9007199254740991,9007199254740991):0===e?e:0},xn.toString=ss,xn.toUpper=function(e){return ss(e).toUpperCase()},xn.trim=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(G,\"\");if(!e||!(t=Ji(t)))return e;var i=Vt(e),r=Vt(t);return cr(i,Mt(i,r),It(i,r)+1).join(\"\")},xn.trimEnd=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(X,\"\");if(!e||!(t=Ji(t)))return e;var i=Vt(e);return cr(i,0,It(i,Vt(t))+1).join(\"\")},xn.trimStart=function(e,t,n){if((e=ss(e))&&(n||void 0===t))return e.replace(K,\"\");if(!e||!(t=Ji(t)))return e;var i=Vt(e);return cr(i,Mt(i,Vt(t))).join(\"\")},xn.truncate=function(e,t){var n=30,i=\"...\";if(qa(t)){var r=\"separator\"in t?t.separator:r;n=\"length\"in t?is(t.length):n,i=\"omission\"in t?Ji(t.omission):i}var o=(e=ss(e)).length;if(_t(e)){var a=Vt(e);o=a.length}if(n>=o)return e;var s=n-Ut(i);if(s<1)return i;var l=a?cr(a,0,s).join(\"\"):e.slice(0,s);if(void 0===r)return l+i;if(a&&(s+=l.length-s),Ka(r)){if(e.slice(s).search(r)){var c,d=l;for(r.global||(r=ge(r.source,ss(ne.exec(r))+\"g\")),r.lastIndex=0;c=r.exec(d);)var h=c.index;l=l.slice(0,void 0===h?s:h)}}else if(e.indexOf(Ji(r),s)!=s){var p=l.lastIndexOf(r);p>-1&&(l=l.slice(0,p))}return l+i},xn.unescape=function(e){return(e=ss(e))&&A.test(e)?e.replace(P,Qt):e},xn.uniqueId=function(e){var t=++Te;return ss(e)+t},xn.upperCase=_s,xn.upperFirst=Hs,xn.each=sa,xn.eachRight=la,xn.first=Po,Ys(xn,(dl={},li(xn,(function(e,t){we.call(xn.prototype,t)||(dl[t]=e)})),dl),{chain:!1}),xn.VERSION=\"4.17.20\",at([\"bind\",\"bindKey\",\"curry\",\"curryRight\",\"partial\",\"partialRight\"],(function(e){xn[e].placeholder=xn})),at([\"drop\",\"take\"],(function(e,t){Mn.prototype[e]=function(n){n=void 0===n?1:an(is(n),0);var i=this.__filtered__&&!t?new Mn(this):this.clone();return i.__filtered__?i.__takeCount__=sn(n,i.__takeCount__):i.__views__.push({size:sn(n,4294967295),type:e+(i.__dir__<0?\"Right\":\"\")}),i},Mn.prototype[e+\"Right\"]=function(t){return this.reverse()[e](t).reverse()}})),at([\"filter\",\"map\",\"takeWhile\"],(function(e,t){var n=t+1,i=1==n||3==n;Mn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yr(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),at([\"head\",\"last\"],(function(e,t){var n=\"take\"+(t?\"Right\":\"\");Mn.prototype[e]=function(){return this[n](1).value()[0]}})),at([\"initial\",\"tail\"],(function(e,t){var n=\"drop\"+(t?\"\":\"Right\");Mn.prototype[e]=function(){return this.__filtered__?new Mn(this):this[n](1)}})),Mn.prototype.compact=function(){return this.filter(Qs)},Mn.prototype.find=function(e){return this.filter(e).head()},Mn.prototype.findLast=function(e){return this.reverse().find(e)},Mn.prototype.invokeMap=_i((function(e,t){return\"function\"==typeof e?new Mn(this):this.map((function(n){return vi(n,e,t)}))})),Mn.prototype.reject=function(e){return this.filter(wa(Yr(e)))},Mn.prototype.slice=function(e,t){e=is(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Mn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=is(t))<0?n.dropRight(-t):n.take(t-e)),n)},Mn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Mn.prototype.toArray=function(){return this.take(4294967295)},li(Mn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=xn[i?\"take\"+(\"last\"==t?\"Right\":\"\"):t],o=i||/^find/.test(t);r&&(xn.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,s=t instanceof Mn,l=a[0],c=s||Ia(t),d=function(e){var t=r.apply(xn,ut([e],a));return i&&h?t[0]:t};c&&n&&\"function\"==typeof l&&1!=l.length&&(s=c=!1);var h=this.__chain__,p=!!this.__actions__.length,u=o&&!h,m=s&&!p;if(!o&&c){t=m?t:new Mn(this);var f=e.apply(t,a);return f.__actions__.push({func:na,args:[d],thisArg:void 0}),new Dn(f,h)}return u&&m?e.apply(this,a):(f=this.thru(d),u?i?f.value()[0]:f.value():f)})})),at([\"pop\",\"push\",\"shift\",\"sort\",\"splice\",\"unshift\"],(function(e){var t=ye[e],n=/^(?:push|sort|unshift)$/.test(e)?\"tap\":\"thru\",i=/^(?:pop|shift)$/.test(e);xn.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Ia(r)?r:[],e)}return this[n]((function(n){return t.apply(Ia(n)?n:[],e)}))}})),li(Mn.prototype,(function(e,t){var n=xn[t];if(n){var i=n.name+\"\";we.call(yn,i)||(yn[i]=[]),yn[i].push({name:t,func:n})}})),yn[xr(void 0,2).name]=[{name:\"wrapper\",func:void 0}],Mn.prototype.clone=function(){var e=new Mn(this.__wrapped__);return e.__actions__=br(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=br(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=br(this.__views__),e},Mn.prototype.reverse=function(){if(this.__filtered__){var e=new Mn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Mn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ia(e),i=t<0,r=n?e.length:0,o=function(e,t,n){var i=-1,r=n.length;for(;++i<r;){var o=n[i],a=o.size;switch(o.type){case\"drop\":e+=a;break;case\"dropRight\":t-=a;break;case\"take\":t=sn(t,e+a);break;case\"takeRight\":e=an(e,t-a)}}return{start:e,end:t}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,c=i?s:a-1,d=this.__iteratees__,h=d.length,p=0,u=sn(l,this.__takeCount__);if(!n||!i&&r==l&&u==l)return nr(e,this.__actions__);var m=[];e:for(;l--&&p<u;){for(var f=-1,g=e[c+=t];++f<h;){var b=d[f],v=b.iteratee,y=b.type,C=v(g);if(2==y)g=C;else if(!C){if(1==y)continue e;break e}}m[p++]=g}return m},xn.prototype.at=ia,xn.prototype.chain=function(){return ta(this)},xn.prototype.commit=function(){return new Dn(this.value(),this.__chain__)},xn.prototype.next=function(){void 0===this.__values__&&(this.__values__=ts(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},xn.prototype.plant=function(e){for(var t,n=this;n instanceof Ln;){var i=xo(n);i.__index__=0,i.__values__=void 0,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},xn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Mn){var t=e;return this.__actions__.length&&(t=new Mn(this)),(t=t.reverse()).__actions__.push({func:na,args:[qo],thisArg:void 0}),new Dn(t,this.__chain__)}return this.thru(qo)},xn.prototype.toJSON=xn.prototype.valueOf=xn.prototype.value=function(){return nr(this.__wrapped__,this.__actions__)},xn.prototype.first=xn.prototype.head,bt&&(xn.prototype[bt]=function(){return this}),xn}();Qe._=Gt,void 0===(i=(function(){return Gt}).call(t,n,t,e))||(e.exports=i)}).call(this)}).call(this,n(\"YuTi\")(e))},OPcz:function(e,t,n){\"use strict\";var i=n(\"CcnG\"),r=n(\"BSjz\"),o=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[],declarations:[r.SignaturePad],exports:[r.SignaturePad]}]}],e.ctorParameters=[],e}();t.SignaturePadModule=o},Yoyx:function(e,t,n){var i,r,o;!function(a){if(\"object\"==typeof e.exports){var s=a(n(\"GPNb\"),t);void 0!==s&&(e.exports=s)}else r=[n,t],void 0===(o=\"function\"==typeof(i=a)?i.apply(t,r):i)||(e.exports=o)}((function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=/-+([a-z0-9])/g;function i(e,t,n){var i=e.indexOf(t);return-1==i?n:[e.slice(0,i).trim(),e.slice(i+1).trim()]}function r(e,t,n){return Array.isArray(e)?t.visitArray(e,n):\"object\"==typeof(i=e)&&null!==i&&Object.getPrototypeOf(i)===l?t.visitStringMap(e,n):null==e||\"string\"==typeof e||\"number\"==typeof e||\"boolean\"==typeof e?t.visitPrimitive(e,n):t.visitOther(e,n);var i}t.dashCaseToCamelCase=function(e){return e.replace(n,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1].toUpperCase()}))},t.splitAtColon=function(e,t){return i(e,\":\",t)},t.splitAtPeriod=function(e,t){return i(e,\".\",t)},t.visitValue=r,t.isDefined=function(e){return null!=e},t.noUndefined=function(e){return void 0===e?null:e};var o=function(){function e(){}return e.prototype.visitArray=function(e,t){var n=this;return e.map((function(e){return r(e,n,t)}))},e.prototype.visitStringMap=function(e,t){var n=this,i={};return Object.keys(e).forEach((function(o){i[o]=r(e[o],n,t)})),i},e.prototype.visitPrimitive=function(e,t){return e},e.prototype.visitOther=function(e,t){return e},e}();t.ValueTransformer=o,t.SyncAsync={assertSync:function(e){if(c(e))throw new Error(\"Illegal state: value cannot be a promise\");return e},then:function(e,t){return c(e)?e.then(t):t(e)},all:function(e){return e.some(c)?Promise.all(e):e}},t.error=function(e){throw new Error(\"Internal Error: \"+e)},t.syntaxError=function(e,t){var n=Error(e);return n[a]=!0,t&&(n[s]=t),n};var a=\"ngSyntaxError\",s=\"ngParseErrors\";t.isSyntaxError=function(e){return e[a]},t.getParseErrors=function(e){return e[s]||[]},t.escapeRegExp=function(e){return e.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g,\"\\\\$1\")};var l=Object.getPrototypeOf({});function c(e){return!!e&&\"function\"==typeof e.then}t.utf8Encode=function(e){for(var t=\"\",n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i>=55296&&i<=56319&&e.length>n+1){var r=e.charCodeAt(n+1);r>=56320&&r<=57343&&(n++,i=(i-55296<<10)+r-56320+65536)}i<=127?t+=String.fromCharCode(i):i<=2047?t+=String.fromCharCode(i>>6&31|192,63&i|128):i<=65535?t+=String.fromCharCode(i>>12|224,i>>6&63|128,63&i|128):i<=2097151&&(t+=String.fromCharCode(i>>18&7|240,i>>12&63|128,i>>6&63|128,63&i|128))}return t},t.stringify=function e(t){if(\"string\"==typeof t)return t;if(t instanceof Array)return\"[\"+t.map(e).join(\", \")+\"]\";if(null==t)return\"\"+t;if(t.overriddenName)return\"\"+t.overriddenName;if(t.name)return\"\"+t.name;if(!t.toString)return\"object\";var n=t.toString();if(null==n)return\"\"+n;var i=n.indexOf(\"\\n\");return-1===i?n:n.substring(0,i)},t.resolveForwardRef=function(e){return\"function\"==typeof e&&e.hasOwnProperty(\"__forward_ref__\")?e():e},t.isPromise=c;var d=function(e){this.full=e;var t=e.split(\".\");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(\".\")};t.Version=d;var h=\"undefined\"!=typeof window&&window,p=\"undefined\"!=typeof self&&\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,u=\"undefined\"!=typeof global&&global||h||p;t.global=u}))},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,\"loaded\",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,\"id\",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},cCNl:function(e,t,n){\"use strict\";function i(e,t,n){this.x=e,this.y=t,this.time=n||(new Date).getTime()}function r(e,t,n,i){this.startPoint=e,this.control1=t,this.control2=n,this.endPoint=i}function o(e,t){var n=this,i=t||{};this.velocityFilterWeight=i.velocityFilterWeight||.7,this.minWidth=i.minWidth||.5,this.maxWidth=i.maxWidth||2.5,this.throttle=\"throttle\"in i?i.throttle:16,this.minDistance=\"minDistance\"in i?i.minDistance:5,this.throttle?this._strokeMoveUpdate=function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),a=null,o=e.apply(i,r),a||(i=r=null)};return function(){var c=Date.now();s||!1!==n.leading||(s=c);var d=t-(c-s);return i=this,r=arguments,d<=0||d>t?(a&&(clearTimeout(a),a=null),s=c,o=e.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(l,d)),o}}(o.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=o.prototype._strokeUpdate,this.dotSize=i.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=i.penColor||\"black\",this.backgroundColor=i.backgroundColor||\"rgba(0,0,0,0)\",this.onBegin=i.onBegin,this.onEnd=i.onEnd,this._canvas=e,this._ctx=e.getContext(\"2d\"),this.clear(),this._handleMouseDown=function(e){1===e.which&&(n._mouseButtonDown=!0,n._strokeBegin(e))},this._handleMouseMove=function(e){n._mouseButtonDown&&n._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(e))},this._handleTouchStart=function(e){if(1===e.targetTouches.length){var t=e.changedTouches[0];n._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];n._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){e.target===n._canvas&&(e.preventDefault(),n._strokeEnd(e))},this.on()}n.r(t),i.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1},i.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},i.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},r.prototype.length=function(){for(var e=0,t=void 0,n=void 0,i=0;i<=10;i+=1){var r=i/10,o=this._point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this._point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var s=o-t,l=a-n;e+=Math.sqrt(s*s+l*l)}t=o,n=a}return e},r.prototype._point=function(e,t,n,i,r){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*i*(1-e)*e*e+r*e*e*e},o.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},o.prototype.fromDataURL=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new Image,r=n.ratio||window.devicePixelRatio||1,o=n.width||this._canvas.width/r,a=n.height||this._canvas.height/r;this._reset(),i.src=e,i.onload=function(){t._ctx.drawImage(i,0,0,o,a)},this._isEmpty=!1},o.prototype.toDataURL=function(e){var t;switch(e){case\"image/svg+xml\":return this._toSVG();default:for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=this._canvas).toDataURL.apply(t,[e].concat(i))}},o.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},o.prototype.off=function(){this._canvas.removeEventListener(\"mousedown\",this._handleMouseDown),this._canvas.removeEventListener(\"mousemove\",this._handleMouseMove),document.removeEventListener(\"mouseup\",this._handleMouseUp),this._canvas.removeEventListener(\"touchstart\",this._handleTouchStart),this._canvas.removeEventListener(\"touchmove\",this._handleTouchMove),this._canvas.removeEventListener(\"touchend\",this._handleTouchEnd)},o.prototype.isEmpty=function(){return this._isEmpty},o.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),\"function\"==typeof this.onBegin&&this.onBegin(e)},o.prototype._strokeUpdate=function(e){var t=e.clientX,n=e.clientY,i=this._createPoint(t,n),r=this._data[this._data.length-1],o=r&&r[r.length-1],a=o&&i.distanceTo(o)<this.minDistance;if(!o||!a){var s=this._addPoint(i),l=s.curve,c=s.widths;l&&c&&this._drawCurve(l,c.start,c.end),this._data[this._data.length-1].push({x:i.x,y:i.y,time:i.time,color:this.penColor})}},o.prototype._strokeEnd=function(e){var t=this.points.length>2,n=this.points[0];if(!t&&n&&this._drawDot(n),n){var i=this._data[this._data.length-1],r=i[i.length-1];n.equals(r)||i.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}\"function\"==typeof this.onEnd&&this.onEnd(e)},o.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener(\"mousedown\",this._handleMouseDown),this._canvas.addEventListener(\"mousemove\",this._handleMouseMove),document.addEventListener(\"mouseup\",this._handleMouseUp)},o.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction=\"none\",this._canvas.style.touchAction=\"none\",this._canvas.addEventListener(\"touchstart\",this._handleTouchStart),this._canvas.addEventListener(\"touchmove\",this._handleTouchMove),this._canvas.addEventListener(\"touchend\",this._handleTouchEnd)},o.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},o.prototype._createPoint=function(e,t,n){var r=this._canvas.getBoundingClientRect();return new i(e-r.left,t-r.top,n||(new Date).getTime())},o.prototype._addPoint=function(e){var t=this.points;if(t.push(e),t.length>2){3===t.length&&t.unshift(t[0]);var n=this._calculateCurveControlPoints(t[0],t[1],t[2]).c2,i=this._calculateCurveControlPoints(t[1],t[2],t[3]).c1,o=new r(t[1],n,i,t[2]),a=this._calculateCurveWidths(o);return t.shift(),{curve:o,widths:a}}return{}},o.prototype._calculateCurveControlPoints=function(e,t,n){var r=e.x-t.x,o=e.y-t.y,a=t.x-n.x,s=t.y-n.y,l=(e.x+t.x)/2,c=(e.y+t.y)/2,d=(t.x+n.x)/2,h=(t.y+n.y)/2,p=Math.sqrt(r*r+o*o),u=Math.sqrt(a*a+s*s),m=u/(p+u),f=d+(l-d)*m,g=h+(c-h)*m,b=t.x-f,v=t.y-g;return{c1:new i(l+b,c+v),c2:new i(d+b,h+v)}},o.prototype._calculateCurveWidths=function(e){var t=e.startPoint,n=e.endPoint,i={start:null,end:null},r=this.velocityFilterWeight*n.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(r);return i.start=this._lastWidth,i.end=o,this._lastVelocity=r,this._lastWidth=o,i},o.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},o.prototype._drawPoint=function(e,t,n){var i=this._ctx;i.moveTo(e,t),i.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},o.prototype._drawCurve=function(e,t,n){var i=this._ctx,r=n-t,o=Math.floor(e.length());i.beginPath();for(var a=0;a<o;a+=1){var s=a/o,l=s*s,c=l*s,d=1-s,h=d*d,p=h*d,u=p*e.startPoint.x;u+=3*h*s*e.control1.x,u+=3*d*l*e.control2.x,u+=c*e.endPoint.x;var m=p*e.startPoint.y;m+=3*h*s*e.control1.y,m+=3*d*l*e.control2.y,m+=c*e.endPoint.y;var f=t+c*r;this._drawPoint(u,m,f)}i.closePath(),i.fill()},o.prototype._drawDot=function(e){var t=this._ctx,n=\"function\"==typeof this.dotSize?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,n),t.closePath(),t.fill()},o.prototype._fromData=function(e,t,n){for(var r=0;r<e.length;r+=1){var o=e[r];if(o.length>1)for(var a=0;a<o.length;a+=1){var s=o[a],l=new i(s.x,s.y,s.time),c=s.color;if(0===a)this.penColor=c,this._reset(),this._addPoint(l);else if(a!==o.length-1){var d=this._addPoint(l),h=d.curve,p=d.widths;h&&p&&t(h,p,c)}}else this._reset(),n(o[0])}},o.prototype._toSVG=function(){var e=this,t=this._data,n=this._canvas,i=Math.max(window.devicePixelRatio||1,1),r=n.width/i,o=n.height/i,a=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");a.setAttributeNS(null,\"width\",n.width),a.setAttributeNS(null,\"height\",n.height),this._fromData(t,(function(e,t,n){var i=document.createElement(\"path\");if(!(isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y))){var r=\"M \"+e.startPoint.x.toFixed(3)+\",\"+e.startPoint.y.toFixed(3)+\" C \"+e.control1.x.toFixed(3)+\",\"+e.control1.y.toFixed(3)+\" \"+e.control2.x.toFixed(3)+\",\"+e.control2.y.toFixed(3)+\" \"+e.endPoint.x.toFixed(3)+\",\"+e.endPoint.y.toFixed(3);i.setAttribute(\"d\",r),i.setAttribute(\"stroke-width\",(2.25*t.end).toFixed(3)),i.setAttribute(\"stroke\",n),i.setAttribute(\"fill\",\"none\"),i.setAttribute(\"stroke-linecap\",\"round\"),a.appendChild(i)}}),(function(t){var n=document.createElement(\"circle\"),i=\"function\"==typeof e.dotSize?e.dotSize():e.dotSize;n.setAttribute(\"r\",i),n.setAttribute(\"cx\",t.x),n.setAttribute(\"cy\",t.y),n.setAttribute(\"fill\",t.color),a.appendChild(n)}));var s='<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 '+r+\" \"+o+'\" width=\"'+r+'\" height=\"'+o+'\">',l=a.innerHTML;if(void 0===l){var c=document.createElement(\"dummy\"),d=a.childNodes;c.innerHTML=\"\";for(var h=0;h<d.length;h+=1)c.appendChild(d[h].cloneNode(!0));l=c.innerHTML}return\"data:image/svg+xml;base64,\"+btoa(s+l+\"</svg>\")},o.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,(function(e,n){return t._drawCurve(e,n.start,n.end)}),(function(e){return t._drawDot(e)})),this._data=e},o.prototype.toData=function(){return this._data},t.default=o},graX:function(e,t,n){\"use strict\";var i,r,o=n(\"CcnG\"),a=n(\"gIcY\"),s=n(\"k5hD\"),l=n(\"fejc\"),c=n(\"yz8Y\"),d=\"initial-end\",h=\"destroy\",p=\"model-changed\",u=\"keyUp\",m=\"keyDown\",f=\"mouseDown\",g=\"paste-content\",b=\"rtl-mode\",v=\"e-rte-quick-toolbar\",y=\"e-rte-dropdown-popup\",C=\"e-rte-dropdown-btn\",O=\"e-toolbar-item\";!function(e){e[e.Toolbar=0]=\"Toolbar\",e[e.Content=1]=\"Content\",e[e.Popup=2]=\"Popup\",e[e.LinkToolbar=3]=\"LinkToolbar\",e[e.TextToolbar=4]=\"TextToolbar\",e[e.ImageToolbar=5]=\"ImageToolbar\",e[e.InlineToolbar=6]=\"InlineToolbar\",e[e.TableToolbar=7]=\"TableToolbar\"}(i||(i={})),function(e){e.Expand=\"Expand\",e.MultiRow=\"MultiRow\",e.Scrollable=\"Scrollable\"}(r||(r={}));var S,k=function(){function e(e,t){this.parent=e,this.locator=t,this.renderer=this.locator.getService(\"rendererFactory\"),this.addEventListener()}return e.prototype.render=function(){this.parent;this.contentRenderer=this.renderer.getRenderer(i.Content),this.contentRenderer.renderPanel()},e.prototype.refresh=function(e){void 0===e&&(e={requestType:\"refresh\"}),this.parent.notify(e.requestType+\"-begin\",e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(p,this.refresh,this),this.parent.on(u,this.keyUp,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(p,this.refresh),this.parent.off(u,this.keyUp))},e.prototype.keyUp=function(e){if(\"HTML\"===this.parent.editorMode)switch(e.args.which){case 46:case 8:var t=this.parent.contentModule.getEditPanel().childNodes;if(0===t.length||1===t.length&&(\"BR\"===t[0].tagName||\"P\"===t[0].tagName&&(0===t[0].childNodes.length||\"\"===t[0].textContent))){var n=this.parent.contentModule.getEditPanel();n.innerHTML=\"<p><br/></p>\",this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),n.childNodes[0],0)}}},e}(),w=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),T=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},E={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,\"]\":221,\"[\":219,\"=\":187},j=function(e){function t(t,i){var r=e.call(this,i,t)||this;return r.keyPressHandler=function(e){for(var t=e.altKey,i=e.ctrlKey,o=e.shiftKey,a=e.which,s=0,l=Object.keys(r.keyConfigs);s<l.length;s++)for(var c=l[s],d=0,h=r.keyConfigs[c].split(\",\");d<h.length;d++){var p=h[d],u=n.getKeyConfigData(p.trim());t===u.altKey&&i===u.ctrlKey&&o===u.shiftKey&&a===u.keyCode&&(e.action=c)}r.keyAction&&r.keyAction(e)},r.bind(),r}var n;return w(t,e),n=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return\"keyboard\"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split(\"+\"),i={altKey:-1!==t.indexOf(\"alt\"),ctrlKey:-1!==t.indexOf(\"ctrl\"),shiftKey:-1!==t.indexOf(\"shift\"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?i.keyCode=Number(t[t.length-1]):i.keyCode=n.getKeyCode(t[t.length-1]),n.configCache[e]=i,i},t.getKeyCode=function(e){return E[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},T([Object(l.s)({})],t.prototype,\"keyConfigs\",void 0),T([Object(l.s)(\"keyup\")],t.prototype,\"eventName\",void 0),T([Object(l.k)()],t.prototype,\"keyAction\",void 0),t=n=T([l.q],t)}(l.c),x=function(){function e(e,t){this.parent=e;var n=t;this.rendererFactory=n.getService(\"rendererFactory\"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(\"sourceCode\",this.sourceCode,this),this.parent.on(d,this.onInitialEnd,this),this.parent.on(\"updateSource\",this.updateSourceCode,this),this.parent.on(h,this.destroy,this)},e.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on(\"keydown-handler\",this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.off(\"sourceCode\",this.sourceCode),this.parent.off(\"updateSource\",this.updateSourceCode),this.parent.off(d,this.onInitialEnd),this.parent.off(h,this.destroy),this.parent.formatter.editorManager.observer.off(\"keydown-handler\",this.onKeyDown)},e.prototype.getSourceCode=function(){return this.parent.createElement(\"textarea\",{className:\"e-rte-srctextarea\"})},e.prototype.wireEvent=function(e){this.keyboardModule=new j(e,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:\"keydown\"}),l.l.add(this.previewElement,\"mousedown\",this.mouseDownHandler,this)},e.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&l.l.remove(this.previewElement,\"mousedown\",this.mouseDownHandler)},e.prototype.wireBaseKeyDown=function(){this.parent.keyboardModule=new j(this.contentModule.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:\"keydown\"})},e.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},e.prototype.mouseDownHandler=function(e){this.parent.notify(\"sourceCodeMouseDown\",{args:e})},e.prototype.previewKeyDown=function(e){switch(e.action){case\"html-source\":this.updateSourceCode(e),e.preventDefault();break;case\"toolbar-focus\":if(this.parent.toolbarSettings.enable){this.parent.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled=\"false\"][title] [tabindex]').focus()}}},e.prototype.onKeyDown=function(e){switch(e.event.action){case\"html-source\":e.event.preventDefault(),this.sourceCode(e),e.callBack({requestType:\"SourceCode\",editorMode:\"HTML\",event:e.event})}},e.prototype.sourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger(\"actionBegin\",{requestType:\"SourceCode\",targetItem:\"SourceCode\",args:e});var t=Object(l.lb)(\".\"+O,this.parent.element);if(this.contentModule=this.rendererFactory.getRenderer(i.Content),this.parent.notify(\"updateToolbarItem\",{targetItem:\"SourceCode\",updateItem:\"Preview\",baseToolbar:this.parent.getBaseToolbarObject()}),Object(l.W)(this.previewElement)&&(this.previewElement=this.getSourceCode()),this.parent.updateValueData(),this.parent.iframeSettings.enable){var n=void 0;(n=Object(l.W)(this.parent.element.querySelector(\"#\"+this.parent.element.id+\"_source-view\"))?this.parent.createElement(\"div\",{className:\"e-source-content\",id:this.parent.element.id+\"_source-view\"}):this.parent.element.querySelector(\"#\"+this.parent.element.id+\"_source-view\")).appendChild(this.previewElement),this.parent.element.appendChild(n),n.style.height=this.contentModule.getPanel().style.height,n.style.marginTop=this.contentModule.getPanel().style.marginTop,this.getPanel().value=this.getTextAreaValue(),this.contentModule.getPanel().style.display=\"none\",n.style.display=\"block\"}else this.contentModule.getPanel().appendChild(this.previewElement),this.getPanel().value=this.getTextAreaValue(),this.contentModule.getEditPanel().style.display=\"none\",this.previewElement.style.display=\"block\";(this.parent.isBlur=!1,this.parent.disableToolbarItem(this.parent.toolbarSettings.items),this.parent.enableToolbarItem(\"SourceCode\"),this.parent.getToolbar()&&Object(l.hb)([this.parent.getToolbar()],[\"e-expand-open\"]),Object(l.hb)(t,[\"e-active\"]),this.parent.setContentHeight(\"sourceCode\",!0),this.wireEvent(this.previewElement),this.unWireBaseKeyDown(),this.previewElement.focus(),this.parent.updateValue(),Object(l.W)(this.parent.placeholder)||this.parent.iframeSettings.enable)||(this.parent.element.querySelector(\".rte-placeholder.e-rte-placeholder\").style.display=\"none\");this.parent.trigger(\"actionComplete\",{requestType:\"SourceCode\",targetItem:\"SourceCode\",args:e}),this.parent.invokeChangeEvent()},e.prototype.updateSourceCode=function(e){this.parent.isBlur=!1,this.parent.trigger(\"actionBegin\",{requestType:\"Preview\",targetItem:\"Preview\",args:e});var t=this.getPanel();this.parent.notify(\"updateToolbarItem\",{targetItem:\"Preview\",updateItem:\"SourceCode\",baseToolbar:this.parent.getBaseToolbarObject()});var n=this.parent.serializeValue(t.value),i=null===n||\"\"===n?\"<p><br/></p>\":n;(this.parent.iframeSettings.enable?(t.parentElement.style.display=\"none\",this.contentModule.getPanel().style.display=\"block\",this.contentModule.getEditPanel().innerHTML=i):(t.style.display=\"none\",this.contentModule.getEditPanel().style.display=\"block\",this.contentModule.getEditPanel().innerHTML=i),this.parent.isBlur=!1,this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.parent.getToolbar()&&Object(l.hb)([this.parent.getToolbar()],[\"e-expand-open\"]),this.parent.setContentHeight(\"preview\",!0),this.unWireEvent(),this.wireBaseKeyDown(),this.contentModule.getEditPanel().focus(),this.parent.updateValue(),Object(l.W)(this.parent.placeholder)||0!==this.contentModule.getEditPanel().innerText.length)||(this.parent.element.querySelector(\".rte-placeholder.e-rte-placeholder\").style.display=\"block\");this.parent.trigger(\"actionComplete\",{requestType:\"Preview\",targetItem:\"Preview\",args:e}),this.parent.formatter.enableUndo(this.parent),this.parent.invokeChangeEvent()},e.prototype.getTextAreaValue=function(){return\"<p><br></p>\"===this.contentModule.getEditPanel().innerHTML||1===this.contentModule.getEditPanel().childNodes.length&&\"P\"===this.contentModule.getEditPanel().childNodes[0].tagName&&7===this.contentModule.getEditPanel().innerHTML.length?\"\":this.parent.value},e.prototype.getPanel=function(){return this.parent.element.querySelector(\".e-rte-srctextarea\")},e.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},e.prototype.destroy=function(){this.removeEventListener()},e}(),N={bold:{command:\"Style\",subCommand:\"Bold\",value:\"strong\"},italic:{command:\"Style\",subCommand:\"Italic\",value:\"em\"},underline:{command:\"Style\",subCommand:\"Underline\",value:\"span\"},strikeThrough:{command:\"Style\",subCommand:\"StrikeThrough\",value:\"span\"},insertCode:{command:\"Formats\",subCommand:\"Pre\",value:\"pre\"},superscript:{command:\"Effects\",subCommand:\"SuperScript\",value:\"sup\"},subscript:{command:\"Effects\",subCommand:\"SubScript\",value:\"sub\"},uppercase:{command:\"Casing\",subCommand:\"UpperCase\"},lowercase:{command:\"Casing\",subCommand:\"LowerCase\"},fontColor:{command:\"font\",subCommand:\"fontcolor\",value:\"#ff0000\"},fontName:{command:\"font\",subCommand:\"fontname\",value:\"Segoe UI\"},fontSize:{command:\"font\",subCommand:\"fontsize\",value:\"10pt\"},backColor:{command:\"font\",subCommand:\"backgroundcolor\",value:\"#ffff00\"},justifyCenter:{command:\"Alignments\",subCommand:\"JustifyCenter\"},justifyFull:{command:\"Alignments\",subCommand:\"JustifyFull\"},justifyLeft:{command:\"Alignments\",subCommand:\"JustifyLeft\"},justifyRight:{command:\"Alignments\",subCommand:\"JustifyRight\"},undo:{command:\"Actions\",subCommand:\"Undo\"},redo:{command:\"Actions\",subCommand:\"Redo\"},createLink:{command:\"Links\",subCommand:\"createLink\"},editLink:{command:\"Links\",subCommand:\"createLink\"},createImage:{command:\"Images\",subCommand:\"Images\"},formatBlock:{command:\"Formats\",value:\"P\"},heading:{command:\"Formats\",value:\"H1\"},indent:{command:\"Indents\",subCommand:\"Indent\"},outdent:{command:\"Indents\",subCommand:\"Outdent\"},insertHTML:{command:\"InsertHTML\",subCommand:\"InsertHTML\",value:\"\"},insertText:{command:\"InsertText\",subCommand:\"InsertText\",value:\"\"},insertHorizontalRule:{command:\"InsertHTML\",subCommand:\"InsertHTML\",value:\"<hr/>\"},insertImage:{command:\"Images\",subCommand:\"Image\"},editImage:{command:\"Images\",subCommand:\"Image\"},insertTable:{command:\"Table\",subCommand:\"CreateTable\"},insertBrOnReturn:{command:\"InsertHTML\",subCommand:\"InsertHTML\",value:\"<br/>\"},insertOrderedList:{command:\"Lists\",value:\"OL\"},insertUnorderedList:{command:\"Lists\",value:\"UL\"},insertParagraph:{command:\"Formats\",value:\"P\"},removeFormat:{command:\"Clear\",subCommand:\"ClearFormat\"}},L=function(){function e(){this.services={}}return e.prototype.register=function(e,t){Object(l.W)(this.services[e])&&(this.services[e]=t)},e.prototype.getService=function(e){if(Object(l.W)(this.services[e]))throw\"The service \"+e+\" is not registered\";return this.services[e]},e}(),D=function(){function e(){this.rendererMap={}}return e.prototype.addRenderer=function(e,t){var n=Object(l.O)(i,e);Object(l.W)(this.rendererMap[n])&&(this.rendererMap[n]=t)},e.prototype.getRenderer=function(e){var t=Object(l.O)(i,e);if(Object(l.W)(this.rendererMap[t]))throw\"The renderer \"+t+\" is not found\";return this.rendererMap[t]},e}(),M=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(\"execCommandCallBack\",this.commandCallBack,this),this.parent.on(h,this.removeEventListener,this)},e.prototype.commandCallBack=function(e){\"Undo\"!==e.requestType&&\"Redo\"!==e.requestType&&this.parent.formatter.saveData(),this.parent.notify(\"toolbar-refresh\",{args:e}),this.parent.notify(\"count\",{})},e.prototype.removeEventListener=function(){this.parent.off(\"execCommandCallBack\",this.commandCallBack),this.parent.off(h,this.removeEventListener)},e}(),I=n(\"0+Cy\"),R=n(\"YXid\"),P=n(\"NMhB\"),B=n(\"h2Mt\"),A=n(\"ONSs\"),_=n(\"uvV7\"),H=n(\"yzom\"),W=[\"alignments\",\"formats\",\"fontname\",\"fontsize\",\"fontcolor\",\"backgroundcolor\",\"align\",\"display\",\"tablerows\",\"tablecolumns\",\"tablecellhorizontalalign\",\"tablecellverticalalign\",\"styles\"],z={alignments:{id:\"Alignments\",icon:\"e-alignments\",tooltip:\"Alignments\",command:\"Alignments\",subCommand:\"Alignments\"},justifyleft:{id:\"JustifyLeft\",icon:\"e-justify-left\",tooltip:\"JustifyLeft\",command:\"Alignments\",subCommand:\"JustifyLeft\"},justifycenter:{id:\"JustifyCenter\",icon:\"e-justify-center\",tooltip:\"JustifyCenter\",command:\"Alignments\",subCommand:\"JustifyCenter\"},justifyright:{id:\"JustifyRight\",icon:\"e-justify-right\",tooltip:\"JustifyRight\",command:\"Alignments\",subCommand:\"JustifyRight\"},justifyfull:{id:\"JustifyFull\",icon:\"e-justify-full\",tooltip:\"JustifyFull\",command:\"Alignments\",subCommand:\"JustifyFull\"},fontname:{id:\"FontName\",icon:\"e-font-name\",tooltip:\"Font Name\",command:\"Font\",subCommand:\"FontName\"},fontsize:{id:\"FontSize\",icon:\"e-font-size\",tooltip:\"Font Size\",command:\"Font\",subCommand:\"FontSize\"},fontcolor:{id:\"FontColor\",icon:\"e-font-color\",tooltip:\"Font Color\",command:\"Font\",subCommand:\"FontColor\",value:\"#ff0000ff\"},backgroundcolor:{id:\"BackgroundColor\",icon:\"e-background-color\",tooltip:\"Background Color\",command:\"Font\",subCommand:\"BackgroundColor\",value:\"#ffff00ff\"},bold:{id:\"Bold\",icon:\"e-bold\",tooltip:\"Bold\",command:\"Style\",subCommand:\"Bold\"},italic:{id:\"Italic\",icon:\"e-italic\",tooltip:\"Italic\",command:\"Style\",subCommand:\"Italic\"},underline:{id:\"Underline\",icon:\"e-underline\",tooltip:\"Underline\",command:\"Style\",subCommand:\"Underline\"},strikethrough:{id:\"StrikeThrough\",icon:\"e-strike-through\",tooltip:\"StrikeThrough\",command:\"Style\",subCommand:\"StrikeThrough\"},clearformat:{id:\"ClearFormat\",icon:\"e-clear-format\",tooltip:\"Clear Format\",command:\"Clear\",subCommand:\"ClearFormat\"},clearall:{id:\"ClearAll\",icon:\"e-clear-all\",tooltip:\"Clear All\",command:\"Clear\",subCommand:\"ClearAll\"},cut:{id:\"Cut\",icon:\"e-cut\",tooltip:\"Cut\",command:\"ClipBoard\",subCommand:\"Cut\"},copy:{id:\"Copy\",icon:\"e-copy\",tooltip:\"Copy\",command:\"ClipBoard\",subCommand:\"Copy\"},paste:{id:\"Paste\",icon:\"e-paste\",tooltip:\"Paste\",command:\"ClipBoard\",subCommand:\"Paste\"},unorderedlist:{id:\"UnorderedList\",icon:\"e-unorder-list\",tooltip:\"Bulleted List\",command:\"Lists\",subCommand:\"UL\"},orderedlist:{id:\"OrderedList\",icon:\"e-order-list\",tooltip:\"Numbered List\",command:\"Lists\",subCommand:\"OL\"},indent:{id:\"Indent\",icon:\"e-indent\",tooltip:\"Increase Indent\",command:\"Indents\",subCommand:\"Indent\"},outdent:{id:\"Outdent\",icon:\"e-outdent\",tooltip:\"Decrease Indent\",command:\"Indents\",subCommand:\"Outdent\"},undo:{id:\"Undo\",icon:\"e-undo\",tooltip:\"Undo\",command:\"Actions\",subCommand:\"Undo\"},redo:{id:\"Redo\",icon:\"e-redo\",tooltip:\"Redo\",command:\"Actions\",subCommand:\"Redo\"},superscript:{id:\"SuperScript\",icon:\"e-super-script\",tooltip:\"Superscript\",command:\"Effects\",subCommand:\"SuperScript\"},subscript:{id:\"SubScript\",icon:\"e-sub-script\",tooltip:\"Subscript\",command:\"Effects\",subCommand:\"SubScript\"},createlink:{id:\"CreateLink\",icon:\"e-create-link\",tooltip:\"Insert Hyperlink\",command:\"Links\",subCommand:\"CreateLink\"},openlink:{id:\"OpenLink\",icon:\"e-open-link\",tooltip:\"Open Link\",command:\"Links\",subCommand:\"OpenLink\"},editlink:{id:\"EditLink\",icon:\"e-edit-link\",tooltip:\"Edit Link\",command:\"Links\",subCommand:\"EditLink\"},removelink:{id:\"RemoveLink\",icon:\"e-remove-link\",tooltip:\"Remove Link\",command:\"Links\",subCommand:\"RemoveLink\"},image:{id:\"Image\",icon:\"e-image\",tooltip:\"Insert Image\",command:\"Images\",subCommand:\"Image\"},filemanager:{id:\"FileManager\",icon:\"e-rte-file-manager\",tooltip:\"File Manager\",command:\"Files\",subCommand:\"File\"},createtable:{id:\"CreateTable\",icon:\"e-create-table\",tooltip:\"Create Table\",command:\"Table\",subCommand:\"CreateTable\"},removetable:{id:\"removeTable\",icon:\"e-remove-table\",tooltip:\"Remove Table\",command:\"removeTable\",subCommand:\"removeTable\"},replace:{id:\"Replace\",icon:\"e-replace\",tooltip:\"Replace\",command:\"Images\",subCommand:\"Replace\"},align:{id:\"Align\",icon:\"e-align\",tooltip:\"Align\",command:\"Images\",subCommand:\"Align\"},caption:{id:\"Caption\",icon:\"e-caption\",tooltip:\"Image Caption\",command:\"Images\",subCommand:\"Caption\"},remove:{id:\"Remove\",icon:\"e-remove\",tooltip:\"Remove\",command:\"Images\",subCommand:\"Remove\"},openimagelink:{id:\"OpenImageLink\",icon:\"e-open-link\",tooltip:\"Open Link\",command:\"Images\",subCommand:\"OpenImageLink\"},editimagelink:{id:\"EditImageLink\",icon:\"e-edit-link\",tooltip:\"Edit Link\",command:\"Images\",subCommand:\"EditImageLink\"},removeimagelink:{id:\"RemoveImageLink\",icon:\"e-remove-link\",tooltip:\"Remove Link\",command:\"Images\",subCommand:\"RemoveImageLink\"},insertlink:{id:\"InsertLink\",icon:\"e-insert-link\",tooltip:\"Insert Link\",command:\"Images\",subCommand:\"InsertLink\"},display:{id:\"Display\",icon:\"e-display\",tooltip:\"Display\",command:\"Images\",subCommand:\"Display\"},alttext:{id:\"AltText\",icon:\"e-alt-text\",tooltip:\"Alternative Text\",command:\"Images\",subCommand:\"AltText\"},dimension:{id:\"Dimension\",icon:\"e-dimension\",tooltip:\"Change Size\",command:\"Images\",subCommand:\"Dimension\"},fullscreen:{id:\"Maximize\",icon:\"e-maximize\",tooltip:\"Maximize\",command:\"View\",subCommand:\"Maximize\"},maximize:{id:\"Maximize\",icon:\"e-maximize\",tooltip:\"Maximize\",command:\"FullScreen\",subCommand:\"Maximize\"},minimize:{id:\"Minimize\",icon:\"e-minimize\",tooltip:\"Minimize\",command:\"FullScreen\",subCommand:\"Minimize\"},lowercase:{id:\"LowerCase\",icon:\"e-lower-case\",tooltip:\"Lower Case\",command:\"Casing\",subCommand:\"LowerCase\"},uppercase:{id:\"UpperCase\",icon:\"e-upper-case\",tooltip:\"Upper Case\",command:\"Casing\",subCommand:\"UpperCase\"},print:{id:\"Print\",icon:\"e-print\",tooltip:\"Print\",command:\"Print\",subCommand:\"Print\"},formats:{id:\"Formats\",icon:\"e-formats\",tooltip:\"Formats\",command:\"Formats\",subCommand:\"Formats\"},sourcecode:{id:\"SourceCode\",icon:\"e-source-code\",tooltip:\"Source Code\",command:\"SourceCode\",subCommand:\"SourceCode\"},preview:{id:\"Preview\",icon:\"e-preview\",tooltip:\"Preview\",command:\"Preview\",subCommand:\"Preview\"},viewside:{id:\"ViewSide\",icon:\"e-view-side\",tooltip:\"ViewSide\",command:\"ViewSide\",subCommand:\"ViewSide\"},insertcode:{id:\"InsertCode\",icon:\"e-insert-code\",tooltip:\"Insert Code\",command:\"Formats\",subCommand:\"Pre\"},tableheader:{id:\"TableHeader\",icon:\"e-table-header\",tooltip:\"Table Header\",command:\"Table\",subCommand:\"TableHeader\"},tableremove:{id:\"TableRemove\",icon:\"e-table-remove\",tooltip:\"Table Remove\",command:\"Table\",subCommand:\"TableRemove\"},tablerows:{id:\"TableRows\",icon:\"e-table-rows\",tooltip:\"Table Rows\",command:\"Table\",subCommand:\"TableRows\"},tablecolumns:{id:\"TableColumns\",icon:\"e-table-columns\",tooltip:\"Table Columns\",command:\"Table\",subCommand:\"TableColumns\"},tablecellbackground:{id:\"TableCellBackground\",icon:\"e-table-cell-background\",tooltip:\"Table Cell Background\",command:\"Table\",subCommand:\"TableCellBackground\"},tablecellhorizontalalign:{id:\"TableCellHorizontalAlign\",icon:\"e-table-cell-horizontalAlign\",tooltip:\"Table Cell HorizontalAlign\",command:\"Table\",subCommand:\"TableCellHorizontalAlign\"},tablecellverticalalign:{id:\"TableCellVerticalAlign\",icon:\"e-table-cell-verticalAlign\",tooltip:\"Table Cell VerticalAlign\",command:\"Table\",subCommand:\"TableCellVerticalAlign\"},tableeditproperties:{id:\"TableEditProperties\",icon:\"e-table-edit-properties\",tooltip:\"Table Edit Properties\",command:\"Table\",subCommand:\"TableEditProperties\"},styles:{id:\"Styles\",icon:\"e-table-styles\",tooltip:\"Styles\",command:\"Table\",subCommand:\"Styles\"}},F=[{locale:\"alignmentsDropDownLeft\",value:\"JustifyLeft\"},{locale:\"alignmentsDropDownCenter\",value:\"JustifyCenter\"},{locale:\"alignmentsDropDownRight\",value:\"JustifyRight\"},{locale:\"alignmentsDropDownJustify\",value:\"JustifyFull\"}],q=[{iconCss:\"e-icons e-justify-left\",text:\"Align Left\",command:\"Alignments\",subCommand:\"JustifyLeft\"},{iconCss:\"e-icons e-justify-center\",text:\"Align Center\",command:\"Alignments\",subCommand:\"JustifyCenter\"},{iconCss:\"e-icons e-justify-right\",text:\"Align Right\",command:\"Alignments\",subCommand:\"JustifyRight\"},{iconCss:\"e-icons e-justify-full\",text:\"Align Justify\",command:\"Alignments\",subCommand:\"JustifyFull\"}],U=[{iconCss:\"e-icons e-justify-left\",command:\"Images\",subCommand:\"JustifyLeft\"},{iconCss:\"e-icons e-justify-center\",command:\"Images\",subCommand:\"JustifyCenter\"},{iconCss:\"e-icons e-justify-right\",command:\"Images\",subCommand:\"JustifyRight\"}],V=[{locale:\"imageDisplayDropDownInline\",value:\"Inline\"},{locale:\"imageDisplayDropDownBreak\",value:\"Break\"}],Q=[{text:\"Inline\",cssClass:\"e-inline\",command:\"Images\",subCommand:\"Inline\"},{text:\"Break\",cssClass:\"e-break\",command:\"Images\",subCommand:\"Break\"}],G=[{locale:\"tableInsertRowDropDownBefore\",value:\"InsertRowBefore\"},{locale:\"tableInsertRowDropDownAfter\",value:\"InsertRowAfter\"},{locale:\"tableInsertRowDropDownDelete\",value:\"DeleteRow\"}],K=[{iconCss:\"e-icons e-insert-row-before\",text:\"Insert row before\",command:\"Table\",subCommand:\"InsertRowBefore\"},{iconCss:\"e-icons e-insert-row-after\",text:\"Insert row after\",command:\"Table\",subCommand:\"InsertRowAfter\"},{iconCss:\"e-icons e-delete-row\",text:\"Delete row\",command:\"Table\",subCommand:\"DeleteRow\"}],X=[{locale:\"tableInsertColumnDropDownLeft\",value:\"InsertColumnLeft\"},{locale:\"tableInsertColumnDropDownRight\",value:\"InsertColumnRight\"},{locale:\"tableInsertColumnDropDownDelete\",value:\"DeleteColumn\"}],Y=[{iconCss:\"e-icons e-insert-column-left\",text:\"Insert column left\",command:\"Table\",subCommand:\"InsertColumnLeft\"},{iconCss:\"e-icons e-insert-column-right\",text:\"Insert column right\",command:\"Table\",subCommand:\"InsertColumnRight\"},{iconCss:\"e-icons e-delete-column\",text:\"Delete column\",command:\"Table\",subCommand:\"DeleteColumn\"}],J=[{locale:\"tableVerticalAlignDropDownTop\",value:\"AlignTop\"},{locale:\"tableVerticalAlignDropDownMiddle\",value:\"AlignMiddle\"},{locale:\"tableVerticalAlignDropDownBottom\",value:\"AlignBottom\"}],$=[{iconCss:\"e-icons e-align-top\",text:\"Align Top\",command:\"Table\",subCommand:\"AlignTop\"},{iconCss:\"e-icons e-align-middle\",text:\"Align Middle\",command:\"Table\",subCommand:\"AlignMiddle\"},{iconCss:\"e-icons e-align-bottom\",text:\"Align Bottom\",command:\"Table\",subCommand:\"AlignBottom\"}],Z=[{locale:\"tableStylesDropDownDashedBorder\",value:\"Dashed\"},{locale:\"tableStylesDropDownAlternateRows\",value:\"Alternate\"}],ee=[{text:\"Dashed Borders\",cssClass:\"e-dashed-borders\",command:\"Table\",subCommand:\"Dashed\"},{text:\"Alternate Rows\",cssClass:\"e-alternate-rows\",command:\"Table\",subCommand:\"Alternate\"}];function te(e,t,n){for(var i=0;t.length>i;i++)if(t[i].value===n.subCommand)return e.localeObj.getConstant(t[i].locale);return n.text}var ne=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ie=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},re=[\"Bold\",\"Italic\",\"Underline\",\"|\",\"Formats\",\"Alignments\",\"OrderedList\",\"UnorderedList\",\"|\",\"CreateLink\",\"Image\",\"|\",\"SourceCode\",\"Undo\",\"Redo\"],oe=[{text:\"Segoe UI\",value:\"Segoe UI\",cssClass:\"e-segoe-ui\"},{text:\"Arial\",value:\"Arial,Helvetica,sans-serif\",cssClass:\"e-arial\"},{text:\"Georgia\",value:\"Georgia,serif\",cssClass:\"e-georgia\"},{text:\"Impact\",value:\"Impact,Charcoal,sans-serif\",cssClass:\"e-impact\"},{text:\"Tahoma\",value:\"Tahoma,Geneva,sans-serif\",cssClass:\"e-tahoma\"},{text:\"Times New Roman\",value:\"Times New Roman,Times,serif\",cssClass:\"e-times-new-roman\"},{text:\"Verdana\",value:\"Verdana,Geneva,sans-serif\",cssClass:\"e-verdana\"}],ae=[{text:\"8 pt\",value:\"8pt\"},{text:\"10 pt\",value:\"10pt\"},{text:\"12 pt\",value:\"12pt\"},{text:\"14 pt\",value:\"14pt\"},{text:\"18 pt\",value:\"18pt\"},{text:\"24 pt\",value:\"24pt\"},{text:\"36 pt\",value:\"36pt\"}],se=[{text:\"Paragraph\",value:\"P\",cssClass:\"e-paragraph\"},{text:\"Code\",value:\"Pre\",cssClass:\"e-code\"},{text:\"Quotation\",value:\"BlockQuote\",cssClass:\"e-quote\"},{text:\"Heading 1\",value:\"H1\",cssClass:\"e-h1\"},{text:\"Heading 2\",value:\"H2\",cssClass:\"e-h2\"},{text:\"Heading 3\",value:\"H3\",cssClass:\"e-h3\"},{text:\"Heading 4\",value:\"H4\",cssClass:\"e-h4\"}],le={Custom:[\"\",\"#000000\",\"#e7e6e6\",\"#44546a\",\"#4472c4\",\"#ed7d31\",\"#a5a5a5\",\"#ffc000\",\"#70ad47\",\"#ff0000\",\"#f2f2f2\",\"#808080\",\"#cfcdcd\",\"#d5dce4\",\"#d9e2f3\",\"#fbe4d5\",\"#ededed\",\"#fff2cc\",\"#e2efd9\",\"#ffcccc\",\"#d9d9d9\",\"#595959\",\"#aeaaaa\",\"#acb9ca\",\"#b4c6e7\",\"#f7caac\",\"#dbdbdb\",\"#ffe599\",\"#c5e0b3\",\"#ff8080\",\"#bfbfbf\",\"#404040\",\"#747070\",\"#8496b0\",\"#8eaadb\",\"#f4b083\",\"#c9c9c9\",\"#ffd966\",\"#a8d08d\",\"#ff3333\",\"#a6a6a6\",\"#262626\",\"#3b3838\",\"#323e4f\",\"#2f5496\",\"#c45911\",\"#7b7b7b\",\"#bf8f00\",\"#538135\",\"#b30000\",\"#7f7f7f\",\"#0d0d0d\",\"#161616\",\"#212934\",\"#1f3763\",\"#823b0b\",\"#525252\",\"#7f5f00\",\"#375623\",\"#660000\"]},ce={Custom:[\"\",\"#000000\",\"#ffff00\",\"#00ff00\",\"#00ffff\",\"#0000ff\",\"#ff0000\",\"#000080\",\"#800080\",\"#996633\",\"#f2f2f2\",\"#808080\",\"#ffffcc\",\"#b3ffb3\",\"#ccffff\",\"#ccccff\",\"#ffcccc\",\"#ccccff\",\"#ff80ff\",\"#f2e6d9\",\"#d9d9d9\",\"#595959\",\"#ffff80\",\"#80ff80\",\"#b3ffff\",\"#8080ff\",\"#ff8080\",\"#8080ff\",\"#ff00ff\",\"#dfbf9f\",\"#bfbfbf\",\"#404040\",\"#ffff33\",\"#33ff33\",\"#33ffff\",\"#3333ff\",\"#ff3333\",\"#0000b3\",\"#b300b3\",\"#c68c53\",\"#a6a6a6\",\"#262626\",\"#e6e600\",\"#00b300\",\"#009999\",\"#000099\",\"#b30000\",\"#000066\",\"#660066\",\"#86592d\",\"#7f7f7f\",\"#0d0d0d\",\"#999900\",\"#006600\",\"#006666\",\"#000066\",\"#660000\",\"#00004d\",\"#4d004d\",\"#734d26\"]},de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)(!0)],t.prototype,\"enable\",void 0),ie([Object(l.s)(!0)],t.prototype,\"enableFloating\",void 0),ie([Object(l.s)(r.Expand)],t.prototype,\"type\",void 0),ie([Object(l.s)(re)],t.prototype,\"items\",void 0),ie([Object(l.s)({})],t.prototype,\"itemConfigs\",void 0),t}(l.e),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)([\".jpeg\",\".jpg\",\".png\"])],t.prototype,\"allowedTypes\",void 0),ie([Object(l.s)(\"inline\")],t.prototype,\"display\",void 0),ie([Object(l.s)(\"Blob\")],t.prototype,\"saveFormat\",void 0),ie([Object(l.s)(\"auto\")],t.prototype,\"width\",void 0),ie([Object(l.s)(\"auto\")],t.prototype,\"height\",void 0),ie([Object(l.s)(null)],t.prototype,\"saveUrl\",void 0),ie([Object(l.s)(null)],t.prototype,\"path\",void 0),ie([Object(l.s)(!0)],t.prototype,\"resize\",void 0),ie([Object(l.s)(null)],t.prototype,\"removeUrl\",void 0),ie([Object(l.s)(0)],t.prototype,\"minWidth\",void 0),ie([Object(l.s)(null)],t.prototype,\"maxWidth\",void 0),ie([Object(l.s)(0)],t.prototype,\"minHeight\",void 0),ie([Object(l.s)(null)],t.prototype,\"maxHeight\",void 0),ie([Object(l.s)(!1)],t.prototype,\"resizeByPercent\",void 0),t}(l.e),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.g)({getImageUrl:null,url:null,uploadUrl:null},I.a)],t.prototype,\"ajaxSettings\",void 0),ie([Object(l.s)(!1)],t.prototype,\"allowDragAndDrop\",void 0),ie([Object(l.g)({visible:!0,file:[\"Open\",\"|\",\"Cut\",\"Copy\",\"|\",\"Delete\",\"Rename\",\"|\",\"Details\"],folder:[\"Open\",\"|\",\"Cut\",\"Copy\",\"Paste\",\"|\",\"Delete\",\"Rename\",\"|\",\"Details\"],layout:[\"SortBy\",\"View\",\"Refresh\",\"|\",\"Paste\",\"|\",\"NewFolder\",\"Upload\",\"|\",\"Details\",\"|\",\"SelectAll\"]},R.a)],t.prototype,\"contextMenuSettings\",void 0),ie([Object(l.s)(\"\")],t.prototype,\"cssClass\",void 0),ie([Object(l.g)({},P.a)],t.prototype,\"detailsViewSettings\",void 0),ie([Object(l.s)(!1)],t.prototype,\"enable\",void 0),ie([Object(l.g)({maxWidth:\"650px\",minWidth:\"240px\",visible:!0},B.a)],t.prototype,\"navigationPaneSettings\",void 0),ie([Object(l.s)(\"/\")],t.prototype,\"path\",void 0),ie([Object(l.s)(null)],t.prototype,\"rootAliasName\",void 0),ie([Object(l.g)({},A.a)],t.prototype,\"searchSettings\",void 0),ie([Object(l.s)(!0)],t.prototype,\"showFileExtension\",void 0),ie([Object(l.s)(!1)],t.prototype,\"showHiddenItems\",void 0),ie([Object(l.s)(!0)],t.prototype,\"showThumbnail\",void 0),ie([Object(l.s)(\"Ascending\")],t.prototype,\"sortOrder\",void 0),ie([Object(l.g)({visible:!0,items:[\"NewFolder\",\"Upload\",\"Cut\",\"Copy\",\"Paste\",\"Delete\",\"Download\",\"Rename\",\"SortBy\",\"Refresh\",\"Selection\",\"View\",\"Details\"]},_.a)],t.prototype,\"toolbarSettings\",void 0),ie([Object(l.g)({autoUpload:!0,minFileSize:0,maxFileSize:3e7,allowedExtensions:\"\",autoClose:!1},H.a)],t.prototype,\"uploadSettings\",void 0),ie([Object(l.s)(\"LargeIcons\")],t.prototype,\"view\",void 0),t}(l.e),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)(\"100%\")],t.prototype,\"width\",void 0),ie([Object(l.s)(ee)],t.prototype,\"styles\",void 0),ie([Object(l.s)(!0)],t.prototype,\"resize\",void 0),ie([Object(l.s)(0)],t.prototype,\"minWidth\",void 0),ie([Object(l.s)(null)],t.prototype,\"maxWidth\",void 0),t}(l.e),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)(!0)],t.prototype,\"enable\",void 0),ie([Object(l.s)(!1)],t.prototype,\"showOnRightClick\",void 0),ie([Object(l.s)(\"hide\")],t.prototype,\"actionOnScroll\",void 0),ie([Object(l.s)([\"Open\",\"Edit\",\"UnLink\"])],t.prototype,\"link\",void 0),ie([Object(l.s)([\"Replace\",\"Align\",\"Caption\",\"Remove\",\"-\",\"InsertLink\",\"OpenImageLink\",\"EditImageLink\",\"RemoveImageLink\",\"Display\",\"AltText\",\"Dimension\"])],t.prototype,\"image\",void 0),ie([Object(l.s)([\"Cut\",\"Copy\",\"Paste\"])],t.prototype,\"text\",void 0),ie([Object(l.s)([\"TableHeader\",\"TableRows\",\"TableColumns\",\"BackgroundColor\",\"-\",\"TableRemove\",\"Alignments\",\"TableCellVerticalAlign\",\"Styles\"])],t.prototype,\"table\",void 0),t}(l.e),fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)(!1)],t.prototype,\"prompt\",void 0),ie([Object(l.s)(null)],t.prototype,\"deniedAttrs\",void 0),ie([Object(l.s)([\"background\",\"background-color\",\"border\",\"border-bottom\",\"border-left\",\"border-radius\",\"border-right\",\"border-style\",\"border-top\",\"border-width\",\"clear\",\"color\",\"cursor\",\"direction\",\"display\",\"float\",\"font\",\"font-family\",\"font-size\",\"font-weight\",\"font-style\",\"height\",\"left\",\"line-height\",\"margin\",\"margin-top\",\"margin-left\",\"margin-right\",\"margin-bottom\",\"max-height\",\"max-width\",\"min-height\",\"min-width\",\"overflow\",\"overflow-x\",\"overflow-y\",\"padding\",\"padding-bottom\",\"padding-left\",\"padding-right\",\"padding-top\",\"position\",\"right\",\"table-layout\",\"text-align\",\"text-decoration\",\"text-indent\",\"top\",\"vertical-align\",\"visibility\",\"white-space\",\"width\"])],t.prototype,\"allowedStyleProps\",void 0),ie([Object(l.s)(null)],t.prototype,\"deniedTags\",void 0),ie([Object(l.s)(!0)],t.prototype,\"keepFormat\",void 0),ie([Object(l.s)(!1)],t.prototype,\"plainText\",void 0),t}(l.e),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)(null)],t.prototype,\"default\",void 0),ie([Object(l.s)(\"65px\")],t.prototype,\"width\",void 0),ie([Object(l.s)(oe)],t.prototype,\"items\",void 0),t}(l.e),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)(null)],t.prototype,\"default\",void 0),ie([Object(l.s)(\"35px\")],t.prototype,\"width\",void 0),ie([Object(l.s)(ae)],t.prototype,\"items\",void 0),t}(l.e),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)(null)],t.prototype,\"default\",void 0),ie([Object(l.s)(\"65px\")],t.prototype,\"width\",void 0),ie([Object(l.s)(se)],t.prototype,\"types\",void 0),t}(l.e),ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)(\"#ff0000\")],t.prototype,\"default\",void 0),ie([Object(l.s)(\"Palette\")],t.prototype,\"mode\",void 0),ie([Object(l.s)(10)],t.prototype,\"columns\",void 0),ie([Object(l.s)(le)],t.prototype,\"colorCode\",void 0),ie([Object(l.s)(!1)],t.prototype,\"modeSwitcher\",void 0),t}(l.e),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ne(t,e),ie([Object(l.s)(\"#ffff00\")],t.prototype,\"default\",void 0),ie([Object(l.s)(\"Palette\")],t.prototype,\"mode\",void 0),ie([Object(l.s)(10)],t.prototype,\"columns\",void 0),ie([Object(l.s)(ce)],t.prototype,\"colorCode\",void 0),ie([Object(l.s)(!1)],t.prototype,\"modeSwitcher\",void 0),t}(l.e),Oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Se=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),Se([Object(l.s)([])],t.prototype,\"styles\",void 0),Se([Object(l.s)([])],t.prototype,\"scripts\",void 0),t}(l.e),we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),Se([Object(l.s)(!1)],t.prototype,\"enable\",void 0),Se([Object(l.s)(null)],t.prototype,\"attributes\",void 0),Se([Object(l.g)({},ke)],t.prototype,\"resources\",void 0),t}(l.e),Te=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ee=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Te(t,e),Ee([Object(l.s)(!1)],t.prototype,\"enable\",void 0),Ee([Object(l.s)(!0)],t.prototype,\"onSelection\",void 0),t}(l.e),xe={alignments:\"Alignments\",justifyLeft:\"Align Left\",justifyCenter:\"Align Center\",justifyRight:\"Align Right\",justifyFull:\"Align Justify\",fontName:\"Font Name\",fontSize:\"Font Size\",fontColor:\"Font Color\",backgroundColor:\"Background Color\",bold:\"Bold\",italic:\"Italic\",underline:\"Underline\",strikethrough:\"Strikethrough\",clearFormat:\"Clear Format\",clearAll:\"Clear All\",cut:\"Cut\",copy:\"Copy\",paste:\"Paste\",unorderedList:\"Bulleted List\",orderedList:\"Numbered List\",indent:\"Increase Indent\",outdent:\"Decrease Indent\",undo:\"Undo\",redo:\"Redo\",superscript:\"Superscript\",subscript:\"Subscript\",createLink:\"Insert Link\",openLink:\"Open Link\",editLink:\"Edit Link\",removeLink:\"Remove Link\",image:\"Insert Image\",replace:\"Replace\",align:\"Align\",caption:\"Image Caption\",remove:\"Remove\",insertLink:\"Insert Link\",display:\"Display\",altText:\"Alternative Text\",dimension:\"Change Size\",fullscreen:\"Maximize\",maximize:\"Maximize\",minimize:\"Minimize\",lowerCase:\"Lower Case\",upperCase:\"Upper Case\",print:\"Print\",formats:\"Formats\",sourcecode:\"Code View\",preview:\"Preview\",viewside:\"ViewSide\",insertCode:\"Insert Code\",linkText:\"Display Text\",linkTooltipLabel:\"Title\",linkWebUrl:\"Web Address\",linkTitle:\"Enter a title\",linkurl:\"http://example.com\",linkOpenInNewWindow:\"Open Link in New Window\",linkHeader:\"Insert Link\",dialogInsert:\"Insert\",dialogCancel:\"Cancel\",dialogUpdate:\"Update\",imageHeader:\"Insert Image\",imageLinkHeader:\"You can also provide a link from the web\",mdimageLink:\"Please provide a URL for your image\",imageUploadMessage:\"Drop image here or browse to upload\",imageDeviceUploadMessage:\"Click here to upload\",imageAlternateText:\"Alternate Text\",alternateHeader:\"Alternative Text\",browse:\"Browse\",imageUrl:\"http://example.com/image.png\",imageCaption:\"Caption\",imageSizeHeader:\"Image Size\",imageHeight:\"Height\",imageWidth:\"Width\",textPlaceholder:\"Enter Text\",inserttablebtn:\"Insert Table\",tabledialogHeader:\"Insert Table\",tableWidth:\"Width\",cellpadding:\"Cell Padding\",cellspacing:\"Cell Spacing\",columns:\"Number of columns\",rows:\"Number of rows\",tableRows:\"Table Rows\",tableColumns:\"Table Columns\",tableCellHorizontalAlign:\"Table Cell Horizontal Align\",tableCellVerticalAlign:\"Table Cell Vertical Align\",createTable:\"Create Table\",removeTable:\"Remove Table\",tableHeader:\"Table Header\",tableRemove:\"Table Remove\",tableCellBackground:\"Table Cell Background\",tableEditProperties:\"Table Edit Properties\",styles:\"Styles\",insertColumnLeft:\"Insert Column Left\",insertColumnRight:\"Insert Column Right\",deleteColumn:\"Delete Column\",insertRowBefore:\"Insert Row Before\",insertRowAfter:\"Insert Row After\",deleteRow:\"Delete Row\",tableEditHeader:\"Edit Table\",TableHeadingText:\"Heading\",TableColText:\"Col\",imageInsertLinkHeader:\"Insert Link\",editImageHeader:\"Edit Image\",alignmentsDropDownLeft:\"Align Left\",alignmentsDropDownCenter:\"Align Center\",alignmentsDropDownRight:\"Align Right\",alignmentsDropDownJustify:\"Align Justify\",imageDisplayDropDownInline:\"Inline\",imageDisplayDropDownBreak:\"Break\",tableInsertRowDropDownBefore:\"Insert row before\",tableInsertRowDropDownAfter:\"Insert row after\",tableInsertRowDropDownDelete:\"Delete row\",tableInsertColumnDropDownLeft:\"Insert column left\",tableInsertColumnDropDownRight:\"Insert column right\",tableInsertColumnDropDownDelete:\"Delete column\",tableVerticalAlignDropDownTop:\"Align Top\",tableVerticalAlignDropDownMiddle:\"Align Middle\",tableVerticalAlignDropDownBottom:\"Align Bottom\",tableStylesDropDownDashedBorder:\"Dashed Borders\",tableStylesDropDownAlternateRows:\"Alternate Rows\",pasteFormat:\"Paste Format\",pasteFormatContent:\"Choose the formatting action\",plainText:\"Plain Text\",cleanFormat:\"Clean\",keepFormat:\"Keep\",pasteDialogOk:\"OK\",pasteDialogCancel:\"Cancel\",fileManager:\"File Manager\",fileDialogHeader:\"File Browser\"},Ne={alignments:\"alignments\",justifyleft:\"justifyLeft\",justifycenter:\"justifyCenter\",justifyright:\"justifyRight\",justifyfull:\"justifyFull\",fontname:\"fontName\",fontsize:\"fontSize\",fontcolor:\"fontColor\",backgroundcolor:\"backgroundColor\",bold:\"bold\",italic:\"italic\",underline:\"underline\",strikethrough:\"strikethrough\",clearformat:\"clearFormat\",clearall:\"clearAll\",cut:\"cut\",copy:\"copy\",paste:\"paste\",unorderedlist:\"unorderedList\",orderedlist:\"orderedList\",indent:\"indent\",outdent:\"outdent\",undo:\"undo\",redo:\"redo\",superscript:\"superscript\",subscript:\"subscript\",createlink:\"createLink\",openlink:\"openLink\",editlink:\"editLink\",removelink:\"removeLink\",openimagelink:\"openLink\",editimagelink:\"editLink\",removeimagelink:\"removeLink\",image:\"image\",replace:\"replace\",align:\"align\",caption:\"caption\",remove:\"remove\",insertlink:\"insertLink\",display:\"display\",alttext:\"altText\",dimension:\"dimension\",fullscreen:\"fullscreen\",maximize:\"maximize\",minimize:\"minimize\",lowercase:\"lowerCase\",uppercase:\"upperCase\",print:\"print\",formats:\"formats\",sourcecode:\"sourcecode\",preview:\"preview\",viewside:\"viewside\",insertcode:\"insertCode\",tablerows:\"tableRows\",tablecolumns:\"tableColumns\",tablecellhorizontalalign:\"tableCellHorizontalAlign\",tablecellverticalalign:\"tableCellVerticalAlign\",createtable:\"createTable\",removetable:\"removeTable\",tableheader:\"tableHeader\",tableremove:\"tableRemove\",tablecellbackground:\"tableCellBackground\",tableeditproperties:\"tableEditProperties\",styles:\"styles\",insertcolumnleft:\"insertColumnLeft\",insertcolumnright:\"insertColumnRight\",deletecolumn:\"deleteColumn\",aligntop:\"AlignTop\",alignmiddle:\"AlignMiddle\",alignbottom:\"AlignBottom\",insertrowbefore:\"insertRowBefore\",insertrowafter:\"insertRowAfter\",deleterow:\"deleteRow\"};function Le(e,t,n,i){var r;n?r=t.contentModule.getDocument().querySelector(\"body\"):r=t.element;if(Object.keys(e).length)for(var o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];if(\"class\"===s)r.classList.add(e[s]);else if(\"disabled\"===s&&\"disabled\"===e[s])t.enabled=!1,t.setEnable();else if(\"readonly\"===s&&\"readonly\"===e[s])t.readonly=!0,t.setReadOnly(i);else if(\"style\"===s)r.setAttribute(\"style\",e[s]);else if(\"tabindex\"===s)t.inputElement.setAttribute(\"tabindex\",e[s]);else if(\"placeholder\"===s)t.placeholder=e[s],t.setPlaceHolder();else{[\"name\",\"required\"].indexOf(s)>-1?t.valueContainer.setAttribute(s,e[s]):r.setAttribute(s,e[s])}}}var De=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.showFullScreen=function(e){!0===this.parent.toolbarSettings.enable&&\"Markdown\"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars(),this.scrollableParent=Object(c.c)(this.parent.element),this.parent.element.classList.contains(\"e-rte-full-screen\")||(this.parent.trigger(\"actionBegin\",{requestType:\"Maximize\",targetItem:\"Maximize\",args:e}),this.parent.toolbarSettings.enableFloating&&!this.parent.inlineMode.enable&&this.parent.toolbarSettings.enable&&(this.parent.getToolbarElement().style.width=\"100%\",this.parent.getToolbarElement().style.top=\"0px\"),this.parent.element.classList.add(\"e-rte-full-screen\"),this.toggleParentOverflow(!0),this.parent.setContentHeight(),this.parent.toolbarModule&&(this.parent.getBaseToolbarObject().toolbarObj.items[0].properties||this.parent.getBaseToolbarObject().toolbarObj.removeItems(0),l.d.isDevice&&this.parent.toolbarModule.removeFixedTBarClass(),this.parent.toolbarModule.updateItem({targetItem:\"Maximize\",updateItem:\"Minimize\",baseToolbar:this.parent.getBaseToolbarObject()})),this.parent.trigger(\"actionComplete\",{requestType:\"Maximize\",targetItem:\"Maximize\",args:e}))},e.prototype.hideFullScreen=function(e){if(!0===this.parent.toolbarSettings.enable&&\"Markdown\"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars(),this.parent.element.classList.contains(\"e-rte-full-screen\")){this.parent.element.classList.remove(\"e-rte-full-screen\");for(var t=document.querySelectorAll(\".e-rte-overflow\"),n=0;n<t.length;n++)Object(l.hb)([t[n]],[\"e-rte-overflow\"]);this.parent.trigger(\"actionBegin\",{requestType:\"Minimize\",targetItem:\"Minimize\",args:e}),this.parent.setContentHeight(),this.parent.toolbarModule&&(this.parent.getBaseToolbarObject().toolbarObj.items[0].properties||this.parent.getBaseToolbarObject().toolbarObj.removeItems(0),this.parent.toolbarModule.updateItem({targetItem:\"Minimize\",updateItem:\"Maximize\",baseToolbar:this.parent.getBaseToolbarObject()}),l.d.isDevice&&this.parent.inlineMode.enable&&this.parent.toolbarModule.addFixedTBarClass()),this.parent.trigger(\"actionComplete\",{requestType:\"Minimize\",targetItem:\"Minimize\",args:e})}},e.prototype.toggleParentOverflow=function(e){if(!Object(l.W)(this.scrollableParent))for(var t=0;t<this.scrollableParent.length;t++)if(\"#document\"===this.scrollableParent[t].nodeName){var n=document.querySelector(\"body\");Object(l.v)([n],[\"e-rte-overflow\"])}else{n=this.scrollableParent[t];Object(l.v)([n],[\"e-rte-overflow\"])}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case\"full-screen\":this.showFullScreen(e.args),t.preventDefault();break;case\"escape\":this.hideFullScreen(e.args),t.preventDefault()}},e.prototype.addEventListener=function(){this.parent.on(m,this.onKeyDown,this),this.parent.on(h,this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off(m,this.onKeyDown),this.parent.off(h,this.destroy)},e.prototype.destroy=function(){this.parent.element.classList.contains(\"e-rte-full-screen\")&&this.toggleParentOverflow(!1);for(var e=document.querySelectorAll(\".e-rte-overflow\"),t=0;t<e.length;t++)Object(l.hb)([e[t]],[\"e-rte-overflow\"]);this.removeEventListener()},e}(),Me=[\"Undo\",\"Redo\"],Ie=[\"a\",\"abbr\",\"acronym\",\"audio\",\"b\",\"bdi\",\"bdo\",\"big\",\"br\",\"button\",\"canvas\",\"cite\",\"code\",\"data\",\"datalist\",\"del\",\"dfn\",\"em\",\"embed\",\"font\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"label\",\"map\",\"mark\",\"meter\",\"noscript\",\"object\",\"output\",\"picture\",\"progress\",\"q\",\"ruby\",\"s\",\"samp\",\"script\",\"select\",\"slot\",\"small\",\"span\",\"strong\",\"strike\",\"sub\",\"sup\",\"svg\",\"template\",\"textarea\",\"time\",\"u\",\"tt\",\"var\",\"video\",\"wbr\"];function Re(e,t){var n=-1;return t.some((function(t,i){return\"string\"==typeof t&&e===t.toLocaleLowerCase()&&(n=i,!0)})),n}function Pe(e,t){var n=!1;return e.classList.contains(t)&&(n=!0),n}function Be(e,t,n,i){for(var r,o,a=0;a<e.length;a++){if(\"value\"===n&&e[a].value.toLocaleLowerCase()===t.toLocaleLowerCase()){r=e[a];break}if(\"text\"===n&&e[a].text.toLocaleLowerCase()===t.toLocaleLowerCase()){r=e[a];break}if(\"subCommand\"===n&&e[a].subCommand.toLocaleLowerCase()===t.toLocaleLowerCase()){r=e[a];break}}if(!Object(l.W)(r))switch(i){case\"text\":o=r.text;break;case\"value\":o=r.value;break;case\"iconCss\":o=r.iconCss}return o}function Ae(){var e=!1;return l.d.isDevice&&l.d.isIos&&(e=!0),e}function _e(e){return Object(l.W)(e)?\"\":e}function He(e,t){var n=t.getService(\"rteLocale\"),i=Ne[e];return n.getConstant(i)}function We(e,t){for(var n=e.dropDownModule,i=e.args,r=0,o=Object.keys(e.args);r<o.length;r++)for(var a=o[r],s=0;s<e.tbItems.length;s++){var c=e.tbItems[s].subCommand,d=c&&c.toLocaleLowerCase();if(c&&d===a||\"UL\"===c&&\"unorderedlist\"===a||\"OL\"===c&&\"orderedlist\"===a||\"pre\"===d&&\"insertcode\"===a)if(\"boolean\"==typeof i[a])!0===i[a]?Object(l.v)([e.tbElements[s]],[\"e-active\"]):Object(l.hb)([e.tbElements[s]],[\"e-active\"]);else if((\"string\"==typeof i[a]||null===i[a])&&Re(a,e.parent.toolbarSettings.items)>-1){var h=i[a]?i[a]:\"\",p=\"\";switch(a){case\"formats\":if(Object(l.W)(n.formatDropDown)||t||!Object(l.W)(n.formatDropDown)&&n.formatDropDown.isDestroyed)break;var u=e.parent.format.types;p=Be(u,h,\"subCommand\",\"text\");var m=Object(l.W)(e.parent.format.default)?u[0].text:e.parent.format.default;n.formatDropDown.content='<span style=\"display: inline-flex;width:'+e.parent.format.width+'\" ><span class=\"e-rte-dropdown-btn-text\">'+(Object(l.W)(p)?m:p)+\"</span></span>\",n.formatDropDown.dataBind();break;case\"alignments\":if(Object(l.W)(n.alignDropDown)||!Object(l.W)(n.alignDropDown)&&n.alignDropDown.isDestroyed)break;p=Be(q,h,\"subCommand\",\"iconCss\"),n.alignDropDown.iconCss=Object(l.W)(p)?\"e-icons e-justify-left\":p,n.alignDropDown.dataBind();break;case\"fontname\":if(Object(l.W)(n.fontNameDropDown)||t||!Object(l.W)(n.fontNameDropDown)&&n.fontNameDropDown.isDestroyed)break;var f=e.parent.fontFamily.items;p=Be(f,h,\"value\",\"text\");var g=Object(l.W)(e.parent.fontFamily.default)?f[0].text:e.parent.fontFamily.default,b=Object(l.W)(p)?g:p;e.tbElements[s].title=b,n.fontNameDropDown.content='<span style=\"display: inline-flex;width:'+e.parent.fontFamily.width+'\" ><span class=\"e-rte-dropdown-btn-text\">'+b+\"</span></span>\",n.fontNameDropDown.dataBind();break;case\"fontsize\":if(Object(l.W)(n.fontSizeDropDown)||!Object(l.W)(n.fontSizeDropDown)&&n.fontSizeDropDown.isDestroyed)break;var v=e.parent.fontSize.items,y=Object(l.W)(e.parent.fontSize.default)?v[1].text:e.parent.fontSize.default;p=Be(v,\"\"===h?y.replace(/\\s/g,\"\"):h,\"value\",\"text\"),n.fontSizeDropDown.content='<span style=\"display: inline-flex;width:'+e.parent.fontSize.width+'\" ><span class=\"e-rte-dropdown-btn-text\">'+_e(p)+\"</span></span>\",n.fontSizeDropDown.dataBind()}}}}function ze(e){return\"object\"==typeof e?e:[e]}function Fe(e,t){for(var n=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)if(\"Separator\"!==t[r].type){if(\"OrderedList\"===e[i]&&\"OL\"===t[r].subCommand){n.push(r);break}if(\"UnorderedList\"===e[i]&&\"UL\"===t[r].subCommand){n.push(r);break}if(\"InsertCode\"===e[i]&&\"Pre\"===t[r].subCommand){n.push(r);break}if(\"FileManager\"===e[i]&&\"File\"===t[r].subCommand){n.push(r);break}if(e[i]===t[r].subCommand){n.push(r);break}}return n}function qe(e,t){for(var n=0,i=Fe(ze(Me),e.toolbarObj.items),r=Object(l.lb)(\".\"+O,e.toolbarObj.element),o=0,a=Object.keys(t);o<a.length;o++){var s=a[o],c=r[i[n]];c&&e.toolbarObj.enableItems(c,t[s]),n++}}function Ue(e,t){var n=document.createEvent(\"HTMLEvents\");n.initEvent(t,!1,!0),e.dispatchEvent(n)}function Ve(e){var t=Object(l.F)(\"template\");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)}function Qe(e){for(var t={},n=Object.keys(e),i=0;i<Object.keys(e).length;i++)t[n[i].toLocaleLowerCase()]=e[n[i]];return t}function Ge(e,t){var n;return null!==e&&\"\"!==e?(n=t.enableHtmlEncode?Ke(Ye(e)):Ke(e),t.setProperties({value:n},!0)):n=t.enableHtmlEncode?\"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;\":\"<p><br/></p>\",n}function Ke(e){var t=document.createElement(\"div\");t.innerHTML=e,t.setAttribute(\"class\",\"tempDiv\");var n=document.createElement(\"div\");if(t.childNodes.length>0){for(var i=void 0,r=void 0,o=void 0;t.firstChild;)\"#text\"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf(\"\\n\")<0||\"\"!==t.firstChild.textContent.trim())||Ie.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(i?r.appendChild(t.firstChild):(o=Object(l.F)(\"p\"),n.appendChild(o),o.appendChild(t.firstChild)),r=o,i=!0):\"#text\"===t.firstChild.nodeName&&(\"\\n\"===t.firstChild.textContent||t.firstChild.textContent.indexOf(\"\\n\")>=0&&\"\"===t.firstChild.textContent.trim())?Object(l.I)(t.firstChild):(n.appendChild(t.firstChild),i=!1);for(var a=n.querySelectorAll(\"img\"),s=0;s<a.length;s++)a[s].classList.contains(\"e-rte-image\")||a[s].classList.add(\"e-rte-image\"),a[s].classList.contains(\"e-imginline\")||a[s].classList.contains(\"e-imgbreak\")||a[s].classList.add(\"e-imginline\")}return n.innerHTML}function Xe(e){return\"<p><br></p>\"===e||\"&lt;p&gt;&lt;br&gt;&lt;/p&gt;\"===e||\"\"===e}function Ye(e){return e.replace(/&amp;/g,\"&\").replace(/&amp;lt;/g,\"<\").replace(/&lt;/g,\"<\").replace(/&amp;gt;/g,\">\").replace(/&gt;/g,\">\").replace(/&nbsp;/g,\" \").replace(/&amp;nbsp;/g,\" \").replace(/&quot;/g,\"\")}function Je(e,t){if(t.enableHtmlSanitizer){var n=l.t.beforeSanitize();Object(l.J)(n,n,{cancel:!1,helper:null}),t.trigger(\"beforeSanitizeHtml\",n),n.cancel&&!Object(l.W)(n.helper)?e=n.helper(e):n.cancel||(e=l.t.serializeValue(n,e))}return e}function $e(e){for(var t=e.split(\",\"),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),r=i.length,o=new Uint8Array(r);r--;)o[r]=i.charCodeAt(r);return new Blob([o],{type:n})}var Ze=n(\"1hqj\"),et=function(){function e(e){this.parent=e}return e.prototype.render=function(e){var t;return e.beforeOpen=this.beforeOpen.bind(this),e.open=this.open.bind(this),Object(l.W)(e.close)&&(e.close=this.close.bind(this)),e.beforeClose=this.beforeClose.bind(this),(t=new Ze.a(e)).isStringTemplate=!0,t},e.prototype.beforeOpen=function(e){this.parent.trigger(\"beforeDialogOpen\",e)},e.prototype.open=function(e){this.parent.trigger(\"dialogOpen\",e)},e.prototype.beforeClose=function(e){this.parent.trigger(\"beforeDialogClose\",e,(function(e){e.cancel||e.container.classList.contains(\"e-popup-close\")&&(e.cancel=!0)}))},e.prototype.close=function(e){this.parent.trigger(\"dialogClose\",e)},e}(),tt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),nt=function(){return(nt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},it=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},rt=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.defaultResetValue=null,i.isResizeInitialized=!1,i.isFocusOut=!1,i.isRTE=!1,i.isBlur=!0,i.needsID=!0,i}return tt(t,e),t.prototype.requiredModules=function(){var e=[];return this.toolbarSettings.enable&&(e.push({member:\"toolbar\",args:[this,this.serviceLocator]}),e.push({member:\"link\",args:[this,this.serviceLocator]}),e.push({member:\"table\",args:[this,this.serviceLocator]}),e.push({member:\"image\",args:[this,this.serviceLocator]}),this.quickToolbarSettings.enable&&e.push({member:\"quickToolbar\",args:[this,this.serviceLocator]})),this.showCharCount&&e.push({member:\"count\",args:[this,this.serviceLocator]}),\"Markdown\"===this.editorMode&&e.push({member:\"markdownEditor\",args:[this,this.serviceLocator]}),\"HTML\"===this.editorMode&&(e.push({member:\"htmlEditor\",args:[this,this.serviceLocator]}),e.push({member:\"pasteCleanup\",args:[this,this.serviceLocator]})),this.fileManagerSettings.enable&&e.push({member:\"fileManager\",args:[this,this.serviceLocator]}),this.enableResize&&e.push({member:\"resize\",args:[this]}),e},t.prototype.updateEnable=function(){this.enabled?(Object(l.hb)([this.element],\"e-disabled\"),this.element.setAttribute(\"aria-disabled\",\"false\"),Object(l.W)(this.htmlAttributes.tabindex)?this.inputElement.setAttribute(\"tabindex\",\"0\"):this.inputElement.setAttribute(\"tabindex\",this.htmlAttributes.tabindex)):(this.getToolbar()&&(Object(l.hb)(this.getToolbar().querySelectorAll(\".e-active\"),\"e-active\"),Object(l.hb)([this.getToolbar()],[\"e-rte-tb-float\",\"e-rte-tb-abs-float\"])),Object(l.v)([this.element],\"e-disabled\"),this.element.tabIndex=-1,this.element.setAttribute(\"aria-disabled\",\"true\"),this.inputElement.setAttribute(\"tabindex\",\"-1\"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.eventInitializer():this.unWireEvents()},t.prototype.preRender=function(){this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this),this.clickPoints={clientX:0,clientY:0},this.initialValue=this.value,this.serviceLocator=new L,this.initializeServices(),this.setContainer(),this.persistData(),Object(l.nb)(this.element,{width:Object(l.K)(this.width)}),Object(l.x)(this.element,{role:\"application\"})},t.prototype.persistData=function(){if(this.enablePersistence&&\"TEXTAREA\"===this.originalElement.tagName){this.element.id=this.originalElement.id+\"_wrapper\";var e=window.localStorage.getItem(this.getModuleName()+this.element.id);Object(l.W)(e)||\"\"===e||this.setProperties(JSON.parse(e),!0)}},t.prototype.setContainer=function(){this.originalElement=this.element.cloneNode(!0),null!==this.value&&null===this.valueTemplate||this.setValue(),this.element.hasAttribute(\"tabindex\")&&(this.htmlAttributes={tabindex:this.element.getAttribute(\"tabindex\")},this.element.removeAttribute(\"tabindex\")),this.isBlazor()||(this.element.innerHTML=\"\");for(var e=[\"class\",\"style\",\"id\",\"ejs-for\"],t={},n=0;n<this.element.attributes.length;n++)-1!==e.indexOf(this.element.attributes[n].name)||/^data-val/.test(this.element.attributes[n].name)||(t[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));if(Object(l.J)(t,this.htmlAttributes,t),this.setProperties({htmlAttributes:t},!0),Object(l.W)(this.htmlAttributes.id)||(this.element.id=this.htmlAttributes.id),\"TEXTAREA\"===this.element.tagName){var i=this.createElement(\"div\",{className:this.element.getAttribute(\"class\")});this.isBlazor()||(this.element.innerHTML=\"\"),this.element.parentElement.insertBefore(i,this.element),Object(l.V)()?(i.appendChild(this.element),this.valueContainer=this.createElement(\"textarea\",{id:this.element.id+\"-value\"})):this.valueContainer=this.element,Object(l.hb)([this.valueContainer],this.element.getAttribute(\"class\").split(\" \")),this.isBlazor()&&Object(l.v)([this.element],\"e-rte-hidden\"),this.element=i}else this.valueContainer=this.createElement(\"textarea\",{id:this.getID()+\"-value\"});this.valueContainer.name=this.getID(),Object(l.v)([this.valueContainer],\"e-rte-hidden\"),this.element.appendChild(this.valueContainer)},t.prototype.getPersistData=function(){return this.addOnPersist([\"value\"])},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.selectAll=function(){this.notify(\"selectAll\",{})},t.prototype.selectRange=function(e){this.notify(\"selectRange\",{range:e})},t.prototype.getSelection=function(){var e=\"\";return this.notify(\"getSelectedHtml\",{callBack:function(t){e=t}}),e},t.prototype.executeCommand=function(e,t,n){if(t=this.htmlPurifier(e,t),\"HTML\"===this.editorMode){var i=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(!(!this.iframeSettings.enable||i.startContainer!==this.inputElement)||!this.inputElement.contains(i.startContainer))&&this.focusIn()}var r=N[e];n&&n.undo&&n.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),this.formatter.editorManager.execCommand(r.command,r.subCommand?r.subCommand:t||r.value,null,null,t||r.value,t||r.value),n&&n.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.notify(\"content-changed\",{})},t.prototype.htmlPurifier=function(e,t){if(\"HTML\"===this.editorMode)switch(e){case\"insertHTML\":this.enableHtmlSanitizer&&(t=\"string\"==typeof t?this.htmlEditorModule.sanitizeHelper(t):this.htmlEditorModule.sanitizeHelper(t.outerHTML));break;case\"insertTable\":Object(l.W)(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width});break;case\"insertImage\":var n=this.createElement(\"img\",{attrs:{src:t.url}}),i=n.outerHTML;this.enableHtmlSanitizer&&(i=this.htmlEditorModule.sanitizeHelper(n.outerHTML));var r=\"\"!==i&&this.createElement(\"div\",{innerHTML:i}).firstElementChild.getAttribute(\"src\")||null;r=Object(l.W)(r)?\"\":r,t.url=r,Object(l.W)(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),Object(l.W)(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height});break;case\"createLink\":var o=this.createElement(\"a\",{attrs:{href:t.url}}),a=o.outerHTML;this.enableHtmlSanitizer&&(a=this.htmlEditorModule.sanitizeHelper(o.outerHTML));var s=\"\"!==a&&this.createElement(\"div\",{innerHTML:a}).firstElementChild.getAttribute(\"href\")||null;s=Object(l.W)(s)?\"\":s,t.url=s}return t},t.prototype.encode=function(e){var t=this.createElement(\"div\");return t.innerText=e.trim(),t.innerHTML.replace(/<br\\s*[\\/]?>/gi,\"\\n\")},t.prototype.render=function(){this.value&&!this.valueTemplate&&this.setProperties({value:this.serializeValue(this.value)},!0),this.renderModule=new k(this,this.serviceLocator),this.sourceCodeModule=new x(this,this.serviceLocator),this.notify(\"initial-load\",{}),this.trigger(\"load\"),this.RTERender();new M(this);this.notify(d,{}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.toolbarSettings.enable&&\"Expand\"===this.toolbarSettings.type&&!Object(l.W)(this.getToolbar())&&this.toolbarSettings.items.indexOf(\"Undo\")>-1&&this.toolbarSettings.items.indexOf(\"Redo\")>-1&&this.disableToolbarItem([\"Undo\",\"Redo\"]),this.setContentHeight(),null!==this.value&&(this.isBlazor()?this.defaultResetValue=this.value:this.valueContainer.defaultValue=this.value),this.enabled?this.eventInitializer():this.unWireEvents(),this.renderComplete()},t.prototype.eventInitializer=function(){this.wireEvents()},t.prototype.keyDown=function(e){if(this.notify(m,{member:\"keydown\",args:e}),this.restrict(e),\"HTML\"===this.editorMode&&(8===e.which&&\"Backspace\"===e.code||46===e.which&&\"Delete\"===e.code)){var t=this.getRange(),n=\"#text\"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer;if(Object(l.C)(n,\"pre\")&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset)){var i=new RegExp(String.fromCharCode(8203),\"g\"),r=8===e.which?t.startOffset-1:t.startOffset;t.startContainer.textContent=t.startContainer.textContent.replace(i,\"\"),this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,r)}else if(\"Backspace\"===e.code&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(0)&&t.collapsed){var o=t.startContainer.parentElement,a=void 0,s=void 0;for(s=0;s<o.childNodes.length;s++)o.childNodes[s]===t.startContainer&&(a=s);var c=!0,d=[];for(s=a;s>=0;s--)3===o.childNodes[s].nodeType&&8203===o.childNodes[s].textContent.charCodeAt(0)&&c?d.push(s):c=!1;if(d.length>0)for(s=d.length-1;s>0;s--)o.childNodes[d[s]].textContent=\"\";this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),t.startContainer,t.startOffset)}}if(0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),\"insert-link\"!==e.action&&(e.action&&\"paste\"!==e.action||9===e.which||\"Backspace\"===e.code&&8===e.which))switch(this.formatter.process(this,null,e),e.action){case\"toolbar-focus\":if(this.toolbarSettings.enable){this.toolbarModule.baseToolbar.toolbarObj.element.querySelector('.e-toolbar-item[aria-disabled=\"false\"][title] [tabindex]').focus()}break;case\"escape\":this.contentModule.getEditPanel().focus()}Object(l.W)(this.placeholder)||(Object(l.W)(this.placeHolderWrapper)||1===this.inputElement.textContent.length?this.setPlaceHolder():this.placeHolderWrapper.style.display=\"none\"),this.autoResize()},t.prototype.keyUp=function(e){this.notify(u,{member:\"keyup\",args:e}),\"KeyX\"!==e.code||88!==e.which||88!==e.keyCode||!e.ctrlKey||\"\"!==this.inputElement.innerHTML&&\"<br>\"!==this.inputElement.innerHTML||(this.inputElement.innerHTML=Ge(\"<p><br></p>\",this));var t=32===e.which||13===e.which||8===e.which||46===e.which;(\"shift\"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t||\"Markdown\"===this.editorMode&&(\"shift\"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||t)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),this.inputElement&&0!==this.inputElement.textContent.length&&this.notify(\"toolbar-refresh\",{args:e}),Object(l.W)(this.placeholder)||this.setPlaceHolder()},t.prototype.serializeValue=function(e){return\"HTML\"!==this.editorMode||Object(l.W)(e)||(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(Ye(e)),e=this.encode(e)):e=this.htmlEditorModule.sanitizeHelper(e)),e},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.updateValue=function(e){if(Object(l.W)(e)){var t=this.inputElement.innerHTML;this.setProperties({value:Xe(t)?null:t})}else this.setProperties({value:e})},t.prototype.triggerEditArea=function(e){if(Ae()){var t=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.notify(\"editAreaClick\",{member:\"editAreaClick\",args:e})}else this.notify(\"editAreaClick\",{member:\"editAreaClick\",args:e})},t.prototype.notifyMouseUp=function(e){var t=e.touches?e.changedTouches[0]:e;this.notify(\"mouseUp\",{member:\"mouseUp\",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}}),this.inputElement&&(\"HTML\"===this.editorMode&&0!==this.inputElement.textContent.length||\"Markdown\"===this.editorMode&&0!==this.inputElement.value.length)&&this.notify(\"toolbar-refresh\",{args:e}),this.triggerEditArea(e)},t.prototype.mouseUp=function(e){if(this.quickToolbarSettings.showOnRightClick&&l.d.isDevice){var t=e.target,n=Object(l.C)(t,\"table\");if(t&&\"A\"===t.nodeName||\"IMG\"===t.nodeName||\"TD\"===t.nodeName||\"TH\"===t.nodeName||\"TABLE\"===t.nodeName||n&&this.contentModule.getEditPanel().contains(n))return}this.notifyMouseUp(e)},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.onCopy=function(){this.contentModule.getDocument().execCommand(\"copy\",!1,null)},t.prototype.onCut=function(){this.contentModule.getDocument().execCommand(\"cut\",!1,null)},t.prototype.onPaste=function(e){var t=this,n={originalEvent:e,cancel:!1,requestType:\"Paste\"};this.trigger(\"actionBegin\",n,(function(n){var i=t.getText().length-t.getSelection().length+(Object(l.W)(e)||Object(l.W)(e.clipboardData)?0:e.clipboardData.getData(\"text/plain\").length);if(\"Markdown\"!==t.editorMode)if(!n.cancel&&\"true\"===t.inputElement.contentEditable&&(-1===t.maxLength||i<t.maxLength))if(Object(l.W)(t.pasteCleanupModule)){var r={requestType:\"Paste\",editorMode:t.editorMode,event:e},o=null;e&&!Object(l.W)(e.clipboardData)&&(o=e.clipboardData.getData(\"text/plain\"));var a=e&&e.clipboardData&&e.clipboardData.items.length>0?e.clipboardData.items[0].getAsFile():null;null!==o&&t.notify(g,{file:a,args:e,text:o}),setTimeout((function(){t.formatter.onSuccess(t,r)}),0)}else t.notify(\"pasteClean\",{args:e});else e.preventDefault();else-1===t.maxLength||i<t.maxLength||e.preventDefault()}))},t.prototype.clipboardAction=function(e,t){switch(e.toLowerCase()){case\"cut\":this.onCut(),this.formatter.onSuccess(this,{requestType:\"Cut\",editorMode:this.editorMode,event:t});break;case\"copy\":this.onCopy(),this.formatter.onSuccess(this,{requestType:\"Copy\",editorMode:this.editorMode,event:t});break;case\"paste\":this.onPaste(t)}},t.prototype.destroy=function(){if(!this.isDestroyed&&this.isRendered)if(null!==this.element.offsetParent){if(this.notify(h,{}),this.destroyDependentModules(),Object(l.W)(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),this.unWireEvents(),\"TEXTAREA\"===this.originalElement.tagName){Object(l.V)()&&(Object(l.I)(this.valueContainer),this.valueContainer=this.element.querySelector(\".e-blazor-hidden.e-control.e-richtexteditor\")),this.element.parentElement.insertBefore(this.valueContainer,this.element),this.valueContainer.id=this.getID(),this.valueContainer.removeAttribute(\"name\"),Object(l.I)(this.element),\"\"!==this.originalElement.innerHTML.trim()?Object(l.V)()||(this.valueContainer.value=this.originalElement.innerHTML.trim(),this.setProperties({value:Object(l.W)(this.initialValue)?null:this.initialValue},!0)):this.valueContainer.value=this.isBlazor()?this.defaultResetValue:this.valueContainer.defaultValue,this.element=this.valueContainer;for(var t=0;t<this.originalElement.classList.length;t++)Object(l.v)([this.element],this.originalElement.classList[t]);Object(l.hb)([this.element],\"e-rte-hidden\")}else\"\"!==this.originalElement.innerHTML.trim()?(this.element.innerHTML=this.originalElement.innerHTML.trim(),this.setProperties({value:Object(l.W)(this.initialValue)?null:this.initialValue},!0)):this.element.innerHTML=\"\";if(this.placeholder&&this.placeHolderWrapper&&(this.placeHolderWrapper=null),!Object(l.W)(this.cssClass)){var n=this.cssClass.split(\" \");for(t=0;t<n.length;t++)\"\"!==n[t].trim()&&Object(l.hb)([this.element],n[t])}this.removeHtmlAttributes(),this.removeAttributes(),e.prototype.destroy.call(this),this.isRendered=!1,this.enablePersistence&&window.localStorage.removeItem(this.getModuleName()+this.element.id)}else this.toolbarModule.destroy()},t.prototype.removeHtmlAttributes=function(){if(this.htmlAttributes)for(var e=Object.keys(this.htmlAttributes),t=0;t<e.length&&this.element.hasAttribute(e[t]);t++)this.element.removeAttribute(e[t])},t.prototype.removeAttributes=function(){this.enabled||Object(l.hb)([this.element],\"e-disabled\"),this.enableRtl&&Object(l.hb)([this.element],\"e-rtl\"),this.readonly&&Object(l.hb)([this.element],\"e-rte-readonly\"),\"\"!==this.element.style.width&&\"\"===this.originalElement.style.width&&this.element.style.removeProperty(\"width\"),\"\"!==this.element.style.height&&\"\"===this.originalElement.style.height&&this.element.style.removeProperty(\"height\"),this.element.removeAttribute(\"aria-disabled\"),this.element.removeAttribute(\"role\"),this.element.removeAttribute(\"tabindex\")},t.prototype.destroyDependentModules=function(){this.renderModule.destroy(),this.formatter.editorManager.undoRedoManager.destroy(),this.sourceCodeModule.destroy()},t.prototype.getContent=function(){return this.iframeSettings.enable&&Object(l.V)()?this.inputElement:this.contentModule.getPanel()},t.prototype.getText=function(){return this.contentModule.getText()},t.prototype.getSelectedHtml=function(){var e=this.createElement(\"div\"),t=this.contentModule.getDocument().getSelection();if(t.rangeCount>0){var n=t.getRangeAt(0).cloneContents();e.appendChild(n)}return e.innerHTML},t.prototype.showInlineToolbar=function(){if(this.inlineMode.enable){var e=this.getRange(),t=\"#text\"===e.endContainer.nodeName?e.endContainer.parentElement:e.endContainer,n=e.getClientRects()[0].left,i=e.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(n,i,t)}},t.prototype.hideInlineToolbar=function(){this.quickToolbarModule.hideInlineQTBar()},t.prototype.getModuleName=function(){return\"richtexteditor\"},t.prototype.onPropertyChanged=function(t,n){for(var i=0,r=Object.keys(t);i<r.length;i++){var o=r[i];switch(o){case\"value\":var a,s=t[o];a=\"HTML\"===this.editorMode?Ge(s,this):s,Object(l.W)(s)||\"\"===s||(this.value=this.serializeValue(this.enableHtmlEncode?this.encode(Ye(a)):a)),this.updatePanelValue(),this.setPlaceHolder(),this.notify(\"xhtmlValidation\",{module:\"XhtmlValidation\",newProp:t,oldProp:n}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.showCharCount&&this.countModule.refresh();break;case\"valueTemplate\":this.setValue(),this.showCharCount&&this.countModule.refresh();break;case\"width\":this.setWidth(t[o]),this.toolbarSettings.enable&&(this.toolbarModule.refreshToolbarOverflow(),this.resizeHandler());break;case\"height\":this.setHeight(t[o]),this.setContentHeight(),this.autoResize();break;case\"readonly\":this.setReadOnly(!1);break;case\"cssClass\":this.element.classList.remove(n[o]),this.setCssClass(t[o]);break;case\"enabled\":this.setEnable();break;case\"enableRtl\":this.updateRTL();break;case\"placeholder\":this.placeholder=t[o],this.setPlaceHolder();break;case\"htmlAttributes\":Le(this.htmlAttributes,this,!1,!1);break;case\"iframeSettings\":var c=n[o];if(c.resources){var d=this.contentModule.getDocument().querySelector(\"head\"),h=void 0;c.resources.scripts&&(h=d.querySelectorAll(\".rte-iframe-script-sheet\"),this.removeSheets(h)),c.resources.styles&&(h=d.querySelectorAll(\".rte-iframe-style-sheet\"),this.removeSheets(h))}this.setIframeSettings();break;case\"locale\":e.prototype.refresh.call(this);break;case\"inlineMode\":this.notify(p,{module:\"quickToolbar\",newProp:t,oldProp:n}),this.setContentHeight();break;case\"toolbarSettings\":this.notify(p,{module:\"toolbar\",newProp:t,oldProp:n}),this.setContentHeight();break;case\"maxLength\":this.showCharCount&&this.countModule.refresh();break;case\"showCharCount\":t[o]&&this.countModule?this.countModule.renderCount():!1===t[o]&&this.countModule&&this.countModule.destroy();break;case\"enableHtmlEncode\":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case\"undoRedoSteps\":case\"undoRedoTimer\":this.formatter.editorManager.observer.notify(\"model_changed\",{newProp:t,oldProp:n});break;case\"enableXhtml\":this.notify(\"xhtmlValidation\",{module:\"XhtmlValidation\",newProp:t,oldProp:n});break;case\"quickToolbarSettings\":t.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent(),this.notify(p,{newProp:t,oldProp:n});break;default:this.notify(p,{newProp:t,oldProp:n})}}},t.prototype.updateValueData=function(){this.enableHtmlEncode?this.setProperties({value:this.encode(Ye(this.inputElement.innerHTML))},!0):this.setProperties({value:/<[a-z][\\s\\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:Ye(this.inputElement.innerHTML)})},t.prototype.removeSheets=function(e){var t;for(t=0;t<e.length;t++)Object(l.I)(e[t])},t.prototype.updatePanelValue=function(){var e=this.value;e=this.enableHtmlEncode&&this.value?Ye(e):e;var t=this.element.querySelector(\".e-rte-srctextarea\");e?(t&&\"block\"===t.style.display&&(t.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),\"HTML\"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.trim()!==e.trim()?this.inputElement.innerHTML=e:\"Markdown\"===this.editorMode&&this.inputElement&&this.inputElement.value.trim()!==e.trim()&&(this.inputElement.value=e)):(t&&\"block\"===t.style.display&&(t.value=\"\"),\"HTML\"===this.editorMode?this.inputElement.innerHTML=\"<p><br/></p>\":this.inputElement.value=\"\",this.valueContainer&&(this.valueContainer.value=\"\")),this.showCharCount&&this.countModule.refresh()},t.prototype.setHeight=function(e){this.element.style.height=\"auto\"!==e?Object(l.K)(e):\"auto\",\"Expand\"===this.toolbarSettings.type&&(\"string\"==typeof this.height&&this.height.indexOf(\"px\")>-1||\"number\"==typeof this.height)?this.element.classList.add(\"e-rte-fixed-tb-expand\"):this.element.classList.remove(\"e-rte-fixed-tb-expand\")},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&(\"Markdown\"!==this.editorMode?(this.placeHolderWrapper||(this.placeHolderWrapper=this.createElement(\"span\",{className:\"rte-placeholder e-rte-placeholder\"}),this.inputElement&&this.inputElement.parentElement.insertBefore(this.placeHolderWrapper,this.inputElement),Object(l.x)(this.placeHolderWrapper,{style:\"font-size: 14px; padding: 16px; margin-left: 0px; margin-right: 0px;\"})),this.placeHolderWrapper.innerHTML=this.placeholder,0!==this.inputElement.textContent.length||Object(l.W)(this.inputElement.firstChild)||\"P\"!==this.inputElement.firstChild.nodeName||Object(l.W)(this.inputElement.firstChild.firstChild)||\"BR\"!==this.inputElement.firstChild.firstChild.nodeName||\"<p><br></p><p><br></p>\"===this.inputElement.innerHTML?this.placeHolderWrapper.style.display=\"none\":this.placeHolderWrapper.style.display=\"block\"):this.inputElement.setAttribute(\"placeholder\",this.placeholder))},t.prototype.setWidth=function(e){\"auto\"!==e?Object(l.nb)(this.element,{width:Object(l.K)(this.width)}):this.element.style.width=\"auto\"},t.prototype.setCssClass=function(e){if(!Object(l.W)(e))for(var t=e.split(\" \"),n=0;n<t.length;n++)\"\"!==t[n].trim()&&this.element.classList.add(t[n])},t.prototype.updateRTL=function(){this.notify(b,{enableRtl:this.enableRtl}),this.enableRtl?this.element.classList.add(\"e-rtl\"):this.element.classList.remove(\"e-rtl\")},t.prototype.updateReadOnly=function(){this.notify(\"readOnlyMode\",{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?this.unbindEvents():this.enabled&&this.bindEvents())},t.prototype.print=function(){var e,t=this,n={element:this.inputElement,requestType:\"print\",cancel:!1};this.trigger(\"actionBegin\",n,(function(n){if(e=window.open(\"\",\"print\",\"height=\"+window.outerHeight+\",width=\"+window.outerWidth),\"msie\"===l.d.info.name&&e.resizeTo(screen.availWidth,screen.availHeight),e=Object(l.fb)(t.inputElement,e),!n.cancel){t.trigger(\"actionComplete\",{requestType:\"print\"})}}))},t.prototype.refreshUI=function(){this.renderModule.refresh()},t.prototype.showFullScreen=function(){this.fullScreenModule.showFullScreen()},t.prototype.enableToolbarItem=function(e,t){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!0,t)},t.prototype.disableToolbarItem=function(e,t){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!1,t)},t.prototype.removeToolbarItem=function(e){this.toolbarModule.removeTBarItems(e)},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument())},t.prototype.initializeServices=function(){this.serviceLocator.register(\"rendererFactory\",new D),this.serviceLocator.register(\"rteLocale\",this.localeObj=new l.p(this.getModuleName(),xe,this.locale)),this.serviceLocator.register(\"dialogRenderObject\",new et(this))},t.prototype.RTERender=function(){var e=this.serviceLocator.getService(\"rendererFactory\");this.contentModule=e.getRenderer(i.Content),this.fullScreenModule=new De(this),this.renderModule.render(),this.inputElement=this.contentModule.getEditPanel(),this.setHeight(this.height),Le(this.htmlAttributes,this,!1,!0),this.iframeSettings&&this.setIframeSettings(),this.setCssClass(this.cssClass),this.updateEnable(),this.setPlaceHolder(),this.updateRTL(),this.updateReadOnly(),this.updatePanelValue(),this.enableHtmlEncode&&!Object(l.W)(this.value)&&this.setProperties({value:this.encode(Ye(this.value))})},t.prototype.setIframeSettings=function(){if(this.iframeSettings.resources){var e=this.iframeSettings.resources.styles,t=this.iframeSettings.resources.scripts;this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,t),this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,e)}this.iframeSettings.attributes&&Le(this.iframeSettings.attributes,this,!0,!1)},t.prototype.InjectSheet=function(e,t){try{if(t&&t.length>0)for(var n=this.contentModule.getDocument().querySelector(\"head\"),i=0;i<t.length;i++)if(e){var r=this.createScriptElement();r.src=t[i],n.appendChild(r)}else{var o=this.createStyleElement();o.href=t[i],n.appendChild(o)}}catch(a){return}},t.prototype.createScriptElement=function(){var e=this.createElement(\"script\",{className:\"rte-iframe-script-sheet\"});return e.type=\"text/javascript\",e},t.prototype.createStyleElement=function(){var e=this.createElement(\"link\",{className:\"rte-iframe-style-sheet\"});return e.rel=\"stylesheet\",e},t.prototype.isBlazor=function(){return!!Object(l.V)()},t.prototype.setValue=function(){if(this.valueTemplate)if(\"string\"==typeof this.valueTemplate)this.setProperties({value:this.valueTemplate});else{for(var e=Object(l.E)(this.valueTemplate)({}),t=0;t<e.length;t++){var n=e[t];Object(l.w)([n],this.element)}this.setProperties({value:this.element.innerHTML.trim()})}else{var i=!Object(l.W)(this.element.innerHTML)&&this.element.innerHTML.replace(/<(\\/?|\\!?)(!--!--)>/g,\"\").trim();\"\"!==i&&(\"TEXTAREA\"===this.element.tagName?this.setProperties({value:Ye(i)}):this.setProperties({value:i}))}},t.prototype.updateResizeFlag=function(){this.isResizeInitialized=!0},t.prototype.getInsertImgMaxWidth=function(){var e=this.insertImageSettings.maxWidth,t=this.contentModule.getEditPanel(),n=window.getComputedStyle(t),i=t.offsetWidth-(14+parseFloat(n.paddingLeft.split(\"px\")[0])+parseFloat(n.paddingRight.split(\"px\")[0])+parseFloat(n.marginLeft.split(\"px\")[0])+parseFloat(n.marginRight.split(\"px\")[0]));return Object(l.W)(e)?i:e},t.prototype.setContentHeight=function(e,t){var n,i,o,a=0,s=this.sourceCodeModule.getPanel()&&\"block\"===this.sourceCodeModule.getPanel().parentElement.style.display?this.sourceCodeModule.getPanel().parentElement:this.contentModule.getPanel(),c=this.element.offsetHeight;0!==this.element.offsetHeight||\"auto\"===this.height||this.getToolbar()||(c=parseInt(this.height,10),(o=\"string\"==typeof this.height&&this.height.indexOf(\"%\")>-1)&&(i=this.height));var d=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,h=this.element.querySelector(\".e-resize-handle\"),p=this.enableResize?Object(l.W)(h)?0:h.offsetHeight+8:0,u=this.getToolbar()?this.toolbarModule.getExpandTBarPopHeight():0;if(this.toolbarSettings.type===r.Expand&&t&&\"preview\"!==e?(n=\"auto\"===this.height&&0===p?\"auto\":c-(d+u+p)+\"px\",a=this.toolbarSettings.enableFloating?0:u):n=\"auto\"!==this.height||this.element.classList.contains(\"e-rte-full-screen\")||this.isResizeInitialized?o?i:c-(d+p)+\"px\":\"auto\",Object(l.nb)(s,{height:n,marginTop:a+\"px\"}),this.iframeSettings.enable&&\"sourceCode\"===e){var m=Object(l.kb)(\".e-rte-content\",this.element);Object(l.nb)(m,{height:n,marginTop:a+\"px\"})}if(this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable){var f=(t?d+u:d)+\"px\";Object(l.nb)(this.getToolbar().parentElement,{height:f})}0===p&&this.autoResize()},t.prototype.getHtml=function(){return this.value},t.prototype.getXhtml=function(){var e=this.value;return this.enableXhtml&&(e=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)),e},t.prototype.showSourceCode=function(){this.readonly||this.notify(\"sourceCode\",{})},t.prototype.getCharCount=function(){return(\"Markdown\"===this.editorMode?this.inputElement.value.trim():this.inputElement.textContent.trim()).length},t.prototype.getBaseToolbarObject=function(){return!this.inlineMode.enable||l.d.isDevice&&!Ae()?this.toolbarModule&&this.toolbarModule.getBaseToolbar():this.quickToolbarModule&&this.quickToolbarModule.getInlineBaseToolbar()},t.prototype.getToolbar=function(){return this.toolbarModule?this.toolbarModule.getToolbarElement():null},t.prototype.getToolbarElement=function(){return this.toolbarModule&&this.toolbarModule.getToolbarElement()},t.prototype.getID=function(){return\"TEXTAREA\"===this.originalElement.tagName?this.valueContainer.id:this.element.id},t.prototype.mouseDownHandler=function(e){var t=e.touches?e.changedTouches[0]:e;Object(l.v)([this.element],[\"e-focused\"]),this.preventDefaultResize(e),this.notify(f,{args:e}),this.clickPoints={clientX:t.clientX,clientY:t.clientY}},t.prototype.preventImgResize=function(e){\"img\"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()},t.prototype.preventDefaultResize=function(e){\"msie\"===l.d.info.name?this.contentModule.getEditPanel().addEventListener(\"mscontrolselect\",this.preventImgResize):\"mozilla\"===l.d.info.name&&(this.contentModule.getDocument().execCommand(\"enableObjectResizing\",!1,\"false\"),this.contentModule.getDocument().execCommand(\"enableInlineTableEditing\",!1,\"false\"))},t.prototype.defaultResize=function(e){\"msie\"===l.d.info.name?this.contentModule.getEditPanel().removeEventListener(\"mscontrolselect\",this.preventImgResize):\"mozilla\"===l.d.info.name&&(this.contentModule.getDocument().execCommand(\"enableObjectResizing\",!0,\"true\"),this.contentModule.getDocument().execCommand(\"enableInlineTableEditing\",!0,\"true\"))},t.prototype.resizeHandler=function(){var e=!1;this.toolbarSettings.enable&&!this.inlineMode.enable&&(this.toolbarModule.refreshToolbarOverflow(),e=this.toolbarModule.baseToolbar.toolbarObj.element.classList.contains(\"e-expand-open\")),this.setContentHeight(\"\",e)},t.prototype.scrollHandler=function(e){this.notify(\"scroll\",{args:e})},t.prototype.contentScrollHandler=function(e){this.notify(\"contentscroll\",{args:e})},t.prototype.focusHandler=function(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,Object(l.v)([this.element],[\"e-focused\"]),\"HTML\"===this.editorMode?this.cloneValue=\"<p><br></p>\"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(Ye(this.inputElement.innerHTML)):this.inputElement.innerHTML:this.cloneValue=\"\"===this.inputElement.value?null:this.inputElement.value;var t=document.activeElement;if((t===this.element||t===this.getToolbarElement()||t===this.contentModule.getEditPanel()||this.iframeSettings.enable&&t===this.contentModule.getPanel()&&e.target&&!e.target.classList.contains(\"e-img-inner\")&&e.target&&e.target.parentElement&&!e.target.parentElement.classList.contains(\"e-img-wrap\")||Object(l.C)(t,\".e-rte-toolbar\")===this.getToolbarElement())&&(this.contentModule.getEditPanel().focus(),!Object(l.W)(this.getToolbarElement()))){this.getToolbarElement().setAttribute(\"tabindex\",\"-1\");for(var n=this.getToolbarElement().querySelectorAll('[tabindex=\"0\"]'),i=0;i<n.length;i++)n[i].setAttribute(\"tabindex\",\"-1\")}this.preventDefaultResize(e),this.trigger(\"focus\",{event:e,isInteracted:0!==Object.keys(e).length}),!Object(l.W)(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval)),l.l.add(document,\"mousedown\",this.onDocumentClick,this)}if(!Object(l.W)(this.getToolbarElement())){var r=this.getToolbarElement().querySelectorAll(\"input,select,button,a,[tabindex]\");for(i=0;i<r.length;i++)r[i].classList.contains(\"e-rte-dropdown-btn\")||r[i].classList.contains(\"e-insert-table-btn\")||r[i].hasAttribute(\"tabindex\")&&\"-1\"===r[i].getAttribute(\"tabindex\")||r[i].setAttribute(\"tabindex\",\"-1\")}},t.prototype.getUpdatedValue=function(){var e;Object(l.W)(this.tableModule)||this.tableModule.removeResizeElement();var t=this.element.querySelector(\".e-rte-srctextarea\");return\"HTML\"===this.editorMode?(e=\"<p><br></p>\"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(Ye(this.inputElement.innerHTML)):this.inputElement.innerHTML,t&&\"block\"===t.style.display&&(e=t.value)):e=\"\"===this.inputElement.value?null:this.inputElement.value,e},t.prototype.updateValueOnIdle=function(){this.setProperties({value:this.getUpdatedValue()},!0),this.valueContainer.value=this.value,this.invokeChangeEvent()},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.onDocumentClick=function(e){var t=e.target,n=Object(l.C)(t,\".e-richtexteditor\");this.element.contains(e.target)||document===e.target||n===this.element||Object(l.C)(t,'[aria-owns=\"'+this.getID()+'\"]')||(this.isBlur=!0,this.isRTE=!1),this.notify(\"docClick\",{args:e})},t.prototype.blurHandler=function(e){var t=e.relatedTarget;if(t){var n=Object(l.C)(t,\".e-richtexteditor\");n&&n===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute(\"tabindex\",\"-1\")):Object(l.C)(t,'[aria-owns=\"'+this.getID()+'\"]')?this.isBlur=!1:(this.isBlur=!0,t=null)}if(this.isBlur&&Object(l.W)(t)){Object(l.hb)([this.element],[\"e-focused\"]),this.notify(\"focusChange\",{});var i=this.getUpdatedValue();this.setProperties({value:i}),this.notify(\"toolbar-refresh\",{args:e,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,Ue(this.valueContainer,\"focusout\"),this.defaultResize(e),this.trigger(\"blur\",{event:e,isInteracted:0!==Object.keys(e).length}),Object(l.W)(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),l.l.remove(document,\"mousedown\",this.onDocumentClick)}else this.isRTE=!0},t.prototype.contentChanged=function(){this.autoSaveOnIdle&&(Object(l.W)(this.saveInterval)||(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))},t.prototype.invokeChangeEvent=function(){var e={value:this.enableXhtml?this.getXhtml():this.value};this.value!==this.cloneValue&&(this.trigger(\"change\",e),this.cloneValue=this.value)},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=Object(c.c)(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var n=t[e];l.l.add(n,\"scroll\",this.scrollHandler,this)}this.iframeSettings.enable||l.l.add(this.contentModule.getPanel(),\"scroll\",this.contentScrollHandler,this)},t.prototype.wireContextEvent=function(){this.quickToolbarSettings.showOnRightClick&&(l.l.add(this.inputElement,\"contextmenu\",this.contextHandler,this),l.d.isDevice&&(this.touchModule=new l.u(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))},t.prototype.unWireContextEvent=function(){l.l.remove(this.inputElement,\"contextmenu\",this.contextHandler),l.d.isDevice&&this.touchModule&&this.touchModule.destroy()},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=Object(c.c)(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var n=t[e];l.l.remove(n,\"scroll\",this.scrollHandler)}this.iframeSettings.enable||l.l.remove(this.contentModule.getPanel(),\"scroll\",this.contentScrollHandler)},t.prototype.touchHandler=function(e){this.notifyMouseUp(e.originalEvent),this.triggerEditArea(e.originalEvent)},t.prototype.contextHandler=function(e){var t=Object(l.C)(e.target,\"a, table, img\");!1!==this.inlineMode.onSelection&&(Object(l.W)(t)||!this.inputElement.contains(t)||\"IMG\"!==t.tagName&&\"TABLE\"!==t.tagName&&\"A\"!==t.tagName)||e.preventDefault()},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim();this.setProperties({value:\"\"===e?null:this.isBlazor()?this.defaultResetValue:e})},t.prototype.autoResize=function(){var e=this;if(\"auto\"===this.height){if(\"Markdown\"===this.editorMode)setTimeout((function(){e.setAutoHeight(e.inputElement)}),0);else if(this.iframeSettings.enable){var t=this.element.querySelector(\"#\"+this.getID()+\"_rte-view\");setTimeout((function(){e.setAutoHeight(t)}),100),this.inputElement.style.overflow=\"hidden\"}}else this.inputElement.style.overflow=null},t.prototype.setAutoHeight=function(e){Object(l.W)(e)||(e.style.height=\"\",e.style.height=this.inputElement.scrollHeight+\"px\",e.style.overflow=\"hidden\")},t.prototype.wireEvents=function(){this.element.addEventListener(\"focusin\",this.onFocusHandler,!0),this.element.addEventListener(\"focusout\",this.onBlurHandler,!0),this.on(\"content-changed\",this.contentChanged,this),this.on(\"resizeInitialized\",this.updateResizeFlag,this),this.readonly&&this.enabled||this.bindEvents()},t.prototype.restrict=function(e){if(this.maxLength>=0){for(var t=\"Markdown\"===this.editorMode?this.contentModule.getText():e.currentTarget.textContent.trim(),n=[8,16,17,37,38,39,40,46,65],i=void 0,r=0;r<=n.length-1;r++)if(e.which===n[r]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(i=n[r])}t.length>=this.maxLength&&-1!==this.maxLength&&e.which!==i&&e.preventDefault()}},t.prototype.bindEvents=function(){this.keyboardModule=new j(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:nt({},this.formatter.keyConfig,this.keyConfig),eventName:\"keydown\"});var e=Object(l.C)(this.valueContainer,\"form\");e&&l.l.add(e,\"reset\",this.resetHandler,this),l.l.add(this.inputElement,\"keyup\",this.keyUp,this),l.l.add(this.inputElement,\"paste\",this.onPaste,this),l.l.add(this.inputElement,l.d.touchEndEvent,Object(l.G)(this.mouseUp,30),this),l.l.add(this.inputElement,l.d.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on(\"keydown-handler\",this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener(\"resize\",this.onResizeHandler,!0),this.iframeSettings.enable&&(l.l.add(this.inputElement,\"focusin\",this.focusHandler,this),l.l.add(this.inputElement,\"focusout\",this.blurHandler,this),l.l.add(this.inputElement.ownerDocument,\"scroll\",this.contentScrollHandler,this),l.l.add(this.inputElement.ownerDocument,l.d.touchStartEvent,this.onIframeMouseDown,this)),this.wireScrollElementsEvents()},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.notify(\"iframe-click\",e)},t.prototype.editorKeyDown=function(e){switch(e.event.action){case\"copy\":this.onCopy();break;case\"cut\":this.onCut()}!e.callBack||\"copy\"!==e.event.action&&\"cut\"!==e.event.action&&\"delete\"!==e.event.action||e.callBack({requestType:e.event.action,editorMode:\"HTML\",event:e.event})},t.prototype.unWireEvents=function(){this.element.removeEventListener(\"focusin\",this.onFocusHandler,!0),this.element.removeEventListener(\"focusout\",this.onBlurHandler,!0),this.off(\"content-changed\",this.contentChanged),this.off(\"resizeInitialized\",this.updateResizeFlag),this.readonly&&this.enabled||this.unbindEvents()},t.prototype.unbindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var e=Object(l.C)(this.valueContainer,\"form\");e&&l.l.remove(e,\"reset\",this.resetHandler),l.l.remove(this.inputElement,\"keyup\",this.keyUp),l.l.remove(this.inputElement,\"paste\",this.onPaste),l.l.remove(this.inputElement,l.d.touchEndEvent,Object(l.G)(this.mouseUp,30)),l.l.remove(this.inputElement,l.d.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off(\"keydown-handler\",this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener(\"resize\",this.onResizeHandler,!0),this.iframeSettings.enable&&(l.l.remove(this.inputElement,\"focusin\",this.focusHandler),l.l.remove(this.inputElement,\"focusout\",this.blurHandler),l.l.remove(this.inputElement.ownerDocument,\"scroll\",this.contentScrollHandler),l.l.remove(this.inputElement.ownerDocument,l.d.touchStartEvent,this.onIframeMouseDown)),this.unWireScrollElementsEvents()},it([Object(l.g)({},de)],t.prototype,\"toolbarSettings\",void 0),it([Object(l.g)({},me)],t.prototype,\"quickToolbarSettings\",void 0),it([Object(l.g)({},fe)],t.prototype,\"pasteCleanupSettings\",void 0),it([Object(l.g)({},we)],t.prototype,\"iframeSettings\",void 0),it([Object(l.g)({},he)],t.prototype,\"insertImageSettings\",void 0),it([Object(l.g)({},ue)],t.prototype,\"tableSettings\",void 0),it([Object(l.s)(0)],t.prototype,\"floatingToolbarOffset\",void 0),it([Object(l.g)({},je)],t.prototype,\"inlineMode\",void 0),it([Object(l.g)({},pe)],t.prototype,\"fileManagerSettings\",void 0),it([Object(l.s)(\"100%\")],t.prototype,\"width\",void 0),it([Object(l.s)(!1)],t.prototype,\"enablePersistence\",void 0),it([Object(l.s)(!1)],t.prototype,\"enableResize\",void 0),it([Object(l.s)({})],t.prototype,\"htmlAttributes\",void 0),it([Object(l.s)(null)],t.prototype,\"placeholder\",void 0),it([Object(l.s)(!1)],t.prototype,\"autoSaveOnIdle\",void 0),it([Object(l.s)(!1)],t.prototype,\"readonly\",void 0),it([Object(l.s)(!0)],t.prototype,\"enabled\",void 0),it([Object(l.s)(!0)],t.prototype,\"enableHtmlSanitizer\",void 0),it([Object(l.s)(!1)],t.prototype,\"enableHtmlEncode\",void 0),it([Object(l.s)(!1)],t.prototype,\"enableXhtml\",void 0),it([Object(l.s)(\"auto\")],t.prototype,\"height\",void 0),it([Object(l.s)(null)],t.prototype,\"cssClass\",void 0),it([Object(l.s)(null)],t.prototype,\"value\",void 0),it([Object(l.s)(30)],t.prototype,\"undoRedoSteps\",void 0),it([Object(l.s)(300)],t.prototype,\"undoRedoTimer\",void 0),it([Object(l.s)(\"HTML\")],t.prototype,\"editorMode\",void 0),it([Object(l.s)(null)],t.prototype,\"keyConfig\",void 0),it([Object(l.s)(!1)],t.prototype,\"showCharCount\",void 0),it([Object(l.s)(!1)],t.prototype,\"enableTabKey\",void 0),it([Object(l.s)(!1)],t.prototype,\"enableAutoUrl\",void 0),it([Object(l.s)(-1)],t.prototype,\"maxLength\",void 0),it([Object(l.g)({},ve)],t.prototype,\"format\",void 0),it([Object(l.g)({},ge)],t.prototype,\"fontFamily\",void 0),it([Object(l.g)({},be)],t.prototype,\"fontSize\",void 0),it([Object(l.g)({},ye)],t.prototype,\"fontColor\",void 0),it([Object(l.g)({},Ce)],t.prototype,\"backgroundColor\",void 0),it([Object(l.s)(null)],t.prototype,\"valueTemplate\",void 0),it([Object(l.s)(1e4)],t.prototype,\"saveInterval\",void 0),it([Object(l.k)()],t.prototype,\"actionBegin\",void 0),it([Object(l.k)()],t.prototype,\"actionComplete\",void 0),it([Object(l.k)()],t.prototype,\"beforeDialogOpen\",void 0),it([Object(l.k)()],t.prototype,\"dialogOpen\",void 0),it([Object(l.k)()],t.prototype,\"beforeDialogClose\",void 0),it([Object(l.k)()],t.prototype,\"dialogClose\",void 0),it([Object(l.k)()],t.prototype,\"beforeQuickToolbarOpen\",void 0),it([Object(l.k)()],t.prototype,\"quickToolbarOpen\",void 0),it([Object(l.k)()],t.prototype,\"quickToolbarClose\",void 0),it([Object(l.k)()],t.prototype,\"toolbarStatusUpdate\",void 0),it([Object(l.k)()],t.prototype,\"imageSelected\",void 0),it([Object(l.k)()],t.prototype,\"beforeImageUpload\",void 0),it([Object(l.k)()],t.prototype,\"imageUploading\",void 0),it([Object(l.k)()],t.prototype,\"imageUploadSuccess\",void 0),it([Object(l.k)()],t.prototype,\"imageUploadFailed\",void 0),it([Object(l.k)()],t.prototype,\"imageRemoving\",void 0),it([Object(l.k)()],t.prototype,\"afterImageDelete\",void 0),it([Object(l.k)()],t.prototype,\"created\",void 0),it([Object(l.k)()],t.prototype,\"destroyed\",void 0),it([Object(l.k)()],t.prototype,\"beforeSanitizeHtml\",void 0),it([Object(l.k)()],t.prototype,\"blur\",void 0),it([Object(l.k)()],t.prototype,\"toolbarClick\",void 0),it([Object(l.k)()],t.prototype,\"focus\",void 0),it([Object(l.k)()],t.prototype,\"change\",void 0),it([Object(l.k)()],t.prototype,\"resizing\",void 0),it([Object(l.k)()],t.prototype,\"resizeStart\",void 0),it([Object(l.k)()],t.prototype,\"resizeStop\",void 0),it([Object(l.s)(null)],t.prototype,\"formatter\",void 0),t=it([l.q],t)}(l.h),ot=n(\"RT8c\"),at=n(\"5+eb\"),st=n(\"/gUa\"),lt=function(){function e(e){this.parent=e,this.wireEvent()}return e.prototype.wireEvent=function(){this.parent.on(h,this.unWireEvent,this)},e.prototype.unWireEvent=function(){this.parent.off(h,this.unWireEvent),this.popupOverlay&&l.l.remove(this.popupOverlay,\"click touchmove\",this.onPopupOverlay),this.removePopupContainer()},e.prototype.toolbarBeforeCreate=function(e){\"Extended\"===this.mode&&(e.enableCollision=!1)},e.prototype.toolbarCreated=function(){this.parent.notify(\"toolbarCreated\",this)},e.prototype.toolbarClicked=function(e){this.parent.enabled&&(this.parent.readonly||this.parent.notify(\"toolbarClick\",e),this.parent.trigger(\"toolbarClick\",e))},e.prototype.dropDownSelected=function(e){this.parent.notify(\"dropDownSelect\",e),this.onPopupOverlay()},e.prototype.beforeDropDownItemRender=function(e){!this.parent.readonly&&this.parent.enabled&&this.parent.notify(\"beforeDropDownItemRender\",e)},e.prototype.dropDownOpen=function(e){l.d.isDevice&&!e.element.parentElement.classList.contains(\"e-quick-dropdown\")&&this.popupModal(e.element.parentElement),this.parent.notify(\"selection-save\",e)},e.prototype.dropDownClose=function(e){this.removePopupContainer(),this.parent.notify(\"selection-restore\",e)},e.prototype.removePopupContainer=function(){if(l.d.isDevice&&!Object(l.W)(this.popupContainer)){var e=this.popupContainer.querySelector(\".e-dropdown-popup.e-tbar-btn.e-control\");e&&(this.popupContainer.parentNode.insertBefore(e,this.popupContainer.nextSibling),e.style.removeProperty(\"position\"),Object(l.hb)([e],\"e-popup-modal\")),Object(l.I)(this.popupContainer),this.popupContainer=void 0}},e.prototype.renderToolbar=function(e){this.setPanel(e.target),this.renderPanel(),this.mode=e.overflowMode,e.rteToolbarObj.toolbarObj=new ot.a({items:e.items,width:\"100%\",overflowMode:e.overflowMode,beforeCreate:this.toolbarBeforeCreate.bind(this),created:this.toolbarCreated.bind(this),clicked:this.toolbarClicked.bind(this),enablePersistence:e.enablePersistence,enableRtl:e.enableRtl}),e.rteToolbarObj.toolbarObj.isStringTemplate=!0,e.rteToolbarObj.toolbarObj.createElement=this.parent.createElement,e.rteToolbarObj.toolbarObj.appendTo(e.target)},e.prototype.renderDropDownButton=function(e){var t,n=this;e.element.classList.add(C),t=e.cssClass+\" e-rte-elements e-tbar-btn\",this.parent.inlineMode.enable&&l.d.isDevice&&(t+=\" e-rte-inline-dropdown\");var i=this,r=new at.a({items:e.items,iconCss:e.iconCss,cssClass:t,content:e.content,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,select:this.dropDownSelected.bind(this),beforeOpen:function(e){if(!i.parent.readonly&&i.parent.enabled){for(var t=0;t<e.element.childNodes.length;t++){var o=n.parent.createElement(\"div\");o.innerHTML=r.content.trim(),\"\"!==o.textContent.trim()&&e.element.childNodes[t].textContent.trim()===o.textContent.trim()?e.element.childNodes[t].classList.contains(\"e-active\")||Object(l.v)([e.element.childNodes[t]],\"e-active\"):Object(l.hb)([e.element.childNodes[t]],\"e-active\")}i.parent.notify(\"beforeDropDownOpen\",e)}else e.cancel=!0},close:this.dropDownClose.bind(this),open:this.dropDownOpen.bind(this),beforeItemRender:this.beforeDropDownItemRender.bind(this)});return r.isStringTemplate=!0,r.createElement=i.parent.createElement,r.appendTo(e.element),e.element.tabIndex=-1,document.getElementById(r.element.id+\"-popup\").setAttribute(\"aria-owns\",this.parent.getID()),r},e.prototype.onPopupOverlay=function(e){Object(l.W)(this.popupOverlay)||(Object(l.C)(this.popupOverlay,\".e-popup-container\").style.display=\"none\",this.popupOverlay.style.display=\"none\",Object(l.hb)([this.popupOverlay],\"e-popup-overlay\"))},e.prototype.setIsModel=function(e){Object(l.C)(e,\".e-popup-container\")?(e.parentElement.style.display=\"flex\",this.popupOverlay=e.nextElementSibling,this.popupOverlay.style.display=\"block\",Object(l.v)([this.popupOverlay],\"e-popup-overlay\")):(this.popupContainer=this.parent.createElement(\"div\",{className:\"e-rte-modal-popup e-popup-container e-center\"}),e.parentNode.insertBefore(this.popupContainer,e),this.popupContainer.appendChild(e),this.popupContainer.style.zIndex=e.style.zIndex,this.popupContainer.style.display=\"flex\",e.style.position=\"relative\",Object(l.v)([e],\"e-popup-modal\"),this.popupOverlay=this.parent.createElement(\"div\",{className:\"e-popup-overlay\"}),this.popupOverlay.style.zIndex=(parseInt(e.style.zIndex,null)-1).toString(),this.popupOverlay.style.display=\"block\",this.popupContainer.appendChild(this.popupOverlay),l.l.add(this.popupOverlay,\"click touchmove\",this.onPopupOverlay,this))},e.prototype.paletteSelection=function(e,t){var n=e.element.querySelector(\".e-control.e-colorpicker\"),i=[].slice.call(Object(l.lb)(\".e-tile\",n.parentElement));Object(l.hb)(i,\"e-selected\");var r=t.querySelector(\".e-rte-elements\").style.borderBottomColor;i.filter((function(e){e.style.backgroundColor===r&&Object(l.v)([e],\"e-selected\")}))},e.prototype.renderColorPickerDropDown=function(e,t,n){var i=this,r=this,o=\"e-rte-elements e-tbar-btn\"+(this.parent.inlineMode?\" e-rte-inline-dropdown\":\"\");o+=\" \"+(\"backgroundcolor\"===t?\"e-rte-backgroundcolor-dropdown\":\"e-rte-fontcolor-dropdown\");var a,s=r.parent.createElement(\"span\",{className:\"e-rte-color-content\"}),c=r.parent.createElement(\"span\",{className:e.cssClass});c.style.borderBottomColor=\"backgroundcolor\"===t?r.parent.backgroundColor.default:r.parent.fontColor.default,s.appendChild(c);var d=new at.a({target:n.element.parentElement,cssClass:o,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,beforeOpen:function(t){if(!r.parent.readonly&&r.parent.enabled){var n=t.event?t.event.target:null;if(r.currentElement=d.element,r.currentDropdown=d,r.paletteSelection(t,r.currentElement),t.event&&\"click\"===t.event.type&&(n.classList.contains(\"e-rte-color-content\")||n.parentElement.classList.contains(\"e-rte-color-content\"))){t.cancel=!0;var i=n.classList.contains(\"e-rte-elements\")?n.style.borderBottomColor:n.querySelector(\".e-rte-elements\").style.borderBottomColor;r.parent.notify(\"selection-restore\",{});var o=(a=r.parent.formatter.editorManager.nodeSelection.getRange(r.parent.contentModule.getDocument())).startContainer.parentNode;(\"TD\"===a.startContainer.nodeName||\"TH\"===a.startContainer.nodeName||Object(l.C)(a.startContainer.parentNode,\"td,th\")||r.parent.iframeSettings.enable&&!Pe(o.ownerDocument.querySelector(\"body\"),\"e-lib\"))&&a.collapsed&&\"BackgroundColor\"===e.subCommand?r.parent.notify(\"tableColorPickerChanged\",{item:{command:e.command,subCommand:e.subCommand,value:i}}):r.parent.notify(\"colorPickerChanged\",{item:{command:e.command,subCommand:e.subCommand,value:i}})}else{var s=t.element.querySelector(\".e-control.e-colorpicker\"),c=Object(l.P)(s,st.a);c.showButtons=!t.element.querySelector(\".e-color-palette\"),c.dataBind(),t.element.onclick=function(e){e.target.classList.contains(\"e-cancel\")&&d.toggle()}}}else t.cancel=!0},open:function(e){var t;i.setColorPickerContentWidth(n);var r=e.element.querySelector(\".e-control.e-colorpicker\");(t=e.element.querySelector(\".e-color-palette\")?r.parentElement.querySelector(\".e-palette\"):r.parentElement.querySelector(\"e-handler\"))&&t.focus(),l.d.isDevice&&i.popupModal(e.element.parentElement),i.pickerRefresh(e)},beforeClose:function(t){var n=t.event?t.event.target:null;if(t.event&&\"click\"===t.event.type&&(n.classList.contains(\"e-rte-color-content\")||n.parentElement.classList.contains(\"e-rte-color-content\"))){var i=n.classList.contains(\"e-rte-elements\")?n.style.borderBottomColor:n.querySelector(\".e-rte-elements\").style.borderBottomColor;(\"TD\"===(a=r.parent.formatter.editorManager.nodeSelection.getRange(r.parent.contentModule.getDocument())).startContainer.nodeName||\"TH\"===a.startContainer.nodeName||Object(l.C)(a.startContainer.parentNode,\"td,th\"))&&a.collapsed?r.parent.notify(\"tableColorPickerChanged\",{item:{command:e.command,subCommand:e.subCommand,value:i}}):r.parent.notify(\"colorPickerChanged\",{item:{command:e.command,subCommand:e.subCommand,value:i}})}else;},close:function(e){r.parent.notify(\"selection-restore\",{});var t=Object(l.C)(e.element.parentElement,\".e-popup-container\");if(t&&(t.style.display=\"none\",t.lastElementChild.style.display=\"none\",Object(l.hb)([t.lastElementChild],\"e-popup-overlay\")),l.d.isDevice&&!Object(l.W)(t)){var n=t.querySelector(\".e-dropdown-popup.e-tbar-btn.e-control\");n&&(t.parentNode.insertBefore(n,t.nextSibling),n.style.removeProperty(\"position\"),Object(l.hb)([n],\"e-popup-modal\")),Object(l.I)(t),r.popupContainer=void 0}}});return d.isStringTemplate=!0,d.createElement=r.parent.createElement,d.appendTo(e.element),document.getElementById(d.element.id+\"-popup\").setAttribute(\"aria-owns\",this.parent.getID()),d.element.insertBefore(s,d.element.querySelector(\".e-caret\")),e.element.tabIndex=-1,d.element.removeAttribute(\"type\"),d.element.onmousedown=function(){r.parent.notify(\"selection-save\",{})},d.element.onkeydown=function(){r.parent.notify(\"selection-save\",{})},d},e.prototype.pickerRefresh=function(e){if(\"Picker\"===this.parent.backgroundColor.mode){var t=e.element.parentElement;t.style.width=(t.offsetWidth+5).toString()+\"px\",Object(l.P)(t,c.a).refreshPosition(t),t.style.width=(t.offsetWidth-5).toString()+\"px\"}},e.prototype.popupModal=function(e){var t=Object(l.P)(e,c.a);t.relateTo=document.body,t.position={X:0,Y:0},t.targetType=\"container\",t.collision={X:\"fit\",Y:\"fit\"},t.offsetY=4,t.dataBind(),this.setIsModel(e)},e.prototype.setColorPickerContentWidth=function(e){var t=e.element.nextSibling;if(\"0px\"===t.style.width){t.style.width=\"\";var n=parseInt(getComputedStyle(t).borderBottomWidth,10);t.style.width=Object(l.K)(t.children[0].offsetWidth+n+n)}},e.prototype.renderColorPicker=function(e,t){var n=this,i=new st.a({enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,inline:!0,created:function(){var e=\"backgroundcolor\"===t?n.parent.backgroundColor.default:n.parent.fontColor.default;i.setProperties({value:e})},mode:\"backgroundcolor\"===t?n.parent.backgroundColor.mode:n.parent.fontColor.mode,modeSwitcher:\"backgroundcolor\"===t?n.parent.backgroundColor.modeSwitcher:n.parent.fontColor.modeSwitcher,beforeTileRender:function(e){e.element.classList.add(\"e-rte-square-palette\"),e.element.classList.add(\"e-custom-tile\"),\"\"===e.value&&e.element.classList.add(\"e-nocolor-item\")},change:function(t){var i=t.currentValue.rgba;t.item={command:e.command,subCommand:e.subCommand,value:i},n.parent.notify(\"selection-restore\",{}),n.currentElement.querySelector(\".e-rte-elements\").style.borderBottomColor=i;var r=n.parent.formatter.editorManager.nodeSelection.getRange(n.parent.contentModule.getDocument());(\"TD\"===r.startContainer.nodeName||\"TH\"===r.startContainer.nodeName||Object(l.C)(r.startContainer.parentNode,\"td,th\"))&&r.collapsed&&\"BackgroundColor\"===e.subCommand?n.parent.notify(\"tableColorPickerChanged\",t):n.parent.notify(\"colorPickerChanged\",t),n.currentDropdown.toggle()},beforeModeSwitch:function(e){\"\"===i.value&&i.setProperties({value:\"Picker\"===e.mode?\"#008000ff\":\"\"},!0),i.showButtons=\"Palette\"!==e.mode}});return i.isStringTemplate=!0,i.columns=\"backgroundcolor\"===t?this.parent.backgroundColor.columns:this.parent.fontColor.columns,i.presetColors=\"backgroundcolor\"===t?this.parent.backgroundColor.colorCode:this.parent.fontColor.colorCode,i.cssClass=\"backgroundcolor\"===t?\"e-rte-backgroundcolor-colorpicker\":\"e-rte-fontcolor-colorpicker\",i.createElement=this.parent.createElement,i.appendTo(document.body.querySelector(e.target)),i},e.prototype.renderPanel=function(){this.getPanel().classList.add(\"e-rte-toolbar\")},e.prototype.getPanel=function(){return this.toolbarPanel},e.prototype.setPanel=function(e){this.toolbarPanel=e},e}(),ct=function(){function e(e,t){this.tools={},this.parent=e,this.locator=t,this.renderFactory=this.locator.getService(\"rendererFactory\"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?Object(l.J)(this.tools,z,Qe(this.parent.toolbarSettings.itemConfigs),!0):this.tools=z}return e.prototype.addEventListener=function(){this.parent.on(b,this.setRtl,this),this.parent.on(h,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off(b,this.setRtl),this.parent.off(h,this.removeEventListener)},e.prototype.setRtl=function(e){Object(l.W)(this.toolbarObj)||this.toolbarObj.setProperties({enableRtl:e.enableRtl})},e.prototype.getTemplateObject=function(e,t){var n;switch(e){case\"fontcolor\":case\"backgroundcolor\":n=\"span\";break;default:n=\"button\"}return{command:this.tools[e.toLocaleLowerCase()].command,subCommand:this.tools[e.toLocaleLowerCase()].subCommand,template:this.parent.createElement(n,{id:this.parent.getID()+\"_\"+t+\"_\"+this.tools[e.toLocaleLowerCase()].id}).outerHTML,tooltipText:He(e,this.locator)}},e.prototype.getObject=function(e,t){var n=e.toLowerCase();if(-1!==W.indexOf(n))return this.getTemplateObject(n,t);switch(n){case\"|\":return{type:\"Separator\"};case\"-\":return{type:\"Separator\",cssClass:\"e-rte-horizontal-separator\"};default:return{id:this.parent.getID()+\"_\"+t+\"_\"+this.tools[n.toLocaleLowerCase()].id,prefixIcon:this.tools[n.toLocaleLowerCase()].icon,tooltipText:He(n,this.locator),command:this.tools[n.toLocaleLowerCase()].command,subCommand:this.tools[n.toLocaleLowerCase()].subCommand}}},e.prototype.getItems=function(e,t){var n=this;if(this.parent.toolbarSettings.items.length<1)return[];for(var i=[],r=function(e){switch(typeof e){case\"string\":i.push(o.getObject(e,t));break;default:if(!Object(l.W)(e.click)){var r=e,a=r.click;r.click=function(){r.undo&&0===n.parent.formatter.getUndoRedoStack().length&&n.parent.formatter.saveData(),a.call(n),n.parent.formatter.getUndoRedoStack()[n.parent.formatter.getUndoRedoStack().length-1].text.trim()!==n.parent.inputElement.innerHTML.trim()&&r.undo&&n.parent.formatter.saveData()}}i.push(e)}},o=this,a=0,s=e;a<s.length;a++){r(s[a])}return i},e.prototype.getToolbarOptions=function(e){return{target:e.target,rteToolbarObj:this,items:this.getItems(e.items,e.container),overflowMode:e.mode,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl}},e.prototype.render=function(e){this.toolbarRenderer=this.renderFactory.getRenderer(i.Toolbar),this.toolbarRenderer.renderToolbar(this.getToolbarOptions(e))},e}(),dt=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService(\"rendererFactory\"),this.addEventListener()}return e.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(i.Toolbar)},e.prototype.beforeRender=function(e){var t=e.item;t.cssClass&&Object(l.v)([e.element],t.cssClass),\"Alignments\"!==t.command&&\"JustifyLeft\"!==t.subCommand&&\"JustifyRight\"!==t.subCommand&&\"JustifyCenter\"!==t.subCommand||e.element.setAttribute(\"title\",He(t.subCommand.toLocaleLowerCase(),this.locator))},e.prototype.dropdownContent=function(e,t,n){return'<span style=\"display: inline-flex;width:'+(\"quick\"===t?\"auto\":e)+'\" ><span class=\"e-rte-dropdown-btn-text\">'+n+\"</span></span>\"},e.prototype.renderDropDowns=function(e){var t=this;this.initializeInstance();var n=e.containerType,i=e.container;W.forEach((function(r){var o=void 0;if(-1!==Re(r,e.items))switch(r){case\"formats\":if(o=Object(l.kb)(\"#\"+t.parent.getID()+\"_\"+n+\"_Formats\",i),Object(l.W)(o)||o.classList.contains(C))return;var a=t.parent.format.types.slice();a.forEach((function(e){Object.defineProperties(e,{command:{value:\"Formats\",enumerable:!0},subCommand:{value:e.value,enumerable:!0}})}));var s=Object(l.W)(t.parent.format.default)?a[0].text:t.parent.format.default;t.formatDropDown=t.toolbarRenderer.renderDropDownButton({iconCss:\"quick\"===n?\"e-formats e-icons\":\"\",content:t.dropdownContent(t.parent.format.width,n,\"quick\"===n?\"\":Be(a,s,\"text\",\"text\")),cssClass:y+\" e-rte-dropdown-items e-formats-tbar-btn\",itemName:\"Formats\",items:a,element:o});break;case\"fontname\":if(o=Object(l.kb)(\"#\"+t.parent.getID()+\"_\"+n+\"_FontName\",i),Object(l.W)(o)||o.classList.contains(C))return;var c=t.parent.fontFamily.items.slice();c.forEach((function(e){Object.defineProperties(e,{command:{value:\"Font\",enumerable:!0},subCommand:{value:\"FontName\",enumerable:!0}})}));var d=Object(l.W)(t.parent.fontFamily.default)?c[0].text:t.parent.fontFamily.default;t.fontNameDropDown=t.toolbarRenderer.renderDropDownButton({iconCss:\"quick\"===n?\"e-font-name e-icons\":\"\",content:t.dropdownContent(t.parent.fontFamily.width,n,\"quick\"===n?\"\":Be(c,d,\"text\",\"text\")),cssClass:y+\" e-rte-dropdown-items e-font-name-tbar-btn\",itemName:\"FontName\",items:c,element:o}),Object(l.W)(t.parent.fontFamily.default)||(t.getEditNode().style.fontFamily=t.parent.fontFamily.default);break;case\"fontsize\":if(o=Object(l.kb)(\"#\"+t.parent.getID()+\"_\"+n+\"_FontSize\",i),Object(l.W)(o)||o.classList.contains(C))return;var h=t.parent.fontSize.items.slice();h.forEach((function(e){Object.defineProperties(e,{command:{value:\"Font\",enumerable:!0},subCommand:{value:\"FontSize\",enumerable:!0}})}));var p=Object(l.W)(t.parent.fontSize.default)?h[1].text:t.parent.fontSize.default;t.fontSizeDropDown=t.toolbarRenderer.renderDropDownButton({content:t.dropdownContent(t.parent.fontSize.width,n,_e(Be(h,p.replace(/\\s/g,\"\"),\"value\",\"text\"))),cssClass:y+\" e-rte-dropdown-items e-font-size-tbar-btn\",itemName:\"FontSize\",items:h,element:o}),Object(l.W)(t.parent.fontSize.default)||(t.getEditNode().style.fontSize=t.parent.fontSize.default);break;case\"alignments\":if(o=Object(l.kb)(\"#\"+t.parent.getID()+\"_\"+n+\"_Alignments\",i),Object(l.W)(o)||o.classList.contains(C))return;t.alignDropDown=t.toolbarRenderer.renderDropDownButton({iconCss:\"e-justify-left e-icons\",cssClass:y+\" e-rte-dropdown-items\",itemName:\"Alignments\",items:q,element:o});break;case\"align\":t.imageAlignmentDropDown(n,i,o);break;case\"display\":t.imageDisplayDropDown(n,i,o);break;case\"tablerows\":t.rowDropDown(n,i,o);break;case\"tablecolumns\":t.columnDropDown(n,i,o);break;case\"tablecellverticalalign\":t.verticalAlignDropDown(n,i,o);break;case\"styles\":t.tableStylesDropDown(n,i,o)}}))},e.prototype.getUpdateItems=function(e,t){var n=e.slice();return n.forEach((function(e){Object.defineProperties(e,{command:{value:\"Format\"===t?\"Formats\":\"Font\",enumerable:!0},subCommand:{value:\"Format\"===t?e.value:t,enumerable:!0}})})),n},e.prototype.onPropertyChanged=function(e){for(var t,n,i=e.newProp,r=0,o=Object.keys(i);r<o.length;r++){switch(o[r]){case\"fontFamily\":if(this.fontNameDropDown)for(var a=0,s=Object.keys(i.fontFamily);a<s.length;a++){switch(s[a]){case\"default\":case\"width\":var c=this.fontNameDropDown.items;t=Object(l.W)(Object(l.C)(this.fontNameDropDown.element,\".\"+v))?\"toolbar\":\"quick\";var d=Object(l.W)(this.parent.fontFamily.default)?c[0].text:this.parent.fontFamily.default;n=this.dropdownContent(this.parent.fontFamily.width,t,\"quick\"===t?\"\":Be(c,d,\"text\",\"text\")),this.fontNameDropDown.setProperties({content:n}),Object(l.W)(this.parent.fontFamily.default)?this.getEditNode().style.removeProperty(\"font-family\"):this.getEditNode().style.fontFamily=this.parent.fontFamily.default;break;case\"items\":this.fontNameDropDown.setProperties({items:this.getUpdateItems(i.fontFamily.items,\"FontName\")})}}break;case\"fontSize\":if(this.fontSizeDropDown)for(var h=0,p=Object.keys(i.fontSize);h<p.length;h++){switch(p[h]){case\"default\":case\"width\":var u=this.fontSizeDropDown.items;t=Object(l.W)(Object(l.C)(this.fontSizeDropDown.element,\".\"+v))?\"toolbar\":\"quick\";var m=Object(l.W)(this.parent.fontSize.default)?u[1].text:this.parent.fontSize.default;n=this.dropdownContent(this.parent.fontSize.width,t,_e(Be(u,m.replace(/\\s/g,\"\"),\"value\",\"text\"))),this.fontSizeDropDown.setProperties({content:n}),Object(l.W)(this.parent.fontSize.default)?this.getEditNode().style.removeProperty(\"font-size\"):this.getEditNode().style.fontSize=this.parent.fontSize.default;break;case\"items\":this.fontSizeDropDown.setProperties({items:this.getUpdateItems(i.fontSize.items,\"FontSize\")})}}break;case\"format\":if(this.formatDropDown)for(var f=0,g=Object.keys(i.format);f<g.length;f++){switch(g[f]){case\"default\":case\"width\":var b=this.formatDropDown.items;t=Object(l.W)(Object(l.C)(this.formatDropDown.element,\".\"+v))?\"toolbar\":\"quick\";var y=Object(l.W)(this.parent.format.default)?b[0].text:this.parent.format.default;n=this.dropdownContent(this.parent.format.width,t,\"quick\"===t?\"\":Be(b,y,\"text\",\"text\")),this.formatDropDown.setProperties({content:n});break;case\"types\":this.formatDropDown.setProperties({items:this.getUpdateItems(i.format.types,\"Format\")})}}}}},e.prototype.getEditNode=function(){return this.parent.contentModule.getEditPanel()},e.prototype.rowDropDown=function(e,t,n){(n=Object(l.kb)(\"#\"+this.parent.getID()+\"_\"+e+\"_TableRows\",t)).classList.contains(C)||(this.tableRowsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:\"e-table-rows e-icons\",cssClass:y+\" e-rte-dropdown-items e-quick-dropdown\",itemName:\"TableRows\",items:K,element:n}))},e.prototype.columnDropDown=function(e,t,n){(n=Object(l.kb)(\"#\"+this.parent.getID()+\"_\"+e+\"_TableColumns\",t)).classList.contains(C)||(this.tableColumnsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:\"e-table-columns e-icons\",cssClass:y+\" e-rte-dropdown-items e-quick-dropdown\",itemName:\"TableColumns\",items:Y,element:n}))},e.prototype.verticalAlignDropDown=function(e,t,n){(n=Object(l.kb)(\"#\"+this.parent.getID()+\"_\"+e+\"_TableCellVerticalAlign\",t)).classList.contains(C)||(this.tableCellVerticalAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:\"e-table-cell-ver-align e-icons\",cssClass:y+\" e-rte-dropdown-items e-quick-dropdown\",itemName:\"TableCellVerticalAlign\",items:$,element:n}))},e.prototype.imageDisplayDropDown=function(e,t,n){(n=Object(l.kb)(\"#\"+this.parent.getID()+\"_\"+e+\"_Display\",t)).classList.contains(C)||(this.displayDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:\"e-display e-icons\",cssClass:y+\" e-rte-dropdown-items e-quick-dropdown\",itemName:\"Display\",items:Q,element:n}))},e.prototype.imageAlignmentDropDown=function(e,t,n){(n=Object(l.kb)(\"#\"+this.parent.getID()+\"_\"+e+\"_Align\",t)).classList.contains(C)||(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:\"e-justify-left e-icons\",cssClass:y+\" e-rte-dropdown-icons e-quick-dropdown\",itemName:\"Align\",items:U,element:n}))},e.prototype.tableStylesDropDown=function(e,t,n){(n=Object(l.kb)(\"#\"+this.parent.getID()+\"_\"+e+\"_Styles\",t)).classList.contains(C)||(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:\"e-style e-icons\",cssClass:y+\" e-rte-dropdown-icons e-quick-dropdown\",itemName:\"Styles\",items:this.parent.tableSettings.styles,element:n}))},e.prototype.removeDropDownClasses=function(e){Object(l.hb)([e],[C,y,\"e-rte-dropdown-icons\",\"e-rte-dropdown-items\"])},e.prototype.destroyDropDowns=function(){this.formatDropDown&&(this.removeDropDownClasses(this.formatDropDown.element),this.formatDropDown.destroy()),this.fontNameDropDown&&(this.removeDropDownClasses(this.fontNameDropDown.element),this.fontNameDropDown.destroy()),this.fontSizeDropDown&&(this.removeDropDownClasses(this.fontSizeDropDown.element),this.fontSizeDropDown.destroy()),this.alignDropDown&&(this.removeDropDownClasses(this.alignDropDown.element),this.alignDropDown.destroy()),this.imageAlignDropDown&&(this.removeDropDownClasses(this.imageAlignDropDown.element),this.imageAlignDropDown.destroy()),this.displayDropDown&&(this.removeDropDownClasses(this.displayDropDown.element),this.displayDropDown.destroy()),this.tableRowsDropDown&&(this.removeDropDownClasses(this.tableRowsDropDown.element),this.tableRowsDropDown.destroy()),this.tableColumnsDropDown&&(this.removeDropDownClasses(this.tableColumnsDropDown.element),this.tableColumnsDropDown.destroy()),this.tableCellVerticalAlignDropDown&&(this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element),this.tableCellVerticalAlignDropDown.destroy())},e.prototype.setRtl=function(e){this.formatDropDown&&this.formatDropDown.setProperties({enableRtl:e.enableRtl}),this.fontNameDropDown&&this.fontNameDropDown.setProperties({enableRtl:e.enableRtl}),this.fontSizeDropDown&&this.fontSizeDropDown.setProperties({enableRtl:e.enableRtl}),this.alignDropDown&&this.alignDropDown.setProperties({enableRtl:e.enableRtl}),this.imageAlignDropDown&&this.imageAlignDropDown.setProperties({enableRtl:e.enableRtl}),this.displayDropDown&&this.displayDropDown.setProperties({enableRtl:e.enableRtl})},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(\"beforeDropDownItemRender\",this.beforeRender,this),this.parent.on(\"iframe-click\",this.onIframeMouseDown,this),this.parent.on(b,this.setRtl,this),this.parent.on(h,this.removeEventListener,this),this.parent.on(p,this.onPropertyChanged,this))},e.prototype.onIframeMouseDown=function(){Ue(document,\"mousedown\")},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(\"iframe-click\",this.onIframeMouseDown),this.parent.off(b,this.setRtl),this.parent.off(\"beforeDropDownItemRender\",this.beforeRender),this.parent.off(h,this.removeEventListener),this.parent.off(p,this.onPropertyChanged))},e}(),ht=function(){function e(e){this.parent=e,this.addEventListener(),this.serviceLocator=new L,this.serviceLocator.register(\"rendererFactory\",new D)}return e.prototype.addEventListener=function(){this.parent.on(\"toolbarClick\",this.toolbarClick,this),this.parent.on(\"dropDownSelect\",this.dropDownSelect,this),this.parent.on(\"colorPickerChanged\",this.renderSelection,this),this.parent.on(h,this.removeEventListener,this)},e.prototype.toolbarClick=function(e){if(!Object(l.W)(e.item)){if(!Object(l.W)(e.item.controlParent)){var t=e.item.controlParent.activeEle;t&&(t.tabIndex=-1)}this.parent.notify(\"html-toolbar-click\",e),this.parent.notify(\"markdown-toolbar-click\",e)}},e.prototype.dropDownSelect=function(e){if(this.parent.notify(\"selection-restore\",{}),!document.body.contains(document.body.querySelector(\".e-rte-quick-toolbar\"))||!e.item||\"Images\"!==e.item.command&&\"Display\"!==e.item.command&&\"Table\"!==e.item.command){var t=e.item.controlParent&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.tableQTBar&&this.parent.quickToolbarModule.tableQTBar.element.contains(e.item.controlParent.element)?\"Table\":null;this.parent.formatter.process(this.parent,e,e.originalEvent,t)}this.parent.notify(\"selection-save\",{})},e.prototype.renderSelection=function(e){this.parent.notify(\"selection-restore\",{}),this.parent.formatter.process(this.parent,e,e.originalEvent,null),this.parent.notify(\"selection-save\",{})},e.prototype.removeEventListener=function(){this.parent.off(\"toolbarClick\",this.toolbarClick),this.parent.off(\"dropDownSelect\",this.dropDownSelect),this.parent.off(\"colorPickerChanged\",this.renderSelection),this.parent.off(h,this.removeEventListener)},e}(),pt=function(){function e(e,t){this.parent=e,this.isToolbar=!1,this.locator=t,this.isTransformChild=!1,this.renderFactory=this.locator.getService(\"rendererFactory\"),function(e){q.forEach((function(t,n){q[n].text=te(e,F,q[n])})),Q.forEach((function(t,n){Q[n].text=te(e,V,Q[n])})),K.forEach((function(t,n){K[n].text=te(e,G,K[n])})),Y.forEach((function(t,n){Y[n].text=te(e,X,Y[n])})),$.forEach((function(t,n){$[n].text=te(e,J,$[n])})),ee.forEach((function(t,n){ee[n].text=te(e,Z,ee[n])}))}(this.parent),this.renderFactory.addRenderer(i.Toolbar,new lt(this.parent)),this.toolbarRenderer=this.renderFactory.getRenderer(i.Toolbar),this.baseToolbar=new ct(this.parent,this.locator),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?Object(l.J)(this.tools,z,Qe(this.parent.toolbarSettings.itemConfigs),!0):this.tools=z}return e.prototype.initializeInstance=function(){this.contentRenderer=this.renderFactory.getRenderer(i.Content),this.editableElement=this.contentRenderer.getEditPanel(),this.editPanel=this.contentRenderer.getPanel()},e.prototype.toolbarBindEvent=function(){this.parent.inlineMode.enable||(this.keyBoardModule=new l.o(this.getToolbarElement(),{keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:\"keydown\"}))},e.prototype.toolBarKeyDown=function(e){switch(e.action){case\"escape\":this.parent.contentModule.getEditPanel().focus()}},e.prototype.createToolbarElement=function(){this.tbElement=this.parent.createElement(\"div\",{id:this.parent.getID()+\"_toolbar\"}),!l.d.isDevice&&this.parent.inlineMode.enable&&Ae()||(this.parent.toolbarSettings.enableFloating&&!this.parent.inlineMode.enable?(this.tbWrapper=this.parent.createElement(\"div\",{id:this.parent.getID()+\"_toolbar_wrapper\",innerHTML:this.tbElement.outerHTML,className:\"e-toolbar-wrapper\"}),this.tbElement=this.tbWrapper.firstElementChild,this.parent.element.insertBefore(this.tbWrapper,this.editPanel)):this.parent.element.insertBefore(this.tbElement,this.editPanel))},e.prototype.getToolbarMode=function(){var e;switch(this.parent.toolbarSettings.type){case r.Expand:e=\"Extended\";break;case r.Scrollable:e=\"Scrollable\";break;default:e=\"MultiRow\"}return Ae()&&this.parent.toolbarSettings.type===r.Expand&&(e=r.Scrollable),e},e.prototype.checkToolbarResponsive=function(e){return!(!l.d.isDevice||Ae())&&(t=this.parent.toolbarSettings.type===r.Expand?r.MultiRow:this.parent.toolbarSettings.type,this.baseToolbar.render({container:this.parent.inlineMode.enable?\"quick\":\"toolbar\",items:this.parent.toolbarSettings.items,mode:t,target:e}),this.parent.toolbarSettings.type===r.Expand&&(Object(l.v)([e],[\"e-rte-tb-mobile\"]),this.parent.inlineMode.enable?this.addFixedTBarClass():Object(l.v)([e],[\"e-tb-static\"])),this.wireEvents(),this.dropDownModule.renderDropDowns({container:e,containerType:this.parent.inlineMode.enable?\"quick\":\"toolbar\",items:this.parent.toolbarSettings.items}),this.parent.notify(\"render-color-picker\",{container:this.tbElement,containerType:this.parent.inlineMode.enable?\"quick\":\"toolbar\",items:this.parent.toolbarSettings.items}),!0);var t},e.prototype.checkIsTransformChild=function(){this.isTransformChild=!1;for(var e=Object(l.lb)('[style*=\"transform\"]',document),t=0;t<e.length;t++)if(!Object(l.W)(e[t].contains)&&e[t].contains(this.parent.element)){this.isTransformChild=!0;break}},e.prototype.toggleFloatClass=function(e){var t,n,i=!1,r=!1,o=this.parent.floatingToolbarOffset;e&&this.parent.iframeSettings.enable&&this.parent.inputElement.ownerDocument===e.target?n=e.target.body:e&&e.target!==document?n=e.target:(i=!0,n=document.body);var a=this.getToolbarHeight()+this.getExpandTBarPopHeight();if(this.isTransformChild){t=0;var s=0,c=this.parent.element.offsetHeight;if(i){var d=window.getComputedStyle(n);s=parseFloat(d.marginTop.split(\"px\")[0])+parseFloat(d.paddingTop.split(\"px\")[0])}var h=this.parent.element.getBoundingClientRect().top,p=l.d.isMSPointer&&i?window.pageYOffset:n.parentElement.scrollTop,u=n.getBoundingClientRect(),m=i?u.top+p:u.top;h>m+o||h<-c||h<0&&!(h-(i?0:m)+c>a+o)?(r=!1,Object(l.hb)([this.tbElement],[\"e-rte-tb-abs-float\"])):h<m+o&&(t=h<0?-h+m:m-h,t=i?t-s:t,Object(l.v)([this.tbElement],[\"e-rte-tb-abs-float\"]),r=!0)}else{var f=this.parent.element.getBoundingClientRect();if(window.innerHeight<f.top)return;t=e&&e.target!==document?n.getBoundingClientRect().top:0,f.bottom<o+a+t||f.bottom<0||f.top>o+t?r=!1:f.top<o&&(r=!0)}r?(Object(l.v)([this.tbElement],[\"e-rte-tb-float\"]),Object(l.nb)(this.tbElement,{width:this.parent.element.offsetWidth+\"px\",top:o+t+\"px\"})):(Object(l.hb)([this.tbElement],[\"e-rte-tb-float\"]),Object(l.nb)(this.tbElement,{top:\"0px\",width:\"100%\"}))},e.prototype.renderToolbar=function(){if(this.initializeInstance(),this.createToolbarElement(),!this.checkToolbarResponsive(this.tbElement)){this.parent.inlineMode.enable?this.parent.notify(\"renderInlineToolbar\",{}):(this.baseToolbar.render({container:\"toolbar\",items:this.parent.toolbarSettings.items,mode:this.getToolbarMode(),target:this.tbElement}),this.parent.inlineMode.enable||(this.parent.toolbarSettings.enableFloating&&(this.checkIsTransformChild(),this.toggleFloatClass()),this.parent.toolbarSettings.type===r.Expand&&Object(l.v)([this.parent.element],[\"e-rte-tb-expand\"]))),this.wireEvents(),this.parent.inlineMode.enable&&!Ae()&&this.addFixedTBarClass(),this.parent.inlineMode.enable||(this.dropDownModule.renderDropDowns({container:this.tbElement,containerType:\"toolbar\",items:this.parent.toolbarSettings.items}),this.parent.notify(\"render-color-picker\",{container:this.tbElement,containerType:\"toolbar\",items:this.parent.toolbarSettings.items}),this.refreshToolbarOverflow());var e=this.parent.element.querySelector(\".e-rte-srctextarea\"),t=this.parent.element.querySelector(\".e-source-content\");(!this.parent.iframeSettings.enable&&!Object(l.W)(e)&&\"block\"===e.style.display||this.parent.iframeSettings.enable&&!Object(l.W)(t)&&\"block\"===t.style.display)&&(this.parent.notify(\"updateToolbarItem\",{targetItem:\"SourceCode\",updateItem:\"Preview\",baseToolbar:this.parent.getBaseToolbarObject()}),this.parent.disableToolbarItem(this.parent.toolbarSettings.items))}},e.prototype.addFixedTBarClass=function(){Object(l.v)([this.tbElement],[\"e-rte-tb-fixed\"])},e.prototype.removeFixedTBarClass=function(){Object(l.hb)([this.tbElement],[\"e-rte-tb-fixed\"])},e.prototype.showFixedTBar=function(){Object(l.v)([this.tbElement],[\"e-show\"]),l.d.isIos&&Object(l.v)([this.tbElement],[\"e-tbar-ios-fixed\"])},e.prototype.hideFixedTBar=function(){this.isToolbar?this.isToolbar=!1:Object(l.hb)([this.tbElement],[\"e-show\",\"e-tbar-ios-fixed\"])},e.prototype.updateItem=function(e){var t=this.tools[e.updateItem.toLocaleLowerCase()],n=Fe(ze(this.tools[e.targetItem.toLocaleLowerCase()].subCommand),e.baseToolbar.toolbarObj.items)[0];if(Object(l.W)(n))this.addTBarItem(e,0);else{var i=this.parent.inlineMode.enable?\"_quick_\":\"_toolbar_\";e.baseToolbar.toolbarObj.items[n].id=this.parent.getID()+i+t.id,e.baseToolbar.toolbarObj.items[n].prefixIcon=t.icon,e.baseToolbar.toolbarObj.items[n].tooltipText=t.tooltip,e.baseToolbar.toolbarObj.items[n].subCommand=t.subCommand,e.baseToolbar.toolbarObj.dataBind()}},e.prototype.updateToolbarStatus=function(e){this.tbElement&&(!this.parent.inlineMode.enable||!Ae()&&l.d.isDevice)&&We({args:e,dropDownModule:this.dropDownModule,parent:this.parent,tbElements:Object(l.lb)(\".\"+O,this.tbElement),tbItems:this.baseToolbar.toolbarObj.items},!!this.parent.inlineMode.enable)},e.prototype.fullScreen=function(e){this.parent.fullScreenModule.showFullScreen(e)},e.prototype.hideScreen=function(e){this.parent.fullScreenModule.hideFullScreen(e)},e.prototype.getBaseToolbar=function(){return this.baseToolbar},e.prototype.addTBarItem=function(e,t){e.baseToolbar.toolbarObj.addItems([e.baseToolbar.getObject(e.updateItem,\"toolbar\")],t)},e.prototype.enableTBarItems=function(e,t,n,i){var r=Fe(ze(t),e.toolbarObj.items);this.tbItems=Object(l.lb)(\".\"+O,e.toolbarObj.element);for(var o=0;o<r.length;o++){var a=this.tbItems[r[o]];a&&e.toolbarObj.enableItems(a,n)}Object(l.kb)(\".e-rte-srctextarea\",this.parent.element)||i||qe(e,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())},e.prototype.removeTBarItems=function(e){Object(l.W)(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var t=Fe(ze(e),this.baseToolbar.toolbarObj.items);this.tbItems=this.parent.inlineMode.enable?Object(l.lb)(\".\"+O,this.baseToolbar.toolbarObj.element):Object(l.lb)(\".\"+O,this.parent.element);for(var n=0;n<t.length;n++)this.baseToolbar.toolbarObj.removeItems(this.tbItems[t[n]])},e.prototype.getExpandTBarPopHeight=function(){var e=0;if(this.parent.toolbarSettings.type===r.Expand&&this.tbElement.classList.contains(\"e-extended-toolbar\")){var t=Object(l.kb)(\".e-toolbar-extended\",this.tbElement);t&&this.tbElement.classList.contains(\"e-expand-open\")||t&&t.classList.contains(\"e-popup-open\")?(Object(l.v)([t],[\"e-visible\"]),e+=t.offsetHeight,Object(l.hb)([t],[\"e-visible\"])):Object(l.hb)([this.tbElement],[\"e-expand-open\"])}return e},e.prototype.getToolbarHeight=function(){return this.tbElement.offsetHeight},e.prototype.getToolbarElement=function(){return Object(l.kb)(\".e-rte-toolbar\",this.parent.element)},e.prototype.refreshToolbarOverflow=function(){this.baseToolbar.toolbarObj.refreshOverflow()},e.prototype.isToolbarDestroyed=function(){return this.baseToolbar.toolbarObj&&!this.baseToolbar.toolbarObj.isDestroyed},e.prototype.destroyToolbar=function(){if(this.isToolbarDestroyed()){this.parent.unWireScrollElementsEvents(),this.unWireEvents(),this.parent.notify(\"destroy-color-picker\",{}),this.dropDownModule.destroyDropDowns(),this.baseToolbar.toolbarObj.destroy(),this.removeEventListener(),Object(l.hb)([this.parent.element],[\"e-rte-tb-expand\"]);var e=Object(l.kb)(\".e-toolbar-wrapper\",this.parent.element),t=Object(l.kb)(\".e-rte-toolbar\",this.parent.element);Object(l.W)(e)?Object(l.W)(t)||Object(l.I)(t):Object(l.I)(e)}},e.prototype.destroy=function(){this.isToolbarDestroyed()&&(this.destroyToolbar(),this.keyBoardModule&&this.keyBoardModule.destroy())},e.prototype.scrollHandler=function(e){this.parent.inlineMode.enable||this.parent.toolbarSettings.enableFloating&&this.getDOMVisibility(this.tbElement)&&this.toggleFloatClass(e.args)},e.prototype.getDOMVisibility=function(e){return!(!e.offsetParent&&0===e.offsetWidth&&0===e.offsetHeight)},e.prototype.mouseDownHandler=function(){l.d.isDevice&&this.parent.inlineMode.enable&&!Ae()&&this.showFixedTBar()},e.prototype.focusChangeHandler=function(){l.d.isDevice&&this.parent.inlineMode.enable&&!Ae()&&(this.isToolbar=!1,this.hideFixedTBar())},e.prototype.dropDownBeforeOpenHandler=function(){this.isToolbar=!0},e.prototype.tbFocusHandler=function(e){var t=document.activeElement,n=Object(l.C)(t,\".e-rte-toolbar\");if(t===this.parent.getToolbarElement()||n===this.parent.getToolbarElement())for(var i=this.parent.getToolbarElement().querySelectorAll(\".e-expended-nav\"),r=0;r<i.length;r++)Object(l.W)(this.parent.getToolbarElement().querySelector(\".e-insert-table-btn\"))?i[r].setAttribute(\"tabindex\",\"0\"):i[r].setAttribute(\"tabindex\",\"1\")},e.prototype.tbKeydownHandler=function(e){(e.target.classList.contains(\"e-dropdown-btn\")||e.target.getAttribute(\"id\")===this.parent.getID()+\"_toolbar_CreateTable\")&&e.target.setAttribute(\"tabindex\",\"0\")},e.prototype.toolbarClickHandler=function(e){var t=Object(l.C)(e.originalEvent.target,\".e-hor-nav\");t&&this.parent.toolbarSettings.type===r.Expand&&!Object(l.W)(t)?t.classList.contains(\"e-nav-active\")?(Object(l.v)([this.tbElement],[\"e-expand-open\"]),this.parent.setContentHeight(\"toolbar\",!0)):(Object(l.hb)([this.tbElement],[\"e-expand-open\"]),this.parent.setContentHeight(\"toolbar\",!1)):(l.d.isDevice||this.parent.inlineMode.enable)&&(this.isToolbar=!0),Object(l.W)(t)&&this.parent.toolbarSettings.type===r.Expand&&Object(l.hb)([this.tbElement],[\"e-expand-open\"])},e.prototype.wireEvents=function(){this.parent.inlineMode.enable&&Ae()||(l.l.add(this.tbElement,\"focusin\",this.tbFocusHandler,this),l.l.add(this.tbElement,\"keydown\",this.tbKeydownHandler,this))},e.prototype.unWireEvents=function(){l.l.remove(this.tbElement,\"focusin\",this.tbFocusHandler),l.l.remove(this.tbElement,\"keydown\",this.tbKeydownHandler)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.dropDownModule=new dt(this.parent,this.locator),this.toolbarActionModule=new ht(this.parent),this.parent.on(d,this.renderToolbar,this),this.parent.on(\"scroll\",this.scrollHandler,this),this.parent.on(\"bind-on-end\",this.toolbarBindEvent,this),this.parent.on(\"toolbar-updated\",this.updateToolbarStatus,this),this.parent.on(p,this.onPropertyChanged,this),this.parent.on(\"refresh-begin\",this.onRefresh,this),this.parent.on(h,this.destroy,this),this.parent.on(\"enableFullScreen\",this.fullScreen,this),this.parent.on(\"disableFullScreen\",this.hideScreen,this),this.parent.on(\"updateToolbarItem\",this.updateItem,this),this.parent.on(\"beforeDropDownOpen\",this.dropDownBeforeOpenHandler,this),this.parent.on(\"expandPopupClick\",this.parent.setContentHeight,this.parent),this.parent.on(\"focusChange\",this.focusChangeHandler,this),this.parent.on(f,this.mouseDownHandler,this),this.parent.on(\"sourceCodeMouseDown\",this.mouseDownHandler,this),this.parent.inlineMode.enable||Ae()||this.parent.on(\"toolbarClick\",this.toolbarClickHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(d,this.renderToolbar),this.parent.off(\"scroll\",this.scrollHandler),this.parent.off(\"bind-on-end\",this.toolbarBindEvent),this.parent.off(\"toolbar-updated\",this.updateToolbarStatus),this.parent.off(p,this.onPropertyChanged),this.parent.off(\"refresh-begin\",this.onRefresh),this.parent.off(h,this.destroy),this.parent.off(\"enableFullScreen\",this.parent.fullScreenModule.showFullScreen),this.parent.off(\"disableFullScreen\",this.parent.fullScreenModule.hideFullScreen),this.parent.off(\"updateToolbarItem\",this.updateItem),this.parent.off(\"beforeDropDownOpen\",this.dropDownBeforeOpenHandler),this.parent.off(\"expandPopupClick\",this.parent.setContentHeight),this.parent.off(\"focusChange\",this.focusChangeHandler),this.parent.off(f,this.mouseDownHandler),this.parent.off(\"sourceCodeMouseDown\",this.mouseDownHandler),this.parent.inlineMode.enable||Ae()||this.parent.off(\"toolbarClick\",this.toolbarClickHandler))},e.prototype.onRefresh=function(){this.refreshToolbarOverflow(),this.parent.setContentHeight(\"\",!0)},e.prototype.onPropertyChanged=function(e){if(!Object(l.W)(e.newProp.inlineMode))for(var t=0,n=Object.keys(e.newProp.inlineMode);t<n.length;t++){switch(n[t]){case\"enable\":this.refreshToolbar()}}e.module===this.getModuleName()&&this.refreshToolbar()},e.prototype.refreshToolbar=function(){Object(l.W)(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var e=Object(l.kb)(\".e-toolbar-wrapper\",this.parent.element);(Object(l.kb)(\".e-rte-toolbar\",this.parent.element)||e)&&this.destroyToolbar(),this.parent.toolbarSettings.enable&&(this.addEventListener(),this.renderToolbar(),this.parent.wireScrollElementsEvents(),Object(l.kb)(\".e-rte-srctextarea\",this.parent.element)||qe(this.baseToolbar,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus()))},e.prototype.getModuleName=function(){return\"toolbar\"},e}(),ut=n(\"nbj8\"),mt=[\"a\",\"abbr\",\"acronym\",\"audio\",\"b\",\"bdi\",\"bdo\",\"big\",\"br\",\"button\",\"canvas\",\"cite\",\"code\",\"data\",\"datalist\",\"del\",\"dfn\",\"em\",\"embed\",\"font\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"label\",\"map\",\"mark\",\"meter\",\"noscript\",\"object\",\"output\",\"picture\",\"progress\",\"q\",\"ruby\",\"s\",\"samp\",\"script\",\"select\",\"slot\",\"small\",\"span\",\"strong\",\"strike\",\"sub\",\"sup\",\"svg\",\"template\",\"textarea\",\"time\",\"u\",\"tt\",\"var\",\"video\",\"wbr\"];function ft(){var e=!1;return l.d.isDevice&&l.d.isIos&&(e=!0),e}function gt(e,t){if(\"BODY\"===e.nodeName&&!Object(l.W)(t)){var n=top.window.document.querySelector(t);Object(l.W)(n)||n.contentWindow.focus()}}var bt=function(){function e(e,t){this.parent=e,this.rteID=e.element.id,this.i10n=t.getService(\"rteLocale\"),this.addEventListener(),this.serviceLocator=t,this.rendererFactory=t.getService(\"rendererFactory\"),this.dialogRenderObj=t.getService(\"dialogRenderObject\")}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(\"insertLink\",this.linkDialog,this),this.parent.on(m,this.onKeyDown,this),this.parent.on(\"insertCompleted\",this.showLinkQuickToolbar,this),this.parent.on(\"link-toolbar-action\",this.onToolbarAction,this),this.parent.on(\"iframe-click\",this.onIframeMouseDown,this),this.parent.on(\"unLink\",this.removeLink,this),this.parent.on(\"editLink\",this.editLink,this),this.parent.on(\"openLink\",this.openLink,this),this.parent.on(\"editAreaClick\",this.editAreaClickHandler,this),this.parent.on(h,this.destroy,this))},e.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case\"OpenLink\":this.parent.notify(\"openLink\",e);break;case\"EditLink\":this.parent.notify(\"editLink\",e);break;case\"RemoveLink\":this.parent.notify(\"unLink\",e)}},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(\"insertLink\",this.linkDialog),this.parent.off(m,this.onKeyDown),this.parent.off(\"insertCompleted\",this.showLinkQuickToolbar),this.parent.off(\"link-toolbar-action\",this.onToolbarAction),this.parent.off(\"unLink\",this.removeLink),this.parent.off(\"iframe-click\",this.onIframeMouseDown),this.parent.off(\"editLink\",this.editLink),this.parent.off(\"openLink\",this.openLink),this.parent.off(\"editAreaClick\",this.editAreaClickHandler),this.parent.off(h,this.destroy))},e.prototype.onIframeMouseDown=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},e.prototype.showLinkQuickToolbar=function(e){if(\"enter\"!==e.args.action&&\"space\"!==e.args.action){var t=void 0,n=void 0;if(\"Links\"!==e.type||Object(l.W)(this.parent.quickToolbarModule)||Object(l.W)(this.parent.quickToolbarModule.linkQTBar))return;this.quickToolObj=this.parent.quickToolbarModule;var i,r=this.parent.element.getBoundingClientRect().top,o=this.parent.element.getBoundingClientRect().left,a=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());if([].forEach.call(e.elements,(function(e,t){0===t&&(i=\"#text\"===e.nodeName?e.parentNode:e)})),e.isNotify){var s=this.parent.toolbarModule.getToolbarElement(),c=i.getBoundingClientRect().top,d=i.getBoundingClientRect().left,h=c-r,p=s?s.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;t=this.parent.iframeSettings.enable?o+d:i.getBoundingClientRect().left,n=window.pageYOffset+(this.parent.iframeSettings.enable?r+p+c:r+h)}else{var u=void 0;u=e.args.touches?e.args.changedTouches[0]:u=e.args,t=this.parent.iframeSettings.enable?window.pageXOffset+o+u.clientX:u.pageX,n=this.parent.iframeSettings.enable?window.pageYOffset+r+u.clientY:u.pageY}this.quickToolObj.linkQTBar&&this.quickToolObj.linkQTBar.showPopup(t,n,a.endContainer)}},e.prototype.hideLinkQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.linkQTBar&&document.body.contains(this.quickToolObj.linkQTBar.element)&&this.quickToolObj.linkQTBar.hidePopup()},e.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideLinkQuickToolbar();else{var t=e.args,n=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||n&&1===t.which||!n&&3===t.which)&&\"HTML\"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.linkQTBar){this.quickToolObj=this.parent.quickToolbarModule;var r=t.target;r=this.getAnchorNode(r),this.contentModule=this.rendererFactory.getRenderer(i.Content);var o=this.quickToolObj.linkQTBar.element.classList.contains(\"e-rte-pop\");if(\"A\"===r.nodeName&&r.childNodes.length>0&&\"IMG\"!==r.childNodes[0].nodeName&&\"IMG\"!==e.args.target.nodeName){if(o)return;this.showLinkQuickToolbar({args:t,isNotify:!1,type:\"Links\",elements:[t.target]})}else this.hideLinkQuickToolbar()}}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case\"escape\":Object(l.W)(this.dialogObj)||this.dialogObj.close();break;case\"insert-link\":if(\"HTML\"===this.parent.editorMode){var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(n,this.parent.contentModule.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(n),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(n),a={args:e.args,selectNode:r,selection:i,selectParent:o};this.linkDialog(a)}else{var s=this.parent.contentModule.getEditPanel();this.parent.formatter.editorManager.markdownSelection.save(s.selectionStart,s.selectionEnd),this.linkDialog({args:{item:{command:\"Links\",subCommand:\"Link\"},originalEvent:t},member:\"link\",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:\"Markdown\",name:\"insertLink\"})}t.preventDefault()}},e.prototype.linkDialog=function(e,t){var n=this;if(this.dialogObj)this.dialogObj.hide({returnValue:!0});else if(\"HTML\"===this.parent.editorMode&&e.selectParent.length>0&&!Object(l.W)(e.selectParent[0].classList)&&e.selectParent[0].classList.contains(\"e-rte-anchor\")&&Object(l.W)(t))this.editLink(e);else{var i,r=this.i10n.getConstant(\"linkWebUrl\"),o=this.i10n.getConstant(\"linkText\"),a=this.i10n.getConstant(\"linkTooltipLabel\"),s=this.i10n.getConstant(\"linkurl\"),c=this.i10n.getConstant(\"textPlaceholder\"),d=this.i10n.getConstant(\"linkTitle\"),h=this.parent.createElement(\"div\",{className:\"e-rte-link-dialog\",id:this.rteID+\"_rtelink\"});this.parent.element.appendChild(h);var p=this.parent.createElement(\"div\",{className:\"e-rte-linkcontent\",id:this.rteID+\"_linkContent\"}),u=Ve('<div class=\"e-rte-label\"><label>'+r+'</label></div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder=\"'+s+'\" class=\"e-input e-rte-linkurl\"/></div><div class=\"e-rte-label\"><label>'+o+'</label></div><div class=\"e-rte-field\"> <input type=\"text\" data-role =\"none\" spellcheck=\"false\" class=\"e-input e-rte-linkText\" placeholder=\"'+c+'\"></div><div class=\"e-rte-label\">'+(\"HTML\"===this.parent.editorMode?\"<label>\"+a+'</label></div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" spellcheck=\"false\" placeholder = \"'+d+'\" class=\"e-input e-rte-linkTitle\"></div><div class=\"e-rte-label\"></div><div class=\"e-rte-field\"><input type=\"checkbox\" class=\"e-rte-linkTarget\"  data-role =\"none\"></div>':\"\"));p.appendChild(u);var m=p.querySelector(\".e-rte-linkTarget\"),f=p.querySelector(\".e-rte-linkurl\"),g=p.querySelector(\".e-rte-linkText\"),b=p.querySelector(\".e-rte-linkTitle\"),v=this.i10n.getConstant(\"linkOpenInNewWindow\");this.checkBoxObj=new ut.a({label:v,checked:!0,enableRtl:this.parent.enableRtl}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(m),i=\"HTML\"===this.parent.editorMode?e.selection.getRange(this.parent.contentModule.getDocument()).toString():e.text;var y=this.i10n.getConstant(\"dialogInsert\"),C=this.i10n.getConstant(\"dialogCancel\"),O=e.selection,S={selfLink:this,selection:e.selection,selectParent:e.selectParent,args:e.args},k={header:this.i10n.getConstant(\"linkHeader\"),content:p,cssClass:\"e-rte-elements\",enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:l.d.isDevice?\"290px\":\"310px\",height:\"inherit\",isModal:l.d.isDevice,buttons:[{click:this.insertlink.bind(S),buttonModel:{content:y,cssClass:\"e-flat e-insertLink\",isPrimary:!0}},{click:this.cancelDialog.bind(S),buttonModel:{cssClass:\"e-flat\",content:C}}],target:l.d.isDevice?document.body:this.parent.element,animationSettings:{effect:\"None\"},close:function(e){n.parent.isBlur=!1,e&&e.event.returnValue&&(\"HTML\"===n.parent.editorMode?O.restore():n.parent.formatter.editorManager.markdownSelection.restore(n.parent.contentModule.getEditPanel())),n.dialogObj.destroy(),Object(l.I)(n.dialogObj.element);var t=Object(l.V)()?null:n.dialogObj;n.dialogRenderObj.close(t),n.dialogObj=null}};this.dialogObj=this.dialogRenderObj.render(k),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(h),h.style.maxHeight=\"inherit\",Object(l.W)(t)||(f.value=t.url,g.value=t.text,b.value=t.title,t.target?this.checkBoxObj.checked=!0:this.checkBoxObj.checked=!1,this.dialogObj.header=t.header,this.dialogObj.element.querySelector(\".e-insertLink\").textContent=t.btnText),this.checkUrl(!1),(\"HTML\"===this.parent.editorMode&&Object(l.W)(t)&&(!Object(l.W)(i)&&\"\"!==i&&0===e.selection.range.startOffset||e.selection.range.startOffset!==e.selection.range.endOffset)||\"Markdown\"===e.module)&&(g.value=i),l.l.add(this.parent.element.ownerDocument,\"mousedown\",this.onDocumentClick,this),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup())}},e.prototype.insertlink=function(e){var t,n=this.selfLink.dialogObj.element,i=n.querySelector(\".e-rte-linkurl\").value,r=n.querySelector(\".e-rte-linkText\").value;\"HTML\"===this.selfLink.parent.editorMode&&(t=n.querySelector(\".e-rte-linkTitle\").value);var o=this.selfLink.checkBoxObj.checked?\"_blank\":null;if(\"\"!==i){this.selfLink.isUrl(i)?this.selfLink.checkUrl(!1):(r=\"\"===r?i:r,i=this.selfLink.parent.enableAutoUrl||i.indexOf(\"http\")>-1?i:\"http://\"+i);var a=this.selfLink;if(\"HTML\"===a.parent.editorMode&&Object(l.W)(Object(l.C)(this.selection.range.startContainer.parentNode,\"#\"+a.parent.contentModule.getPanel().id))){a.parent.contentModule.getEditPanel().focus(),l.d.isIE&&a.parent.iframeSettings.enable&&this.selection.restore();var s=a.parent.formatter.editorManager.nodeSelection.getRange(a.parent.contentModule.getDocument());this.selection=a.parent.formatter.editorManager.nodeSelection.save(s,a.parent.contentModule.getDocument()),this.selectParent=a.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(s)}var c,d={url:i,text:r,title:t,target:o,selection:this.selection,selectParent:this.selectParent};if(document.body.contains(a.dialogObj.element)&&this.selfLink.dialogObj.hide({returnValue:!1}),ft()&&a.parent.iframeSettings.enable&&Object(l.kb)(\"iframe\",a.parent.element).contentWindow.focus(),\"HTML\"===a.parent.editorMode&&this.selection.restore(),0===a.parent.formatter.getUndoRedoStack().length&&a.parent.formatter.saveData(),\"KeyK\"===this.args.code){var h=this.args;Object(l.J)(this.args,{item:{command:\"Links\",subCommand:\"CreateLink\"},originalEvent:h},!0),c={item:{command:\"Links\",subCommand:\"CreateLink\"},originalEvent:h}}else c=this.args;this.selfLink.parent.formatter.process(this.selfLink.parent,c,this.args.originalEvent,d),this.selfLink.parent.contentModule.getEditPanel().focus()}else this.selfLink.checkUrl(!0)},e.prototype.isUrl=function(e){return/(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi.test(e)},e.prototype.checkUrl=function(e){var t=this.dialogObj.element.querySelector(\".e-rte-linkurl\");e?(Object(l.v)([t],\"e-error\"),t.setSelectionRange(0,t.value.length),t.focus()):Object(l.hb)([t],\"e-error\")},e.prototype.removeLink=function(e){0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,selectParent:e.selectParent,selection:e.selection,subCommand:e.args.item.subCommand}),ft()&&this.parent.iframeSettings.enable?Object(l.kb)(\"iframe\",this.parent.element).contentWindow.focus():this.parent.contentModule.getEditPanel().focus(),this.hideLinkQuickToolbar()},e.prototype.openLink=function(e){var t=this.getAnchorNode(e.selectParent[0]);(t.classList.contains(\"e-rte-anchor\")||\"A\"===t.tagName)&&this.parent.formatter.process(this.parent,e.args,e.args,{url:t.href,target:\"\"===t.target?\"_self\":\"_blank\",selectNode:e.selectNode,subCommand:e.args.item.subCommand})},e.prototype.getAnchorNode=function(e){var t=Object(l.C)(e,\"a\");return t||e},e.prototype.editLink=function(e){var t=this.getAnchorNode(e.selectNode[0]),n=this.getAnchorNode(e.selectParent[0]);if((n=\"A\"===t.nodeName?t:n).classList.contains(\"e-rte-anchor\")||\"A\"===n.tagName){var i=this.i10n.getConstant(\"dialogUpdate\"),r={url:n.getAttribute(\"href\"),text:n.innerText,title:n.title,target:n.target,header:this.i10n.getConstant(\"editLink\"),btnText:i};this.linkDialog(e,r)}},e.prototype.cancelDialog=function(e){this.selfLink.parent.isBlur=!1,this.selfLink.dialogObj.hide({returnValue:!0}),ft()?this.selection.restore():this.selfLink.parent.contentModule.getEditPanel().focus()},e.prototype.onDocumentClick=function(e){var t=e.target;!Object(l.W)(this.dialogObj)&&(!Object(l.C)(t,\"#\"+this.dialogObj.element.id)&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||(this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)||this.parent.inlineMode.enable&&!Object(l.C)(t,\"#\"+this.dialogObj.element.id))&&!Object(l.C)(t,\"#\"+this.parent.getID()+\"_toolbar_CreateLink\")&&!t.querySelector(\"#\"+this.parent.getID()+\"_toolbar_CreateLink\"))&&(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,Ue(this.parent.element,\"focusout\"))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getModuleName=function(){return\"link\"},e}(),vt=n(\"phP7\"),yt=n(\"+UoQ\"),Ct=n(\"+vMq\"),Ot=function(){function e(e,t){this.isImgUploaded=!1,this.pageX=null,this.pageY=null,this.deletedImg=[],this.parent=e,this.rteID=e.element.id,this.i10n=t.getService(\"rteLocale\"),this.rendererFactory=t.getService(\"rendererFactory\"),this.dialogRenderObj=t.getService(\"dialogRenderObject\"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(m,this.onKeyDown,this),this.parent.on(u,this.onKeyUp,this),this.parent.on(\"insertImage\",this.insertImage,this),this.parent.on(\"insertCompleted\",this.showImageQuickToolbar,this),this.parent.on(\"image-toolbar-action\",this.onToolbarAction,this),this.parent.on(\"caption\",this.caption,this),this.parent.on(\"delete\",this.deleteImg,this),this.parent.on(\"insertImgLink\",this.insertImgLink,this),this.parent.on(\"imgAltText\",this.insertAltText,this),this.parent.on(\"editAreaClick\",this.editAreaClickHandler,this),this.parent.on(\"iframe-click\",this.onIframeMouseDown,this),this.parent.on(\"imageSize\",this.imageSize,this),this.parent.on(\"dropDownSelect\",this.alignmentSelect,this),this.parent.on(d,this.afterRender,this),this.parent.on(g,this.imagePaste,this),this.parent.on(h,this.removeEventListener,this))},e.prototype.removeEventListener=function(){if(!this.parent.isDestroyed){this.parent.off(m,this.onKeyDown),this.parent.off(u,this.onKeyUp),this.parent.off(\"insertImage\",this.insertImage),this.parent.off(\"insertCompleted\",this.showImageQuickToolbar),this.parent.off(\"caption\",this.caption),this.parent.off(\"image-toolbar-action\",this.onToolbarAction),this.parent.off(\"delete\",this.deleteImg),this.parent.off(\"insertImgLink\",this.insertImgLink),this.parent.off(\"imgAltText\",this.insertAltText),this.parent.off(\"editAreaClick\",this.editAreaClickHandler),this.parent.off(\"iframe-click\",this.onIframeMouseDown),this.parent.off(\"imageSize\",this.imageSize),this.parent.off(\"dropDownSelect\",this.alignmentSelect),this.parent.off(d,this.afterRender),this.parent.off(g,this.imagePaste),this.parent.off(h,this.removeEventListener);var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.removeEventListener(\"drop\",this.dragDrop.bind(this),!0),e.removeEventListener(\"dragstart\",this.dragStart.bind(this),!0),e.removeEventListener(\"dragenter\",this.dragEnter.bind(this),!0),e.removeEventListener(\"dragover\",this.dragOver.bind(this),!0),Object(l.W)(this.contentModule)||(l.l.remove(this.contentModule.getEditPanel(),l.d.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off(\"checkUndoStack\",this.undoStack),this.parent.insertImageSettings.resize&&(l.l.remove(this.parent.contentModule.getEditPanel(),l.d.touchStartEvent,this.resizeStart),l.l.remove(this.parent.element.ownerDocument,\"mousedown\",this.onDocumentClick),l.l.remove(this.contentModule.getEditPanel(),\"cut\",this.onCutHandler)))}},e.prototype.onIframeMouseDown=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},e.prototype.afterRender=function(){this.contentModule=this.rendererFactory.getRenderer(i.Content),l.l.add(this.contentModule.getEditPanel(),l.d.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(l.l.add(this.parent.contentModule.getEditPanel(),l.d.touchStartEvent,this.resizeStart,this),l.l.add(this.parent.element.ownerDocument,\"mousedown\",this.onDocumentClick,this),l.l.add(this.contentModule.getEditPanel(),\"cut\",this.onCutHandler,this));var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.addEventListener(\"drop\",this.dragDrop.bind(this),!0),e.addEventListener(\"dragstart\",this.dragStart.bind(this),!0),e.addEventListener(\"dragenter\",this.dragOver.bind(this),!0),e.addEventListener(\"dragover\",this.dragOver.bind(this),!0)},e.prototype.undoStack=function(e){if(\"undo\"===e.subCommand.toLowerCase()||\"redo\"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var n=this.parent.createElement(\"div\"),i=Ve(this.parent.formatter.getUndoRedoStack()[t].text);n.appendChild(i);var r=n.querySelectorAll(\"img\");if(n.querySelector(\".e-img-resize\")&&r.length>0){for(var o=0;o<r.length;o++)r[o].style.outline=\"\";Object(l.I)(n.querySelector(\".e-img-resize\")),this.parent.formatter.getUndoRedoStack()[t].text=n.innerHTML}}},e.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.imgEle.parentElement.style.cursor=\"auto\",l.d.isDevice&&Object(l.hb)([e.target.parentElement],\"e-mob-span\");var t=Object(l.V)()?{requestType:\"images\"}:{event:e,requestType:\"images\"};this.parent.trigger(\"resizeStop\",t);this.getPointX(e),this.parent.iframeSettings.enable?(window.pageYOffset,this.parent.element.getBoundingClientRect().top,e.clientY):e.pageY;this.parent.formatter.editorManager.observer.on(\"checkUndoStack\",this.undoStack,this),this.parent.formatter.saveData()},e.prototype.resizeStart=function(e,t){var n=this;if(!this.parent.readonly){var i=t||e.target;if(\"IMG\"===i.tagName){this.parent.preventDefaultResize(e);var r=i;this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&Object(l.I)(this.imgResizeDiv),this.imageResize(r)}if(i.classList.contains(\"e-rte-imageboxmark\")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.imageQTBar.hidePopup(),i.classList.contains(\"e-rte-topLeft\")&&(this.resizeBtnStat.topLeft=!0),i.classList.contains(\"e-rte-topRight\")&&(this.resizeBtnStat.topRight=!0),i.classList.contains(\"e-rte-botLeft\")&&(this.resizeBtnStat.botLeft=!0),i.classList.contains(\"e-rte-botRight\")&&(this.resizeBtnStat.botRight=!0),l.d.isDevice&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains(\"e-mob-span\"))Object(l.v)([this.imgResizeDiv],\"e-mob-span\");else{var o=Object(l.V)()?{requestType:\"images\"}:{event:e,requestType:\"images\"};this.parent.trigger(\"resizeStart\",o,(function(e){e.cancel&&n.cancelResizeAction()}))}l.l.add(this.contentModule.getDocument(),l.d.touchEndEvent,this.resizeEnd,this)}}},e.prototype.imageClick=function(e){l.d.isDevice&&(\"IMG\"===e.target.tagName&&\"A\"===e.target.parentElement.tagName||\"IMG\"===e.target.tagName?(this.contentModule.getEditPanel().setAttribute(\"contenteditable\",\"false\"),e.target.focus()):this.parent.readonly||this.contentModule.getEditPanel().setAttribute(\"contenteditable\",\"true\")),\"IMG\"===e.target.tagName&&\"A\"===e.target.parentElement.tagName&&e.preventDefault()},e.prototype.onCutHandler=function(){this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction()},e.prototype.imageResize=function(e){this.resizeBtnInit(),this.imgEle=e,Object(l.v)([this.imgEle],\"e-resize\"),this.imgResizeDiv=this.parent.createElement(\"span\",{className:\"e-img-resize\",id:this.rteID+\"_imgResize\"}),this.imgResizeDiv.appendChild(this.parent.createElement(\"span\",{className:\"e-rte-imageboxmark e-rte-topLeft\",styles:\"cursor: nwse-resize\"})),this.imgResizeDiv.appendChild(this.parent.createElement(\"span\",{className:\"e-rte-imageboxmark e-rte-topRight\",styles:\"cursor: nesw-resize\"})),this.imgResizeDiv.appendChild(this.parent.createElement(\"span\",{className:\"e-rte-imageboxmark e-rte-botLeft\",styles:\"cursor: nesw-resize\"})),this.imgResizeDiv.appendChild(this.parent.createElement(\"span\",{className:\"e-rte-imageboxmark e-rte-botRight\",styles:\"cursor: nwse-resize\"})),l.d.isDevice&&Object(l.v)([this.imgResizeDiv],\"e-mob-rte\"),e.style.outline=\"2px solid #4a90e2\",this.imgResizePos(e,this.imgResizeDiv),this.resizeImgDupPos(e),this.contentModule.getEditPanel().appendChild(this.imgResizeDiv),l.l.add(this.contentModule.getDocument(),l.d.touchMoveEvent,this.resizing,this)},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},e.prototype.imgResizePos=function(e,t){var n=this.calcPos(e),i=n.top,r=n.left,o=e.width,a=e.height,s=l.d.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,c=l.d.isDevice?0:2;t.querySelector(\".e-rte-botLeft\").style.left=r-s+\"px\",t.querySelector(\".e-rte-botLeft\").style.top=a-s+i+\"px\",t.querySelector(\".e-rte-botRight\").style.left=o-(s-c)+r+\"px\",t.querySelector(\".e-rte-botRight\").style.top=a-s+i+\"px\",t.querySelector(\".e-rte-topRight\").style.left=o-(s-c)+r+\"px\",t.querySelector(\".e-rte-topRight\").style.top=i-s+\"px\",t.querySelector(\".e-rte-topLeft\").style.left=r-s+\"px\",t.querySelector(\".e-rte-topLeft\").style.top=i-s+\"px\"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},n=e.getBoundingClientRect(),i=e.ownerDocument,r=(e.offsetParent&&(e.offsetParent.classList.contains(\"e-img-caption\")||[\"TD\",\"TH\",\"TABLE\",\"A\"].indexOf(e.offsetParent.tagName)>-1)?Object(l.C)(e,\"#\"+this.parent.getID()+\"_rte-edit-view\"):e.offsetParent)||i.documentElement;r&&(r===i.body||r===i.documentElement)&&\"static\"===r.style.position;)r=r.parentNode;return r&&r!==e&&1===r.nodeType&&(t=r.getBoundingClientRect()),{top:n.top-t.top,left:n.left-t.left}},e.prototype.setAspectRatio=function(e,t,n){if(!Object(l.W)(e.width)){var i=\"\"!==e.style.width?parseInt(e.style.width,10):e.width,r=\"\"!==e.style.height?parseInt(e.style.height,10):e.height;i>r?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(i/r*n,e.previousElementSibling||e.parentElement)+\"%\",e.style.height=null,e.removeAttribute(\"height\")):\"\"!==e.style.width?(e.style.width=i/r*n+\"px\",e.style.height=n+\"px\"):(e.setAttribute(\"width\",(i/r*n).toString()),e.setAttribute(\"height\",n.toString())):r>i?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(t,e.previousElementSibling||e.parentElement)+\"%\",e.style.height=null,e.removeAttribute(\"height\")):\"\"!==e.style.width?(e.style.width=t+\"px\",e.style.height=r/i*t+\"px\"):(e.setAttribute(\"width\",t.toString()),e.setAttribute(\"height\",(r/i*t).toString())):this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPerc(t,e.previousElementSibling||e.parentElement)+\"%\",e.style.height=null,e.removeAttribute(\"height\")):\"\"!==e.style.width?(e.style.width=t+\"px\",e.style.height=t+\"px\"):(e.setAttribute(\"width\",t.toString()),e.setAttribute(\"height\",t.toString()))}},e.prototype.pixToPerc=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},e.prototype.imgDupMouseMove=function(e,t,n){var i=this,r=Object(l.V)()?{requestType:\"images\"}:{event:n,requestType:\"images\"};this.parent.trigger(\"resizing\",r,(function(n){if(n.cancel)i.cancelResizeAction();else{if(parseInt(i.parent.insertImageSettings.minWidth,10)>=parseInt(e,10)||parseInt(i.parent.getInsertImgMaxWidth(),10)<=parseInt(e,10))return;if(!i.parent.insertImageSettings.resizeByPercent&&(parseInt(i.parent.insertImageSettings.minHeight,10)>=parseInt(t,10)||parseInt(i.parent.insertImageSettings.maxHeight,10)<=parseInt(t,10)))return;i.imgEle.parentElement.style.cursor=\"pointer\",i.setAspectRatio(i.imgEle,parseInt(e,10),parseInt(t,10)),i.resizeImgDupPos(i.imgEle),i.imgResizePos(i.imgEle,i.imgResizeDiv),i.parent.setContentHeight(\"\",!1)}}))},e.prototype.resizing=function(e){this.imgEle.offsetWidth>=this.parent.getInsertImgMaxWidth()&&(this.imgEle.style.maxHeight=this.imgEle.offsetHeight+\"px\");var t=this.getPointX(e),n=this.getPointY(e),i=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,r=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(n-this.pageY):n-this.pageY,o=parseInt(this.imgDupPos.width,10)+i,a=parseInt(this.imgDupPos.height,10)+r;this.pageX=t,this.pageY=n,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.imgDupMouseMove(o+\"px\",a+\"px\",e)},e.prototype.cancelResizeAction=function(){l.l.remove(this.contentModule.getDocument(),l.d.touchMoveEvent,this.resizing),l.l.remove(this.contentModule.getDocument(),l.d.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&(Object(l.I)(this.imgResizeDiv),this.imgEle.style.outline=\"\",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)},e.prototype.resizeImgDupPos=function(e){this.imgDupPos={width:\"\"!==e.style.height?this.imgEle.style.width:e.width+\"px\",height:\"\"!==e.style.height?this.imgEle.style.height:e.height+\"px\"}},e.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},e.prototype.onToolbarAction=function(e){switch(ft()&&this.parent.notify(\"selection-restore\",{}),e.args.item.subCommand){case\"Replace\":this.parent.fileManagerSettings.enable?this.parent.notify(\"renderFileManager\",e):this.parent.notify(\"insertImage\",e);break;case\"Caption\":this.parent.notify(\"caption\",e);break;case\"InsertLink\":this.parent.notify(\"insertImgLink\",e);break;case\"AltText\":this.parent.notify(\"imgAltText\",e);break;case\"Remove\":this.parent.notify(\"delete\",e);break;case\"Dimension\":this.parent.notify(\"imageSize\",e);break;case\"OpenImageLink\":this.openImgLink(e);break;case\"EditImageLink\":this.editImgLink(e);break;case\"RemoveImageLink\":this.removeImgLink(e)}},e.prototype.openImgLink=function(e){var t=\"\"===e.selectParent[0].parentNode.target?\"_self\":\"_blank\";this.parent.formatter.process(this.parent,e.args,e.args,{url:e.selectParent[0].parentNode.href,target:t,selectNode:e.selectNode,subCommand:e.args.item.subCommand})},e.prototype.editImgLink=function(e){var t=e.selectParent[0].parentNode,n=this.i10n.getConstant(\"dialogUpdate\"),i={url:t.href,target:t.target,header:\"Edit Link\",btnText:n};this.insertImgLink(e,i)},e.prototype.removeImgLink=function(e){l.d.isIE&&this.contentModule.getEditPanel().focus(),e.selection.restore();var t=!(!this.contentModule.getEditPanel().contains(this.captionEle)||!Object(l.kb)(\"a\",this.captionEle)),n=t?[this.captionEle]:[e.selectNode[0].parentElement];this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:e.selectNode[0],selectParent:n,selection:e.selection,subCommand:e.args.item.subCommand}),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),Object(l.W)(e.selectParent)||Object(l.hb)([e.selectParent[0]],\"e-img-focus\")),t&&Object(l.kb)(\".e-img-inner\",this.captionEle).focus()},e.prototype.onKeyDown=function(e){var t,n,i,r,o,a=e.args;this.deletedImg=[];if(\"HTML\"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&\"HTML\"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(a.which)<0)for(var s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),c=0;c<s.length;c++)\"IMG\"===s[c].nodeName&&this.deletedImg.push(s[c]);if(\"HTML\"===this.parent.editorMode&&(8===a.which&&\"Backspace\"===a.code||46===a.which&&\"Delete\"===a.code)){var d=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===a.which&&\"Backspace\"===a.code&&d?this.checkImageBack(t):46===a.which&&\"Delete\"===a.code&&d&&this.checkImageDel(t)}if(!Object(l.W)(this.parent.formatter.editorManager.nodeSelection)&&\"KeyK\"!==a.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.contentModule.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),r=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!a.ctrlKey&&a.key&&(1===a.key.length||\"enter\"===a.action)&&\"IMG\"===r[0].tagName&&r[0].parentElement)){var h=r[0].parentElement.childNodes[0];this.contentModule.getEditPanel().querySelector(\".e-img-resize\")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),h,h,h.textContent.length,h.textContent.length),Object(l.hb)([r[0]],\"e-img-focus\"),this.quickToolObj.imageQTBar.hidePopup()}if(!a.ctrlKey||89!==a.keyCode&&90!==a.keyCode||this.undoStack({subCommand:90===a.keyCode?\"undo\":\"redo\"}),8===a.keyCode||46===a.keyCode){if(i&&\"IMG\"===i[0].nodeName&&i.length<1){a.preventDefault();var p={selectNode:i,selection:n,selectParent:r,args:{item:{command:\"Images\",subCommand:\"Remove\"},originalEvent:a}};this.deleteImg(p,a.keyCode)}this.parent.contentModule.getEditPanel().querySelector(\".e-img-resize\")&&this.removeResizeEle()}switch(\"Backspace\"===a.code&&(a.action=\"backspace\"),a.action){case\"escape\":Object(l.W)(this.dialogObj)||this.dialogObj.close();break;case\"backspace\":case\"delete\":for(c=0;c<this.deletedImg.length;c++){var u=this.deletedImg[c].src;this.imageRemovePost(u),this.parent.trigger(\"afterImageDelete\",{element:this.deletedImg[c],src:u})}break;case\"insert-image\":\"HTML\"===this.parent.editorMode?this.insertImage({args:{item:{command:\"Images\",subCommand:\"Image\"},originalEvent:a},selectNode:i,selection:n,selectParent:r}):this.insertImage({args:{item:{command:\"Images\",subCommand:\"Image\"},originalEvent:a},member:\"image\",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:\"Markdown\",name:\"insertImage\"}),a.preventDefault()}},e.prototype.onKeyUp=function(e){if(!Object(l.W)(this.deletedImg)&&this.deletedImg.length>0)for(var t=0;t<this.deletedImg.length;t++){var n={element:this.deletedImg[t],src:this.deletedImg[t].getAttribute(\"src\")};this.parent.trigger(\"afterImageDelete\",n)}},e.prototype.checkImageBack=function(e){\"#text\"!==e.startContainer.nodeName||0!==e.startOffset||Object(l.W)(e.startContainer.previousSibling)||\"IMG\"!==e.startContainer.previousSibling.nodeName?\"#text\"===e.startContainer.nodeName||Object(l.W)(e.startContainer.childNodes[e.startOffset-1])||\"IMG\"!==e.startContainer.childNodes[e.startOffset-1].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset-1]):this.deletedImg.push(e.startContainer.previousSibling)},e.prototype.checkImageDel=function(e){\"#text\"!==e.startContainer.nodeName||e.startOffset!==e.startContainer.textContent.length||Object(l.W)(e.startContainer.nextSibling)||\"IMG\"!==e.startContainer.nextSibling.nodeName?\"#text\"===e.startContainer.nodeName||Object(l.W)(e.startContainer.childNodes[e.startOffset])||\"IMG\"!==e.startContainer.childNodes[e.startOffset].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset]):this.deletedImg.push(e.startContainer.nextSibling)},e.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(\".e-rte-quick-toolbar\"))&&\"Images\"===t.command){var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(n),r={args:e,selectNode:i=\"IMG\"===i[0].nodeName?i:[this.imgEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case\"JustifyLeft\":this.alignImage(r,\"JustifyLeft\");break;case\"JustifyCenter\":this.alignImage(r,\"JustifyCenter\");break;case\"JustifyRight\":this.alignImage(r,\"JustifyRight\");break;case\"Inline\":this.inline(r);break;case\"Break\":this.break(r)}this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),Object(l.hb)([i[0]],\"e-img-focus\")),this.cancelResizeAction()}},e.prototype.imageWithLinkQTBarItemUpdate=function(){for(var e=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(\".e-toolbar-item\"),t=0;t<e.length;t++)e[t].getAttribute(\"title\")===this.i10n.getConstant(\"openLink\")||e[t].getAttribute(\"title\")===this.i10n.getConstant(\"editLink\")||e[t].getAttribute(\"title\")===this.i10n.getConstant(\"removeLink\")?(Object(l.v)([e[t]],\"e-link-groups\"),e[t].style.display=\"none\"):\"Insert Link\"===e[t].getAttribute(\"title\")?e[t].style.display=\"\":e[t].classList.contains(\"e-rte-horizontal-separator\")&&(e[t],Object(l.I)(e[t]));var n=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(\".e-toolbar-item:not(.e-link-groups)\");this.quickToolObj.imageQTBar.addQTBarItem([\"-\"],Math.round(n.length/2))},e.prototype.showImageQuickToolbar=function(e){var t=this;if(\"Images\"===e.type&&!Object(l.W)(this.parent.quickToolbarModule)&&!Object(l.W)(this.parent.quickToolbarModule.imageQTBar)){this.quickToolObj=this.parent.quickToolbarModule;var n=e.args,i=e.elements;[].forEach.call(e.elements,(function(e,t){0===t&&(i=e)})),i&&!Object(l.C)(i,\"a\")&&this.imageWithLinkQTBarItemUpdate(),\"IMG\"===i.nodeName&&Object(l.v)([i],[\"e-img-focus\"]);var r=this.parent.iframeSettings.enable?window.pageYOffset+this.parent.element.getBoundingClientRect().top+n.clientY:n.pageY;this.parent.quickToolbarModule.imageQTBar&&(e.isNotify?setTimeout((function(){t.quickToolObj.imageQTBar.showPopup(n.pageX,r,i)}),400):this.quickToolObj.imageQTBar.showPopup(n.pageX,r,i))}},e.prototype.hideImageQuickToolbar=function(){Object(l.W)(this.contentModule.getEditPanel().querySelector(\".e-img-focus\"))||(Object(l.hb)([this.contentModule.getEditPanel().querySelector(\".e-img-focus\")],\"e-img-focus\"),this.quickToolObj&&this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup())},e.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideImageQuickToolbar();else{var t=e.args,n=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||n&&1===t.which||!n&&3===t.which)n&&1===t.which&&!Object(l.W)(t.target)&&\"IMG\"===t.target.tagName&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),t.target));else if(\"HTML\"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.imageQTBar){this.quickToolObj=this.parent.quickToolbarModule;var r=t.target;this.contentModule=this.rendererFactory.getRenderer(i.Content);var o=this.quickToolObj.imageQTBar.element.classList.contains(\"e-rte-pop\");if(\"IMG\"===r.nodeName&&this.parent.quickToolbarModule){if(o)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),r),ft()&&this.parent.notify(\"selection-save\",e),Object(l.v)([r],\"e-img-focus\");var a=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(\".e-toolbar-item\");if(Object(l.C)(r,\"a\")){for(var s=0;s<a.length;s++)a[s].getAttribute(\"title\")===this.i10n.getConstant(\"openLink\")||a[s].getAttribute(\"title\")===this.i10n.getConstant(\"editLink\")||a[s].getAttribute(\"title\")===this.i10n.getConstant(\"removeLink\")?(a[s].style.display=\"\",Object(l.hb)([a[s]],\"e-link-groups\")):\"Insert Link\"===a[s].getAttribute(\"title\")?a[s].style.display=\"none\":a[s].classList.contains(\"e-rte-horizontal-separator\")&&(a[s],Object(l.I)(a[s]));var c=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(\".e-toolbar-item:not(.e-link-groups)\");this.quickToolObj.imageQTBar.addQTBarItem([\"-\"],Math.round(c.length/2))}else Object(l.C)(r,\"a\")||this.imageWithLinkQTBarItemUpdate();this.showImageQuickToolbar({args:t,type:\"Images\",elements:[t.target]})}else this.hideImageQuickToolbar()}}},e.prototype.insertImgLink=function(e,t){var n=this;if(\"IMG\"===e.selectNode[0].nodeName&&(this.imagDialog(e),!Object(l.W)(this.dialogObj))){var i=this.parent.createElement(\"div\",{className:\"e-img-linkwrap\"}),r=Ve('<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" class=\"e-input e-img-link\" spellcheck=\"false\" placeholder=\"'+this.i10n.getConstant(\"linkurl\")+'\"/></div><div class=\"e-rte-label\"></div><div class=\"e-rte-field\"><input type=\"checkbox\" class=\"e-rte-linkTarget\"  data-role =\"none\"></div>');i.appendChild(r);var o=i.querySelector(\".e-rte-linkTarget\"),a=i.querySelector(\".e-img-link\"),s=this.i10n.getConstant(\"linkOpenInNewWindow\");this.checkBoxObj=new ut.a({label:s,checked:!0,enableRtl:this.parent.enableRtl,change:function(e){c=e.checked?\"_blank\":null}}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(o);var c=this.checkBoxObj.checked?\"_blank\":null,d=this.i10n.getConstant(\"dialogUpdate\"),h={args:e.args,selfImage:this,selection:e.selection,selectNode:e.selectNode,selectParent:e.selectParent,link:a,target:c};this.dialogObj.setProperties({height:\"inherit\",width:\"290px\",header:this.parent.localeObj.getConstant(\"imageInsertLinkHeader\"),content:i,position:{X:\"center\",Y:\"center\"},buttons:[{click:function(e){n.insertlink(h)},buttonModel:{content:d,cssClass:\"e-flat e-update-link\",isPrimary:!0}}]}),Object(l.W)(t)||(a.value=t.url,t.target?this.checkBoxObj.checked=!0:this.checkBoxObj.checked=!1,this.dialogObj.header=t.header),this.dialogObj.element.style.maxHeight=\"inherit\",this.dialogObj.content.querySelector(\"input\").focus()}},e.prototype.insertAltText=function(e){var t=this;if(\"IMG\"===e.selectNode[0].nodeName){this.imagDialog(e);var n=this.i10n.getConstant(\"altText\");if(!Object(l.W)(this.dialogObj)){var i=this.parent.createElement(\"div\",{className:\"e-img-altwrap\"}),r=this.i10n.getConstant(\"alternateHeader\"),o=this.i10n.getConstant(\"dialogUpdate\"),a=Ve('<div class=\"e-rte-field\"><input type=\"text\" spellcheck=\"false\" value=\"'+(null===e.selectNode[0].getAttribute(\"alt\")?\"\":e.selectNode[0].getAttribute(\"alt\"))+'\" class=\"e-input e-img-alt\" placeholder=\"'+n+'\"/></div>');i.appendChild(a);var s=i.querySelector(\".e-img-alt\"),c={args:e.args,selfImage:this,selection:e.selection,selectNode:e.selectNode,alt:s};this.dialogObj.setProperties({height:\"inherit\",width:\"290px\",header:r,content:i,position:{X:\"center\",Y:\"center\"},buttons:[{click:function(e){t.insertAlt(c)},buttonModel:{content:o,cssClass:\"e-flat e-update-alt\",isPrimary:!0}}]}),this.dialogObj.element.style.maxHeight=\"inherit\",this.dialogObj.content.querySelector(\"input\").focus()}}},e.prototype.insertAlt=function(e){if(!Object(l.W)(e.alt)){e.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();var t=e.alt.value;this.parent.formatter.process(this.parent,e.args,e.args,{altText:t,selectNode:e.selectNode,subCommand:e.args.item.subCommand}),this.dialogObj.hide({returnValue:!1})}},e.prototype.insertlink=function(e){if(\"IMG\"===e.selectNode[0].nodeName){var t=e.link.value;if(\"\"===t)return Object(l.v)([e.link],\"e-error\"),e.link.setSelectionRange(0,t.length),void e.link.focus();this.isUrl(t)?Object(l.hb)([e.link],\"e-error\"):t=\"http://\"+t;var n=e.selfImage;if(\"HTML\"===n.parent.editorMode&&e.selection.restore(),0===n.parent.formatter.getUndoRedoStack().length&&n.parent.formatter.saveData(),\"A\"===e.selectNode[0].parentElement.nodeName)return n.parent.formatter.process(n.parent,e.args,e.args,{url:t,target:n.checkBoxObj.checked?\"_blank\":null,selectNode:e.selectNode,subCommand:e.args.item.subCommand}),void n.dialogObj.hide({returnValue:!0});n.parent.formatter.process(n.parent,e.args,e.args,{url:t,target:n.checkBoxObj.checked?\"_blank\":null,selectNode:e.selectNode,subCommand:e.args.item.subCommand,selection:e.selection});var i=Object(l.C)(e.selectNode[0],\".e-img-caption\");i&&Object(l.kb)(\".e-img-inner\",i).focus(),n.dialogObj.hide({returnValue:!1})}},e.prototype.isUrl=function(e){return/(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/gi.test(e)},e.prototype.deleteImg=function(e,t){if(\"IMG\"===e.selectNode[0].nodeName){var n={element:e.selectNode[0],src:e.selectNode[0].getAttribute(\"src\")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.contentModule.getEditPanel().querySelector(\".e-img-resize\")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:\"e-img-caption\",subCommand:e.args.item.subCommand}),this.imageRemovePost(n.src),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup(),this.cancelResizeAction(),Object(l.W)(t)&&this.parent.trigger(\"afterImageDelete\",n)}},e.prototype.imageRemovePost=function(e){var t=new l.a(this.parent.insertImageSettings.removeUrl,\"POST\",!0,null),n=new FormData;n.append(name,e),t.send(n)},e.prototype.caption=function(e){var t=e.selectNode[0];if(\"IMG\"===t.nodeName){e.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.cancelResizeAction(),Object(l.v)([t],\"e-rte-image\");var n=e.args.item?e.args.item.subCommand:\"Caption\";if(Object(l.W)(Object(l.C)(t,\".e-img-caption\"))){this.captionEle=this.parent.createElement(\"span\",{className:\"e-img-caption e-rte-img-caption\",attrs:{contenteditable:\"false\",draggable:\"false\"}});var i=this.parent.createElement(\"span\",{className:\"e-img-wrap\"}),r=this.parent.createElement(\"span\",{className:\"e-img-inner\",attrs:{contenteditable:\"true\"}}),o=e.selectNode[0].parentElement;\"A\"===o.tagName&&o.setAttribute(\"contenteditable\",\"true\"),i.appendChild(\"A\"===o.tagName?o:e.selectNode[0]),i.appendChild(r);var a=this.i10n.getConstant(\"imageCaption\");r.innerHTML=a,this.captionEle.appendChild(i),t.classList.contains(\"e-imginline\")&&Object(l.v)([this.captionEle],\"e-caption-inline\"),t.classList.contains(\"e-imgbreak\")&&Object(l.v)([this.captionEle],\"e-imgbreak\"),t.classList.contains(\"e-imgleft\")&&Object(l.v)([this.captionEle],\"e-imgleft\"),t.classList.contains(\"e-imgright\")&&Object(l.v)([this.captionEle],\"e-imgright\"),t.classList.contains(\"e-imgcenter\")&&Object(l.v)([this.captionEle],\"e-imgcenter\"),this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:this.captionEle,selectNode:e.selectNode,subCommand:n}),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),r.childNodes[0],r.childNodes[0],0,r.childNodes[0].textContent.length)}else Object(l.I)(Object(l.C)(t,\".e-img-caption\")),l.d.isIE&&(this.contentModule.getEditPanel().focus(),e.selection.restore()),\"A\"===t.parentElement.tagName?this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t.parentElement,selectNode:e.selectNode,subCommand:n}):this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t,selectNode:e.selectNode,subCommand:n});this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),Object(l.hb)([t],\"e-img-focus\"))}},e.prototype.imageSize=function(e){var t=this;if(\"IMG\"===e.selectNode[0].nodeName&&(this.imagDialog(e),!Object(l.W)(this.dialogObj))){var n=this.i10n.getConstant(\"imageSizeHeader\"),i=this.i10n.getConstant(\"dialogUpdate\"),r=this.imgsizeInput(e),o={args:e.args,selfImage:this,selection:e.selection,selectNode:e.selectNode};this.dialogObj.setProperties({height:\"inherit\",width:\"290px\",header:n,content:r,position:{X:\"center\",Y:\"center\"},buttons:[{click:function(e){t.insertSize(o)},buttonModel:{content:i,cssClass:\"e-flat e-update-size\",isPrimary:!0}}]}),this.dialogObj.element.style.maxHeight=\"inherit\",this.dialogObj.content.querySelector(\"input\").focus()}},e.prototype.break=function(e){if(\"IMG\"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:\"Break\";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},e.prototype.inline=function(e){if(\"IMG\"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:\"Inline\";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},e.prototype.alignImage=function(e,t){var n=e.args.item?e.args.item.subCommand:t;this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:n})},e.prototype.imagDialog=function(e){var t=this;if(this.dialogObj)this.dialogObj.hide({returnValue:!0});else{var n=this.parent.createElement(\"div\",{className:\"e-rte-img-dialog\",id:this.rteID+\"_image\"});this.parent.element.appendChild(n);var i=this.i10n.getConstant(\"dialogInsert\"),r=this.i10n.getConstant(\"dialogCancel\"),o=this.i10n.getConstant(\"imageHeader\"),a=e.selection,s={selfImage:this,selection:e.selection,args:e.args,selectParent:e.selectParent},c={header:o,cssClass:\"e-rte-elements\",enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:l.d.isDevice?\"290px\":\"340px\",height:\"inherit\",position:{X:\"center\",Y:l.d.isDevice?\"center\":\"top\"},isModal:l.d.isDevice,buttons:[{click:this.insertImageUrl.bind(s),buttonModel:{content:i,cssClass:\"e-flat e-insertImage\",isPrimary:!0}},{click:function(e){t.cancelDialog(e)},buttonModel:{cssClass:\"e-flat e-cancel\",content:r}}],target:l.d.isDevice?document.body:this.parent.element,animationSettings:{effect:\"None\"},close:function(e){t.isImgUploaded&&t.uploadObj.removing(),t.parent.isBlur=!1,e&&e.event.returnValue&&(\"HTML\"===t.parent.editorMode?a.restore():t.parent.formatter.editorManager.markdownSelection.restore(t.parent.contentModule.getEditPanel())),t.dialogObj.destroy(),Object(l.I)(t.dialogObj.element),t.dialogRenderObj.close(e),t.dialogObj=null}},d=this.parent.createElement(\"div\",{className:\"e-img-content\"});(!Object(l.W)(this.parent.insertImageSettings.path)&&\"Markdown\"===this.parent.editorMode||\"HTML\"===this.parent.editorMode)&&d.appendChild(this.imgUpload(e));var h=this.parent.createElement(\"div\",{className:\"e-linkheader\"}),p=this.i10n.getConstant(\"imageLinkHeader\");\"HTML\"===this.parent.editorMode?h.innerHTML=p:h.innerHTML=this.i10n.getConstant(\"mdimageLink\"),d.appendChild(h),d.appendChild(this.imageUrlPopup(e)),e.selectNode&&\"IMG\"===e.selectNode[0].nodeName?(c.header=this.parent.localeObj.getConstant(\"editImageHeader\"),c.content=d):c.content=d,this.dialogObj=this.dialogRenderObj.render(c),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(n),e.selectNode&&\"IMG\"===e.selectNode[0].nodeName&&\"insertImage\"===e.name&&(this.dialogObj.element.querySelector(\".e-insertImage\").textContent=this.parent.localeObj.getConstant(\"dialogUpdate\")),n.style.maxHeight=\"inherit\",this.quickToolObj&&(this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),Object(l.W)(e.selectParent)||Object(l.hb)([e.selectParent[0]],\"e-img-focus\")),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup())}},e.prototype.cancelDialog=function(e){this.parent.isBlur=!1,this.dialogObj.hide({returnValue:!0}),this.isImgUploaded&&this.uploadObj.removing()},e.prototype.onDocumentClick=function(e){var t=e.target;\"IMG\"===t.nodeName&&(this.imgEle=t),!Object(l.W)(this.dialogObj)&&(!Object(l.C)(t,\"#\"+this.dialogObj.element.id)&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!Object(l.C)(t,\"#\"+this.parent.getID()+\"_toolbar_Image\")&&!t.querySelector(\"#\"+this.parent.getID()+\"_toolbar_Image\"))&&(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,Ue(this.parent.element,\"focusout\")),\"IMG\"===e.target.tagName||!this.imgResizeDiv||this.quickToolObj&&this.quickToolObj.imageQTBar&&this.quickToolObj.imageQTBar.element.contains(e.target)||!this.contentModule.getEditPanel().contains(this.imgResizeDiv)||this.cancelResizeAction(),\"IMG\"!==t.tagName&&this.contentModule.getEditPanel().querySelector(\".e-img-resize\")&&(this.removeResizeEle(),this.contentModule.getEditPanel().querySelector(\"img\").style.outline=\"\")},e.prototype.removeResizeEle=function(){l.l.remove(this.contentModule.getDocument(),l.d.touchMoveEvent,this.resizing),l.l.remove(this.contentModule.getDocument(),l.d.touchEndEvent,this.resizeEnd),Object(l.I)(this.contentModule.getEditPanel().querySelector(\".e-img-resize\"))},e.prototype.imageUrlPopup=function(e){var t=this.parent.createElement(\"div\",{className:\"imgUrl\"}),n=this.i10n.getConstant(\"imageUrl\");return this.inputUrl=this.parent.createElement(\"input\",{className:\"e-input e-img-url\",attrs:{placeholder:n,spellcheck:\"false\"}}),t.appendChild(this.inputUrl),t},e.prototype.insertImageUrl=function(e){var t=this.selfImage;t.isImgUploaded=!1;var n=t.inputUrl.value;if(0===t.parent.formatter.getUndoRedoStack().length&&t.parent.formatter.saveData(),Object(l.W)(t.uploadUrl)||\"\"===t.uploadUrl.url){if(\"\"!==n){if(\"HTML\"===t.parent.editorMode&&Object(l.W)(Object(l.C)(this.selection.range.startContainer.parentNode,\"#\"+t.contentModule.getPanel().id))){t.contentModule.getEditPanel().focus();var i=t.parent.formatter.editorManager.nodeSelection.getRange(t.contentModule.getDocument());this.selection=t.parent.formatter.editorManager.nodeSelection.save(i,t.contentModule.getDocument()),this.selectParent=t.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}var r=/[\\w-]+.(jpg|png|jpeg|gif)/g,o=Object(l.W)(n.match(r))||\"HTML\"!==t.parent.editorMode?\"\":n.match(r)[0],a={cssClass:\"inline\"===t.parent.insertImageSettings.display?\"e-imginline\":\"e-imgbreak\",url:n,selection:this.selection,altText:o,selectParent:this.selectParent,width:{width:t.parent.insertImageSettings.width,minWidth:t.parent.insertImageSettings.minWidth,maxWidth:t.parent.getInsertImgMaxWidth()},height:{height:t.parent.insertImageSettings.height,minHeight:t.parent.insertImageSettings.minHeight,maxHeight:t.parent.insertImageSettings.maxHeight}};t.parent.formatter.process(t.parent,this.args,this.args.originalEvent,a),t.dialogObj.hide({returnValue:!1})}}else t.uploadUrl.cssClass=\"inline\"===t.parent.insertImageSettings.display?\"e-imginline\":\"e-imgbreak\",t.dialogObj.hide({returnValue:!1}),t.parent.formatter.process(t.parent,this.args,this.args.originalEvent,t.uploadUrl),t.uploadUrl.url=\"\",t.contentModule.getEditPanel().querySelector(\".e-img-resize\")&&(t.imgEle.style.outline=\"\",t.removeResizeEle())},e.prototype.imgsizeInput=function(e){var t=e.selectNode[0],n=this.i10n.getConstant(\"imageHeight\"),i=this.i10n.getConstant(\"imageWidth\"),r=this.parent.createElement(\"div\",{className:\"e-img-sizewrap\"}),o=Ve('<div class=\"e-rte-label\"><label>'+i+'</label></div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"imgwidth\" class=\"e-img-width\" value='+(\"auto\"===t.getAttribute(\"width\")||Object(l.W)(t.getAttribute(\"width\"))?t.width:t.getClientRects()[0].width)+' /></div><div class=\"e-rte-label\"><label>'+n+'</label></div><div class=\"e-rte-field\"> <input type=\"text\" data-role =\"none\" id=\"imgheight\" class=\"e-img-height\" value='+(\"auto\"===t.getAttribute(\"height\")||Object(l.W)(t.getAttribute(\"height\"))?t.height:t.getClientRects()[0].height)+\" /></div>\");r.appendChild(o);var a=new vt.a({format:\"###.### px\",min:this.parent.insertImageSettings.minWidth,max:this.parent.getInsertImgMaxWidth(),enableRtl:this.parent.enableRtl,locale:this.parent.locale});a.isStringTemplate=!0,a.createElement=this.parent.createElement,a.appendTo(r.querySelector(\"#imgwidth\"));var s=new vt.a({format:\"###.### px\",min:this.parent.insertImageSettings.minHeight,max:this.parent.insertImageSettings.maxHeight,enableRtl:this.parent.enableRtl,locale:this.parent.locale});return s.isStringTemplate=!0,s.createElement=this.parent.createElement,s.appendTo(r.querySelector(\"#imgheight\")),r},e.prototype.insertSize=function(e){e.selection.restore();var t=e.selfImage;0===t.parent.formatter.getUndoRedoStack().length&&t.parent.formatter.saveData();var n=t.dialogObj.element,i=parseFloat(n.querySelector(\".e-img-width\").value),r=parseFloat(n.parentElement.querySelector(\".e-img-height\").value);t.parent.formatter.process(this.parent,e.args,e.args,{width:i,height:r,selectNode:e.selectNode,subCommand:e.args.item.subCommand}),this.imgResizeDiv&&t.imgResizePos(e.selectNode[0],this.imgResizeDiv),t.dialogObj.hide({returnValue:!0})},e.prototype.insertImage=function(e){if(this.imagDialog(e),!Object(l.W)(this.dialogObj)){this.dialogObj.element.style.maxHeight=\"inherit\";var t=this.dialogObj.element.querySelector(\".e-img-content\");!Object(l.W)(this.parent.insertImageSettings.path)&&\"Markdown\"===this.parent.editorMode||\"HTML\"===this.parent.editorMode?t.querySelector(\"#\"+this.rteID+\"_insertImage\").focus():t.querySelector(\".e-img-url\").focus()}},e.prototype.imgUpload=function(e){var t,n,i=this,r=this,o=r.parent.iframeSettings.enable;if(\"HTML\"===r.parent.editorMode&&(!o&&Object(l.W)(Object(l.C)(e.selection.range.startContainer.parentNode,\"#\"+this.parent.contentModule.getPanel().id))||o&&!Pe(e.selection.range.startContainer.parentNode.ownerDocument.querySelector(\"body\"),\"e-lib\"))){this.contentModule.getEditPanel().focus();var a=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());t=this.parent.formatter.editorManager.nodeSelection.save(a,this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(a)}else t=e.selection,n=e.selectParent;var s=this.parent.createElement(\"div\",{className:\"e-img-uploadwrap e-droparea\"}),c=this.i10n.getConstant(\"imageDeviceUploadMessage\"),d=this.i10n.getConstant(\"imageUploadMessage\"),h=this.parent.createElement(\"span\",{className:\"e-droptext\"}),p=this.parent.createElement(\"span\",{className:\"e-rte-upload-text\",innerHTML:l.d.isDevice?c:d});h.appendChild(p);var u=this.parent.createElement(\"button\",{className:\"e-browsebtn\",id:this.rteID+\"_insertImage\",attrs:{autofocus:\"true\",type:\"button\"}});h.appendChild(u),s.appendChild(h);var m=this.i10n.getConstant(\"browse\"),f=new Ct.a({content:m,enableRtl:this.parent.enableRtl});f.isStringTemplate=!0,f.createElement=this.parent.createElement,f.appendTo(u);var g=l.d.isDevice?h:u;l.l.add(g,\"click\",this.fileSelect,this);var b,v,y,C,O,S=this.parent.createElement(\"input\",{id:this.rteID+\"_upload\",attrs:{type:\"File\",name:\"UploadFiles\"}});return s.appendChild(S),this.uploadObj=new yt.a({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},dropArea:h,multiple:!1,enableRtl:this.parent.enableRtl,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),selected:function(e){r.isImgUploaded=!0,y=e,C=e.filesData,i.parent.isServerRendered&&(y=JSON.parse(JSON.stringify(e)),e.cancel=!0,v=e.filesData,y.filesData=v),i.parent.trigger(\"imageSelected\",y,(function(e){if(i.checkExtension(e.filesData[0]),b=e.filesData[0].name,\"HTML\"===i.parent.editorMode&&Object(l.W)(i.parent.insertImageSettings.path)){var o=new FileReader;o.addEventListener(\"load\",(function(e){var a=\"Base64\"===i.parent.insertImageSettings.saveFormat?o.result:URL.createObjectURL($e(o.result));r.uploadUrl={url:a,selection:t,altText:b,selectParent:n,width:{width:r.parent.insertImageSettings.width,minWidth:r.parent.insertImageSettings.minWidth,maxWidth:r.parent.getInsertImgMaxWidth()},height:{height:r.parent.insertImageSettings.height,minHeight:r.parent.insertImageSettings.minHeight,maxHeight:r.parent.insertImageSettings.maxHeight}},r.inputUrl.setAttribute(\"disabled\",\"true\")})),o.readAsDataURL(e.filesData[0].rawFile)}i.parent.isServerRendered&&i.uploadObj._internalRenderSelect(e,v)}))},beforeUpload:function(e){i.parent.isServerRendered?((O=JSON.parse(JSON.stringify(e))).filesData=C,e.cancel=!0,i.parent.trigger(\"imageUploading\",O,(function(e){e.cancel||(i.uploadObj.currentRequestHeader=e.currentRequest?e.currentRequest:i.uploadObj.currentRequestHeader,i.uploadObj.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:i.uploadObj.customFormDatas,i.uploadObj.uploadFiles(v,null))}))):i.parent.trigger(\"beforeImageUpload\",e)},uploading:function(e){i.parent.isServerRendered||i.parent.trigger(\"imageUploading\",e)},success:function(e){i.parent.trigger(\"imageUploadSuccess\",e,(function(e){if(!Object(l.W)(i.parent.insertImageSettings.path)){var o=i.parent.insertImageSettings.path+e.file.name;r.uploadUrl={url:o,selection:t,altText:b,selectParent:n,width:{width:r.parent.insertImageSettings.width,minWidth:r.parent.insertImageSettings.minWidth,maxWidth:r.parent.getInsertImgMaxWidth()},height:{height:r.parent.insertImageSettings.height,minHeight:r.parent.insertImageSettings.minHeight,maxHeight:r.parent.insertImageSettings.maxHeight}},r.inputUrl.setAttribute(\"disabled\",\"true\")}}))},failure:function(e){i.parent.trigger(\"imageUploadFailed\",e)},removing:function(){i.parent.trigger(\"imageRemoving\",e,(function(e){r.isImgUploaded=!1,r.inputUrl.removeAttribute(\"disabled\"),r.uploadUrl&&(r.uploadUrl.url=\"\"),i.dialogObj.getButtons(0).element.removeAttribute(\"disabled\")}))}}),this.uploadObj.isStringTemplate=!0,this.uploadObj.createElement=this.parent.createElement,this.uploadObj.appendTo(S),s},e.prototype.checkExtension=function(e){this.uploadObj.allowedExtensions&&(-1===this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf((\".\"+e.type).toLocaleLowerCase())?this.dialogObj.getButtons(0).element.setAttribute(\"disabled\",\"disabled\"):this.dialogObj.getButtons(0).element.removeAttribute(\"disabled\"))},e.prototype.fileSelect=function(){return this.dialogObj.element.getElementsByClassName(\"e-file-select-wrap\")[0].querySelector(\"button\").click(),!1},e.prototype.dragStart=function(e){if(\"IMG\"!==e.target.nodeName)return!0;this.parent.trigger(\"actionBegin\",e,(function(t){t.cancel?e.preventDefault():(e.dataTransfer.effectAllowed=\"copyMove\",e.target.classList.add(\"e-rte-drag-image\"))}))},e.prototype.dragEnter=function(e){e.dataTransfer.dropEffect=\"copy\",e.preventDefault()},e.prototype.dragOver=function(e){if(!(\"edge\"===l.d.info.name&&e.dataTransfer.items[0].type.split(\"/\")[0].indexOf(\"image\")>-1||l.d.isIE&&\"Files\"===e.dataTransfer.types[0]))return!0;e.preventDefault()},e.prototype.dragDrop=function(e){var t=this,n=this.parent.inputElement.ownerDocument.querySelector(\".e-rte-drag-image\");if(!(n&&\"IMG\"===n.tagName||e.dataTransfer.files.length>0))return!0;this.parent.trigger(\"actionBegin\",e,(function(n){if(n.cancel)e.preventDefault();else{if(Object(l.C)(e.target,\"#\"+t.parent.getID()+\"_toolbar\")||\"false\"===t.parent.inputElement.contentEditable)return void e.preventDefault();t.parent.element.querySelector(\".e-img-resize\")&&Object(l.I)(t.imgResizeDiv),e.preventDefault();var i=void 0;if(t.contentModule.getDocument().caretRangeFromPoint?i=t.contentModule.getDocument().caretRangeFromPoint(e.clientX,e.clientY):e.rangeParent?(i=t.contentModule.getDocument().createRange()).setStart(e.rangeParent,e.rangeOffset):i=t.getDropRange(e.clientX,e.clientY),t.parent.notify(\"selectRange\",{range:i}),t.parent.element.querySelector(\".e-droparea\"))return;t.insertDragImage(e)}}))},e.prototype.getDropRange=function(e,t){var n=this.contentModule.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),n);var i=this.contentModule.getDocument().elementFromPoint(e,t),r=i.childNodes.length>0?i.childNodes[0]:i,o=0;if(\"<br>\"===this.parent.inputElement.firstChild.innerHTML)n.setStart(r,o),n.setEnd(r,o);else{var a=void 0;do{o++,n.setStart(r,o),n.setEnd(r,o+1),a=n.getBoundingClientRect()}while(a.left<e&&o<r.length-1)}return n},e.prototype.insertDragImage=function(e){var t=this;e.preventDefault();var n=this.parent.element.querySelector(\"e-popup-open\");if(this.parent.notify(\"drop\",{args:e}),n&&n.classList.add(\"e-hide\"),e.dataTransfer.files.length>0){if(e.dataTransfer.files.length>1)return;for(var i=e.dataTransfer.files,r=i[0].name,o=r.substring(r.lastIndexOf(\".\")),a=this.parent.insertImageSettings.allowedTypes,s=0;s<a.length;s++)if(o.toLocaleLowerCase()===a[s].toLowerCase())if(this.parent.insertImageSettings.saveUrl)this.onSelect(e);else{var l={args:e,text:\"\",file:i[0]};e.preventDefault(),this.imagePaste(l)}}else{var c=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),d=this.parent.inputElement.ownerDocument.querySelector(\".e-rte-drag-image\");if(d&&\"IMG\"===d.tagName){d.nextElementSibling&&d.nextElementSibling.classList.contains(\"e-img-inner\")?c.insertNode(d.parentElement.parentElement):c.insertNode(d),d.classList.remove(\"e-rte-drag-image\");var h={elements:[d]};d.addEventListener(\"load\",(function(){t.parent.trigger(\"actionComplete\",h)})),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());l=e;this.resizeStart(l,d),this.hideImageQuickToolbar()}}},e.prototype.onSelect=function(e){var t=this,n=this,i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),r=this.parent.createElement(\"ul\",{className:\"e-upload-files\"});this.parent.element.appendChild(r);var o={name:\"\",size:0,status:\"\",statusCode:\"\",type:\"\",rawFile:e.dataTransfer.files[0],validationMessages:{}},a=this.parent.createElement(\"IMG\");a.style.opacity=\"0.5\",a.classList.add(\"e-rte-image\"),a.classList.add(\"e-imginline\"),a.classList.add(\"e-resize\");var s=o.rawFile,l=new FileReader;l.addEventListener(\"load\",(function(){var e=URL.createObjectURL($e(l.result));a.src=\"Blob\"===n.parent.insertImageSettings.saveFormat?e:l.result})),s&&l.readAsDataURL(s),i.insertNode(a),this.uploadMethod(e,a);var c={elements:[a]};a.addEventListener(\"load\",(function(){t.parent.trigger(\"actionComplete\",c)}))},e.prototype.uploadMethod=function(e,t){var n=this,i=!1,r=this,o=this.parent.createElement(\"div\");this.parent.element.appendChild(o);var a=this.parent.createElement(\"input\",{id:this.rteID+\"_upload\",attrs:{type:\"File\",name:\"UploadFiles\"}}),s=this.parent.iframeSettings.enable?-50:-90;this.popupObj=new c.a(o,{relateTo:t,height:\"85px\",width:\"300px\",offsetY:s,content:a,viewPortElement:this.parent.element,position:{X:\"center\",Y:\"top\"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(e){n.parent.isBlur=!1,n.popupObj.destroy(),Object(l.I)(n.popupObj.element),n.popupObj=null}}),this.popupObj.element.style.display=\"none\",Object(l.v)([this.popupObj.element],\"e-popup-open\"),Object(l.v)([this.popupObj.element],\"e-rte-upload-popup\");var d=e.dataTransfer.files[0].size>1e6?300:100;setTimeout((function(){r.refreshPopup(t)}),d);var h,p,u=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());this.uploadObj=new yt.a({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},cssClass:\"e-rte-dialog-upload\",dropArea:this.parent.element,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),removing:function(){n.parent.inputElement.contentEditable=\"true\",i=!1,Object(l.I)(t),n.popupObj.close()},canceling:function(){n.parent.inputElement.contentEditable=\"true\",i=!1,Object(l.I)(t),n.popupObj.close()},beforeUpload:function(e){n.parent.isServerRendered?((p=JSON.parse(JSON.stringify(e))).filesData=h,i=!0,e.cancel=!0,n.parent.trigger(\"imageUploading\",p,(function(e){e.cancel||(n.uploadObj.currentRequestHeader=e.currentRequest?e.currentRequest:n.uploadObj.currentRequestHeader,n.uploadObj.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:n.uploadObj.customFormDatas,n.uploadObj.uploadFiles(h,null),n.parent.inputElement.contentEditable=\"false\")}))):n.parent.trigger(\"beforeImageUpload\",e)},uploading:function(e){n.parent.isServerRendered||(i=!0,n.parent.trigger(\"imageUploading\",e),n.parent.inputElement.contentEditable=\"false\")},selected:function(e){i&&(e.cancel=!0),n.parent.isServerRendered&&(h=e.filesData)},failure:function(r){i=!1,n.parent.inputElement.contentEditable=\"true\";var o={args:e,type:\"Images\",isNotify:void 0,elements:t};setTimeout((function(){n.uploadFailure(t,o,r)}),900)},success:function(r){i=!1,n.parent.inputElement.contentEditable=\"true\";var o={args:e,type:\"Images\",isNotify:void 0,elements:t};setTimeout((function(){n.uploadSuccess(t,e,o,r)}),900)}}),this.uploadObj.appendTo(this.popupObj.element.childNodes[0]),Object(l.I)(this.popupObj.element.querySelector(\".e-rte-dialog-upload .e-file-select-wrap\")),u.selectNodeContents(t),this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),u)},e.prototype.refreshPopup=function(e){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+e.offsetTop:e.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(this.popupObj.relateTo=this.parent.inputElement,this.popupObj.offsetY=this.parent.iframeSettings.enable?-30:-65,this.popupObj.element.style.display=\"block\"):this.popupObj&&(this.popupObj.refreshPosition(e),this.popupObj.element.style.display=\"block\")},e.prototype.uploadFailure=function(e,t,n){Object(l.I)(e),this.popupObj&&this.popupObj.close(),this.parent.trigger(\"imageUploadFailed\",n),this.uploadObj.destroy()},e.prototype.uploadSuccess=function(e,t,n,i){var r=this;e.style.opacity=\"1\",e.classList.add(\"e-img-focus\"),i.element=e,this.parent.trigger(\"imageUploadSuccess\",i,(function(t){if(!Object(l.W)(r.parent.insertImageSettings.path)){var n=r.parent.insertImageSettings.path+t.file.name;e.src=n,e.setAttribute(\"alt\",t.file.name)}})),this.popupObj&&(this.popupObj.close(),this.uploadObj.destroy()),this.showImageQuickToolbar(n),this.resizeStart(t,e)},e.prototype.imagePaste=function(e){var t=this;if(0===e.text.length&&!Object(l.W)(e.file)){var n=this,i=new FileReader;e.args.preventDefault(),i.addEventListener(\"load\",(function(r){var o={cssClass:\"inline\"===n.parent.insertImageSettings.display?\"e-imginline\":\"e-imgbreak\",url:\"Base64\"!==t.parent.insertImageSettings.saveFormat&&Object(l.W)(e.callBack)?URL.createObjectURL($e(i.result)):i.result,width:{width:n.parent.insertImageSettings.width,minWidth:n.parent.insertImageSettings.minWidth,maxWidth:n.parent.getInsertImgMaxWidth()},height:{height:n.parent.insertImageSettings.height,minHeight:n.parent.insertImageSettings.minHeight,maxHeight:n.parent.insertImageSettings.maxHeight}};Object(l.W)(e.callBack)?(n.parent.formatter.process(n.parent,{item:{command:\"Images\",subCommand:\"Image\"}},e.args,o),t.showPopupToolBar(e,o)):e.callBack(o)})),i.readAsDataURL(e.file)}},e.prototype.showPopupToolBar=function(e,t){var n=this,r='img[src=\"'+t.url+'\"]',o=this.parent.inputElement.querySelector(r);this.parent.quickToolbarModule.createQTBar(\"Image\",\"MultiRow\",this.parent.quickToolbarSettings.image,i.ImageToolbar);var a={args:e.args,type:\"Images\",isNotify:void 0,elements:o};o&&setTimeout((function(){n.showImageQuickToolbar(a),n.resizeStart(e.args,o)}),0)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getModuleName=function(){return\"image\"},e}(),St=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService(\"rendererFactory\"),this.addEventListener()}return e.prototype.initializeInstance=function(){this.contentRenderer=this.renderFactory.getRenderer(i.Content),this.editPanel=this.contentRenderer.getEditPanel(),this.addEventListener()},e.prototype.renderCount=function(){this.initializeInstance(),this.element=this.parent.createElement(\"span\",{className:\"e-rte-character-count\"}),this.contentRenderer.getPanel().parentElement.appendChild(this.element),this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength)},e.prototype.appendCount=function(){var e=\"Markdown\"===this.parent.editorMode?this.editPanel.value.trim():this.editPanel.textContent.trim();this.htmlLength=e.length;var t=-1===this.parent.maxLength?this.htmlLength:this.htmlLength+\" / \"+this.parent.maxLength;this.element.innerHTML=t},e.prototype.charCountBackground=function(e){var t=e/this.parent.maxLength*100;t<85?(this.element.classList.remove(\"e-warning\"),this.element.classList.remove(\"e-error\")):t>85&&t<=90?(this.element.classList.remove(\"e-error\"),this.element.classList.add(\"e-warning\")):t>90&&(this.element.classList.remove(\"e-warning\"),this.element.classList.add(\"e-error\"))},e.prototype.refresh=function(){Object(l.W)(this.editPanel)||(this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},e.prototype.destroy=function(){this.element&&!Object(l.W)(this.parent.element.querySelector(\".e-rte-character-count\"))&&Object(l.I)(this.element),this.removeEventListener()},e.prototype.toggle=function(e){this.element.style.display=\"viewSource\"===e.member?\"none\":\"block\"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(d,this.renderCount,this),this.parent.on(u,this.refresh,this),this.parent.on(\"count\",this.refresh,this),this.parent.on(\"refresh-begin\",this.refresh,this),this.parent.on(f,this.refresh,this),this.parent.on(h,this.destroy,this),this.parent.on(\"sourceCode\",this.toggle,this),this.parent.on(\"updateSource\",this.toggle,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(d,this.renderCount),this.parent.off(u,this.refresh),this.parent.off(\"refresh-begin\",this.refresh),this.parent.off(\"count\",this.refresh),this.parent.off(f,this.refresh),this.parent.off(h,this.destroy),this.parent.off(\"sourceCode\",this.toggle),this.parent.off(\"updateSource\",this.toggle))},e.prototype.getModuleName=function(){return\"count\"},e}(),kt=n(\"Yb6z\"),wt=function(){function e(e,t){this.tools={},this.parent=e,this.locator=t,this.renderFactory=this.locator.getService(\"rendererFactory\"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?Object(l.J)(this.tools,z,Qe(this.parent.toolbarSettings.itemConfigs),!0):this.tools=z}return e.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(i.Toolbar)},e.prototype.renderColorPickerInput=function(e){var t=this;this.initializeInstance();var n,i,r=e.containerType,o=e.container;W.forEach((function(a){if(-1!==Re(a,e.items))switch(a){case\"fontcolor\":n=t.parent.getID()+\"_\"+r+\"_FontColor_Target\";var s=t.parent.createElement(\"input\");s.id=n,s.classList.add(\"e-rte-fontcolor-element\"),document.body.appendChild(s),i={cssClass:t.tools[a.toLocaleLowerCase()].icon+\" e-rte-elements e-icons\",value:t.tools[a.toLocaleLowerCase()].value,command:t.tools[a.toLocaleLowerCase()].command,subCommand:t.tools[a.toLocaleLowerCase()].subCommand,element:Object(l.kb)(\"#\"+t.parent.getID()+\"_\"+r+\"_FontColor\",o),target:\"#\"+n},t.fontColorPicker=t.toolbarRenderer.renderColorPicker(i,\"fontcolor\"),t.fontColorDropDown=t.toolbarRenderer.renderColorPickerDropDown(i,\"fontcolor\",t.fontColorPicker);break;case\"backgroundcolor\":n=t.parent.getID()+\"_\"+r+\"_BackgroundColor_Target\";var c=t.parent.createElement(\"input\");c.id=n,c.classList.add(\"e-rte-backgroundcolor-element\"),document.body.appendChild(c),i={cssClass:t.tools[a.toLocaleLowerCase()].icon+\" e-rte-elements e-icons\",value:t.tools[a.toLocaleLowerCase()].value,command:t.tools[a.toLocaleLowerCase()].command,subCommand:t.tools[a.toLocaleLowerCase()].subCommand,element:Object(l.kb)(\"#\"+t.parent.getID()+\"_\"+r+\"_BackgroundColor\",o),target:\"#\"+n},t.backgroundColorPicker=t.toolbarRenderer.renderColorPicker(i,\"backgroundcolor\"),t.backgroundColorDropDown=t.toolbarRenderer.renderColorPickerDropDown(i,\"backgroundcolor\",t.backgroundColorPicker)}}))},e.prototype.destroy=function(){this.removeEventListener(),this.destroyColorPicker()},e.prototype.destroyColorPicker=function(){var e;(this.fontColorPicker&&!this.fontColorPicker.isDestroyed&&this.fontColorPicker.destroy(),this.backgroundColorPicker&&!this.backgroundColorPicker.isDestroyed&&this.backgroundColorPicker.destroy(),this.fontColorDropDown&&!this.fontColorDropDown.isDestroyed)&&((e=this.fontColorDropDown.element.querySelector(\".e-rte-color-content\"))&&Object(l.I)(e),this.fontColorDropDown.destroy());this.backgroundColorDropDown&&!this.backgroundColorDropDown.isDestroyed&&((e=this.backgroundColorDropDown.element.querySelector(\".e-rte-color-content\"))&&Object(l.I)(e),this.backgroundColorDropDown.destroy())},e.prototype.setRtl=function(e){this.fontColorPicker&&(this.fontColorPicker.setProperties({enableRtl:e.enableRtl}),this.fontColorDropDown.setProperties({enableRtl:e.enableRtl})),this.backgroundColorPicker&&(this.backgroundColorPicker.setProperties({enableRtl:e.enableRtl}),this.backgroundColorDropDown.setProperties({enableRtl:e.enableRtl}))},e.prototype.addEventListener=function(){this.parent.on(\"toolbarRenderComplete\",this.renderColorPickerInput,this),this.parent.on(b,this.setRtl,this),this.parent.on(h,this.destroy,this),this.parent.on(\"destroy-color-picker\",this.destroyColorPicker,this),this.parent.on(p,this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=e.newProp,n=0,i=Object.keys(t);n<i.length;n++){switch(i[n]){case\"fontColor\":if(this.fontColorPicker)for(var r=0,o=Object.keys(t.fontColor);r<o.length;r++){switch(o[r]){case\"default\":this.fontColorPicker.setProperties({value:t.fontColor.default}),this.fontColorDropDown.element.querySelector(\".\"+this.tools.fontcolor.icon).style.borderBottomColor=t.fontColor.default;break;case\"mode\":this.fontColorPicker.setProperties({mode:t.fontColor.mode});break;case\"columns\":this.fontColorPicker.setProperties({columns:t.fontColor.columns});break;case\"colorCode\":this.fontColorPicker.setProperties({presetColors:t.fontColor.colorCode});break;case\"modeSwitcher\":this.fontColorPicker.setProperties({modeSwitcher:t.fontColor.modeSwitcher})}}break;case\"backgroundColor\":if(this.backgroundColorPicker)for(var a=0,s=Object.keys(t.backgroundColor);a<s.length;a++){switch(s[a]){case\"default\":this.backgroundColorPicker.setProperties({value:t.backgroundColor.default}),this.backgroundColorDropDown.element.querySelector(\".\"+this.tools.backgroundcolor.icon).style.borderBottomColor=t.backgroundColor.default;break;case\"mode\":this.backgroundColorPicker.setProperties({mode:t.backgroundColor.mode});break;case\"columns\":this.backgroundColorPicker.setProperties({columns:t.backgroundColor.columns});break;case\"colorCode\":this.backgroundColorPicker.setProperties({presetColors:t.backgroundColor.colorCode});break;case\"modeSwitcher\":this.backgroundColorPicker.setProperties({modeSwitcher:t.backgroundColor.modeSwitcher})}}}}},e.prototype.removeEventListener=function(){this.parent.off(\"toolbarRenderComplete\",this.renderColorPickerInput),this.parent.off(h,this.destroy),this.parent.off(b,this.setRtl),this.parent.off(\"destroy-color-picker\",this.destroyColorPicker),this.parent.off(p,this.onPropertyChanged)},e}(),Tt=function(){function e(e,t){this.parent=e,this.locator=t,this.isDOMElement=!1,this.renderFactory=this.locator.getService(\"rendererFactory\"),this.contentRenderer=this.renderFactory.getRenderer(i.Content),this.popupRenderer=this.renderFactory.getRenderer(i.Popup),this.dropDownButtons=new dt(this.parent,this.locator),this.colorPickerObj=new wt(this.parent,this.locator)}return e.prototype.appendPopupContent=function(){this.toolbarElement=this.parent.createElement(\"div\",{className:v}),this.element.appendChild(this.toolbarElement)},e.prototype.render=function(e){var t;t=\"Image\"===e.popupType?\"e-rte-image-popup\":\"Inline\"===e.popupType?\"e-rte-inline-popup\":\"\";var n=Object(l.T)(e.popupType+\"_Quick_Popup\");this.stringItems=e.toolbarItems,this.element=this.parent.createElement(\"div\",{id:n,className:t+\" e-rte-elements\"}),this.element.setAttribute(\"aria-owns\",this.parent.getID()),this.appendPopupContent(),this.createToolbar(e.toolbarItems,e.mode),this.popupRenderer.renderPopup(this),this.addEventListener()},e.prototype.createToolbar=function(e,t){this.quickTBarObj=new ct(this.parent,this.locator),this.quickTBarObj.render({container:\"quick\",target:this.toolbarElement,items:e,mode:t}),this.quickTBarObj.toolbarObj.refresh()},e.prototype.setPosition=function(e){var t,n,i=Object(l.C)(e.target,\".e-img-caption\"),r=Object(l.W)(i)?e.target:i;Object(l.v)([this.toolbarElement],[\"e-remove-white-space\"]);var o=r.offsetTop,a=window.pageYOffset+e.parentData.top;n=o-e.editTop>e.popHeight?a+e.tBarElementHeight+(o-e.editTop)-e.popHeight-5:e.editTop+e.editHeight-(o+r.offsetHeight)>e.popHeight?a+e.tBarElementHeight+(o-e.editTop)+r.offsetHeight+5:e.y,t=r.offsetWidth>e.popWidth?r.offsetWidth/2-e.popWidth/2+e.parentData.left+r.offsetLeft:e.parentData.left+r.offsetLeft,this.popupObj.position.X=t+e.popWidth>e.parentData.right?e.parentData.right-e.popWidth:t,this.popupObj.position.Y=n>=0?n:e.y+5,this.popupObj.dataBind(),Object(l.hb)([this.toolbarElement],[\"e-remove-white-space\"])},e.prototype.checkCollision=function(e,t,n){var i,r,o=e.parentData.top,a=e.windowY+o+e.tBarElementHeight,s=[];s=\"document\"===t?Object(kt.c)(e.popup):Object(kt.c)(e.popup,e.parentElement);for(var l=0;l<s.length;l++)switch(s[l]){case\"top\":r=\"document\"===t?e.windowY:window.pageYOffset+o+e.tBarElementHeight;break;case\"bottom\":r=\"document\"===t?\"inline\"===n?e.y-e.popHeight-10:e.windowHeight-(o+e.tBarElementHeight)>e.popHeight?a-e.windowHeight>e.popHeight?a+(e.windowHeight-o)-e.popHeight:a:e.windowY+(o+e.tBarElementHeight):\"IMG\"!==e.target.tagName?e.parentData.bottom+window.pageYOffset-e.popHeight-10:e.parentData.bottom+window.pageYOffset-e.popHeight-5;break;case\"right\":i=\"inline\"===n?e.windowWidth-(e.popWidth+e.bodyRightSpace+10):e.x-e.popWidth;break;case\"left\":i=\"inline\"===n?0:e.parentData.left}this.popupObj.position.X=i||this.popupObj.position.X,this.popupObj.position.Y=r||this.popupObj.position.Y,this.popupObj.dataBind()},e.prototype.showPopup=function(e,t,n){var i=this,r=Object(l.V)()?{cancel:!1,targetElement:n}:{popup:this.popupObj,cancel:!1,targetElement:n};this.parent.trigger(\"beforeQuickToolbarOpen\",r,(function(r){if(!r.cancel){var o,a=void 0,s=void 0,c=window.getComputedStyle(document.body),d=parseFloat(c.marginRight.split(\"px\")[0])+parseFloat(c.paddingRight.split(\"px\")[0]),h=window.innerHeight,p=window.innerWidth,u=i.parent.element,m=!Object(l.W)(i.parent.getToolbar()),f=m&&i.parent.toolbarModule.getToolbarHeight(),g=m&&i.parent.toolbarModule.getExpandTBarPopHeight(),b=m?f+g:0;if(Object(l.v)([i.element],[\"e-hide\"]),l.d.isDevice&&!Ae()&&Object(l.v)([i.parent.getToolbar()],[\"e-hide\"]),i.parent.iframeSettings.enable)a=(o=i.contentRenderer.getPanel().contentWindow).pageYOffset,s=o.innerHeight;else a=(o=Object(l.C)(n,\".e-rte-content\"))?o.scrollTop:0,s=o?o.offsetHeight:0;i.parent.inlineMode.enable||Object(l.C)(n,\"table\")||(i.parent.disableToolbarItem(i.parent.toolbarSettings.items),i.parent.enableToolbarItem([\"Undo\",\"Redo\"])),Object(l.w)([i.element],document.body),i.popupObj.position.X=e+20,i.popupObj.position.Y=t+(i.parent.iframeSettings.enable?35:20),i.popupObj.dataBind(),i.popupObj.element.classList.add(\"e-popup-open\"),i.dropDownButtons.renderDropDowns({container:i.toolbarElement,containerType:\"quick\",items:i.stringItems}),i.colorPickerObj.renderColorPickerInput({container:i.toolbarElement,containerType:\"quick\",items:i.stringItems});var v={x:e,y:t,target:n,editTop:a,editHeight:s,popup:i.popupObj.element,popHeight:i.popupObj.element.offsetHeight,popWidth:i.popupObj.element.offsetWidth,parentElement:u,bodyRightSpace:d,windowY:window.pageYOffset,windowHeight:h,windowWidth:p,parentData:u.getBoundingClientRect(),tBarElementHeight:b};\"IMG\"===n.tagName&&i.setPosition(v),i.parent.inlineMode.enable||i.checkCollision(v,\"parent\",\"\"),i.checkCollision(v,\"document\",i.parent.inlineMode.enable?\"inline\":\"\"),i.popupObj.element.classList.remove(\"e-popup-open\"),Object(l.hb)([i.element],[\"e-hide\"]),i.popupObj.show({name:\"ZoomIn\",duration:l.d.isIE?250:400}),Object(l.nb)(i.element,{maxWidth:i.parent.element.offsetWidth+\"px\"}),Object(l.v)([i.element],[\"e-rte-pop\"]),i.isDOMElement=!0}}))},e.prototype.hidePopup=function(){var e=this.parent.sourceCodeModule.getViewPanel();l.d.isDevice&&!Ae()&&Object(l.hb)([this.parent.getToolbar()],[\"e-hide\"]),Object(l.W)(this.parent.getToolbar())||this.parent.inlineMode.enable||(Object(l.W)(e)||\"none\"===e.style.display)&&this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.removeEleFromDOM(),this.isDOMElement=!1},e.prototype.addQTBarItem=function(e,t){this.quickTBarObj.toolbarObj.addItems(this.quickTBarObj.getItems(e,\"toolbar\"),t)},e.prototype.removeQTBarItem=function(e){this.quickTBarObj.toolbarObj.removeItems(e)},e.prototype.removeEleFromDOM=function(){var e=this.popupObj.element;if(this.isDOMElement){this.dropDownButtons.destroyDropDowns(),this.colorPickerObj.destroyColorPicker(),Object(l.hb)([this.element],[\"e-rte-pop\"]),Object(l.I)(e);var t=Object(l.V)()?{element:this.popupObj.element}:this.popupObj;this.parent.trigger(\"quickToolbarClose\",t)}},e.prototype.updateStatus=function(e){We({args:e,dropDownModule:this.dropDownButtons,parent:this.parent,tbElements:Object(l.lb)(\".\"+O,this.element),tbItems:this.quickTBarObj.toolbarObj.items},!0),Object(l.kb)(\".e-rte-srctextarea\",this.parent.element)||qe(this.parent.getBaseToolbarObject(),this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())},e.prototype.destroy=function(){this.popupObj&&!this.popupObj.isDestroyed&&(this.popupObj.destroy(),this.removeEleFromDOM()),this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(h,this.destroy,this),this.parent.on(p,this.onPropertyChanged,this),this.parent.inlineMode.enable&&this.parent.on(\"toolbar-updated\",this.updateStatus,this))},e.prototype.onPropertyChanged=function(e){if(!Object(l.W)(e.newProp.inlineMode))for(var t=0,n=Object.keys(e.newProp.inlineMode);t<n.length;t++){switch(n[t]){case\"enable\":e.newProp.inlineMode.enable?this.parent.on(\"toolbar-updated\",this.updateStatus,this):this.parent.off(\"toolbar-updated\",this.updateStatus)}}},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(h,this.destroy),this.parent.off(p,this.onPropertyChanged),this.parent.inlineMode.enable&&this.parent.off(\"toolbar-updated\",this.updateStatus))},e}(),Et=function(){function e(e){this.parent=e}return e.prototype.quickToolbarOpen=function(){var e=Object(l.V)()?{element:this.popupObj.element}:this.popupObj;this.parent.trigger(\"quickToolbarOpen\",e)},e.prototype.renderPopup=function(e){this.setPanel(e.element),this.renderPanel(),e.popupObj=new c.a(e.element,{targetType:\"relative\",relateTo:this.parent.element,open:this.quickToolbarOpen.bind(this)}),this.popupObj=e.popupObj,e.popupObj.hide()},e.prototype.renderPanel=function(){this.getPanel().classList.add(\"e-rte-quick-popup\")},e.prototype.getPanel=function(){return this.popupPanel},e.prototype.setPanel=function(e){this.popupPanel=e},e}(),jt=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService(\"rendererFactory\"),this.renderFactory.addRenderer(i.Popup,new Et(this.parent)),this.addEventListener()}return e.prototype.formatItems=function(e){var t=[];return e.forEach((function(e){if(\"string\"==typeof e)switch(e.toLocaleLowerCase()){case\"open\":t.push(\"openLink\");break;case\"edit\":t.push(\"editLink\");break;case\"unlink\":t.push(\"removeLink\");break;default:t.push(e)}else t.push(e)})),t},e.prototype.getQTBarOptions=function(e,t,n,i){return{popupType:e,toolbarItems:n,mode:t,renderType:i}},e.prototype.createQTBar=function(e,t,n,i){if(n.length<1)return null;var r=new Tt(this.parent,this.locator);return r.render(this.getQTBarOptions(e,t,this.formatItems(n),i)),r},e.prototype.initializeQuickToolbars=function(){this.parent.quickToolbarModule=this,this.contentRenderer=this.renderFactory.getRenderer(i.Content),this.parent.inlineMode.enable&&this.parent.inlineMode.onSelection&&Ae()&&l.l.add(this.contentRenderer.getDocument(),\"selectionchange\",this.selectionChangeHandler,this)},e.prototype.onMouseDown=function(e){this.parent.isBlur=!1,this.parent.isRTE=!0},e.prototype.renderQuickToolbars=function(){this.linkQTBar||this.imageQTBar||this.textQTBar||this.tableQTBar||(this.linkQTBar=this.createQTBar(\"Link\",\"Scrollable\",this.parent.quickToolbarSettings.link,i.LinkToolbar),this.renderFactory.addRenderer(i.LinkToolbar,this.linkQTBar),this.textQTBar=this.createQTBar(\"Text\",\"Scrollable\",this.parent.quickToolbarSettings.text,i.TextToolbar),this.renderFactory.addRenderer(i.TextToolbar,this.textQTBar),this.imageQTBar=this.createQTBar(\"Image\",\"MultiRow\",this.parent.quickToolbarSettings.image,i.ImageToolbar),this.renderFactory.addRenderer(i.ImageToolbar,this.imageQTBar),this.tableQTBar=this.createQTBar(\"Table\",\"MultiRow\",this.parent.quickToolbarSettings.table,i.TableToolbar),this.renderFactory.addRenderer(i.TableToolbar,this.tableQTBar),this.linkQTBar&&l.l.add(this.linkQTBar.element,\"mousedown\",this.onMouseDown,this),this.imageQTBar&&l.l.add(this.imageQTBar.element,\"mousedown\",this.onMouseDown,this),this.textQTBar&&l.l.add(this.textQTBar.element,\"mousedown\",this.onMouseDown,this),this.tableQTBar&&l.l.add(this.tableQTBar.element,\"mousedown\",this.onMouseDown,this))},e.prototype.renderInlineQuickToolbar=function(){!this.parent.inlineMode.enable||l.d.isDevice&&!Ae()||(Object(l.v)([this.parent.element],[\"e-rte-inline\"]),this.inlineQTBar=this.createQTBar(\"Inline\",\"MultiRow\",this.parent.toolbarSettings.items,i.InlineToolbar),this.renderFactory.addRenderer(i.InlineToolbar,this.inlineQTBar),l.l.add(this.inlineQTBar.element,\"mousedown\",this.onMouseDown,this))},e.prototype.showInlineQTBar=function(e,t,n){this.parent.readonly||this.inlineQTBar.showPopup(e,t,n)},e.prototype.hideInlineQTBar=function(){this.inlineQTBar&&!Pe(this.inlineQTBar.element,\"e-popup-close\")&&this.inlineQTBar.hidePopup()},e.prototype.hideQuickToolbars=function(){this.linkQTBar&&!Pe(this.linkQTBar.element,\"e-popup-close\")&&document.body.contains(this.linkQTBar.element)&&this.linkQTBar.hidePopup(),this.textQTBar&&!Pe(this.textQTBar.element,\"e-popup-close\")&&document.body.contains(this.textQTBar.element)&&this.textQTBar.hidePopup(),this.imageQTBar&&!Pe(this.imageQTBar.element,\"e-popup-close\")&&document.body.contains(this.imageQTBar.element)&&this.imageQTBar.hidePopup(),this.tableQTBar&&!Pe(this.tableQTBar.element,\"e-popup-close\")&&document.body.contains(this.tableQTBar.element)&&this.tableQTBar.hidePopup(),!this.parent.inlineMode.enable||l.d.isDevice&&!Ae()||this.hideInlineQTBar()},e.prototype.deBounce=function(e,t,n){var i=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){i.showInlineQTBar(e,t,n)}),1e3)},e.prototype.mouseUpHandler=function(e){if(this.parent.inlineMode.enable&&(!l.d.isDevice||Ae())){var t;t=e.args.touches?e.args.changedTouches[0]:e.args;var n=this.parent.getRange(),i=e.args.target;if(Object(l.W)(Object(l.kb)(\".e-rte-inline-popup\",document.body))){if(Ae()&&e.touchData&&e.touchData.prevClientX!==e.touchData.clientX&&e.touchData.prevClientY!==e.touchData.clientY)return;if(this.hideInlineQTBar(),this.offsetX=t.pageX,this.offsetY=function(e,t,n){return n?window.pageYOffset+t.getBoundingClientRect().top+e.clientY:e.pageY}(t,this.parent.element,this.parent.iframeSettings.enable),\"TEXTAREA\"===i.nodeName)this.showInlineQTBar(this.offsetX,this.offsetY,i);else{var r=Object(l.C)(i,\"a\");if(!(\"IMG\"===(i=r||i).tagName||\"A\"===i.tagName||Object(l.C)(i,\"td,th\")&&n.collapsed)){if(this.parent.inlineMode.onSelection&&n.collapsed)return;this.target=i,this.showInlineQTBar(this.offsetX,this.offsetY,i)}}}}},e.prototype.keyDownHandler=function(){!this.parent.inlineMode.enable||l.d.isDevice&&!Ae()||Object(l.W)(Object(l.kb)(\".e-rte-inline-popup\",document))||this.hideInlineQTBar()},e.prototype.inlineQTBarMouseDownHandler=function(){!this.parent.inlineMode.enable||l.d.isDevice&&!Ae()||Object(l.W)(Object(l.kb)(\".e-rte-inline-popup\",document))||this.hideInlineQTBar()},e.prototype.keyUpHandler=function(e){if(this.parent.inlineMode.enable&&!l.d.isDevice){if(this.parent.inlineMode.onSelection)return;var t=e.args;this.deBounce(this.offsetX,this.offsetY,t.target)}},e.prototype.selectionChangeHandler=function(e){var t=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){t.onSelectionChange(e)}),1e3)},e.prototype.onSelectionChange=function(e){Object(l.W)(Object(l.kb)(\".e-rte-inline-popup\",document.body))&&(this.contentRenderer.getDocument().getSelection().isCollapsed||this.mouseUpHandler({args:e}))},e.prototype.getInlineBaseToolbar=function(){return this.inlineQTBar&&this.inlineQTBar.quickTBarObj},e.prototype.destroy=function(){this.linkQTBar&&(l.l.remove(this.linkQTBar.element,\"mousedown\",this.onMouseDown),this.linkQTBar.destroy()),this.textQTBar&&(l.l.remove(this.textQTBar.element,\"mousedown\",this.onMouseDown),this.textQTBar.destroy()),this.imageQTBar&&(l.l.remove(this.imageQTBar.element,\"mousedown\",this.onMouseDown),this.imageQTBar.destroy()),this.tableQTBar&&(l.l.remove(this.tableQTBar.element,\"mousedown\",this.onMouseDown),this.tableQTBar.destroy()),this.inlineQTBar&&(l.l.remove(this.inlineQTBar.element,\"mousedown\",this.onMouseDown),Ae()&&l.l.remove(document,\"selectionchange\",this.selectionChangeHandler),this.inlineQTBar.destroy()),this.removeEventListener()},e.prototype.wireInlineQTBarEvents=function(){this.parent.on(\"mouseUp\",this.mouseUpHandler,this),this.parent.on(f,this.inlineQTBarMouseDownHandler,this),this.parent.on(m,this.keyDownHandler,this),this.parent.on(u,this.keyUpHandler,this),this.parent.on(\"sourceCodeMouseDown\",this.mouseUpHandler,this),this.parent.on(\"renderInlineToolbar\",this.renderInlineQuickToolbar,this)},e.prototype.unWireInlineQTBarEvents=function(){this.parent.off(\"mouseUp\",this.mouseUpHandler),this.parent.off(f,this.inlineQTBarMouseDownHandler),this.parent.off(m,this.keyDownHandler),this.parent.off(u,this.keyUpHandler),this.parent.off(\"sourceCodeMouseDown\",this.mouseUpHandler),this.parent.off(\"renderInlineToolbar\",this.renderInlineQuickToolbar)},e.prototype.toolbarUpdated=function(e){this.linkQTBar&&!Pe(this.linkQTBar.element,\"e-popup-close\")&&this.linkQTBar.hidePopup(),this.imageQTBar&&!Pe(this.imageQTBar.element,\"e-popup-close\")&&this.imageQTBar.hidePopup(),this.tableQTBar&&!Pe(this.tableQTBar.element,\"e-popup-close\")&&this.tableQTBar.hidePopup()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(d,this.initializeQuickToolbars,this),this.parent.on(f,this.renderQuickToolbars,this),this.parent.on(\"toolbar-updated\",this.toolbarUpdated,this),this.parent.on(\"drop\",this.renderQuickToolbars,this),this.wireInlineQTBarEvents(),this.parent.on(p,this.onPropertyChanged,this),\"hide\"===this.parent.quickToolbarSettings.actionOnScroll&&(this.parent.on(\"scroll\",this.hideQuickToolbars,this),this.parent.on(\"contentscroll\",this.hideQuickToolbars,this)),this.parent.on(\"focusChange\",this.hideQuickToolbars,this),this.parent.on(\"iframe-click\",this.onIframeMouseDown,this),this.parent.on(h,this.destroy,this),this.parent.on(m,this.onKeyDown,this),this.parent.on(b,this.setRtl,this))},e.prototype.onKeyDown=function(e){var t=e.args;8!==t.which&&46!==t.which||this.imageQTBar&&!Pe(this.imageQTBar.element,\"e-popup-close\")&&this.imageQTBar.hidePopup()},e.prototype.onIframeMouseDown=function(){this.hideQuickToolbars(),this.hideInlineQTBar()},e.prototype.setRtl=function(e){this.inlineQTBar&&this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:e.enableRtl}),this.imageQTBar&&this.imageQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:e.enableRtl}),this.linkQTBar&&this.imageQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:e.enableRtl})},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(d,this.initializeQuickToolbars),this.parent.off(f,this.renderQuickToolbars),this.parent.off(\"toolbar-updated\",this.toolbarUpdated),this.parent.off(\"drop\",this.renderQuickToolbars),this.unWireInlineQTBarEvents(),this.parent.off(p,this.onPropertyChanged),\"hide\"===this.parent.quickToolbarSettings.actionOnScroll&&(this.parent.off(\"scroll\",this.hideQuickToolbars),this.parent.off(\"contentscroll\",this.hideQuickToolbars)),this.parent.off(\"focusChange\",this.hideQuickToolbars),this.parent.off(h,this.destroy),this.parent.off(\"iframe-click\",this.onIframeMouseDown),this.parent.off(m,this.onKeyDown),this.parent.off(b,this.setRtl))},e.prototype.onPropertyChanged=function(e){if(!Object(l.W)(e.newProp.quickToolbarSettings))for(var t=0,n=Object.keys(e.newProp.quickToolbarSettings);t<n.length;t++){switch(n[t]){case\"actionOnScroll\":\"none\"===e.newProp.quickToolbarSettings.actionOnScroll?(this.parent.off(\"scroll\",this.hideQuickToolbars),this.parent.off(\"contentscroll\",this.hideQuickToolbars)):(this.parent.on(\"scroll\",this.hideQuickToolbars,this),this.parent.on(\"contentscroll\",this.hideQuickToolbars,this))}}e.module===this.getModuleName()&&(this.inlineQTBar&&(Object(l.hb)([this.parent.element],[\"e-rte-inline\"]),this.unWireInlineQTBarEvents(),this.hideInlineQTBar()),!this.parent.inlineMode.enable||l.d.isDevice&&!Ae()||(Object(l.v)([this.parent.element],[\"e-rte-inline\"]),this.wireInlineQTBarEvents()))},e.prototype.getModuleName=function(){return\"quickToolbar\"},e}(),xt=function(){function e(){}return e.prototype.process=function(e,t,n,i){var r,o=this,a=e.contentModule.getDocument().getSelection(),s=a.rangeCount>0?a.getRangeAt(a.rangeCount-1):null;if(\"HTML\"===e.editorMode&&(r=this.editorManager.nodeSelection.save(s,e.contentModule.getDocument())),Object(l.W)(t)||!t.item.command||\"Table\"===t.item.command||\"Actions\"===t.item.command||\"Links\"===t.item.command||\"Images\"===t.item.command||\"Files\"===t.item.command||!s||e.contentModule.getEditPanel().contains(this.getAncestorNode(s.commonAncestorContainer))||e.contentModule.getEditPanel()===s.commonAncestorContainer||e.contentModule.getPanel()===s.commonAncestorContainer){if(Object(l.W)(t)){var c=n.action;if(\"tab\"!==c&&\"enter\"!==c&&\"space\"!==c&&\"escape\"!==c){t={},\"Markdown\"===e.editorMode&&\"insert-table\"===c&&(i={headingText:e.localeObj.getConstant(\"TableHeadingText\"),colText:e.localeObj.getConstant(\"TableColText\")});var d={originalEvent:n,cancel:!1,requestType:c||n.key+\"Key\",itemCollection:i};Object(l.J)(t,t,d,!0),Object(l.V)()&&(delete t.item,delete t.itemCollection),e.trigger(\"actionBegin\",t,(function(e){e.cancel&&(\"paste\"!==c&&\"cut\"!==c&&\"copy\"!==c||n.preventDefault())}))}var h=!!Object(l.W)(e.tableModule)||!!e.tableModule&&e.tableModule.ensureInsideTableList;(9===n.which&&h||9!==n.which)&&this.editorManager.observer.notify(\"keydown\"===n.type?\"keydown\":\"keyup\",{event:n,callBack:this.onSuccess.bind(this,e),value:i})}else!Object(l.W)(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&\"Font\"!==t.item.command||(\"FontName\"===t.item.subCommand||\"FontSize\"===t.item.subCommand)&&\"dropDownSelect\"===t.name||(\"BackgroundColor\"===t.item.subCommand||\"FontColor\"===t.item.subCommand)&&\"colorPickerChanged\"===t.name)&&(Object(l.J)(t,t,{requestType:t.item.subCommand,cancel:!1,itemCollection:i},!0),e.trigger(\"actionBegin\",t,(function(a){if(!a.cancel){0===o.getUndoRedoStack().length&&\"Links\"!==a.item.command&&\"Images\"!==a.item.command&&o.saveData(),e.isBlur=!1,e.contentModule.getEditPanel().focus(),\"HTML\"===e.editorMode&&r.restore();var s=a.item.subCommand.toLocaleLowerCase();\"paste\"===s||\"cut\"===s||\"copy\"===s?e.clipboardAction(s,n):(o.editorManager.observer.notify(\"checkUndoStack\",{subCommand:a.item.subCommand}),o.editorManager.execCommand(a.item.command,a.item.subCommand,n,o.onSuccess.bind(o,e),a.item.value,\"Pre\"===a.item.subCommand&&\"dropDownSelect\"===t.name?{name:t.name}:i,\"#\"+e.getID()+\" iframe\"))}})));(Object(l.W)(n)||n&&\"copy\"!==n.action)&&this.enableUndo(e)}},e.prototype.getAncestorNode=function(e){return e=3===e.nodeType?e.parentNode:e},e.prototype.onKeyHandler=function(e,t){var n=this;this.editorManager.observer.notify(\"keyup\",{event:t,callBack:function(){e.notify(\"content-changed\",{}),n.enableUndo(e)}})},e.prototype.onSuccess=function(e,t){e.notify(\"content-changed\",{}),t&&(Object(l.W)(t.event)||\"copy\"!==t.event.action)&&(this.enableUndo(e),e.notify(\"execCommandCallBack\",t)),e.trigger(\"actionComplete\",t,(function(t){if(e.setPlaceHolder(),\"Images\"===t.requestType||\"Links\"===t.requestType&&\"HTML\"===e.editorMode){var n=t;if(\"Links\"===t.requestType&&t.event&&\"keydown\"===t.event.type&&32===t.event.keyCode)return;e.notify(\"insertCompleted\",{args:n.event,type:t.requestType,isNotify:!0,elements:n.elements})}e.autoResize()}))},e.prototype.saveData=function(e){this.editorManager.undoRedoManager.saveData(e)},e.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},e.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},e.prototype.enableUndo=function(e){var t=this.getUndoStatus();!e.inlineMode.enable||l.d.isDevice&&!Ae()?e.toolbarModule&&(qe(e.toolbarModule.baseToolbar,t),e.trigger(\"toolbarStatusUpdate\",t)):(qe(e.quickToolbarModule.inlineQTBar.quickTBarObj,t),e.trigger(\"toolbarStatusUpdate\",t))},e}(),Nt=\"INSERT-IMAGE\",Lt=[\"address\",\"article\",\"aside\",\"audio\",\"blockquote\",\"canvas\",\"details\",\"dd\",\"div\",\"dl\",\"dt\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"header\",\"hgroup\",\"hr\",\"li\",\"main\",\"nav\",\"noscript\",\"ol\",\"output\",\"p\",\"pre\",\"section\",\"table\",\"tbody\",\"td\",\"tfoot\",\"th\",\"thead\",\"tr\",\"ul\",\"video\"],Dt=[\"td\",\"th\"],Mt=[\"table\",\"tbody\",\"td\",\"tfoot\",\"th\",\"thead\",\"tr\"],It=function(){function e(){this.startNodeName=[],this.endNodeName=[]}return e.prototype.saveInstance=function(e,t){return this.range=e.cloneRange(),this.rootNode=this.documentFromRange(e),this.body=t,this.startContainer=this.getNodeArray(e.startContainer,!0),this.endContainer=this.getNodeArray(e.endContainer,!1),this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.html=this.body.innerHTML,this},e.prototype.documentFromRange=function(e){return 9===e.startContainer.nodeType?e.startContainer:e.startContainer.ownerDocument},e.prototype.getRange=function(e){var t=this.get(e),n=t&&t.rangeCount>0?t.getRangeAt(t.rangeCount-1):e.createRange();return n.startContainer!==e||n.endContainer!==e||n.startOffset||n.endOffset||(n.setStart(e.body,0),n.collapse(!0)),n},e.prototype.get=function(e){return e.defaultView.getSelection()},e.prototype.save=function(e,t){return e=e?e.cloneRange():this.getRange(t),this.saveInstance(e,t.body)},e.prototype.getIndex=function(e){var t=0;if(e=e.previousSibling||\"BR\"!==e.tagName?e.previousSibling:e)for(e.nodeType;e;null)t++,e.nodeType,e=e.previousSibling;return t},e.prototype.isChildNode=function(e,t){for(var n=0;n<t.childNodes.length;n++)if(e.indexOf(t.childNodes[n])>-1)return!0;return!1},e.prototype.getNode=function(e,t,n){return t!==e||3!==e.nodeType&&e.firstChild&&-1===n.indexOf(e.firstChild)&&!this.isChildNode(n,e)?-1===n.indexOf(e.firstChild)&&e.firstChild&&!this.isChildNode(n,e)?e.firstChild:e.nextSibling?e.nextSibling:e.parentNode?e.parentNode:null:null},e.prototype.getNodeCollection=function(e){var t=e.startContainer.childNodes[e.startOffset]||e.startContainer,n=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if(t===n&&0===t.childNodes.length)return[t];if(e.startOffset===e.endOffset&&0!==e.startOffset&&\"PRE\"===e.startContainer.nodeName)return[\"BR\"===t.nodeName||\"#text\"===t.nodeName?t:t.childNodes[0]];var i=[];do{-1===i.indexOf(t)&&i.push(t),t=this.getNode(t,n,i)}while(t);return i},e.prototype.getParentNodeCollection=function(e){return this.getParentNodes(this.getNodeCollection(e),e)},e.prototype.getParentNodes=function(e,t){e=e.reverse();for(var n=0;n<e.length;n++)-1!==e.indexOf(e[n].parentNode)||3===e[n].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(e.splice(n,1),n--):3===e[n].nodeType&&(e[n]=e[n].parentNode);return e},e.prototype.getSelectionNodeCollection=function(e){return this.getSelectionNodes(this.getNodeCollection(e))},e.prototype.getSelectionNodeCollectionBr=function(e){return this.getSelectionNodesBr(this.getNodeCollection(e))},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),\"g\"),n=0;n<e.length;n++)(3!==e[n].nodeType||\"\"===e[n].textContent.trim()||1===e[n].textContent.length&&e[n].textContent.match(t))&&(e.splice(n,1),n--);return e.reverse()},e.prototype.getSelectionNodesBr=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),\"g\"),n=0;n<e.length;n++)\"BR\"!==e[n].nodeName&&(3!==e[n].nodeType||\"\"===e[n].textContent.trim()||1===e[n].textContent.length&&e[n].textContent.match(t))&&(e.splice(n,1),n--);return e.reverse()},e.prototype.getInsertNodeCollection=function(e){return this.getInsertNodes(this.getNodeCollection(e))},e.prototype.getInsertNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)(0!==e[t].childNodes.length&&3!==e[t].nodeType||3===e[t].nodeType&&\"\"===e[t].textContent)&&(e.splice(t,1),t--);return e.reverse()},e.prototype.getNodeArray=function(e,t,n){var i=[];for(t?this.startNodeName=[]:this.endNodeName=[];e!==(n||this.rootNode)&&!Object(l.W)(e);null)t?this.startNodeName.push(e.nodeName.toLowerCase()):this.endNodeName.push(e.nodeName.toLowerCase()),i.push(this.getIndex(e)),e=e.parentNode;return i},e.prototype.setRangePoint=function(e,t,n,i){for(var r=this.rootNode,o=n.length,a=i;o--;null)r=r&&r.childNodes[n[o]];return r&&a>=0&&\"html\"!==r.nodeName&&e[t?\"setStart\":\"setEnd\"](r,a),e},e.prototype.restore=function(){var e=this.range.cloneRange();return e=this.setRangePoint(e,!0,this.startContainer,this.startOffset),e=this.setRangePoint(e,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,e),e},e.prototype.selectRange=function(e,t){this.setRange(e,t),this.save(t,e)},e.prototype.setRange=function(e,t){var n=this.get(e);n.removeAllRanges(),n.addRange(t)},e.prototype.setSelectionText=function(e,t,n,i,r){var o=e.createRange();o.setStart(t,i),o.setEnd(n,r),this.setRange(e,o)},e.prototype.setSelectionContents=function(e,t){var n=e.createRange();n.selectNode(t),this.setRange(e,n)},e.prototype.setSelectionNode=function(e,t){var n=e.createRange();n.selectNodeContents(t),this.setRange(e,n)},e.prototype.getSelectedNodes=function(e){return this.getNodeCollection(this.getRange(e))},e.prototype.Clear=function(e){this.get(e).removeAllRanges()},e.prototype.insertParentNode=function(e,t,n){n.surroundContents(t),this.selectRange(e,n)},e.prototype.setCursorPoint=function(e,t,n){var i=e.createRange(),r=e.defaultView.getSelection();i.setStart(t,n),i.collapse(!0),r.removeAllRanges(),r.addRange(i)},e}(),Rt={h6:\"###### \",h5:\"##### \",h4:\"#### \",h3:\"### \",h2:\"## \",h1:\"# \",blockquote:\"> \",pre:\"```\\n\",p:\"\"},Pt={Bold:\"**\",Italic:\"*\",StrikeThrough:\"~~\",InlineCode:\"`\",SubScript:\"<sub>\",SuperScript:\"<sup>\",UpperCase:\"A-Z\",LowerCase:\"a-z\"},Bt={OL:\"1. \",UL:\"- \"},At={\"toolbar-focus\":\"alt+f10\",escape:\"27\",\"insert-link\":\"ctrl+k\",\"insert-image\":\"ctrl+shift+i\",\"insert-table\":\"ctrl+shift+e\",undo:\"ctrl+z\",redo:\"ctrl+y\",copy:\"ctrl+c\",cut:\"ctrl+x\",paste:\"ctrl+v\",bold:\"ctrl+b\",italic:\"ctrl+i\",underline:\"ctrl+u\",strikethrough:\"ctrl+shift+s\",uppercase:\"ctrl+shift+u\",lowercase:\"ctrl+shift+l\",superscript:\"ctrl+shift+=\",subscript:\"ctrl+=\",indents:\"ctrl+]\",outdents:\"ctrl+[\",\"html-source\":\"ctrl+shift+h\",\"full-screen\":\"ctrl+shift+f\",\"decrease-fontsize\":\"ctrl+shift+<\",\"increase-fontsize\":\"ctrl+shift+>\",\"justify-center\":\"ctrl+e\",\"justify-full\":\"ctrl+j\",\"justify-left\":\"ctrl+l\",\"justify-right\":\"ctrl+r\",\"clear-format\":\"ctrl+shift+r\",\"ordered-list\":\"ctrl+shift+o\",\"unordered-list\":\"ctrl+alt+o\",space:\"32\",enter:\"13\",tab:\"tab\",delete:\"46\"},_t={\"toolbar-focus\":\"alt+f10\",escape:\"27\",\"insert-link\":\"ctrl+k\",\"insert-image\":\"ctrl+shift+i\",\"insert-table\":\"ctrl+shift+e\",undo:\"ctrl+z\",redo:\"ctrl+y\",copy:\"ctrl+c\",cut:\"ctrl+x\",paste:\"ctrl+v\",bold:\"ctrl+b\",italic:\"ctrl+i\",strikethrough:\"ctrl+shift+s\",uppercase:\"ctrl+shift+u\",lowercase:\"ctrl+shift+l\",superscript:\"ctrl+shift+=\",subscript:\"ctrl+=\",\"full-screen\":\"ctrl+shift+f\",\"ordered-list\":\"ctrl+shift+o\",\"unordered-list\":\"ctrl+alt+o\"},Ht={b:[\"strong\"],strong:[\"b\"],i:[\"emp\",\"cite\"],emp:[\"i\",\"cite\"],cite:[\"i\",\"emp\"]},Wt=[\"BR\",\"IMG\"],zt=\"e-editor-select-start\",Ft=\"e-editor-select-end\",qt=function(){function e(e,t){this.parent=e,this.nodeSelection=new It,this.currentDocument=t}return e.prototype.contents=function(e){return e&&\"IFRAME\"!==e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&Lt.indexOf(e.tagName.toLowerCase())>=0},e.prototype.isLink=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&\"a\"===e.tagName.toLowerCase()},e.prototype.blockParentNode=function(e){for(;e&&e.parentNode!==this.parent&&(!e.parentNode||!this.hasClass(e.parentNode,\"e-node-inner\"));null)if(e=e.parentNode,this.isBlockNode(e))return e;return e},e.prototype.rawAttributes=function(e){var t={},n=e.attributes;if(n.length>0)for(var i=0;i<n.length;i++){var r=n[i];t[r.nodeName]=r.value}return t},e.prototype.attributes=function(e){if(!e)return\"\";for(var t=\"\",n=this.rawAttributes(e),i=Object.keys(n).sort(),r=0;r<i.length;r++){var o=i[r],a=n[o];a.indexOf(\"'\")<0&&a.indexOf('\"')>=0?t+=\" \"+o+\"='\"+a+\"'\":a.indexOf('\"')>=0&&a.indexOf(\"'\")>=0?t+=\" \"+o+'=\"'+(a=a.replace(/\"/g,\"&quot;\"))+'\"':t+=\" \"+o+'=\"'+a+'\"'}return t},e.prototype.clearAttributes=function(e){for(var t=e.attributes,n=t.length-1;n>=0;n--){var i=t[n];e.removeAttribute(i.nodeName)}},e.prototype.openTagString=function(e){return\"<\"+e.tagName.toLowerCase()+this.attributes(e)+\">\"},e.prototype.closeTagString=function(e){return\"</\"+e.tagName.toLowerCase()+\">\"},e.prototype.createTagString=function(e,t,n){return\"<\"+e.toLowerCase()+this.attributes(t)+\">\"+n+\"</\"+e.toLowerCase()+\">\"},e.prototype.isList=function(e){return!!e&&[\"UL\",\"OL\"].indexOf(e.tagName)>=0},e.prototype.isElement=function(e){return e===this.parent},e.prototype.isEditable=function(e){return(!e.getAttribute||\"true\"===e.getAttribute(\"contenteditable\"))&&[\"STYLE\",\"SCRIPT\"].indexOf(e.tagName)<0},e.prototype.hasClass=function(e,t){return e&&e.classList&&e.classList.contains(t)},e.prototype.replaceWith=function(e,t){e.parentNode.insertBefore(this.parseHTMLFragment(t),e),Object(l.I)(e)},e.prototype.parseHTMLFragment=function(e){var t=Object(l.F)(\"template\");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)},e.prototype.wrap=function(e,t){return e.parentNode.insertBefore(t,e),(t=e.previousSibling).appendChild(e),t},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.wrapInner=function(e,t){for(e.appendChild(t),(t=e.querySelector(\".e-rte-wrap-inner\")).classList.remove(\"e-rte-wrap-inner\"),0===t.classList.length&&t.removeAttribute(\"class\");e.firstChild!==t;)t.appendChild(e.firstChild);return t},e.prototype.unWrap=function(e){for(var t=e.parentNode,n=[];e.firstChild;)n.push(e.firstChild),t.insertBefore(e.firstChild,e);return n=n.length>0?n:[e.parentNode],t.removeChild(e),n},e.prototype.getSelectedNode=function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t-1]&&e.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(e.childNodes[t-1].classList.contains(zt)||e.childNodes[t-1].classList.contains(Ft))?e=e.childNodes[t-1]:e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t]&&(e=e.childNodes[t]),e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e},e.prototype.nodeFinds=function(e,t){for(var n=[],i=0;i<t.length;i++)e.contains(t[i])&&e!==t[i]&&n.push(t[i]);return n},e.prototype.isEditorArea=function(){var e;for(e=this.getRangePoint(0).commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},e.prototype.getRangePoint=function(e){var t=this.getSelection(),n=[];if(t&&t.getRangeAt&&t.rangeCount){n=[];for(var i=0;i<t.rangeCount;i++)n.push(t.getRangeAt(i))}else n=[this.currentDocument.createRange()];return void 0!==e?n[e]:n},e.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},e.prototype.getPreviousNode=function(e){for(e=e.previousElementSibling;e&&\"\\n\"===e.textContent;null)e=e.previousElementSibling;return e},e.prototype.encode=function(e){var t=document.createElement(\"div\");return t.innerText=e,t.innerHTML.replace(/<br\\s*[\\/]?>/gi,\"\\n\")},e.prototype.saveMarker=function(e,t){var n,i,r=this.parent.querySelector(\".\"+zt),o=this.parent.querySelector(\".\"+Ft);if(\"\"===r.textContent&&Object(l.W)(o)&&\"tab\"!==t&&(1===r.childNodes.length&&\"BR\"===r.childNodes[0].nodeName?r.innerHTML=\"&#65279;&#65279;<br>\":r.innerHTML=\"&#65279;&#65279;\"),this.hasClass(r,zt)&&r.classList.length>1){var a=this.createTagString(\"p\",r,this.encode(r.textContent));this.replaceWith(r,a),(r=this.parent.querySelector(\".\"+zt)).classList.remove(zt),n=r.childNodes[0]}else n=this.unWrap(r)[0];if(this.hasClass(o,Ft)&&o.classList.length>1){a=this.createTagString(\"p\",o,this.encode(o.textContent));this.replaceWith(o,a),(o=this.parent.querySelector(\".\"+Ft)).classList.remove(Ft),i=o.childNodes[0]}else i=o?this.unWrap(o)[0]:n;return e.startContainer=e.getNodeArray(n,!0),e.endContainer=e.getNodeArray(i,!1),e},e.prototype.marker=function(e,t){return'<span class=\"'+e+'\">'+t+\"</span>\"},e.prototype.setMarker=function(e){var t=e.range,n=t.startContainer.childNodes,i=(n.length>1&&\"TABLE\"===n[0].nodeName?function(e){var t=e;do{t.childNodes.length>0&&(t=t.childNodes[0])}while(t.childNodes.length>0);return t}(n[t.startOffset+1]):n[t.startOffset])||t.startContainer,r=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if(i.nodeType===Node.ELEMENT_NODE&&r.nodeType===Node.ELEMENT_NODE&&(i.contains(r)||r.contains(i))){var o=i.contains(r)?i:r;if(o.nodeType!==Node.TEXT_NODE){for(var a=[],s=[],l=o;o.contains(l);null)a.indexOf(l)<0&&l.childNodes&&l.childNodes.length?(a.push(l),l=l.childNodes[0]):l.nextSibling?l=l.nextSibling:l.parentNode&&(l=l.parentNode,a.push(l)),s.indexOf(l)<0&&(l.nodeType===Node.TEXT_NODE||Dt.indexOf(l.parentNode.tagName.toLocaleLowerCase())>=0&&(\"BR\"===l.tagName||\"IMG\"===l.tagName))&&s.push(l);s.length&&(i=i.contains(r)?s[0]:i,r=s[s.length-1])}}if(i!==r){if(i.nodeType!==Node.TEXT_NODE&&(\"BR\"===i.tagName&&Dt.indexOf(i.parentNode.tagName.toLocaleLowerCase())>=0||\"IMG\"===i.tagName))this.replaceWith(i,this.marker(zt,this.encode(i.textContent))),t.startContainer.querySelector(\".\"+zt).appendChild(i);else this.replaceWith(i,this.marker(zt,this.encode(i.textContent)));if(r.nodeType!==Node.TEXT_NODE&&\"BR\"===r.tagName&&Dt.indexOf(r.parentNode.tagName.toLocaleLowerCase())>=0)this.replaceWith(r,this.marker(Ft,this.encode(r.textContent))),t.endContainer.querySelector(\".\"+Ft).appendChild(r);else this.ensureSelfClosingTag(r,Ft,t)}else this.ensureSelfClosingTag(i,zt,t)},e.prototype.ensureSelfClosingTag=function(e,t,n){var i=!1;if(3===e.nodeType)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if(\"BR\"===e.tagName){this.replaceWith(e,this.marker(zt,this.encode(e.textContent))),n.startContainer.querySelector(\".\"+zt).appendChild(e)}else{if(\"IMG\"===e.tagName){var r=document.createElement(\"p\");e.parentElement.insertBefore(r,e),r.appendChild(e),e=r.children[0]}if(\"TABLE\"===e.tagName)if(i=!0,\"\"===e.textContent){var o=e.querySelectorAll(\"td\");e=o[o.length-1],e=Object(l.W)(e.childNodes[0])?e:e.childNodes[0]}else{for(var a=e.lastChild;3!==a.nodeType&&\"#text\"!==a.nodeName&&\"BR\"!==a.nodeName;)a=a.lastChild;e=a}for(var s=0;s<Wt.length;s++)e=e.tagName!==Wt[s]||i?e:e.parentNode;if(3===e.nodeType&&\"#text\"===e.nodeName)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if(\"BR\"===e.nodeName){this.replaceWith(e,this.marker(Ft,this.encode(e.textContent))),n.endContainer.querySelector(\".\"+Ft).appendChild(e)}else{var c=this.marker(t,\"\");Object(l.w)([this.parseHTMLFragment(c)],e)}}},e.prototype.createTempNode=function(e){var t=e.textContent;if(\"BR\"===e.tagName){var n=\"<p></p>\",i=e.parentNode;Dt.indexOf(i.tagName.toLocaleLowerCase())>=0&&(e=this.wrap(e,this.parseHTMLFragment(n)))}else if(e.nodeType!==Node.TEXT_NODE&&(e.classList.contains(zt)||e.classList.contains(Ft))||t.replace(/\\n/g,\"\").replace(/(^ *)|( *$)/g,\"\").length>0||t.length&&t.indexOf(\"\\n\")<0){n=\"<p></p>\";var r=e;e=this.wrap(e,this.parseHTMLFragment(n)),!(r.nodeType===Node.ELEMENT_NODE&&r.firstChild&&\"BR\"===r.firstChild.nodeName&&(r.classList.contains(zt)||r.classList.contains(Ft)))&&e.nextElementSibling&&\"BR\"===e.nextElementSibling.tagName&&e.appendChild(e.nextElementSibling)}return e},e.prototype.getImageTagInSelection=function(){var e=this.getSelection();return this.isEditorArea()&&e.rangeCount?e.focusNode.querySelectorAll(\"img\"):null},e.prototype.blockNodes=function(){var e=[],t=this.getSelection();if(this.isEditorArea()&&t.rangeCount)for(var n=this.getRangePoint(),i=0;i<n.length;i++){var r=void 0,o=n[i],a=this.getSelectedNode(o.startContainer,o.startOffset),s=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(a)&&e.indexOf(a)<0&&e.push(a),(r=this.blockParentNode(a))&&e.indexOf(r)<0)if(Dt.indexOf(r.tagName.toLocaleLowerCase())>=0&&(\"BR\"===a.tagName||a.nodeType===Node.TEXT_NODE||a.classList.contains(zt)||a.classList.contains(Ft))){var c=a.previousSibling&&a.previousSibling.nodeType===Node.TEXT_NODE?a.previousSibling:a;a.nextSibling||a.previousSibling||\"BR\"!==a.tagName?e.push(this.createTempNode(c)):e.push(c)}else e.push(r);for(var d=[],h=a;h!==s&&h!==this.parent;null)d.indexOf(h)<0&&h.childNodes&&h.childNodes.length?(d.push(h),h=h.childNodes[0]):h&&8!==h.nodeType&&(\"BR\"===h.tagName||h.nodeType===Node.TEXT_NODE&&\"\"!==h.textContent.trim()||h.nodeType!==Node.TEXT_NODE&&(h.classList.contains(zt)||h.classList.contains(Ft)))&&Dt.indexOf(h.parentNode.tagName.toLocaleLowerCase())>=0?h=this.createTempNode(h):h.nextSibling&&8!==h.nextSibling.nodeType&&(\"BR\"===h.nextSibling.tagName||h.nextSibling.nodeType===Node.TEXT_NODE||h.nextSibling.classList.contains(zt)||h.nextSibling.classList.contains(Ft))&&Dt.indexOf(h.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?h=this.createTempNode(h.nextSibling):h.nextSibling?h=h.nextSibling:h.parentNode&&(h=h.parentNode,d.push(h)),e.indexOf(h)<0&&h.nodeType===Node.ELEMENT_NODE&&Dt.indexOf(h.parentNode.tagName.toLocaleLowerCase())>=0&&(h.classList.contains(zt)||h.classList.contains(Ft))&&e.push(this.createTempNode(h)),this.isBlockNode(h)&&this.ignoreTableTag(h)&&d.indexOf(h)<0&&e.indexOf(h)<0&&(h!==s||o.endOffset>0)&&e.push(h),\"IMG\"===h.nodeName&&\"true\"===h.parentElement.contentEditable&&e.push(h);(r=this.blockParentNode(s))&&this.ignoreTableTag(r)&&e.indexOf(r)<0&&!Object(l.W)(r.previousElementSibling)&&\"IMG\"!==r.previousElementSibling.tagName&&e.push(r)}for(var p=e.length-1;p>0;p--){if((d=this.nodeFinds(e[p],e)).length){var u=e[p].querySelectorAll(\"ul, ol\");if(\"LI\"===e[p].tagName&&u.length>0)continue;e.splice(p,1)}}return e},e.prototype.ignoreTableTag=function(e){return!(Mt.indexOf(e.tagName.toLocaleLowerCase())>=0)},e}(),Ut=function(){function e(e){this.parent=e,this.domNode=this.parent.domNode,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"list-type\",this.applyListsHandler,this),this.parent.observer.on(\"keydown-handler\",this.keyDownHandler,this)},e.prototype.testList=function(e){var t=[/^[\\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],n=Object(l.W)(e)?null:e.innerText.trim().split(\".\")[0]+\".\";if(!Object(l.W)(n))for(var i=0;i<t.length;i++)if(t[i].test(n))return!0;return!1},e.prototype.testCurrentList=function(e){var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!Object(l.W)(e.startContainer.textContent.slice(0,e.startOffset)))for(var n=0;n<t.length;n++)if(t[n].test(e.startContainer.textContent.slice(0,e.startOffset)))return!0;return!1},e.prototype.spaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);var n=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),i=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),n.previousElementSibling),r=n.nextElementSibling,o=Object(l.W)(i)?null:i.innerText.trim().substring(0,1),a=Object(l.W)(r)?null:r.innerText.trim().substring(0,1),s=this.testCurrentList(t),c=this.testList(i),d=this.testList(r);c||d||\"*\"===o||\"*\"===a||(s?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:\"OL\",callBack:e.callBack}),e.event.preventDefault()):\"*\"===t.startContainer.textContent.slice(0,t.startOffset)&&(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:\"UL\",callBack:e.callBack}),e.event.preventDefault()))},e.prototype.enterList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);n===this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset)&&\"LI\"===n.tagName&&\"\"===n.textContent.trim()&&65279===n.textContent.charCodeAt(0)&&(n.textContent=\"\")},e.prototype.backspaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),i=this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset);if((n=\"BR\"===n.nodeName?n.parentElement:n)!==(i=\"BR\"===i.nodeName?i.parentElement:i)||Object(l.W)(Object(l.C)(n,\"li\"))||\"\"!==n.textContent.trim()||65279!==n.textContent.charCodeAt(0)||(n.textContent=\"\"),n===i&&\"\"===n.textContent){if((n.closest(\"ul\")||n.closest(\"ol\"))&&(r=Object(l.W)(n.closest(\"ul\"))?n.closest(\"ol\"):n.closest(\"ul\")).firstElementChild===n&&!Object(l.W)(r.children[1])&&(\"OL\"===r.children[1].tagName||\"UL\"===r.children[1].tagName))if(r.tagName===r.children[1].tagName){for(;r.children[1].lastChild;)this.parent.domNode.insertAfter(r.children[1].lastChild,r.children[1]);Object(l.I)(r.children[1])}else r.parentElement.insertBefore(r.children[1],r)}else if(!Object(l.W)(n.firstChild)&&\"BR\"===n.firstChild.nodeName&&(\"UL\"===n.childNodes[1].nodeName||\"OL\"===n.childNodes[1].nodeName)){var r;if((r=Object(l.W)(n.closest(\"ul\"))?n.closest(\"ol\"):n.closest(\"ul\")).tagName===n.childNodes[1].nodeName){for(;n.childNodes[1].lastChild;)this.parent.domNode.insertAfter(n.children[1].lastChild,n);Object(l.I)(n.childNodes[1])}else r.parentElement.insertBefore(n.children[1],r)}},e.prototype.keyDownHandler=function(e){if(13===e.event.which&&this.enterList(e),32===e.event.which&&this.spaceList(e),8===e.event.which&&this.backspaceList(e),46===e.event.which&&\"delete\"===e.event.action){var t=(a=this.parent.nodeSelection.getRange(this.parent.currentDocument)).commonAncestorContainer,n=a.startContainer,i=a.endContainer,r=3===n.nodeType?n.parentElement:n,o=3===i.nodeType?i.parentElement:i;\"UL\"!==t.nodeName&&\"OL\"!==t.nodeName||r===o||Object(l.W)(Object(l.C)(r,\"ul\"))&&Object(l.W)(Object(l.C)(r,\"ol\"))||Object(l.W)(Object(l.C)(o,\"ul\"))&&Object(l.W)(Object(l.C)(o,\"ol\"))||t.lastElementChild!==Object(l.C)(o,\"li\")||a.collapsed||Object(l.I)(t)}if(9===e.event.which){var a=this.parent.nodeSelection.getRange(this.parent.currentDocument);e.event.action&&\"indent\"===e.event.action||(this.saveSelection=this.parent.nodeSelection.save(a,this.parent.currentDocument));var s=void 0,c=a.startOffset,d=a.endOffset;if((r=this.parent.domNode.getSelectedNode(a.startContainer,a.startOffset))===(o=this.parent.domNode.getSelectedNode(a.endContainer,a.endOffset))&&(\"BR\"===r.nodeName||\"#text\"===r.nodeName)&&Dt.indexOf(r.parentNode.tagName.toLocaleLowerCase())>=0)return;e.event.action&&\"indent\"===e.event.action||this.domNode.setMarker(this.saveSelection),s=this.domNode.blockNodes();for(var h=[],p=!0,u=0;u<s.length;u++)\"LI\"===s[u].parentNode.tagName?h.push(s[u].parentNode):\"LI\"===s[u].tagName&&\"P\"!==s[u].childNodes[0].tagName&&\"OL\"!==s[u].childNodes[0].tagName&&\"UL\"!==s[u].childNodes[0].tagName&&h.push(s[u]);h.length>1||h.length&&(0===c&&0===d||e.ignoreDefault)?(e.event.preventDefault(),e.event.stopPropagation(),this.currentAction=this.getAction(h[0]),e.event.shiftKey?(this.revertList(h),this.revertClean()):p=this.nestedList(h),p&&(this.cleanNode(),this.parent.editableElement.focus()),e.event.action&&\"indent\"===e.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),e.callBack&&e.callBack({requestType:this.currentAction,editorMode:\"HTML\",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:e.event}))):e.event.action&&\"indent\"===e.event.action||(e.event&&e.event.shiftKey&&\"Tab\"===e.event.key&&(e.event.action=\"tab\"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,e.event.action),this.saveSelection.restore())}else switch(e.event.action){case\"ordered-list\":this.applyListsHandler({subCommand:\"OL\",callBack:e.callBack}),e.event.preventDefault();break;case\"unordered-list\":this.applyListsHandler({subCommand:\"UL\",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getAction=function(e){return\"OL\"===e.parentNode.nodeName?\"OL\":\"UL\"},e.prototype.revertClean=function(){for(var e=this.parent.editableElement.querySelectorAll(\"ul, ol\"),t=0;t<e.length;t++){var n=e[t].querySelectorAll(\"ul, ol\");if(n.length>0)for(var i=0;i<n.length;i++){var r=n[i].previousSibling;r&&\"LI\"===r.tagName&&r.appendChild(n[i])}}},e.prototype.noPreviousElement=function(e){var t,n,i=e.querySelectorAll(\"ol, ul\"),r=e.querySelectorAll(\"li\"),o=this.domNode.contents(r[0])[0];if(r.length>0&&(\"OL\"===o.nodeName||\"UL\"===o.nodeName)?t=r[0]:n=i[0],t)for(var a=this.domNode.contents(e)[0];a&&!this.domNode.isList(a);null){var s=a.nextSibling;Object(l.eb)([a],t),Object(l.nb)(e,{\"list-style-type\":\"none\"}),Object(l.nb)(t,{\"list-style-type\":\"\"}),a=s}else if(n){var c=Object(l.F)(\"li\");Object(l.eb)([c],n);for(a=this.domNode.contents(e)[0];a&&!this.domNode.isList(a);null){s=a.nextSibling;c.appendChild(a),a=s}Object(l.eb)([n],e.parentNode),Object(l.I)(e);var d=Object(l.F)(\"li\",{styles:\"list-style-type: none;\"});Object(l.eb)([d],n.parentNode),Object(l.w)([n],d)}else{d=Object(l.F)(\"li\",{styles:\"list-style-type: none;\"});Object(l.eb)([d],e.parentNode);c=Object(l.F)(e.parentNode.tagName);Object(l.eb)([c],d),Object(l.w)([e],c)}},e.prototype.nestedList=function(e){for(var t=!1,n=0;n<e.length;n++){var i=this.domNode.getPreviousNode(e[n]);if(i){t=!0;var r=void 0,o=void 0,a=e[n].querySelectorAll(\"ol, ul\"),s=e[n].querySelectorAll(\"li\"),c=this.domNode.contents(s[0])[0];if(s.length>0&&(\"OL\"===c.nodeName||\"UL\"===c.nodeName)?o=s[0]:r=a[0],r){var d=Object(l.F)(\"li\");Object(l.eb)([d],r);for(var h=this.domNode.contents(e[n])[0];h&&!this.domNode.isList(h);null){var p=h.nextSibling;d.appendChild(h),h=p}Object(l.w)([r],i),Object(l.I)(e[n])}else if(o){if(\"LI\"===i.tagName){for(h=this.domNode.contents(e[n])[0];h&&!this.domNode.isList(h);null){p=h.nextSibling;Object(l.eb)([h],o),Object(l.nb)(e[n],{\"list-style-type\":\"none\"}),Object(l.nb)(o,{\"list-style-type\":\"\"}),h=p}Object(l.w)([o.parentNode],i),Object(l.I)(e[n])}}else if(\"LI\"===i.tagName){d=Object(l.F)(e[n].parentNode.tagName);Object(l.w)([d],i),Object(l.w)([e[n]],d)}}else{var u=e[n];t=!0,this.noPreviousElement(u)}}return t},e.prototype.applyListsHandler=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument),this.currentAction=e.subCommand,this.domNode.setMarker(this.saveSelection);for(var n=this.domNode.blockNodes(),i=0;i<n.length;i++)\"TABLE\"!==n[i].tagName||t.collapsed||n.splice(i,1),n.length>0&&\"LI\"!==n[i].tagName&&\"LI\"===n[i].parentNode.tagName&&(n[i]=n[i].parentNode);this.applyLists(n,this.currentAction,e.selector),e.callBack&&e.callBack({requestType:this.currentAction,event:e.event,editorMode:\"HTML\",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.applyLists=function(e,t,n){if(this.isRevert(e,t))this.revertList(e),this.removeEmptyListElements();else{this.checkLists(e,t);for(var i=0;i<e.length;i++)if(\"true\"===e[i].getAttribute(\"contenteditable\")&&1===e[i].childNodes.length&&\"TABLE\"===e[i].childNodes[0].nodeName){var r=document.createElement(t);r.innerHTML=\"<li><br/></li>\",e[i].appendChild(r)}else if(\"LI\"!==e[i].tagName){!1;var o=\"<\"+t+\">\",a=\"</\"+t+\">\",s=\"li\"+(\"IMG\"===e[i].tagName?\"\":this.domNode.attributes(e[i])),l=\"p\"===e[i].tagName.toLowerCase()?e[i].innerHTML:e[i].outerHTML,c=o+this.domNode.createTagString(s,null,l)+a;this.domNode.replaceWith(e[i],c)}}this.cleanNode(),this.parent.editableElement.focus(),ft()&&gt(this.parent.editableElement,n),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},e.prototype.removeEmptyListElements=function(){for(var e=this.parent.editableElement.querySelectorAll(\"ol, ul\"),t=0;t<e.length;t++)\"\"===e[t].textContent.trim()&&Object(l.I)(e[t])},e.prototype.isRevert=function(e,t){for(var n=!0,i=0;i<e.length;i++){if(\"LI\"!==e[i].tagName)return!1;e[i].parentNode.tagName!==t&&(n=!1)}return n},e.prototype.checkLists=function(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i].parentNode;\"LI\"===e[i].tagName&&r.tagName!==t&&n.indexOf(r)<0&&n.push(r)}for(var o=n.length-1;o>=0;o--){var a=n[o],s=\"<\"+t.toLowerCase()+\" \"+this.domNode.attributes(a)+\">\"+a.innerHTML+\"</\"+t.toLowerCase()+\">\";this.domNode.replaceWith(n[o],s)}},e.prototype.cleanNode=function(){for(var e=this.parent.editableElement.querySelectorAll(\"ol + ol, ul + ul\"),t=0;t<e.length;t++){var n=e[t];if(this.domNode.isList(n.previousElementSibling)&&this.domNode.openTagString(n)===this.domNode.openTagString(n.previousElementSibling)){for(var i=this.domNode.contents(n),r=0;r<i.length;r++)n.previousElementSibling.appendChild(i[r]);n.parentNode.removeChild(n)}}},e.prototype.findUnSelected=function(e,t){if((e=e.slice().reverse()).length>0){var n=[],i=[],r=[],o=[];r=t[t.length-1].childNodes;for(var a=0;a<r.length;a++)if(\"OL\"===r[a].tagName||\"UL\"===r[a].tagName){var s=r[a].querySelectorAll(\"li\");if(s.length>0)for(var l=0;l<s.length;l++)o.push(s[l])}for(var c=0;c<o.length;c++){for(var d=0,h=0;h<e.length;h++)o[c].contains(e[h])||(d+=1);d===e.length&&i.push(o[c])}if(i.length>0)for(var p=0;p<i.length;p++)\"OL\"!==this.domNode.contents(i[p])[0].nodeName&&\"UL\"!==this.domNode.contents(i[p])[0].nodeName&&n.push(i[p]);n.length>0&&this.nestedList(n)}},e.prototype.revertList=function(e){for(var t=[],n=e.length-1;n>=0;n--)for(var i=n-1;i>=0;i--)if(e[i].contains(e[n])||e[i]===e[n]){t.push(e[n]),e.splice(n,1);break}this.findUnSelected(t,e);var r=[];for(n=0;n<e.length;n++){var o=e[n];3===this.domNode.contents(o)[0].nodeType&&0===this.domNode.contents(o)[0].textContent.trim().length&&Object(l.I)(this.domNode.contents(o)[0]);var a=e[n].parentNode,s=o.getAttribute(\"class\");if(0===t.length){var c=e[n].querySelectorAll(\"ul, ol\")[0];if(c)if(c.querySelectorAll(\"li\")){var d=Object(l.F)(c.tagName);Object(l.w)([d],c.parentNode);var h=Object(l.F)(\"li\",{styles:\"list-style-type: none;\"});Object(l.w)([h],d),Object(l.w)([c],h)}}if(o.parentNode.insertBefore(this.closeTag(a.tagName),o),\"LI\"===a.parentNode.tagName)o.parentNode.insertBefore(this.closeTag(\"LI\"),o);else{if(s&&' class=\"'+s+'\"',0===o.querySelectorAll(Lt.join(\", \")).length){var p=\"<p\"+(Object(l.W)(s)?' class=\"e-rte-wrap-inner\"':' class=\"'+s+' e-rte-wrap-inner\"')+this.domNode.attributes(a)+\"></p>\";this.domNode.wrapInner(o,this.domNode.parseHTMLFragment(p))}else if(3===this.domNode.contents(o)[0].nodeType){var u=this.domNode.createTagString(\"p\",a,this.parent.domNode.encode(this.domNode.contents(o)[0].textContent));this.domNode.replaceWith(this.domNode.contents(o)[0],u)}else if(this.domNode.contents(o)[0].classList.contains(zt)||this.domNode.contents(o)[0].classList.contains(Ft)){u=this.domNode.createTagString(\"p\",a,this.domNode.contents(o)[0].outerHTML);this.domNode.replaceWith(this.domNode.contents(o)[0],u)}else{var m=o.firstChild;s=m.getAttribute(\"class\"),Object(l.x)(m,this.domNode.rawAttributes(a)),s&&m.getAttribute(\"class\")&&Object(l.x)(m,{class:s+\" \"+m.getAttribute(\"class\")})}Object(l.w)([this.openTag(\"LI\")],o),Object(l.eb)([this.closeTag(\"LI\")],o)}this.domNode.insertAfter(this.openTag(a.tagName),o),\"LI\"===a.parentNode.tagName&&(a=a.parentNode.parentNode),r.indexOf(a)<0&&r.push(a)}for(n=0;n<r.length;n++){var f=r[n],g=f.innerHTML;g=(g=g.replace(/<span class=\"e-rte-list-close-([a-z]*)\"><\\/span>/g,\"</$1>\")).replace(/<span class=\"e-rte-list-open-([a-z]*)\"><\\/span>/g,\"<$1 \"+this.domNode.attributes(f)+\">\"),this.domNode.replaceWith(f,this.domNode.openTagString(f)+g.trim()+this.domNode.closeTagString(f))}var b=this.parent.editableElement.querySelectorAll(\"ul:empty, ol:empty\");for(n=0;n<b.length;n++)Object(l.I)(b[n]);var v=this.parent.editableElement.querySelectorAll(\"li:empty\");for(n=0;n<v.length;n++)Object(l.I)(v[n])},e.prototype.openTag=function(e){return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-open-'+e.toLowerCase()+'\"></span>')},e.prototype.closeTag=function(e){return this.domNode.parseHTMLFragment('<span class=\"e-rte-list-close-'+e.toLowerCase()+'\"></span>')},e}(),Vt=function(){function e(){}return e.WrapBefore=function(e,t,n){return t.innerText=e.textContent,n?this.AppendBefore(t,e,!0):this.AppendBefore(t,e),e.parentNode&&e.parentNode.removeChild(e),t.childNodes[0]},e.Wrap=function(e,t){return this.AppendBefore(t,e),t.appendChild(e),e},e.unwrap=function(e){for(var t=e.parentNode,n=[];e.firstChild;null)n.push(t.insertBefore(e.firstChild,e));return t.removeChild(e),n},e.AppendBefore=function(e,t,n){return t.parentNode?n?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.insertBefore(e,t):t},e}(),Qt=function(){function e(){this.position=-1,this.nodeSelection=new It}return e.prototype.GetSpliceNode=function(e,t){return t=this.SplitNode(e,t,!0),t=this.SplitNode(e,t,!1)},e.prototype.SplitNode=function(e,t,n){if(t){var i=e.cloneRange(),r=t.parentNode,o=this.nodeSelection.getIndex(t);i.collapse(n),n?i.setStartBefore(t):i.setEndAfter(t);var a,s=i.extractContents();if(n){if(t=r.childNodes[o],(s=this.spliceEmptyNode(s,!1))&&s.childNodes.length>0)if(!!(1!==s.childNodes.length||\"IMG\"===s.childNodes[0].nodeName||!this.isImgElm(s)||\"\"!==s.textContent))if(t)Vt.AppendBefore(s,t);else r.appendChild(s),(a=document.createElement(\"div\")).innerHTML=\"&#65279;&#65279;\",t=a.firstChild,r.appendChild(t)}else if(t=r.childNodes.length>1?r.childNodes[o]:r.childNodes[0],(s=this.spliceEmptyNode(s,!0))&&s.childNodes.length>0)if(!!(1!==s.childNodes.length||\"IMG\"===s.childNodes[0].nodeName||!this.isImgElm(s)||\"\"!==s.textContent))if(t)Vt.AppendBefore(s,t,!0);else r.appendChild(s),(a=document.createElement(\"div\")).innerHTML=\"&#65279;&#65279;\",r.insertBefore(a.firstChild,r.firstChild),t=r.firstChild;return t}return null},e.prototype.isImgElm=function(e){var t=!0;if(1===e.childNodes.length&&\"IMG\"!==e.childNodes[0].nodeName)for(var n=e.childNodes[0],i=0;!Object(l.W)(n.childNodes)&&i<n.childNodes.length;i++)\"IMG\"===n.childNodes[i].nodeName&&(t=!1);else t=!0;return t},e.prototype.spliceEmptyNode=function(e,t){var n;return(n=1===e.childNodes.length&&\"#text\"===e.childNodes[0].nodeName&&\"\"===e.childNodes[0].textContent||\"\"===e.textContent?-1:e.childNodes.length-1)>-1&&!t?this.spliceEmptyNode(e.childNodes[n],t):n>-1?this.spliceEmptyNode(e.childNodes[0],t):3!==e.nodeType&&11!==e.nodeType&&e.parentNode.removeChild(e),e},e.prototype.GetCursorStart=function(e,t,n){for(var i=(e=n?e:e.reverse())[0],r=0;r<e.length&&(n?e[r]<t:e[r]>=t);r++)i=e[r];return i},e.prototype.GetCursorRange=function(e,t,n){var i=e.createRange(),r=[];r.push(0);for(var o=this.TrimLineBreak(n.data),a=o.indexOf(\" \",0);-1!==a;)r.indexOf(a)<0&&r.push(a),new RegExp(\"\\\\s\").test(o[a-1])&&r.indexOf(a-1)<0&&r.push(a-1),new RegExp(\"\\\\s\").test(o[a+1])&&r.push(a+1),a=o.indexOf(\" \",a+1);if(r.push(o.length),r.indexOf(t.startOffset)>=0||r.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp(\"\\\\s\").test(o[0]))||r[r.length-1]-1===t.startOffset)i=t,this.position=1;else{var s=this.GetCursorStart(r,t.startOffset,!0);this.position=t.startOffset-s,i.setStart(t.startContainer,s),i.setEnd(t.startContainer,this.GetCursorStart(r,t.startOffset,!1))}return i},e.prototype.GetCursorNode=function(e,t,n){return this.GetSpliceNode(this.GetCursorRange(e,t,n),n)},e.prototype.TrimLineBreak=function(e){return e.replace(/(\\r\\n\\t|\\n|\\r\\t)/gm,\" \")},e}(),Gt=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"format-type\",this.applyFormats,this),this.parent.observer.on(\"keyup-handler\",this.onKeyUp,this),this.parent.observer.on(\"keydown-handler\",this.onKeyDown,this)},e.prototype.getParentNode=function(e){for(;e.parentNode&&e.parentNode!==this.parent.editableElement;null)e=e.parentNode;return e},e.prototype.onKeyUp=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=t.endContainer,i=n.lastChild;if(13===e.event.which&&t.startContainer===n&&3!==n.nodeType){var r=Object(l.F)(\"p\");if(r.innerHTML=\"<br>\",\"BR\"===i.nodeName&&i.previousSibling&&\"TABLE\"===i.previousSibling.nodeName)n.replaceChild(r,i),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0);else{var o=this.parent.nodeSelection.getSelectionNodeCollectionBr(t)[0];!Object(l.W)(o)&&\"BR\"===o.nodeName&&o.previousSibling&&\"TABLE\"===o.previousSibling.nodeName&&(n.replaceChild(r,o),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0))}}},e.prototype.onKeyDown=function(e){if(13===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=0===t.startContainer.textContent.length||\"PRE\"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,i=0===t.endContainer.textContent.length||\"PRE\"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,r=Object(l.C)(n,\"pre\"),o=Object(l.C)(i,\"pre\");if(!Object(l.W)(r)&&!Object(l.W)(r.parentElement)&&\"LI\"===r.parentElement.tagName)return;if((Object(l.W)(r)&&!Object(l.W)(o)||!Object(l.W)(r)&&Object(l.W)(o))&&(e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0)),13===e.event.which&&!Object(l.W)(r)&&!Object(l.W)(o)){e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t);var a=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[t.endOffset],s=t.startContainer.childNodes[t.endOffset-1],c=t.startContainer;if(Object(l.W)(a)||Object(l.W)(s)||!Object(l.W)(a.nextSibling)||\"BR\"!==a.nodeName||\"BR\"!==s.nodeName)if(8203===c.textContent.charCodeAt(0)&&1===c.textContent.length||0===c.textContent.length){for(;\"PRE\"!==c.parentElement.nodeName&&(1===c.textContent.length||0===c.textContent.length);)c=c.parentElement;!Object(l.W)(c.previousSibling)&&\"BR\"===c.previousSibling.nodeName&&Object(l.W)(c.nextSibling)?this.paraFocus(c.parentElement):this.isNotEndCursor(r,t)}else this.isNotEndCursor(r,t);else this.paraFocus(t.startContainer)}}},e.prototype.removeCodeContent=function(e){var t=new RegExp(String.fromCharCode(65279),\"g\");if(!Object(l.W)(e.endContainer.textContent.match(t))){var n=65279===e.endContainer.textContent.charCodeAt(e.endOffset-1)?e.endOffset-2:e.endOffset;e.endContainer.textContent=e.endContainer.textContent.replace(t,\"\"),\"\"===e.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer,n)}},e.prototype.deleteContent=function(e){e.startContainer===e.endContainer&&e.startOffset===e.endOffset||e.deleteContents()},e.prototype.paraFocus=function(e){var t=Object(l.F)(\"p\");t.innerHTML=\"<br>\",this.parent.domNode.insertAfter(t,e),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0),Object(l.I)(e.lastChild)},e.prototype.isNotEndCursor=function(e,t){var n=new Qt,i=t.startOffset===e.lastChild.textContent.length&&e.lastChild.textContent===t.startContainer.textContent;if(0===e.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||\"PRE\"===t.startContainer.nodeName)){this.insertMarker(e,t);var r=Object(l.F)(\"br\");e.childNodes[t.endOffset].parentElement.insertBefore(r,e.childNodes[t.endOffset])}else{var o=n.SplitNode(t,e,!0);this.insertMarker(e,t);var a=e.previousElementSibling;\"PRE\"===a.tagName&&(a.insertAdjacentHTML(\"beforeend\",\"<br>\"+o.innerHTML),Object(l.I)(e))}this.setCursorPosition(i,e)},e.prototype.setCursorPosition=function(e,t){var n=!1,i=this.parent.editableElement.querySelector(\".tempSpan\"),r=i.parentElement;if(\"\"===i.parentNode.textContent?n=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),e)if(n)r===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),Object(l.I)(i)):this.focusSelectionParent(i,r);else{var o=Object(l.F)(\"br\");this.parent.domNode.insertAfter(o,i),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),Object(l.I)(i)}else n?this.focusSelectionParent(i,r):Object(l.I)(i)},e.prototype.focusSelectionParent=function(e,t){Object(l.I)(e),t.innerHTML=\"​\",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},e.prototype.insertMarker=function(e,t){var n=Object(l.F)(\"span\",{className:\"tempSpan\"});\"PRE\"===t.startContainer.nodeName?e.childNodes[t.endOffset].parentElement.insertBefore(n,e.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(n,t.startContainer)},e.prototype.applyFormats=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=!1;this.parent.editableElement!==t.endContainer||Object(l.W)(this.parent.editableElement.children[t.endOffset-1])||\"TABLE\"!==this.parent.editableElement.children[t.endOffset-1].tagName||t.collapsed||(n=!0);var i=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(i);for(var r=this.parent.domNode.blockNodes(),o=0;o<r.length;o++){var a=void 0,s=void 0;if(\"blockquote\"===e.subCommand.toLowerCase()?(a=this.getParentNode(r[o]),s=this.parent.domNode.isList(a)||\"TABLE\"===a.tagName?a.outerHTML:a.innerHTML):s=(a=r[o]).innerHTML,!(e.subCommand.toLowerCase()===a.tagName.toLowerCase()&&(\"pre\"!==e.subCommand.toLowerCase()||!Object(l.W)(e.exeValue)&&\"dropDownSelect\"===e.exeValue.name)||Object(l.W)(a.parentNode)||\"LI\"===a.tagName&&\"pre\"!==e.subCommand.toLowerCase()||\"TABLE\"===a.tagName&&\"pre\"===e.subCommand.toLowerCase())){this.cleanFormats(a,e.subCommand);var c=\"pre\"===e.subCommand.toLowerCase()&&\"pre\"===a.tagName.toLowerCase()?\"p\":e.subCommand,d=this.parent.domNode.createTagString(c,a,s.replace(/>\\s+</g,\"><\"));\"LI\"===a.tagName?(a.innerHTML=\"\",a.insertAdjacentHTML(\"beforeend\",d)):this.parent.domNode.replaceWith(a,d)}}this.preFormatMerge();var h=this.parent.editableElement.querySelector(\".\"+zt),p=this.parent.editableElement.querySelector(\".\"+Ft);Object(l.W)(h)||Object(l.W)(p)||(h=h.lastChild,p=p.lastChild),i=this.parent.domNode.saveMarker(i,null),ft()&&gt(this.parent.editableElement,e.selector),n?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,h,p,0,p.textContent.length):i.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.preFormatMerge=function(){var e=this.parent.editableElement.querySelectorAll(\"PRE\");if(!Object(l.W)(e))for(var t=0;t<e.length;t++){var n=e[t].previousElementSibling;Object(l.W)(n)||\"PRE\"!==n.tagName||(n.insertAdjacentHTML(\"beforeend\",\"<br>\"+e[t].innerHTML),Object(l.I)(e[t]))}},e.prototype.cleanFormats=function(e,t){var n=[\"display\",\"font-size\",\"margin-top\",\"margin-bottom\",\"margin-left\",\"margin-right\",\"font-weight\"];t=t.toLowerCase();for(var i=0;i<n.length&&\"p\"!==t&&\"blockquote\"!==t&&\"pre\"!==t;i++)e.style.removeProperty(n[i])},e}(),Kt=function(){function e(){}return e.Insert=function(e,t,n,i){var r,o;\"string\"==typeof t?((o=document.createElement(\"div\")).innerHTML=t,r=i?o:o.firstChild):i&&(Object(l.W)(t)||Object(l.W)(t.classList)||!t.classList.contains(\"pasteContent\"))?((o=document.createElement(\"div\")).appendChild(t),r=o):r=t;var a=new It,s=new Qt,c=a.getRange(e),d=c.startOffset===c.endOffset&&0===c.startOffset&&c.startContainer===c.endContainer,h=c.collapsed,p=this.getNodeCollection(c,a),u=\"table\"===r.nodeName.toLowerCase()?this.closestEle(p[0].parentNode,n):p[0];if(i||!Object(l.W)(r)&&!Object(l.W)(r.classList)&&r.classList.contains(\"pasteContent\"))this.pasteInsertHTML(p,r,c,a,s,e,h,u,n);else if(n!==c.startContainer&&(!h&&(u.nodeType!==Node.ELEMENT_NODE||-1===Mt.indexOf(u.tagName.toLocaleLowerCase()))||\"table\"===r.nodeName.toLowerCase()&&u&&-1===Mt.indexOf(u.tagName.toLocaleLowerCase()))){var m=s.GetSpliceNode(c,u),f=m.previousSibling,g=m.parentNode;if(1===p.length)a.setSelectionContents(e,m),c=a.getRange(e);else{var b=s.GetSpliceNode(c,p[p.length-1].parentElement);b=Object(l.W)(b)?m:b,a.setSelectionText(e,m,b,0,3===b.nodeType?b.textContent.length:b.childNodes.length),c=a.getRange(e)}c.extractContents(),\"TABLE\"===t.tagName&&this.removeEmptyElements(n);for(var v=0;v<p.length;v++)if(3!==p[v].nodeType&&null!=p[v].parentNode){if(\"IMG\"===p[v].nodeName)continue;p[v].parentNode.removeChild(p[v])}if(f)Vt.AppendBefore(r,f,!0);else{for(var y=null;g!==n&&g.firstChild&&\"\"===g.textContent.trim();){y=g,g=g.parentNode}null!==y&&(g=y),g.firstChild&&(g!==n||\"TABLE\"===r.nodeName&&d&&g===c.startContainer&&g===c.endContainer)?\"\"===g.textContent.trim()&&g!==n?(Vt.AppendBefore(r,g,!1),Object(l.I)(g)):Vt.AppendBefore(r,g.firstChild,!1):g.appendChild(r)}\"IMG\"===r.nodeName?this.imageFocus(r,a,e):3!==r.nodeType?a.setSelectionText(e,r,r,0,r.childNodes.length):a.setSelectionText(e,r,r,0,r.textContent.length)}else{if(c.deleteContents(),d&&\"\"===c.startContainer.textContent&&(c.startContainer.innerHTML=\"\"),l.d.isIE){var C=e.createDocumentFragment();C.appendChild(r),c.insertNode(C)}else c.insertNode(r);3!==r.nodeType&&r.childNodes.length>0?a.setSelectionText(e,r,r,1,1):\"IMG\"===r.nodeName?this.imageFocus(r,a,e):3!==r.nodeType?a.setSelectionContents(e,r):a.setSelectionText(e,r,r,r.textContent.length,r.textContent.length)}},e.pasteInsertHTML=function(e,t,n,i,r,o,a,s,c){var d,h,p,u,m=n.startOffset===n.endOffset&&n.startContainer===n.endContainer;if(m&&n.startContainer===c&&\"\"===c.textContent){var f=this.getImmediateBlockNode(e[e.length-1],c);i.setSelectionText(o,f,f,0,0),n=i.getRange(o)}c!==n.startContainer&&(!a&&(s.nodeType!==Node.ELEMENT_NODE||-1===Mt.indexOf(s.tagName.toLocaleLowerCase()))||\"table\"===t.nodeName.toLowerCase()&&s&&-1===Mt.indexOf(s.tagName.toLocaleLowerCase()))&&(u=r.GetSpliceNode(n,s),h=Object(l.W)(u.previousSibling)?u.parentNode.previousSibling:u.previousSibling,1===e.length?(i.setSelectionContents(o,u),n=i.getRange(o),p=!0):(d=r.GetSpliceNode(n,e[e.length-1].parentElement),d=Object(l.W)(d)?u:d,i.setSelectionText(o,u,d,0,3===d.nodeType?d.textContent.length:d.childNodes.length),n=i.getRange(o),p=!1));var g=!1;this.removingComments(t);for(var b,v=t.childNodes,y=0;y<v.length;y++)if(Lt.indexOf(v[y].nodeName.toLocaleLowerCase())>=0){g=!0;break}var C=document.createDocumentFragment();if(g){this.insertTempNode(n,t,e,r,c);var O=!0,S=void 0,k=void 0,w=void 0;for(n.deleteContents();t.firstChild;)if(\"#text\"!==t.firstChild.nodeName||\"\"!==t.firstChild.textContent.trim())if(\"#text\"===t.firstChild.nodeName&&O||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0&&O){if(b=t.firstChild,Object(l.W)(t.previousElementSibling)){var T=Object(l.F)(\"p\");t.parentElement.insertBefore(T,t)}t.previousElementSibling.appendChild(t.firstChild)}else b=t.firstChild,\"#text\"===t.firstChild.nodeName||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(S?(w.appendChild(t.firstChild),C.appendChild(w)):((k=Object(l.F)(\"p\")).appendChild(t.firstChild),C.appendChild(k)),w=k,S=!0):(C.appendChild(t.firstChild),S=!1),O=!1;else Object(l.I)(t.firstChild);t.parentNode.replaceChild(C,t)}else if(m){var E=Object(l.F)(\"span\",{className:\"tempSpan\"});for(n.insertNode(E);t.firstChild;)b=t.firstChild,C.appendChild(t.firstChild);E.parentNode.replaceChild(C,E)}else{for(;t.firstChild;)b=t.firstChild,C.appendChild(t.firstChild);p?u.parentNode.replaceChild(C,u):(n.deleteContents(),Object(l.I)(d),Object(l.W)(h)?c.appendChild(C):h.parentNode.appendChild(C))}\"#text\"===b.nodeName?this.placeCursorEnd(b,t,i,o,c):this.cursorPos(b,t,i,o,c)},e.placeCursorEnd=function(e,t,n,i,r){for(e=\"BR\"===e.nodeName?e.previousSibling:e;!Object(l.W)(e)&&\"#text\"!==e.nodeName&&\"IMG\"!==e.nodeName&&\"BR\"!==e.nodeName;)e=e.lastChild;\"IMG\"===(e=Object(l.W)(e)?t:e).nodeName?this.imageFocus(e,n,i):n.setSelectionText(i,e,e,e.textContent.length,e.textContent.length),this.removeEmptyElements(r)},e.getNodeCollection=function(e,t){var n=[];return e.startOffset===e.endOffset&&e.startContainer===e.endContainer&&\"TD\"===e.startContainer.nodeName?n.push(e.startContainer.childNodes[e.endOffset]):n=t.getInsertNodeCollection(e),n},e.insertTempNode=function(e,t,n,i,r){if(e.startContainer!==r||Object(l.W)(e.startContainer.childNodes[e.endOffset-1])||\"TABLE\"!==e.startContainer.childNodes[e.endOffset-1].nodeName)if(e.startContainer!==r||Object(l.W)(e.startContainer.childNodes[e.endOffset])||\"TABLE\"!==e.startContainer.childNodes[e.endOffset].nodeName){var o=this.getImmediateBlockNode(n[n.length-1],r);if(\"TD\"===o.nodeName||\"TH\"===o.nodeName){var a=Object(l.F)(\"span\",{className:\"tempSpan\"});e.insertNode(a),a.parentNode.replaceChild(t,a)}else{var s=i.GetSpliceNode(e,o);s.parentNode.replaceChild(t,s)}}else e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset]);else Object(l.W)(e.startContainer.childNodes[e.endOffset-1].nextSibling)?e.startContainer.appendChild(t):e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset-1].nextSibling)},e.cursorPos=function(e,t,n,i,r){e.classList.add(\"lastNode\"),r.innerHTML=function(e){var t=document.createElement(\"div\");t.innerHTML=e,t.setAttribute(\"class\",\"tempDiv\");var n=document.createElement(\"div\");if(t.childNodes.length>0){for(var i=void 0,r=void 0,o=void 0;t.firstChild;)\"#text\"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf(\"\\n\")<0||\"\"!==t.firstChild.textContent.trim())||mt.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(i?r.appendChild(t.firstChild):(o=Object(l.F)(\"p\"),n.appendChild(o),o.appendChild(t.firstChild)),r=o,i=!0):\"#text\"===t.firstChild.nodeName&&(\"\\n\"===t.firstChild.textContent||t.firstChild.textContent.indexOf(\"\\n\")>=0&&\"\"===t.firstChild.textContent.trim())?Object(l.I)(t.firstChild):(n.appendChild(t.firstChild),i=!1);for(var a=n.querySelectorAll(\"table\"),s=0;s<a.length;s++){\"0\"===a[s].getAttribute(\"border\")&&a[s].removeAttribute(\"border\");for(var c=a[s].querySelectorAll(\"td\"),d=0;d<c.length;d++)\"none\"===c[d].style.borderLeft&&c[d].style.removeProperty(\"border-left\"),\"none\"===c[d].style.borderRight&&c[d].style.removeProperty(\"border-right\"),\"none\"===c[d].style.borderBottom&&c[d].style.removeProperty(\"border-bottom\"),\"none\"===c[d].style.borderTop&&c[d].style.removeProperty(\"border-top\"),\"none\"===c[d].style.border&&c[d].style.removeProperty(\"border\");a[s].classList.contains(\"e-rte-table\")||a[s].classList.add(\"e-rte-table\")}var h=n.querySelectorAll(\"img\");for(s=0;s<h.length;s++)h[s].classList.contains(\"e-rte-image\")||h[s].classList.add(\"e-rte-image\"),h[s].classList.contains(\"e-imginline\")||h[s].classList.contains(\"e-imgbreak\")||h[s].classList.add(\"e-imginline\")}return n.innerHTML}(r.innerHTML),e=r.querySelector(\".lastNode\"),this.placeCursorEnd(e,t,n,i,r),e.classList.remove(\"lastNode\"),0===e.classList.length&&e.removeAttribute(\"class\")},e.imageFocus=function(e,t,n){var i=document.createTextNode(\" \");e.parentNode.insertBefore(i,e.nextSibling),t.setSelectionText(n,e.nextSibling,e.nextSibling,0,0)},e.getImmediateBlockNode=function(e,t){do{e=e.parentNode}while(Lt.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\\s\\S]*?-->/g,\"\"),e.innerHTML=t},e.findDetachEmptyElem=function(e){return Object(l.W)(e.parentElement)?null:\"\"===e.parentElement.textContent.trim()&&\"true\"!==e.parentElement.contentEditable?this.findDetachEmptyElem(e.parentElement):e},e.removeEmptyElements=function(e){for(var t=e.querySelectorAll(\":empty\"),n=0;n<t.length;n++)if(\"IMG\"!==t[n].tagName&&\"BR\"!==t[n].tagName&&\"IFRAME\"!==t[n].tagName&&\"TD\"!==t[n].tagName&&\"SOURCE\"!==t[n].tagName&&\"HR\"!==t[n].tagName){var i=this.findDetachEmptyElem(t[n]);Object(l.W)(i)||Object(l.I)(i)}},e.closestEle=function(e,t){for(var n=e;n&&1===n.nodeType;){if(n.parentNode===t||!Object(l.W)(n.parentNode.tagName)&&-1!==Dt.indexOf(n.parentNode.tagName.toLocaleLowerCase()))return n;n=n.parentNode}return null},e.inlineNode=[\"a\",\"abbr\",\"acronym\",\"audio\",\"b\",\"bdi\",\"bdo\",\"big\",\"br\",\"button\",\"canvas\",\"cite\",\"code\",\"data\",\"datalist\",\"del\",\"dfn\",\"em\",\"embed\",\"font\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"label\",\"map\",\"mark\",\"meter\",\"noscript\",\"object\",\"output\",\"picture\",\"progress\",\"q\",\"ruby\",\"s\",\"samp\",\"script\",\"select\",\"slot\",\"small\",\"span\",\"strong\",\"sub\",\"sup\",\"svg\",\"template\",\"textarea\",\"time\",\"u\",\"tt\",\"var\",\"video\",\"wbr\"],e}(),Xt=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"INSERT-LINK\",this.linkCommand,this)},e.prototype.linkCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case\"createlink\":case\"editlink\":this.createLink(e);break;case\"openlink\":this.openLink(e);break;case\"removelink\":this.removeLink(e)}},e.prototype.createLink=function(e){var t=!Object(l.W)(e.item.selectParent)&&e.item.selectParent.length>0&&Object(l.C)(e.item.selectParent[0],\"a\");if(t=Object(l.W)(t)?!Object(l.W)(e.item.selectParent)&&e.item.selectParent.length>0?e.item.selectParent[0]:null:t,Object(l.W)(t)||\"A\"!==t.tagName){var n=(new It).getRange(this.parent.currentDocument),i=!!Object(l.W)(e.item.text)||e.item.text.replace(/ /g,\"\").localeCompare(n.toString().replace(/\\n/g,\" \").replace(/ /g,\"\"))<0;if(e.event&&\"keydown\"===e.event.type&&(32===e.event.keyCode||13===e.event.keyCode)||\"Paste\"===e.item.action||n.collapsed||i){var r=this.createAchorNode(e);if(r.innerText=\"\"===e.item.text?e.item.url:e.item.text,e.item.selection.restore(),Kt.Insert(this.parent.currentDocument,r,this.parent.editableElement),!e.event||\"keydown\"!==e.event.type||32!==e.event.keyCode&&13!==e.event.keyCode){c=\"Paste\"===e.item.action?r.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,r.childNodes[0],r.childNodes[0],c,r.childNodes[0].textContent.length)}else{var o=e.item.selection.range.startContainer;o.textContent=this.removeText(o.textContent,e.item.text)}}else this.createLinkNode(e)}else{var a=t,s=\"\";if(Object(l.W)(e.item.url)||a.setAttribute(\"href\",e.item.url),Object(l.W)(e.item.title)||a.setAttribute(\"title\",e.item.title),Object(l.W)(e.item.text)||\"\"===e.item.text||(s=a.innerText,a.innerText=e.item.text),Object(l.W)(e.item.target)?a.removeAttribute(\"target\"):a.setAttribute(\"target\",e.item.target),s===e.item.text)e.item.selection.setSelectionText(this.parent.currentDocument,a,a,1,1),e.item.selection.restore();else{var c=\"Paste\"===e.item.action?a.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,a.childNodes[0],a.childNodes[0],c,a.childNodes[0].textContent.length)}}e.callBack&&e.callBack({requestType:\"Links\",editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.createLinkNode=function(e){for(var t,n,i=new It,r=new Qt,o=i.getRange(this.parent.currentDocument),a=this.getSelectionNodes(i.getNodeCollection(o)),s=i.save(o,this.parent.currentDocument),l=[],c=[],d=[],h=[],p=[],u=0;u<a.length;u++)a[u]=r.GetSpliceNode(o,a[u]),l[u]=a[u];for(var m=0;m<l.length;m++){var f=!0;for(t=l[m];!0===f;){if(\"A\"===t.parentElement.nodeName){var g=t.parentElement;t.parentElement.parentElement.insertBefore(g.firstChild,g),t.parentElement.removeChild(g)}this.isBlockNode(t.parentElement)||0===l.length||0===m||m===l.length-1?(c[m]=t,f=!1):t=t.parentElement}}m=0;for(var b=0;m<c.length;m++)if(0===m&&(p[b]=c[m]),c.length>1&&m<c.length-1){if(c[m].parentElement===c[m+1].parentElement&&c[m]===c[m+1])continue;p[b+1]=c[m+1],b++}var v=0;h[v]=this.createAchorNode(e);for(m=0;m<p.length;m++)if(0===m&&(n=p[m].cloneNode(!0),h[m].appendChild(n)),m<p.length-1)if(p[m].parentNode===p[m+1].parentNode){var y=p[m+1].cloneNode(!0);h[v].appendChild(y)}else h[v+=1]=this.createAchorNode(e),n=p[m+1].cloneNode(!0),h[v].appendChild(n);this.parent.nodeSelection.setRange(document,s.range);m=0;for(var C=0,O=0;m<=p.length;m++)0===m&&(p[m].parentNode.insertBefore(h[C],p[m].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,h[C]),d[O]=p[m],O++),m<p.length-1&&(p[m].parentNode===p[m+1].parentNode?(d[O]=p[m+1],O++):(C+=1,p[m+1].parentNode.insertBefore(h[C],p[m+1]),d[O]=p[m+1],O++));for(m=0;m<d.length;m++)d[m].parentNode&&d[m].parentNode.removeChild(d[m])},e.prototype.createAchorNode=function(e){var t=Object(l.F)(\"a\",{className:\"e-rte-anchor\",attrs:{href:e.item.url,title:Object(l.W)(e.item.title)||\"\"===e.item.title?e.item.url:e.item.title}});return Object(l.W)(e.item.target)||t.setAttribute(\"target\",e.item.target),t},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)3===e[t].nodeType&&\"\"!==e[t].textContent.trim()||\"IMG\"!==e[t].nodeName&&(e.splice(t,1),t--);return e.reverse()},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&Lt.indexOf(e.tagName.toLowerCase())>=0},e.prototype.removeText=function(e,t){for(var n=e.split(\" \"),i=0;i<n.length;i++)n[i]===t&&(n.splice(i,1),i--);return n.join(\" \")+\" \"},e.prototype.openLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeLink=function(e){var t=this.parent.domNode.blockNodes();if(t.length<2){this.parent.domNode.setMarker(e.item.selection);for(var n=Object(l.C)(e.item.selectParent[0],\"a\"),i=n||e.item.selectParent[0],r=i.parentNode,o=[];i.firstChild;null)o.push(r.insertBefore(i.firstChild,i));r.removeChild(i),o&&1===o.length&&(e.item.selection.startContainer=e.item.selection.getNodeArray(o[o.length-1],!0),e.item.selection.endContainer=e.item.selection.startContainer),e.item.selection=this.parent.domNode.saveMarker(e.item.selection)}else for(var a=0;a<t.length;a++)for(var s=t[a].querySelectorAll(\"a\"),c=0;c<s.length;c++)document.getSelection().containsNode(s[c],!0)&&(s[c].outerHTML=s[c].innerHTML);e.item.selection.restore(),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Yt=function(){function e(e){this.alignments={JustifyLeft:\"left\",JustifyCenter:\"center\",JustifyRight:\"right\",JustifyFull:\"justify\"},this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"alignment-type\",this.applyAlignment,this),this.parent.observer.on(\"keydown-handler\",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case\"justify-center\":this.applyAlignment({subCommand:\"JustifyCenter\",callBack:e.callBack}),e.event.preventDefault();break;case\"justify-full\":this.applyAlignment({subCommand:\"JustifyFull\",callBack:e.callBack}),e.event.preventDefault();break;case\"justify-left\":this.applyAlignment({subCommand:\"JustifyLeft\",callBack:e.callBack}),e.event.preventDefault();break;case\"justify-right\":this.applyAlignment({subCommand:\"JustifyRight\",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getTableNode=function(e){var t=e.startContainer.nodeType===Node.ELEMENT_NODE?e.startContainer:e.startContainer.parentNode;return[Object(l.C)(t,\"td,th\")]},e.prototype.applyAlignment=function(e){var t=\"Table\"===e.value,n=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection.save(n,this.parent.currentDocument);if(t)Object(l.nb)(this.getTableNode(n)[0],{\"text-align\":this.alignments[e.subCommand]});else{this.parent.domNode.setMarker(i);for(var r=this.parent.domNode.blockNodes(),o=0;o<r.length;o++){var a=r[o];Object(l.nb)(a,{\"text-align\":this.alignments[e.subCommand]})}var s=this.parent.domNode.getImageTagInSelection();for(o=0;o<s.length;o++){var c=[];c.push(s[o]),this.parent.imgObj.imageCommand({item:{selectNode:c},subCommand:e.subCommand,value:e.subCommand,callBack:e.callBack,selector:e.selector})}this.parent.editableElement.focus(),i=this.parent.domNode.saveMarker(i),ft()&&gt(this.parent.editableElement,e.selector),i.restore()}e.callBack&&e.callBack({requestType:e.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:t?this.getTableNode(n):this.parent.domNode.blockNodes()})},e}(),Jt=function(){function e(e){this.indentValue=20,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"indent-type\",this.applyIndents,this),this.parent.observer.on(\"keydown-handler\",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case\"indents\":this.applyIndents({subCommand:\"Indent\",callBack:e.callBack}),e.event.preventDefault();break;case\"outdents\":this.applyIndents({subCommand:\"Outdent\",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyIndents=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(n);for(var i=this.parent.domNode.blockNodes(),r=i.slice(),o=[],a=0;a<r.length;a++)\"LI\"!==r[a].tagName&&\"LI\"===r[a].parentNode.tagName?(i.splice(i.indexOf(r[a]),1),o.push(r[a].parentNode)):\"LI\"===r[a].tagName&&(i.splice(i.indexOf(r[a]),1),o.push(r[a]));o.length>0&&this.parent.observer.notify(\"keydown-handler\",{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:\"Indent\"!==e.subCommand,which:9,action:\"indent\"},ignoreDefault:!0});for(a=0;a<i.length;a++){var s=i[a],l=s.style.marginLeft,c=void 0;\"Indent\"===e.subCommand?(c=\"\"===l?this.indentValue+\"px\":parseInt(l,null)+this.indentValue+\"px\",s.style.marginLeft=c):(c=\"\"===l||\"0px\"===l?\"\":parseInt(l,null)-this.indentValue+\"px\",s.style.marginLeft=c)}this.parent.editableElement.focus(),ft()&&gt(this.parent.editableElement,e.selector),(n=this.parent.domNode.saveMarker(n)).restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e}(),$t=\"e-img-caption\",Zt=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(Nt,this.imageCommand,this)},e.prototype.imageCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case\"image\":case\"replace\":this.createImage(e);break;case\"insertlink\":this.insertImageLink(e);break;case\"openimagelink\":this.openImageLink(e);break;case\"editimagelink\":this.editImageLink(e);break;case\"removeimagelink\":this.removeImageLink(e);break;case\"remove\":this.removeImage(e);break;case\"alttext\":this.insertAltTextImage(e);break;case\"dimension\":this.imageDimension(e);break;case\"caption\":this.imageCaption(e);break;case\"justifyleft\":this.imageJustifyLeft(e);break;case\"justifycenter\":this.imageJustifyCenter(e);break;case\"justifyright\":this.imageJustifyRight(e);break;case\"inline\":this.imageInline(e);break;case\"break\":this.imageBreak(e)}},e.prototype.createImage=function(e){var t=this;if(e.item.url=Object(l.W)(e.item.url)||\"undefined\"===e.item.url?e.item.src:e.item.url,Object(l.W)(e.item.selectParent)||\"IMG\"!==e.item.selectParent[0].tagName){var n=Object(l.F)(\"img\");this.setStyle(n,e),Object(l.W)(e.item.selection)||e.item.selection.restore(),Object(l.W)(e.selector)||\"pasteCleanupModule\"!==e.selector?Kt.Insert(this.parent.currentDocument,n,this.parent.editableElement):e.callBack({requestType:\"Image\",editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[n]})}else{var i=e.item.selectParent[0];this.setStyle(i,e)}if(e.callBack&&(Object(l.W)(e.selector)||!Object(l.W)(e.selector)&&\"pasteCleanupModule\"!==e.selector)){var r=\"Replace\"===e.value?e.item.selectParent[0]:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0].previousElementSibling;r.addEventListener(\"load\",(function(){e.callBack({requestType:\"Image\",editorMode:\"HTML\",event:e.event,range:t.parent.nodeSelection.getRange(t.parent.currentDocument),elements:[r]})}))}},e.prototype.setStyle=function(e,t){Object(l.W)(t.item.url)||e.setAttribute(\"src\",t.item.url),e.setAttribute(\"class\",\"e-rte-image\"+(Object(l.W)(t.item.cssClass)?\"\":\" \"+t.item.cssClass)),Object(l.W)(t.item.altText)||e.setAttribute(\"alt\",t.item.altText),Object(l.W)(t.item.width)||Object(l.W)(t.item.width.width)||e.setAttribute(\"width\",this.calculateStyleValue(t.item.width.width)),Object(l.W)(t.item.height)||Object(l.W)(t.item.height.height)||e.setAttribute(\"height\",this.calculateStyleValue(t.item.height.height)),Object(l.W)(t.item.width)||Object(l.W)(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),Object(l.W)(t.item.width)||Object(l.W)(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth)),Object(l.W)(t.item.height)||Object(l.W)(t.item.height.minHeight)||(e.style.minHeight=this.calculateStyleValue(t.item.height.minHeight)),Object(l.W)(t.item.height)||Object(l.W)(t.item.height.maxHeight)||(e.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))},e.prototype.calculateStyleValue=function(e){return\"string\"==typeof e&&(e.indexOf(\"px\")||e.indexOf(\"%\")||e.indexOf(\"auto\"))?e:e+\"px\"},e.prototype.insertImageLink=function(e){var t=Object(l.F)(\"a\",{attrs:{href:e.item.url}});e.item.selectNode[0].parentElement.classList.contains(\"e-img-wrap\")&&(e.item.selection.restore(),t.setAttribute(\"contenteditable\",\"true\")),t.appendChild(e.item.selectNode[0]),Object(l.W)(e.item.target)||t.setAttribute(\"target\",e.item.target),Kt.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.callBack(e)},e.prototype.openImageLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeImageLink=function(e){var t=e.item.selectParent[0];if(t.classList.contains(\"e-img-caption\")){var n=Object(l.kb)(\".e-img-wrap\",t),i=Object(l.kb)(\".e-img-inner\",t),r=i.cloneNode(!0);Object(l.I)(Object(l.kb)(\"a\",t)),Object(l.I)(i),n.appendChild(e.item.insertElement),n.appendChild(r)}else Object(l.I)(t),l.d.isIE&&e.item.selection.restore(),Kt.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement);this.callBack(e)},e.prototype.editImageLink=function(e){e.item.selectNode[0].parentElement.href=e.item.url,Object(l.W)(e.item.target)?e.item.selectNode[0].parentElement.removeAttribute(\"target\"):e.item.selectNode[0].parentElement.target=e.item.target,this.callBack(e)},e.prototype.removeImage=function(e){Object(l.C)(e.item.selectNode[0],\"a\")?\"A\"!==e.item.selectNode[0].parentElement.nodeName||Object(l.W)(e.item.selectNode[0].parentElement.innerText)?Object(l.I)(Object(l.C)(e.item.selectNode[0],\"a\")):Object(l.I)(e.item.selectNode[0]):Object(l.W)(Object(l.C)(e.item.selectNode[0],\".\"+$t))?Object(l.I)(e.item.selectNode[0]):Object(l.I)(Object(l.C)(e.item.selectNode[0],\".\"+$t)),this.callBack(e)},e.prototype.insertAltTextImage=function(e){e.item.selectNode[0].setAttribute(\"alt\",e.item.altText),this.callBack(e)},e.prototype.imageDimension=function(e){var t=e.item.selectNode[0];t.style.height=\"\",t.style.width=\"\",t.width=e.item.width,t.height=e.item.height,this.callBack(e)},e.prototype.imageCaption=function(e){Kt.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement),this.callBack(e)},e.prototype.imageJustifyLeft=function(e){var t=e.item.selectNode[0];t.removeAttribute(\"class\"),Object(l.v)([t],\"e-rte-image\"),Object(l.W)(Object(l.C)(t,\".\"+$t))||(Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgright\"),Object(l.v)([Object(l.C)(t,\".\"+$t)],\"e-imgleft\")),\"A\"===t.parentElement.nodeName?(Object(l.hb)([t.parentElement],\"e-imgright\"),Object(l.v)([t.parentElement],\"e-imgleft\")):Object(l.v)([t],\"e-imgleft\"),this.callBack(e)},e.prototype.imageJustifyCenter=function(e){var t=e.item.selectNode[0];t.removeAttribute(\"class\"),Object(l.v)([t],\"e-rte-image\"),Object(l.W)(Object(l.C)(t,\".\"+$t))||(Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgleft\"),Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgright\"),Object(l.v)([Object(l.C)(t,\".\"+$t)],\"e-imgcenter\")),\"A\"===t.parentElement.nodeName?(Object(l.hb)([t.parentElement],\"e-imgleft\"),Object(l.hb)([t.parentElement],\"e-imgright\"),Object(l.v)([t.parentElement],\"e-imgcenter\"),Object(l.v)([t],\"e-imgcenter\")):Object(l.v)([t],\"e-imgcenter\"),this.callBack(e)},e.prototype.imageJustifyRight=function(e){var t=e.item.selectNode[0];t.removeAttribute(\"class\"),Object(l.v)([t],\"e-rte-image\"),Object(l.W)(Object(l.C)(t,\".\"+$t))||(Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgleft\"),Object(l.v)([Object(l.C)(t,\".\"+$t)],\"e-imgright\")),\"A\"===t.parentElement.nodeName?(Object(l.hb)([t.parentElement],\"e-imgleft\"),Object(l.v)([t.parentElement],\"e-imgright\")):Object(l.v)([t],\"e-imgright\"),this.callBack(e)},e.prototype.imageInline=function(e){var t=e.item.selectNode[0];t.removeAttribute(\"class\"),Object(l.v)([t],\"e-rte-image\"),Object(l.v)([t],\"e-imginline\"),Object(l.W)(Object(l.C)(t,\".\"+$t))||(Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgbreak\"),Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgcenter\"),Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgleft\"),Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgright\"),Object(l.v)([Object(l.C)(t,\".\"+$t)],\"e-caption-inline\")),this.callBack(e)},e.prototype.imageBreak=function(e){var t=e.item.selectNode[0];t.removeAttribute(\"class\"),Object(l.v)([t],\"e-imgbreak\"),Object(l.v)([t],\"e-rte-image\"),Object(l.W)(Object(l.C)(t,\".\"+$t))||(Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-caption-inline\"),Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgcenter\"),Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgleft\"),Object(l.hb)([Object(l.C)(t,\".\"+$t)],\"e-imgright\"),Object(l.v)([Object(l.C)(t,\".\"+$t)],\"e-imgbreak\")),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),en=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"INSERT-TABLE\",this.createTable,this),this.parent.observer.on(\"INSERT-ROW\",this.insertRow,this),this.parent.observer.on(\"INSERT-COLUMN\",this.insertColumn,this),this.parent.observer.on(\"DELETE-ROW\",this.deleteRow,this),this.parent.observer.on(\"DELETE-COLUMN\",this.deleteColumn,this),this.parent.observer.on(\"REMOVE-TABLE\",this.removeTable,this),this.parent.observer.on(\"TABLE-HEADER\",this.tableHeader,this),this.parent.observer.on(\"TABLE_VERTICAL_ALIGN\",this.tableVerticalAlign,this)},e.prototype.createTable=function(e){var t=Object(l.F)(\"table\",{className:\"e-rte-table\"}),n=Object(l.F)(\"tbody\");Object(l.W)(e.item.width.width)||(t.style.width=this.calculateStyleValue(e.item.width.width)),Object(l.W)(e.item.width.minWidth)||(t.style.minWidth=this.calculateStyleValue(e.item.width.minWidth)),Object(l.W)(e.item.width.maxWidth)||(t.style.maxWidth=this.calculateStyleValue(e.item.width.maxWidth));for(var i=parseInt(e.item.width.width,10)/e.item.columns,r=0;r<e.item.row;r++){for(var o=Object(l.F)(\"tr\"),a=0;a<e.item.columns;a++){var s=Object(l.F)(\"td\");s.appendChild(Object(l.F)(\"br\")),s.style.width=i+\"%\",o.appendChild(s)}n.appendChild(o)}return t.appendChild(n),e.item.selection.restore(),Kt.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.removeEmptyNode(),e.item.selection.setSelectionText(this.parent.currentDocument,t.querySelector(\"td\"),t.querySelector(\"td\"),0,0),t.querySelector(\"td\").classList.add(\"e-cell-select\"),e.callBack&&e.callBack({requestType:\"Table\",editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]}),t},e.prototype.calculateStyleValue=function(e){return\"string\"==typeof e&&(e.indexOf(\"px\")||e.indexOf(\"%\")||e.indexOf(\"auto\"))?e:e+\"px\"},e.prototype.removeEmptyNode=function(){for(var e=this.parent.editableElement.querySelectorAll(\"ul:empty, ol:empty\"),t=0;t<e.length;t++)Object(l.I)(e[t]);var n=this.parent.editableElement.querySelectorAll(\"li *:empty\");for(t=0;t<n.length;t++)Object(l.I)(n[t]),n.length===t+1&&(n=this.parent.editableElement.querySelectorAll(\"li *:empty\"),t=-1);var i=this.parent.editableElement.querySelectorAll(\"li:empty\");for(t=0;t<i.length;t++)Object(l.I)(i[t])},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.insertRow=function(e){var t=e.item.selection.range.startContainer;if(\"th\"!==(t=3===t.nodeType?t.parentNode:t).nodeName.toLowerCase()||\"InsertRowBefore\"!==e.item.subCommand){var n,i=Object(l.C)(t,\"tr\");if(\"th\"!==t.nodeName.toLowerCase()){n=Object(l.C)(t,\"tr\").cloneNode(!0);var r=Array.prototype.slice.call(n.querySelectorAll(\"td\"));Array.prototype.forEach.call(r,(function(e){e.innerHTML=\"\",e.appendChild(Object(l.F)(\"br\")),e.removeAttribute(\"class\")}))}else{var o=i.childNodes;n=Object(l.F)(\"tr\");for(var a=0;a<o.length;a++){var s=Object(l.F)(\"td\");s.appendChild(Object(l.F)(\"br\")),n.appendChild(s)}}\"InsertRowBefore\"===e.item.subCommand?i.parentElement.insertBefore(n,i):this.insertAfter(n,i),e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.insertColumn=function(e){var t=e.item.selection.range.startContainer;t=\"TD\"!==(t=3===t.nodeType?t.parentNode:t).nodeName?Object(l.C)(t,\"td,th\"):t;for(var n,i=Object(l.C)(t,\"tr\"),r=Object(l.C)(i,\"table\").rows,o=Array.prototype.slice.call(i.querySelectorAll(\"th,td\")).indexOf(t),a=parseInt(e.item.width,10)/(i.querySelectorAll(\"td,th\").length+1),s=0;s<Object(l.C)(i,\"table\").querySelectorAll(\"th,td\").length;s++)Object(l.C)(i,\"table\").querySelectorAll(\"th,td\")[s].style.width=a+\"%\";for(var c=0;c<r.length;c++){var d=(n=r[c].querySelectorAll(\"th,td\")[o]).cloneNode(!0);d.innerHTML=\"\",d.appendChild(Object(l.F)(\"br\")),d.removeAttribute(\"class\"),\"InsertColumnLeft\"===e.item.subCommand?n.parentElement.insertBefore(d,n):this.insertAfter(d,n)}e.item.selection.setSelectionText(this.parent.currentDocument,t,t,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.deleteColumn=function(e){var t=e.item.selection.range.startContainer,n=(t=3===t.nodeType?t.parentNode:t).cellIndex,i=Object(l.C)(t,\"table\"),r=Object(l.C)(t,\"tr\"),o=Object(l.C)(r,\"table\").rows;if(1===r.querySelectorAll(\"th,td\").length)e.item.selection.restore(),Object(l.I)(Object(l.C)(t.parentElement,\"table\"));else for(var a=0;a<o.length;a++)o[a].deleteCell(n),l.d.isIE&&(e.item.selection.setSelectionText(this.parent.currentDocument,i.querySelector(\"td\"),i.querySelector(\"td\"),0,0),i.querySelector(\"td, th\").classList.add(\"e-cell-select\"));if(e.callBack){var s=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;if(\"TD\"!==s.nodeName){var c=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,d=s.children[c];this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,d,0)}e.callBack({requestType:e.item.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.deleteRow=function(e){var t=e.item.selection.range.startContainer,n=(t=3===t.nodeType?t.parentNode:t).parentNode.rowIndex,i=Object(l.C)(t,\"table\");1===i.rows.length?(e.item.selection.restore(),Object(l.I)(Object(l.C)(t.parentElement,\"table\"))):(\"TH\"===t.tagName?Object(l.I)(i.querySelector(\"thead\")):i.deleteRow(n),e.item.selection.setSelectionText(this.parent.currentDocument,i.querySelector(\"td\"),i.querySelector(\"td\"),0,0),i.querySelector(\"td, th\").classList.add(\"e-cell-select\")),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.removeTable=function(e){var t=e.item.selection.range.startContainer;t=3===t.nodeType?t.parentNode:t;var n=Object(l.C)(t.parentElement,\"table\");n&&(e.item.selection.restore(),Object(l.I)(n)),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableHeader=function(e){var t=!1,n=e.item.selection.range.startContainer;n=3===n.nodeType?n.parentNode:n;var i=Object(l.C)(n.parentElement,\"table\");if([].slice.call(i.childNodes).forEach((function(e){\"THEAD\"===e.nodeName&&(t=!0)})),i&&!t)for(var r=i.querySelector(\"tr\").childElementCount,o=i.createTHead().insertRow(0),a=0;a<r;a++){var s=Object(l.F)(\"th\");s.appendChild(Object(l.F)(\"br\")),o.appendChild(s)}else i.deleteTHead();e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableVerticalAlign=function(e){\"AlignTop\"===e.item.subCommand?e.item.tableCell.style.verticalAlign=\"top\":\"AlignMiddle\"===e.item.subCommand?e.item.tableCell.style.verticalAlign=\"middle\":e.item.tableCell.style.verticalAlign=\"bottom\",e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),tn=function(){function e(){}return e.prototype.getFormattedNode=function(e,t,n){var i=this.getFormatParent(e,t,n);return null!==i&&i!==n?i:null},e.prototype.getFormatParent=function(e,t,n){do{e=e.parentNode}while(e&&e!==n&&!this.isFormattedNode(e,t));return e},e.prototype.isFormattedNode=function(t,n){switch(n){case\"bold\":return e.isBold(t);case\"italic\":return e.isItalic(t);case\"underline\":return e.isUnderline(t);case\"strikethrough\":return e.isStrikethrough(t);case\"superscript\":return e.isSuperscript(t);case\"subscript\":return e.isSubscript(t);case\"fontcolor\":return this.isFontColor(t);case\"fontname\":return this.isFontName(t);case\"fontsize\":return this.isFontSize(t);case\"backgroundcolor\":return this.isBackgroundColor(t);default:return!1}},e.isBold=function(e){return-1!==[\"strong\",\"b\"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||\"bold\"!==e.style.fontWeight)},e.isItalic=function(e){return-1!==[\"em\",\"i\"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||\"italic\"!==e.style.fontStyle)},e.isUnderline=function(e){return-1!==[\"u\"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||\"underline\"!==e.style.textDecoration)},e.isStrikethrough=function(e){return-1!==[\"del\",\"strike\"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||\"line-through\"!==e.style.textDecoration)},e.isSuperscript=function(e){return-1!==[\"sup\"].indexOf(e.nodeName.toLowerCase())},e.isSubscript=function(e){return-1!==[\"sub\"].indexOf(e.nodeName.toLowerCase())},e.prototype.isFontColor=function(t){var n=t.style&&t.style.color;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&\"\"!==n&&void 0!==n},e.prototype.isBackgroundColor=function(t){var n=t.style&&t.style.backgroundColor;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&\"\"!==n&&void 0!==n},e.prototype.isFontSize=function(t){var n=t.style&&t.style.fontSize;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&\"\"!==n&&void 0!==n},e.prototype.isFontName=function(t){var n=t.style&&t.style.fontFamily;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==n&&\"\"!==n&&void 0!==n},e.inlineTags=[\"a\",\"abbr\",\"acronym\",\"b\",\"bdo\",\"big\",\"cite\",\"code\",\"dfn\",\"em\",\"i\",\"kbd\",\"label\",\"q\",\"samp\",\"small\",\"span\",\"strong\",\"sub\",\"sup\",\"tt\",\"u\",\"var\"],e}(),nn=function(){function e(){}return e.applyFormat=function(e,t,n,i,r){if([\"bold\",\"italic\",\"underline\",\"strikethrough\",\"superscript\",\"subscript\",\"uppercase\",\"lowercase\",\"fontcolor\",\"fontname\",\"fontsize\",\"backgroundcolor\"].indexOf(t)>-1){\"backgroundcolor\"===t&&\"\"===i&&(i=\"transparent\");var o,a=new It,s=new Qt,l=new tn,c=a.getRange(e),d=a.save(c,e),h=c.collapsed?a.getSelectionNodeCollection(c):a.getSelectionNodeCollectionBr(c),p=!1,u=!1,m=[\"fontcolor\",\"fontname\",\"fontsize\",\"backgroundcolor\"].indexOf(t)>-1;if(c.collapsed)if(h.length>0)p=!0,c=s.GetCursorRange(e,c,h[0]);else if(\"td\"!==c.startContainer.nodeName.toLowerCase()){var f=this.insertCursorNode(e,a,c,l,s,t,i,n);a.endContainer=a.startContainer=a.getNodeArray(f,!0),a.endOffset=a.startOffset=1}o=c.collapsed;for(var g=!1,b=0;b<h.length;b++){var v=l.getFormattedNode(h[b],t,n);null===v&&(\"subscript\"===t?g=null!==(v=l.getFormattedNode(h[b],\"superscript\",n)):\"superscript\"===t&&(g=null!==(v=l.getFormattedNode(h[b],\"subscript\",n)))),0===b&&null===v&&(u=!0),h[b]=null===v||u&&!m?this.insertFormat(e,h,b,v,o,u,m,c,s,t,i):this.removeFormat(h,b,v,o,u,m,c,s,t,i,a),a=this.applySelection(h,a,s,b,p)}ft()&&gt(n,r),d.restore(),g&&this.applyFormat(e,t,n)}},e.insertCursorNode=function(e,t,n,i,r,o,a,s){var l=t.getNodeCollection(n),c=l.length>0?i.getFormattedNode(l[0],o,s):null,d=null;return c?(d=l[0],Vt.unwrap(c)):d=this.getInsertNode(e,n,o,a).firstChild,d},e.removeFormat=function(e,t,n,i,r,o,a,s,c,d,h){var p,u,m=null;if(a.startContainer!==a.endContainer||0!==a.startOffset||a.endOffset!==a.startContainer.length){var f=[],g=e[t];do{f.push(h.getIndex(g)),g=g.parentNode}while(g&&g!==n);if(\"BR\"!==e[t].nodeName&&(g=m=i&&n.textContent.length-1===a.startOffset?s.SplitNode(a,n,!0):s.GetSpliceNode(a,n)),i){for(var b=m;null!==b.firstChild&&3!==b.firstChild.nodeType;null)b=b.firstChild;b.innerHTML=\"&#8203;\",e[t]=b.firstChild}else{for(;g&&g.childNodes.length>0&&f.length-1>=0&&g.childNodes.length>f[f.length-1];)g=g.childNodes[f[f.length-1]],f.pop();if(\"BR\"!==e[t].nodeName)if(3!==g.nodeType||i&&\"\"===g.nodeValue){var v=document.createElement(\"div\");v.innerHTML=\"&#8203;\",3!==g.nodeType?(g.insertBefore(v.firstChild,g.firstChild),e[t]=g.firstChild):(g.parentNode.insertBefore(v.firstChild,g),e[t]=g.previousSibling,g.parentNode.removeChild(g))}else e[t]=g}}if(\"backgroundcolor\"===c&&(p=n.style.fontSize),\"fontsize\"===c){var y=Object(l.C)(e[t].parentElement,\"span[style*=background-color]\");Object(l.W)(y)||(u=y.style.backgroundColor)}var C=n.getAttribute(\"style\"),O=n.tagName,S=Vt.unwrap(n);if(S.length>0&&o){for(var k=0;k<S.length;k++)S[k]=Vt.Wrap(S[k],this.GetFormatNode(c,d,O,C));var w=e[t].parentElement;if(Object(l.W)(p)||\"\"===p||(w.style.fontSize=p),Object(l.W)(u)||\"\"===u||(w.style.backgroundColor=u),\"backgroundcolor\"===c&&!Object(l.W)(p)&&\"\"!==p&&w.parentElement.innerHTML===w.outerHTML){var T=w.parentElement;T.parentElement.insertBefore(w,T),Object(l.I)(T)}if(\"fontsize\"===c){for(var E=e[t].parentElement,j=e[t].parentElement;!Object(l.W)(j)&&\"li\"!==j.tagName.toLowerCase();)E=j=j.parentElement;Object(l.W)(E)||\"li\"!==E.tagName.toLowerCase()||E.textContent.trim()!==e[t].textContent.trim()||(E.style.fontSize=d)}}return e[t]},e.insertFormat=function(e,t,n,i,r,o,a,s,c,d,h){if(r)if(\"uppercase\"!==d&&\"lowercase\"!==d){p=this.getInsertNode(e,s,d,h);t[n]=p.firstChild,c.position=1}else c.position=s.startOffset;else if(null===i&&o||a){if(\"BR\"!==t[n].nodeName&&(t[n]=c.GetSpliceNode(s,t[n]),t[n].textContent=c.TrimLineBreak(t[n].textContent)),\"uppercase\"===d||\"lowercase\"===d)t[n].textContent=\"uppercase\"===d?t[n].textContent.toLocaleUpperCase():t[n].textContent.toLocaleLowerCase();else if(!0!==a||\"\"!==h){var p=this.GetFormatNode(d,h);if(\"fontsize\"===d){for(var u=t[n].parentElement,m=t[n].parentElement;!Object(l.W)(m)&&\"li\"!==m.tagName.toLowerCase();)u=m=m.parentElement;Object(l.W)(u)||\"li\"!==u.tagName.toLowerCase()||u.textContent.trim()!==t[n].textContent.trim()||(u.style.fontSize=h),t[n]=this.applyStyles(t,n,p);var f=Object(l.C)(t[n].parentElement,\"span[style*=background-color]\");Object(l.W)(f)||(t[n].parentElement.style.backgroundColor=f.style.backgroundColor)}else t[n]=this.applyStyles(t,n,p)}}else t[n]=c.GetSpliceNode(s,t[n]);return t[n]},e.applyStyles=function(e,t,n){return e[t]=t===e.length-1||\"BR\"===e[t].nodeName?Vt.Wrap(e[t],n):Vt.WrapBefore(e[t],n,!0),e[t]=this.getChildNode(e[t],n),e[t]},e.getInsertNode=function(e,t,n,i){var r=this.GetFormatNode(n,i);if(r.innerHTML=\"&#8203;\",l.d.isIE){var o=e.createDocumentFragment();o.appendChild(r),t.insertNode(o)}else t.insertNode(r);return r},e.getChildNode=function(e,t){return null==e&&(t.innerHTML=\"&#8203;\",e=t.firstChild),e},e.applySelection=function(e,t,n,i,r){return 1!==e.length||r?1===e.length&&r?(t.startContainer=t.getNodeArray(e[i],!0),t.endContainer=t.startContainer,t.startOffset=n.position,t.endOffset=n.position):0===i?(t.startContainer=t.getNodeArray(e[i],!0),t.startOffset=0):i===e.length-1&&(t.endContainer=t.getNodeArray(e[i],!1),t.endOffset=e[i].textContent.length):(t.startContainer=t.getNodeArray(e[i],!0),t.endContainer=t.startContainer,t.startOffset=0,t.endOffset=e[i].textContent.length),t},e.GetFormatNode=function(e,t,n,i){var r;switch(e){case\"bold\":return document.createElement(\"strong\");case\"italic\":return document.createElement(\"em\");case\"underline\":return r=document.createElement(\"span\"),this.updateStyles(r,n,i),r.style.textDecoration=\"underline\",r;case\"strikethrough\":return r=document.createElement(\"span\"),this.updateStyles(r,n,i),r.style.textDecoration=\"line-through\",r;case\"superscript\":return document.createElement(\"sup\");case\"subscript\":return document.createElement(\"sub\");case\"fontcolor\":return r=document.createElement(\"span\"),this.updateStyles(r,n,i),r.style.color=t,r.style.textDecoration=\"inherit\",r;case\"fontname\":return r=document.createElement(\"span\"),this.updateStyles(r,n,i),r.style.fontFamily=t,r;case\"fontsize\":return r=document.createElement(\"span\"),this.updateStyles(r,n,i),r.style.fontSize=t,r;default:return r=document.createElement(\"span\"),this.updateStyles(r,n,i),r.style.backgroundColor=t,r}},e.updateStyles=function(e,t,n){null!==n&&\"SPAN\"===t&&e.setAttribute(\"style\",n)},e}(),rn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"selection-type\",this.applySelection,this),this.parent.observer.on(\"keydown-handler\",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){e.event.ctrlKey&&[\"bold\",\"italic\",\"underline\",\"strikethrough\",\"superscript\",\"subscript\",\"uppercase\",\"lowercase\"].indexOf(e.event.action)>-1&&(e.event.preventDefault(),nn.applyFormat(this.parent.currentDocument,e.event.action,this.parent.editableElement),this.callBack(e,e.event.action))},e.prototype.applySelection=function(e){nn.applyFormat(this.parent.currentDocument,e.subCommand.toLocaleLowerCase(),this.parent.editableElement,e.value,e.selector),this.callBack(e,e.subCommand)},e.prototype.callBack=function(e,t){e.callBack&&e.callBack({requestType:t,event:e.event,editorMode:\"HTML\",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),on=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"inserthtml-type\",this.applyHtml,this)},e.prototype.applyHtml=function(e){if(Kt.Insert(this.parent.currentDocument,e.value,this.parent.editableElement,!0),\"pasteCleanup\"===e.subCommand){var t=this.parent.editableElement.querySelectorAll(\".pasteContent_RTE\"),n=[].slice.call(t),i=this.parent.editableElement.querySelectorAll(\".pasteContent_Img\"),r=[].slice.call(i);e.callBack({requestType:e.subCommand,editorMode:\"HTML\",elements:n,imgElem:r})}else e.callBack&&e.callBack({requestType:e.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),an=function(){function e(){}return e.clear=function(e,t,n){var i=new It,r=new Qt,o=i.getRange(e),a=o.collapsed,s=i.getInsertNodeCollection(o),c=i.save(o,e);if(!a){var d=void 0;if(d=\"BR\"===s[0].nodeName&&Object(l.C)(s[0],\"table\")?r.GetSpliceNode(o,Object(l.C)(s[0],\"table\")):r.GetSpliceNode(o,s[s.length>1&&\"IMG\"===s[0].nodeName?1:0]),1===s.length)i.setSelectionContents(e,d),o=i.getRange(e);else{for(var h=1,p=s[s.length-h];s.length<=h&&\"BR\"===s[s.length-h].nodeName;)h++,p=s[s.length-h];var u=r.GetSpliceNode(o,p);i.setSelectionText(e,d,u,0,3===u.nodeType?u.textContent.length:u.childNodes.length),o=i.getRange(e)}var m=i.getNodeCollection(o),f=m.slice();this.clearInlines(i.getSelectionNodes(f),f,i.getRange(e),r,t),this.reSelection(e,c,m),o=i.getRange(e);var g=(m=i.getNodeCollection(o)).slice();this.clearBlocks(e,g,t,r,i),ft()&&gt(t,n),this.reSelection(e,c,m)}},e.reSelection=function(e,t,n){var i=t.getInsertNodes(n);t.startContainer=t.getNodeArray(i[0],!0,e),t.startOffset=0,t.endContainer=t.getNodeArray(i[i.length-1],!1,e);var r=i[i.length-1];t.endOffset=3===r.nodeType?r.textContent.length:r.childNodes.length,t.restore()},e.clearBlocks=function(e,t,n,i,r){for(var o=[],a=0;a<t.length;a++)this.BLOCK_TAGS.indexOf(t[a].nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[a])?o.push(t[a]):this.BLOCK_TAGS.indexOf(t[a].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[a].parentNode)&&n!==t[a].parentNode&&o.push(t[a].parentNode);o=this.spliceParent(o,t)[0],o=this.removeParent(o),this.unWrap(e,o,i,r)},e.spliceParent=function(e,t){for(var n=0;n<e.length;n++)for(var i=e[n].childNodes.length,r=0;r<i;r++)if(t.indexOf(e[n].childNodes[r])>0&&e[n].childNodes[r].childNodes.length>0&&(t=this.spliceParent([e[n].childNodes[r]],t)[1]),t.indexOf(e[n].childNodes[r])<=-1&&\"\"!==e[n].childNodes[r].textContent.trim()){for(var o=0;o<i;o++)t.indexOf(e[n].childNodes[o])>-1&&t.splice(t.indexOf(e[n].childNodes[o]),1);r=e[n].childNodes.length;var a=e.indexOf(e[n].parentNode),s=t.indexOf(e[n].parentNode);a>-1&&e.splice(a,1),s>-1&&t.splice(s,1);var l=t.indexOf(e[n]);l>-1&&t.splice(l,1),e.splice(n,1),n--}return[e,t]},e.removeChild=function(e,t){var n=t.childNodes.length;if(n>0)for(var i=0;i<n;i++)e.indexOf(t.childNodes[i])>-1&&(e=this.removeChild(e,t.childNodes[i])).splice(e.indexOf(t.childNodes[i]),1);return e},e.removeParent=function(e){for(var t=0;t<e.length;t++)e.indexOf(e[t].parentNode)>-1&&((e=this.removeChild(e,e[t])).splice(t,1),t--);return e},e.unWrap=function(e,t,n,i){for(var r=0;r<t.length;r++)if(this.NONVALID_TAGS.indexOf(t[r].nodeName.toLowerCase())>-1&&t[r].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(t[r].parentNode.nodeName.toLowerCase())>-1&&(i.setSelectionText(e,t[r],t[r],0,t[r].childNodes.length),Vt.unwrap(n.GetSpliceNode(i.getRange(e),t[r].parentNode))),\"p\"!==t[r].nodeName.toLocaleLowerCase()){!(this.NONVALID_PARENT_TAGS.indexOf(t[r].nodeName.toLowerCase())<0&&\"p\"!==t[r].parentNode.nodeName.toLocaleLowerCase())||(\"blockquote\"===t[r].nodeName.toLocaleLowerCase()||\"li\"===t[r].nodeName.toLocaleLowerCase())&&this.IGNORE_PARENT_TAGS.indexOf(t[r].childNodes[0].nodeName.toLocaleLowerCase())>-1||1===t[r].childNodes.length&&\"p\"===t[r].childNodes[0].nodeName.toLocaleLowerCase()||Vt.Wrap(t[r],e.createElement(\"p\"));var o=Vt.unwrap(t[r]);1===o.length&&\"p\"===o[0].parentNode.nodeName.toLocaleLowerCase()&&(Vt.Wrap(t[r],e.createElement(\"p\")),Vt.unwrap(t[r]));for(var a=0;a<o.length;a++)if(this.NONVALID_TAGS.indexOf(o[a].nodeName.toLowerCase())>-1)this.unWrap(e,[o[a]],n,i);else if(this.BLOCK_TAGS.indexOf(o[a].nodeName.toLocaleLowerCase())>-1&&\"p\"!==o[a].nodeName.toLocaleLowerCase()){var s=this.removeParent([o[a]]);this.unWrap(e,s,n,i)}else this.BLOCK_TAGS.indexOf(o[a].nodeName.toLocaleLowerCase())>-1&&o[a].parentNode.nodeName.toLocaleLowerCase()===o[a].nodeName.toLocaleLowerCase()?Vt.unwrap(o[a]):this.BLOCK_TAGS.indexOf(o[a].nodeName.toLocaleLowerCase())>-1&&\"p\"===o[a].nodeName.toLocaleLowerCase()&&(Vt.Wrap(o[a],e.createElement(\"p\")),Vt.unwrap(o[a]))}else Vt.Wrap(t[r],e.createElement(\"p\")),Vt.unwrap(t[r])},e.clearInlines=function(e,t,n,i,r){for(var o=0;o<e.length;o++)e[o].parentNode&&tn.inlineTags.indexOf(e[o].parentNode.nodeName.toLocaleLowerCase())>-1&&(i.GetSpliceNode(n,e[o].parentNode),this.removeInlineParent(e[o].parentNode))},e.removeInlineParent=function(e){for(var t=Vt.unwrap(e),n=0;n<t.length;n++)1===t[n].parentNode.childNodes.length&&tn.inlineTags.indexOf(t[n].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(t[n].parentNode):tn.inlineTags.indexOf(t[n].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(t[n])},e.BLOCK_TAGS=[\"address\",\"article\",\"aside\",\"blockquote\",\"details\",\"dd\",\"div\",\"dl\",\"dt\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"header\",\"hgroup\",\"li\",\"main\",\"nav\",\"noscript\",\"ol\",\"p\",\"pre\",\"section\",\"ul\"],e.NONVALID_PARENT_TAGS=[\"thead\",\"tbody\",\"ul\",\"ol\",\"table\",\"tfoot\",\"tr\"],e.IGNORE_PARENT_TAGS=[\"ul\",\"ol\",\"table\"],e.NONVALID_TAGS=[\"thead\",\"tbody\",\"figcaption\",\"td\",\"tr\",\"th\",\"tfoot\",\"figcaption\",\"li\"],e}(),sn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"clear-type\",this.applyClear,this),this.parent.observer.on(\"keydown-handler\",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case\"clear-format\":this.applyClear({subCommand:\"ClearFormat\",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyClear=function(e){\"ClearFormat\"===e.subCommand&&(an.clear(this.parent.currentDocument,this.parent.editableElement,e.selector),e.callBack&&e.callBack({requestType:e.subCommand,event:e.event,editorMode:\"HTML\",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},e}(),ln=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=Object(l.W)(t)?30:t.undoRedoSteps,this.undoRedoTimer=Object(l.W)(t)?300:t.undoRedoTimer,this.addEventListener()}return e.prototype.addEventListener=function(){var e=Object(l.G)(this.keyUp,this.undoRedoTimer);this.parent.observer.on(\"keyup-handler\",e,this),this.parent.observer.on(\"keydown-handler\",this.keyDown,this),this.parent.observer.on(\"action\",this.onAction,this),this.parent.observer.on(\"model_changed_plugin\",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,n=Object.keys(e.newProp);t<n.length;t++){switch(n[t]){case\"undoRedoSteps\":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case\"undoRedoTimer\":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){this.parent.observer.off(\"keyup-handler\",this.keyUp),this.parent.observer.off(\"keydown-handler\",this.keyDown),this.parent.observer.off(\"action\",this.onAction)},e.prototype.onAction=function(e){\"Undo\"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case\"undo\":t.preventDefault(),this.undo(e);break;case\"redo\":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=(new It).getRange(this.parent.currentDocument),n=(new It).save(t,this.parent.currentDocument),i={text:this.parent.editableElement.innerHTML,range:n};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===t.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===n.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===n.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===n.range.startContainer&&this.undoRedoStack[this.undoRedoStack.length-1].text.trim()===i.text.trim()||(this.undoRedoStack.push(i),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){var t=this.undoRedoStack[this.steps-1].range,n=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML=n,this.parent.editableElement.focus(),ft()&&gt(this.parent.editableElement,e.selector),t.restore(),this.steps--,e.callBack&&e.callBack({requestType:\"Undo\",editorMode:\"HTML\",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){var t=this.undoRedoStack[this.steps+1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps+1].text,this.parent.editableElement.focus(),ft()&&gt(this.parent.editableElement,e.selector),t.restore(),this.steps++,e.callBack&&e.callBack({requestType:\"Redo\",editorMode:\"HTML\",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),cn=function(){function e(e){this.olData=[\"decimal\",\"lower-alpha\",\"lower-roman\",\"upper-alpha\",\"upper-roman\",\"lower-greek\"],this.ulData=[\"disc\",\"square\",\"circle\",\"disc\",\"square\",\"circle\"],this.ignorableNodes=[\"A\",\"APPLET\",\"B\",\"BLOCKQUOTE\",\"BR\",\"BUTTON\",\"CENTER\",\"CODE\",\"COL\",\"COLGROUP\",\"DD\",\"DEL\",\"DFN\",\"DIR\",\"DIV\",\"DL\",\"DT\",\"EM\",\"FIELDSET\",\"FONT\",\"FORM\",\"FRAME\",\"FRAMESET\",\"H1\",\"H2\",\"H3\",\"H4\",\"H5\",\"H6\",\"HR\",\"I\",\"IMG\",\"IFRAME\",\"INPUT\",\"INS\",\"LABEL\",\"LI\",\"OL\",\"OPTION\",\"P\",\"PARAM\",\"PRE\",\"Q\",\"S\",\"SELECT\",\"SPAN\",\"STRIKE\",\"STRONG\",\"SUB\",\"SUP\",\"TABLE\",\"TBODY\",\"TD\",\"TEXTAREA\",\"TFOOT\",\"TH\",\"THEAD\",\"TITLE\",\"TR\",\"TT\",\"U\",\"UL\"],this.blockNode=[\"div\",\"p\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"address\",\"blockquote\",\"button\",\"center\",\"dd\",\"dir\",\"dl\",\"dt\",\"fieldset\",\"frameset\",\"hr\",\"iframe\",\"isindex\",\"li\",\"map\",\"menu\",\"noframes\",\"noscript\",\"object\",\"ol\",\"pre\",\"table\",\"tbody\",\"td\",\"tfoot\",\"th\",\"thead\",\"tr\",\"ul\",\"header\",\"article\",\"nav\",\"footer\",\"section\",\"aside\",\"main\",\"figure\",\"figcaption\"],this.borderStyle=[\"border-top\",\"border-right\",\"border-bottom\",\"border-left\"],this.removableElements=[\"o:p\",\"style\"],this.listContents=[],this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"ms_word_cleanup_plugin\",this.wordCleanup,this)},e.prototype.wordCleanup=function(e){var t=e.allowedStylePropertiesArray,n=[],i=e.args.clipboardData.getData(\"text/HTML\"),r=e.args.clipboardData.getData(\"text/rtf\"),o=Object(l.F)(\"p\");o.setAttribute(\"id\",\"MSWord-Content\"),o.innerHTML=i;var a=/style='mso-width-source:/i;/class='?Mso|style='[^ ]*\\bmso-/i.test(i)||/class=\"?Mso|style=\"[^ ]*\\bmso-/i.test(i)||/(class=\"?Mso|class='?Mso|class=\"?Xl|class='?Xl|class=Xl|style=\"[^\"]*\\bmso-|style='[^']*\\bmso-|w:WordDocument)/gi.test(i)||a.test(i)?(this.imageConversion(o,r),i=i.replace(/<img[^>]+>/i,\"\"),n=this.cleanUp(o,n),Object(l.W)(n[0])||\"UL\"===n[0].parentElement.tagName||\"OL\"===n[0].parentElement.tagName||this.listConverter(n),this.styleCorrection(o,t),this.removingComments(o),this.removeUnwantedElements(o),this.removeEmptyElements(o),this.breakLineAddition(o),this.removeClassName(o),a.test(i)&&this.addTableBorderClass(o),e.callBack(o.innerHTML)):e.callBack(o.innerHTML)},e.prototype.addTableBorderClass=function(e){for(var t=e.querySelectorAll(\"table\"),n=!1,i=0;i<t.length;i++){for(var r=0;r<this.borderStyle.length;r++)if(t[i].innerHTML.indexOf(this.borderStyle[r])>=0){n=!0;break}n&&(t[i].classList.add(\"e-rte-table-border\"),n=!1)}},e.prototype.imageConversion=function(e,t){this.checkVShape(e);var n=e.querySelectorAll(\"img\"),i=[],r=[],o=[];if(n.length>0){for(var a=0;a<n.length;a++)i.push(n[a].getAttribute(\"src\")),o.push(n[a].getAttribute(\"src\").split(\"/\")[n[a].getAttribute(\"src\").split(\"/\").length-1].split(\".\")[0]);var s=this.hexConversion(t);for(a=0;a<s.length;a++)r.push(this.convertToBase64(s[a]));for(a=0;a<n.length;a++)n[a].setAttribute(\"src\",r[a]),n[a].setAttribute(\"id\",\"msWordImg-\"+o[a])}},e.prototype.checkVShape=function(e){for(var t=e.querySelectorAll(\"*\"),n=0;n<t.length;n++)switch(t[n].nodeName){case\"V:SHAPETYPE\":Object(l.I)(t[n]);break;case\"V:SHAPE\":if(\"V:IMAGEDATA\"===t[n].firstElementChild.nodeName){var i=t[n].firstElementChild.getAttribute(\"src\"),r=Object(l.F)(\"img\");r.setAttribute(\"src\",i),t[n].parentElement.insertBefore(r,t[n]),Object(l.I)(t[n])}}},e.prototype.convertToBase64=function(e){var t=this.conHexStringToBytes(e.hex),n=this.conBytesToBase64(t);return e.type?\"data:\"+e.type+\";base64,\"+n:null},e.prototype.conBytesToBase64=function(e){for(var t=\"\",n=e.length,i=0;i<n;i+=3){var r=e.slice(i,i+3),o=r.length,a=[];if(o<3)for(var s=o;s<3;s++)r[s]=0;a[0]=(252&r[0])>>2,a[1]=(3&r[0])<<4|r[1]>>4,a[2]=(15&r[1])<<2|(192&r[2])>>6,a[3]=63&r[2];for(s=0;s<4;s++)t+=s<=o?\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".charAt(a[s]):\"=\"}return t},e.prototype.conHexStringToBytes=function(e){for(var t=[],n=e.length/2,i=0;i<n;i++)t.push(parseInt(e.substr(2*i,2),16));return t},e.prototype.hexConversion=function(e){var t,n=/\\{\\\\pict[\\s\\S]+?\\\\bliptag\\-?\\d+(\\\\blipupi\\-?\\d+)?(\\{\\\\\\*\\\\blipuid\\s?[\\da-fA-F]+)?[\\s\\}]*?/,i=new RegExp(\"(?:(\"+n.source+\"))([\\\\da-fA-F\\\\s]+)\\\\}\",\"g\"),r=e.match(i),o=[];if(!Object(l.W)(r))for(var a=0;a<r.length;a++)if(n.test(r[a])){if(-1!==r[a].indexOf(\"\\\\pngblip\"))t=\"image/png\";else{if(-1===r[a].indexOf(\"\\\\jpegblip\"))continue;t=\"image/jpeg\"}o.push({hex:t?r[a].replace(n,\"\").replace(/[^\\da-fA-F]/g,\"\"):null,type:t})}return o},e.prototype.removeClassName=function(e){for(var t=e.querySelectorAll(\"*[class]\"),n=0;n<t.length;n++)t[n].removeAttribute(\"class\")},e.prototype.breakLineAddition=function(e){for(var t=e.querySelectorAll(\"*\"),n=0;n<t.length;n++)if(0===t[n].children.length&&\"&nbsp;\"===t[n].innerHTML&&\"&nbsp;\"===t[n].innerHTML&&!t[n].closest(\"li\")&&!t[n].closest(\"td\")){var i=this.findDetachElem(t[n]),r=Object(l.F)(\"br\");Object(l.W)(i.parentElement)||(i.parentElement.insertBefore(r,i),Object(l.I)(i))}},e.prototype.findDetachElem=function(e){return Object(l.W)(e.parentElement)||\"\"!==e.parentElement.textContent.trim()||\"TD\"===e.parentElement.tagName?e:this.findDetachElem(e.parentElement)},e.prototype.removeUnwantedElements=function(e){for(var t=e.innerHTML,n=0;n<this.removableElements.length;n++){var i=new RegExp(\"<\"+this.removableElements[n]+\">\",\"g\"),r=new RegExp(\"</\"+this.removableElements[n]+\">\",\"g\");t=(t=t.replace(i,\"\")).replace(r,\"\")}e.innerHTML=t,e.querySelectorAll(\":empty\")},e.prototype.findDetachEmptyElem=function(e){return Object(l.W)(e.parentElement)?null:\"\"===e.parentElement.textContent.trim()&&\"MSWord-Content\"!==e.parentElement.getAttribute(\"id\")&&Object(l.W)(e.parentElement.querySelector(\"img\"))?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(\":empty\"),n=0;n<t.length;n++)if(\"IMG\"!==t[n].tagName&&\"BR\"!==t[n].tagName&&\"IFRAME\"!==t[n].tagName&&\"TD\"!==t[n].tagName&&\"HR\"!==t[n].tagName){var i=this.findDetachEmptyElem(t[n]);Object(l.W)(i)||Object(l.I)(i)}},e.prototype.styleCorrection=function(e,t){var n=e.querySelectorAll(\"style\");if(n.length>0){var i=n[0].innerHTML.match(/[\\S ]+\\s+{[\\s\\S]+?}/gi),r=Object(l.W)(i)?null:this.findStyleObject(i),o=Object.keys(r),a=o.map((function(e){return r[e]}));a=this.removeUnwantedStyle(a,t),this.filterStyles(e,t);for(var s=void 0,c=!1,d=0;d<o.length;d++){if(\"\"===o[d].split(\".\")[0])s=e.getElementsByClassName(o[d].split(\".\")[1]),c=!0;else{if(1===o[d].split(\".\").length&&o[d].split(\".\")[0].indexOf(\"@\")>=0)continue;s=1===o[d].split(\".\").length&&o[d].split(\".\")[0].indexOf(\"@\")<0?e.getElementsByTagName(o[d]):e.querySelectorAll(o[d])}for(var h=0;h<s.length;h++){var p=s[h].getAttribute(\"style\");if(Object(l.W)(p)||\"\"===p.trim())s[h].setAttribute(\"style\",a[d]);else{var u=a[d].split(\";\");if(!c)for(var m=0;m<u.length;m++)p.indexOf(u[m].split(\":\")[0])>=0&&(u.splice(m,1),m--);a[d]=u.join(\";\")+\";\";var f=p+a[d];s[h].setAttribute(\"style\",f)}}c=!1}}},e.prototype.filterStyles=function(e,t){for(var n=e.querySelectorAll(\"*[style]\"),i=0;i<n.length;i++){for(var r=n[i].getAttribute(\"style\").split(\";\"),o=\"\",a=0;a<r.length;a++)t.indexOf(r[a].split(\":\")[0].trim())>=0&&(o+=r[a]+\";\");n[i].setAttribute(\"style\",o)}},e.prototype.removeUnwantedStyle=function(e,t){for(var n=0;n<e.length;n++){var i=e[n].split(\";\");e[n]=\"\";for(var r=0;r<i.length;r++)t.indexOf(i[r].split(\":\")[0])>=0&&(e[n]+=i[r]+\";\")}return e},e.prototype.findStyleObject=function(e){for(var t={},n=0;n<e.length;n++){var i=e[n],r=i.replace(/([\\S ]+\\s+){[\\s\\S]+?}/gi,\"$1\"),o=i.replace(/[\\S ]+\\s+{([\\s\\S]+?)}/gi,\"$1\");r=r.replace(/^[\\s]|[\\s]$/gm,\"\"),o=o.replace(/^[\\s]|[\\s]$/gm,\"\"),r=r.replace(/\\n|\\r|\\n\\r/g,\"\"),o=o.replace(/\\n|\\r|\\n\\r/g,\"\");for(var a=r.split(\", \"),s=0;s<a.length;s++)t[a[s]]=o}return t},e.prototype.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\\s\\S]*?-->/g,\"\"),e.innerHTML=t},e.prototype.cleanUp=function(e,t){for(var n,i=[],r=e.querySelectorAll(\"*\"),o=0;o<r.length;o++)-1===this.ignorableNodes.indexOf(r[o].nodeName)||3===r[o].nodeType&&\"\"===r[o].textContent.trim()?i.push(r[o]):(r[o].className&&-1!==r[o].className.toLowerCase().indexOf(\"msolistparagraph\")&&1!==r[o].childElementCount&&t.push(r[o]),!n||-1===this.blockNode.indexOf(r[o].nodeName.toLowerCase())||r[o].className&&-1!==r[o].className.toLowerCase().indexOf(\"msolistparagraph\")||t.push(null),-1!==this.blockNode.indexOf(r[o].nodeName.toLowerCase())&&(n=!(!r[o].className||-1===r[o].className.toLowerCase().indexOf(\"msolistparagraph\"))));return t.length&&null!==t[t.length-1]&&t.push(null),t},e.prototype.listConverter=function(e){for(var t,n,i=[],r=[],o=\"\",a=0;a<e.length;a++)if(null!==e[a]){t=(o=e[a].getAttribute(\"style\"))&&-1!==o.indexOf(\"level\")?parseInt(o.charAt(o.indexOf(\"level\")+5),null):1,this.listContents=[],this.getListContent(e[a]);var s=void 0;if(!Object(l.W)(this.listContents[0])){s=this.listContents[0].trim().length>1?\"ol\":\"ul\";for(var c=[],d=1;d<this.listContents.length;d++)c.push(this.listContents[d]);r.push({listType:s,content:c,nestedLevel:t})}}else i.push({content:this.makeConversion(r),node:e[a-1]}),r=[];for(n=e.shift();n;){for(var h=[],p=0;p<i.length;p++)if(i[p].node===n){for(var u=0;u<i[p].content.childNodes.length;u++)h.push(i[p].content.childNodes[u]);for(u=0;u<h.length;u++)n.parentElement.insertBefore(h[u],n);break}n.remove(),(n=e.shift())||(n=e.shift())}},e.prototype.makeConversion=function(e){for(var t,n,i,r=Object(l.F)(\"div\"),o=1,a=0,s=0;s<e.length;s++){var c=Object(l.F)(\"p\");if(c.innerHTML=e[s].content.join(\" \"),1===e[s].nestedLevel&&0===a&&e[s].content)r.appendChild(t=Object(l.F)(e[s].listType)),(n=Object(l.F)(\"li\")).appendChild(c),t.appendChild(n),t.setAttribute(\"level\",e[s].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[s].listType,e[s].nestedLevel);else if(e[s].nestedLevel===o)n.parentElement.tagName.toLowerCase()===e[s].listType?(n.parentElement.appendChild(n=Object(l.F)(\"li\")),n.appendChild(c)):(t=Object(l.F)(e[s].listType),n.parentElement.parentElement.appendChild(t),(n=Object(l.F)(\"li\")).appendChild(c),t.appendChild(n),t.setAttribute(\"level\",e[s].nestedLevel.toString()));else if(e[s].nestedLevel>o)if(Object(l.W)(n))r.appendChild(t=Object(l.F)(e[s].listType)),(n=Object(l.F)(\"li\")).appendChild(c),t.appendChild(n),t.setAttribute(\"level\",e[s].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[s].listType,e[s].nestedLevel);else{for(var d=0;d<e[s].nestedLevel-o;d++)n.appendChild(t=Object(l.F)(e[s].listType)),n=Object(l.F)(\"li\",{styles:\"list-style-type: none;\"}),t.appendChild(n);n.appendChild(c),t.setAttribute(\"level\",e[s].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[s].listType,e[s].nestedLevel),t.childNodes[0].style.listStyle=this.getListStyle(e[s].listType,e[s].nestedLevel)}else if(1===e[s].nestedLevel)r.lastChild.tagName.toLowerCase()===e[s].listType?t=r.lastChild:r.appendChild(t=Object(l.F)(e[s].listType)),(n=Object(l.F)(\"li\")).appendChild(c),t.appendChild(n),t.setAttribute(\"level\",e[s].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[s].listType,e[s].nestedLevel);else for(i=n;i.parentElement;)if((i=i.parentElement).attributes.getNamedItem(\"level\")){if(parseInt(i.attributes.getNamedItem(\"level\").textContent,null)===e[s].nestedLevel){(n=Object(l.F)(\"li\")).appendChild(c),i.appendChild(n);break}if(e[s].nestedLevel>parseInt(i.attributes.getNamedItem(\"level\").textContent,null)){i.appendChild(t=Object(l.F)(e[s].listType)),(n=Object(l.F)(\"li\")).appendChild(c),t.appendChild(n),t.setAttribute(\"level\",e[s].nestedLevel.toString()),t.style.listStyle=this.getListStyle(e[s].listType,e[s].nestedLevel);break}}o=e[s].nestedLevel,a++}return r},e.prototype.getListStyle=function(e,t){return t=t>0?t-1:t,\"ol\"===e?t<this.olData.length?this.olData[t]:this.olData[0]:t<this.ulData.length?this.ulData[t]:this.ulData[0]},e.prototype.getListContent=function(e){var t=\"\";\"\"!==e.firstElementChild.textContent.trim()||Object(l.W)(e.firstElementChild.firstElementChild)||\"IMG\"!==e.firstElementChild.firstElementChild.nodeName?(t=e.firstElementChild.textContent.trim(),this.listContents.push(t)):(t=e.innerHTML.trim(),this.listContents.push(\"\"),this.listContents.push(t)),Object(l.I)(e.firstElementChild),this.listContents.push(e.innerHTML)},e}(),dn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"insert-text-type\",this.insertText,this)},e.prototype.insertText=function(e){var t=document.createTextNode(e.value);Kt.Insert(this.parent.currentDocument,t),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:\"HTML\",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),hn=function(){function e(e){this.currentDocument=e.document,this.editableElement=e.editableElement,this.nodeSelection=new It,this.domNode=new qt(this.editableElement,this.currentDocument),this.observer=new l.r(this),this.listObj=new Ut(this),this.formatObj=new Gt(this),this.alignmentObj=new Yt(this),this.indentsObj=new Jt(this),this.linkObj=new Xt(this),this.imgObj=new Zt(this),this.selectionObj=new rn(this),this.inserthtmlObj=new on(this),this.insertTextObj=new dn(this),this.clearObj=new sn(this),this.tableObj=new en(this),this.undoRedoManager=new ln(this,e.options),this.msWordPaste=new cn(this),this.wireEvents()}return e.prototype.wireEvents=function(){this.observer.on(\"keydown\",this.editorKeyDown,this),this.observer.on(\"keyup\",this.editorKeyUp,this),this.observer.on(\"keyup\",this.editorKeyUp,this),this.observer.on(\"model_changed\",this.onPropertyChanged,this),this.observer.on(\"ms_word_cleanup\",this.onWordPaste,this)},e.prototype.onWordPaste=function(e){this.observer.notify(\"ms_word_cleanup_plugin\",e)},e.prototype.onPropertyChanged=function(e){this.observer.notify(\"model_changed_plugin\",e)},e.prototype.editorKeyDown=function(e){this.observer.notify(\"keydown-handler\",e)},e.prototype.editorKeyUp=function(e){this.observer.notify(\"keyup-handler\",e)},e.prototype.execCommand=function(e,t,n,i,r,o,a){switch(e.toLocaleLowerCase()){case\"lists\":this.observer.notify(\"list-type\",{subCommand:t,event:n,callBack:i,selector:a});break;case\"formats\":this.observer.notify(\"format-type\",{subCommand:t,event:n,callBack:i,selector:a,exeValue:o});break;case\"alignments\":this.observer.notify(\"alignment-type\",{subCommand:t,event:n,callBack:i,selector:a,value:o});break;case\"indents\":this.observer.notify(\"indent-type\",{subCommand:t,event:n,callBack:i,selector:a});break;case\"links\":this.observer.notify(\"INSERT-LINK\",{command:e,value:t,item:o,event:n,callBack:i});break;case\"files\":this.observer.notify(Nt,{command:e,value:\"Image\",item:o,event:n,callBack:i,selector:a});break;case\"images\":this.observer.notify(Nt,{command:e,value:t,item:o,event:n,callBack:i,selector:a});break;case\"table\":switch(t.toString().toLocaleLowerCase()){case\"createtable\":this.observer.notify(\"INSERT-TABLE\",{item:o,event:n,callBack:i});break;case\"insertrowbefore\":case\"insertrowafter\":this.observer.notify(\"INSERT-ROW\",{item:o,event:n,callBack:i});break;case\"insertcolumnleft\":case\"insertcolumnright\":this.observer.notify(\"INSERT-COLUMN\",{item:o,event:n,callBack:i});break;case\"deleterow\":this.observer.notify(\"DELETE-ROW\",{item:o,event:n,callBack:i});break;case\"deletecolumn\":this.observer.notify(\"DELETE-COLUMN\",{item:o,event:n,callBack:i});break;case\"tableremove\":this.observer.notify(\"REMOVE-TABLE\",{item:o,event:n,callBack:i});break;case\"tableheader\":this.observer.notify(\"TABLE-HEADER\",{item:o,event:n,callBack:i});break;case\"aligntop\":case\"alignmiddle\":case\"alignbottom\":this.observer.notify(\"TABLE_VERTICAL_ALIGN\",{item:o,event:n,callBack:i})}break;case\"font\":case\"style\":case\"effects\":case\"casing\":this.observer.notify(\"selection-type\",{subCommand:t,event:n,callBack:i,value:r,selector:a});break;case\"inserthtml\":this.observer.notify(\"inserthtml-type\",{subCommand:t,callBack:i,value:r});break;case\"inserttext\":this.observer.notify(\"insert-text-type\",{subCommand:t,callBack:i,value:r});break;case\"clear\":this.observer.notify(\"clear-type\",{subCommand:t,event:n,callBack:i,selector:a});break;case\"actions\":this.observer.notify(\"action\",{subCommand:t,event:n,callBack:i,selector:a})}},e}(),pn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),un=function(e){function t(t){var n=e.call(this)||this;return n.initialize(),Object(l.J)(n,n,t,!0),n.currentDocument&&n.element&&n.updateFormatter(n.element,n.currentDocument,t.options),n}return pn(t,e),t.prototype.initialize=function(){this.keyConfig=At},t.prototype.updateFormatter=function(e,t,n){e&&t&&(this.editorManager=new hn({document:t,editableElement:e,options:n}))},t}(xt),mn={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},fn=function(){function e(){}return e.get=function(e,t,n,i,r,o){for(var a=JSON.parse(JSON.stringify(mn)),s=JSON.parse(JSON.stringify(mn)),l=new It,c=o?[o]:l.getNodeCollection(l.getRange(e)),d=c.length,h=0;h<c.length;h++)(\"BR\"!==c[h].nodeName&&3!==c[h].nodeType||d>1&&3===c[h].nodeType&&\"\"===c[h].textContent.trim())&&(c.splice(h,1),h--);for(h=0;h<c.length;h++)a=this.getFormatParent(e,a,c[h],t,n,i,r),(0===h&&a.bold||!a.bold)&&(s.bold=a.bold),(0===h&&a.insertcode||!a.insertcode)&&(s.insertcode=a.insertcode),(0===h&&a.italic||!a.italic)&&(s.italic=a.italic),(0===h&&a.underline||!a.underline)&&(s.underline=a.underline),(0===h&&a.strikethrough||!a.strikethrough)&&(s.strikethrough=a.strikethrough),(0===h&&a.superscript||!a.superscript)&&(s.superscript=a.superscript),(0===h&&a.subscript||!a.subscript)&&(s.subscript=a.subscript),(0===h&&a.fontcolor||!a.fontcolor)&&(s.fontcolor=a.fontcolor),(0===h&&a.fontname||!a.fontname)&&(s.fontname=a.fontname),(0===h&&a.fontsize||!a.fontsize)&&(s.fontsize=a.fontsize),(0===h&&a.backgroundcolor||!a.backgroundcolor)&&(s.backgroundcolor=a.backgroundcolor),(0===h&&a.orderedlist||!a.orderedlist)&&(s.orderedlist=a.orderedlist),(0===h&&a.unorderedlist||!a.unorderedlist)&&(s.unorderedlist=a.unorderedlist),(0===h&&a.alignments||!a.alignments)&&(s.alignments=a.alignments),(0===h&&a.formats||!a.formats)&&(s.formats=a.formats),(0===h&&a.createlink||!a.createlink)&&(s.createlink=a.createlink),a=JSON.parse(JSON.stringify(mn));return s},e.getFormatParent=function(e,t,n,i,r,o,a){if(i.contains(n)||3===n.nodeType&&3!==i.nodeType&&i.contains(n.parentNode))do{t=this.isFormattedNode(e,t,n,r,o,a),n=n.parentNode}while(n&&n!==i);return t},e.isFormattedNode=function(e,t,n,i,r,o){return t.bold||(t.bold=tn.isBold(n)),t.italic||(t.italic=tn.isItalic(n)),t.underline||(t.underline=tn.isUnderline(n)),t.strikethrough||(t.strikethrough=tn.isStrikethrough(n)),t.superscript||(t.superscript=tn.isSuperscript(n)),t.subscript||(t.subscript=tn.isSubscript(n)),t.fontcolor||(t.fontcolor=this.isFontColor(e,n)),t.fontname||(t.fontname=this.isFontName(e,n,o)),t.fontsize||(t.fontsize=this.isFontSize(n,r)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(n)),t.orderedlist||(t.orderedlist=this.isOrderedList(n)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(n)),t.alignments||(t.alignments=this.isAlignment(n)),t.formats||(t.formats=this.isFormats(n,i),\"pre\"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(n)),t},e.isFontColor=function(e,t){var n=t.style&&t.style.color;return null!=n&&\"\"!==n||3===t.nodeType||(n=this.getComputedStyle(e,t,\"color\")),null!==n&&\"\"!==n&&void 0!==n?n:null},e.isLink=function(e){return\"a\"===e.nodeName.toLocaleLowerCase()},e.isBackgroundColor=function(e){var t=e.style&&e.style.backgroundColor;return null!==t&&\"\"!==t&&void 0!==t?t:null},e.isFontSize=function(e,t){var n=e.style&&e.style.fontSize;return null!==n&&\"\"!==n&&void 0!==n&&(null==t||t.indexOf(n)>-1)?n:null},e.isFontName=function(e,t,n){var i=t.style&&t.style.fontFamily;null!=i&&\"\"!==i||3===t.nodeType||(i=this.getComputedStyle(e,t,\"font-family\"));var r=null;return null!==i&&\"\"!==i&&void 0!==i&&(null==n||n.filter((function(e,t){var n=new RegExp(i,\"i\");(e.replace(/\"/g,\"\").replace(/ /g,\"\")===i.replace(/\"/g,\"\").replace(/ /g,\"\")||e.search(n)>-1)&&(r=t)}))&&null!==r)?null!==r?n[r]:i.replace(/\"/g,\"\"):null},e.isOrderedList=function(e){return\"ol\"===e.nodeName.toLocaleLowerCase()},e.isUnorderedList=function(e){return\"ul\"===e.nodeName.toLocaleLowerCase()},e.isAlignment=function(e){var t=e.style&&e.style.textAlign;return\"left\"===t?\"justifyleft\":\"center\"===t?\"justifycenter\":\"right\"===t?\"justifyright\":\"justify\"===t?\"justifyfull\":null},e.isFormats=function(e,t){return null==t&&Lt.indexOf(e.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(e.nodeName.toLocaleLowerCase())>-1?e.nodeName.toLocaleLowerCase():null},e.getComputedStyle=function(e,t,n){return e.defaultView.getComputedStyle(t,null).getPropertyValue(n)},e}(),gn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(\"toolbar-refresh\",this.onRefreshHandler,this),this.parent.on(h,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off(\"toolbar-refresh\",this.onRefreshHandler),this.parent.off(h,this.removeEventListener)},e.prototype.onRefreshHandler=function(e){if(!this.parent.readonly){var t=[],n=[],i=[];this.parent.fontSize.items.forEach((function(e){t.push(e.value)})),this.parent.fontFamily.items.forEach((function(e){n.push(e.value)})),this.parent.format.types.forEach((function(e){i.push(e.value.toLocaleLowerCase())})),this.toolbarStatus=fn.get(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel(),i,t,n,e.documentNode),this.parent.notify(\"toolbar-updated\",this.toolbarStatus)}},e}(),bn=function(){function e(e,t){this.parent=e,this.serviceLocator=t}return e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.createElement(\"div\",{className:\"e-rte-content\",id:this.parent.getID()+\"rte-view\"}),n=Ge(e.value,e);this.editableElement=this.parent.createElement(\"div\",{className:\"e-content\",id:this.parent.getID()+\"_rte-edit-view\",attrs:{contenteditable:\"true\"},innerHTML:n}),t.appendChild(this.editableElement),this.setPanel(t),e.element.appendChild(t)},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getEditPanel=function(){return this.editableElement},e.prototype.getText=function(){return this.getEditPanel().innerText},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},e}(),vn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vn(t,e),t.prototype.renderPanel=function(){var e=this.parent,t=\"\\n<!DOCTYPE html> \\n    <html>\\n         <head>\\n            <meta charset='utf-8' /> \\n            <style>\\n                @charset \\\"UTF-8\\\";\\n                body {\\n                    font-family: \\\"Roboto\\\", sans-serif;\\n                    font-size: 14px;\\n                }\\n                html, body{height: 100%;margin: 0;}\\n                body.e-cursor{cursor:default}\\n                span.e-selected-node\\t{background-color: #939393;color: white;}\\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\\n                .e-rte-image {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\\n                .e-imgleft {float: left;margin: 0 5px 0 0;text-align: left;}\\n                .e-imgright {float: right;margin: 0 0 0 5px;text-align: right;}\\n                .e-imgcenter {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\\n                .e-imginline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\\n                .e-imgbreak {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\\n                .e-rte-image.e-img-focus:not(.e-resize) {border: solid 2px #4a90e2;}\\n                img::selection { background: transparent;color: transparent;}\\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\\n                .e-img-caption .e-img-inner { outline: 0; }\\n                .e-img-caption .e-rte-image.e-imgright, .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\\n                p{margin: 0 0 10px;margin-bottom: 10px;}\\n                li{margin-bottom: 10px;}\\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\\n                strong, b{font-weight: 700;}\\n                a{text-decoration: none;user-select: auto;}\\n                a:hover{text-decoration: underline;};\\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\\n                ul:last-child{margin-bottom: 0;}\\n                table { border-collapse: collapse; empty-cells: show;}\\n                table td,table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;}\\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\\n                table th {background-color: #E0E0E0;}\\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \\n                table .e-cell-select {border: 1px double #4a90e2;}\\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\\n                .e-row-resize { cursor: row-resize; height: 1px;}\\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\\n                .e-table-rhelper.e-column-helper { width: 1px; }\\n                .e-table-rhelper.e-row-helper {height: 1px;}\\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: ''; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\\n                .e-table-rhelper { background-color: #4a90e2;}\\n                .e-rtl { direction: rtl; }\\n            </style>\\n        </head>\"+('<body spellcheck=\"false\" autocorrect=\"off\" contenteditable=\"true\">'+Ge(e.value,e)+\"</body></html>\"),n=this.parent.createElement(\"iframe\",{innerHTML:t,id:this.parent.getID()+\"_rte-view\",className:\"e-rte-content\",styles:\"display:block;\"});this.setPanel(n),e.element.appendChild(n),n.contentDocument.body.id=this.parent.getID()+\"_rte-edit-view\",n.contentDocument.body.setAttribute(\"aria-owns\",this.parent.getID()),n.contentDocument.open(),t=this.setThemeColor(t,{color:\"#333\"}),n.contentDocument.write(t),n.contentDocument.close(),e.enableRtl&&this.contentPanel.contentDocument.body.setAttribute(\"class\",\"e-rtl\")},t.prototype.setThemeColor=function(e,t){var n=getComputedStyle(this.parent.element,\".e-richtexteditor\").getPropertyValue(\"color\");return e.replace(t.color,n)},t.prototype.getEditPanel=function(){return Object(l.W)(this.contentPanel.contentDocument)?this.parent.inputElement:this.contentPanel.contentDocument.body},t.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},t}(bn),Cn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(\"xhtmlValidation\",this.enableXhtmlValidation,this),this.parent.on(h,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off(\"xhtmlValidation\",this.enableXhtmlValidation),this.parent.off(h,this.removeEventListener)},e.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(Object(l.W)(this.parent.inputElement)?this.currentElement=this.parent.element:this.currentElement=this.parent.inputElement,this.clean(this.currentElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.currentElement.innerHTML=this.selfEncloseValidation(this.currentElement.innerHTML),this.parent.setProperties({value:this.currentElement.innerHTML},!0))},e.prototype.selfEncloseValidation=function(e){var t;e=e.replace(/<br>/g,\"<br/>\").replace(/<hr>/g,\"<hr/>\").replace(/&nbsp;/gi,\" \").replace(/ /g,\" \");for(var n=[],i=[],r=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi],o=0;o<r.length;o++){for(t=r[o].exec(e);null!==t;)n.push(t[0].toString()),t=r[o].exec(e);i=n.slice(0);for(var a=0;a<n.length;a++)-1!==n[a].indexOf(\"/\")&&n[a].lastIndexOf(\"/\")===n[a].length-2||(n[a]=n[a].substr(0,n[a].length-1)+\" /\"+n[a].substr(n[a].length-1,n[a].length));for(var s=0;s<=n.length-1;s++)e=e.replace(i[s],n[s])}return e},e.prototype.AddRootElement=function(){if(1===this.currentElement.childNodes.length&&\"DIV\"!==this.currentElement.firstChild.nodeName||this.currentElement.childNodes.length>1){for(var e=this.parent.createElement(\"div\");this.currentElement.childNodes.length>0;)e.appendChild(this.currentElement.childNodes[0]);this.currentElement.appendChild(e)}},e.prototype.clean=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];8===n.nodeType||\"V:IMAGE\"===n.nodeName?(e.removeChild(n),t--):1===n.nodeType&&this.clean(n)}return this.currentElement.innerHTML},e.prototype.ImageTags=function(){for(var e=this.currentElement.querySelectorAll(\"IMG\"),t=e.length-1;t>=0;t--){if(!e[t].hasAttribute(\"alt\"))e[t].setAttribute(\"alt\",\"\")}},e.prototype.removeTags=function(){for(var e=[[\"br\",\"ul\"],[\"br\",\"ol\"],[\"table\",\"span\"],[\"div\",\"span\"],[\"p\",\"span\"]],t=0;t<e.length;t++)this.RemoveElementNode(e[t][0],e[t][1])},e.prototype.RemoveElementNode=function(e,t){for(var n=this.currentElement.querySelectorAll(t),i=0;i<n.length;i++)for(var r=n[i].querySelectorAll(e),o=r.length;o>0;o--)Object(l.I)(r[o-1])},e.prototype.RemoveUnsupported=function(){for(var e=this.currentElement.querySelectorAll(\"u\"),t=e.length-1;t>=0;t--){var n=this.parent.createElement(\"span\");n.style.textDecoration=\"underline\",n.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(n,e[t]),Object(l.I)(e[t])}var i=this.currentElement.querySelectorAll(\"strong\");for(t=i.length-1;t>=0;t--){var r=this.parent.createElement(\"b\");r.innerHTML=i[t].innerHTML,i[t].parentNode.insertBefore(r,i[t]),Object(l.I)(i[t])}var o=[\"language\",\"role\",\"target\",\"contenteditable\",\"cellspacing\",\"cellpadding\",\"border\",\"valign\",\"colspan\"];for(t=0;t<=o.length;t++)this.RemoveAttributeByName(o[t])},e.prototype.RemoveAttributeByName=function(e){if(null!==this.currentElement.firstChild&&3!==this.currentElement.firstChild.nodeType)for(var t=0;t<this.currentElement.childNodes.length;t++){var n=this.currentElement.childNodes[t];if(3!==n.nodeType&&\"TABLE\"!==n.nodeName&&\"TBODY\"!==n.nodeName&&\"THEAD\"!==n.nodeName&&\"TH\"!==n.nodeName&&\"TR\"!==n.nodeName&&\"TD\"!==n.nodeName&&(n.hasAttribute(e)&&n.removeAttribute(e),n.hasChildNodes()))for(var i=0;i<n.childNodes.length;i++){var r=n.childNodes[i];if(3!==r.nodeType&&\"TABLE\"!==r.nodeName&&\"TBODY\"!==r.nodeName&&\"THEAD\"!==r.nodeName&&\"TH\"!==r.nodeName&&\"TR\"!==r.nodeName&&\"TD\"!==r.nodeName&&r.hasAttribute(e)&&r.removeAttribute(e),r.hasChildNodes())for(var o=0;o<r.childNodes.length;o++)3!==r.childNodes[o].nodeType&&\"TABLE\"!==r.childNodes[o].nodeName&&\"TBODY\"!==r.childNodes[o].nodeName&&\"THEAD\"!==r.childNodes[o].nodeName&&\"TH\"!==r.childNodes[o].nodeName&&\"TR\"!==r.childNodes[o].nodeName&&\"TD\"!==r.childNodes[o].nodeName&&r.childNodes[o].hasAttribute(e)&&r.childNodes[o].removeAttribute(e)}}},e}(),On=function(){function e(e,t){this.rangeCollection=[],this.parent=e,this.locator=t,this.renderFactory=this.locator.getService(\"rendererFactory\"),this.xhtmlValidation=new Cn(e),this.addEventListener()}return e.prototype.destroy=function(){this.removeEventListener()},e.prototype.sanitizeHelper=function(e){return e=Je(e,this.parent)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.nodeSelectionObj=new It,this.colorPickerModule=new wt(this.parent,this.locator),this.parent.on(\"initial-load\",this.instantiateRenderer,this),this.parent.on(\"html-toolbar-click\",this.onToolbarClick,this),this.parent.on(m,this.onKeyDown,this),this.parent.on(\"render-color-picker\",this.renderColorPicker,this),this.parent.on(d,this.render,this),this.parent.on(p,this.onPropertyChanged,this),this.parent.on(h,this.destroy,this),this.parent.on(\"selectAll\",this.selectAll,this),this.parent.on(\"selectRange\",this.selectRange,this),this.parent.on(\"getSelectedHtml\",this.getSelectedHtml,this),this.parent.on(\"selection-save\",this.onSelectionSave,this),this.parent.on(\"selection-restore\",this.onSelectionRestore,this),this.parent.on(\"readOnlyMode\",this.updateReadOnly,this),this.parent.on(g,this.onPaste,this))},e.prototype.updateReadOnly=function(){this.parent.readonly?(Object(l.x)(this.parent.contentModule.getEditPanel(),{contenteditable:\"false\"}),Object(l.v)([this.parent.element],\"e-rte-readonly\")):(Object(l.x)(this.parent.contentModule.getEditPanel(),{contenteditable:\"true\"}),Object(l.hb)([this.parent.element],\"e-rte-readonly\"))},e.prototype.onSelectionSave=function(){var e=this.contentRenderer.getDocument(),t=this.nodeSelectionObj.getRange(e);this.saveSelection=this.nodeSelectionObj.save(t,e)},e.prototype.onSelectionRestore=function(e){this.parent.isBlur=!1,this.contentRenderer.getEditPanel().focus(),(Object(l.W)(e.items)||e.items)&&this.saveSelection.restore()},e.prototype.onKeyDown=function(e){if(9===e.args.keyCode&&this.parent.enableTabKey){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),n=this.nodeSelectionObj.getParentNodeCollection(t);if(\"LI\"!==n[0].nodeName&&!Object(l.C)(n[0],\"li\")&&!Object(l.C)(n[0],\"table\")||0!==t.startOffset)if(e.args.preventDefault(),e.args.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){var i=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(),i,i,0,i.textContent.length),Kt.Insert(this.contentRenderer.getDocument(),document.createTextNode(\"\")),this.rangeCollection.pop()}}else Kt.Insert(this.contentRenderer.getDocument(),\"&nbsp;&nbsp;&nbsp;&nbsp;\"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()))}\"space\"!==e.args.action&&\"enter\"!==e.args.action||this.spaceLink(e.args)},e.prototype.onPaste=function(e){var t=new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);if(e.text.match(t)){e.args.preventDefault();for(var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),i=(this.parent.formatter.editorManager.nodeSelection.save(n,this.parent.contentModule.getDocument()),new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)))/gi)),r=new RegExp(/([^\\S]|^)(((www\\.))(\\S+))/gi),o=e.text.split(\"\\n\"),a=\"\",s=0;s<o.length;s++)if(\"\"===o[s].trim())a+=\"<p><br></p>\";else{for(var c=\"\",d=!0,h=o[s].split(\" \"),p=0;p<h.length;p++)\"\"===h[p].trim()?c+=d?\"&nbsp;\":\" \":(d=!1,c+=h[p]+\" \");a+=0===s?\"<span>\"+c.trim()+\"</span>\":\"<p>\"+c.trim()+\"</p>\"}var u=this.parent.createElement(\"div\");u.setAttribute(\"class\",\"pasteContent\"),u.style.display=\"inline\",u.innerHTML=a;var m=u.querySelectorAll(\"span, p\");for(s=0;s<m.length;s++){var f=m[s].innerHTML.split(\" \"),g=\"\";for(p=0;p<f.length;p++)f[p].match(i)||f[p].match(r)?g+='<a className=\"e-rte-anchor\" href=\"'+f[p]+'\" title=\"'+f[p]+'\">'+f[p]+\" </a>\":g+=f[p]+\" \";m[s].innerHTML=g.trim()}Object(l.W)(this.parent.pasteCleanupModule)?this.parent.formatter.editorManager.execCommand(\"insertHTML\",null,null,null,u):e.callBack(u.innerHTML)}},e.prototype.spaceLink=function(e){var t=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),n=this.nodeSelectionObj.getParentNodeCollection(t),i=t.startContainer.textContent.substr(0,t.endOffset),r=i.split(\" \"),o=r[r.length-1],a=t.startOffset-(i.length-r[r.length-1].length);o=o.slice(0,a);var s=new RegExp(/([^\\S]|^)(((https?\\:\\/\\/)|(www\\.))(\\S+))/gi);if(\"A\"!==n[0].nodeName&&o.match(s)){var l=this.nodeSelectionObj.save(t,this.parent.contentModule.getDocument()),c={url:o.indexOf(\"http\")>-1?o:\"http://\"+o,selection:l,selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),text:o,title:\"\",target:\"_blank\"};this.parent.formatter.process(this.parent,{item:{command:\"Links\",subCommand:\"CreateLink\"}},e,c)}},e.prototype.onToolbarClick=function(e){var t,n,i,r=e.item,o=Object(l.C)(e.originalEvent.target,\".e-rte-quick-popup\");if(o&&!o.classList.contains(\"e-rte-inline-popup\")){if(\"SourceCode\"!==r.subCommand&&\"Preview\"!==r.subCommand&&\"FontColor\"!==r.subCommand&&\"BackgroundColor\"!==r.subCommand){ft()&&\"Images\"===r.command&&this.nodeSelectionObj.restore();var a=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());t=this.nodeSelectionObj.save(a,this.parent.contentModule.getDocument()),n=this.nodeSelectionObj.getNodeCollection(a),i=this.nodeSelectionObj.getParentNodeCollection(a)}\"Images\"===r.command&&this.parent.notify(\"image-toolbar-action\",{member:\"image\",args:e,selectNode:n,selection:t,selectParent:i}),\"Links\"===r.command&&this.parent.notify(\"link-toolbar-action\",{member:\"link\",args:e,selectNode:n,selection:t,selectParent:i}),\"Table\"===r.command&&this.parent.notify(\"table-toolbar-action\",{member:\"table\",args:e,selectNode:n,selection:t,selectParent:i})}else{var s=this.parent.element.querySelector(\"#\"+this.parent.getID()+\"_rtelink\"),c=this.parent.element.querySelector(\"#\"+this.parent.getID()+\"_image\");if(\"SourceCode\"!==r.subCommand&&\"Preview\"!==r.subCommand&&\"FontColor\"!==r.subCommand&&\"BackgroundColor\"!==r.subCommand){a=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());Object(l.W)(s)&&Object(l.W)(c)&&(t=this.nodeSelectionObj.save(a,this.parent.contentModule.getDocument())),n=this.nodeSelectionObj.getNodeCollection(a),i=this.nodeSelectionObj.getParentNodeCollection(a)}switch(r.subCommand){case\"Maximize\":this.parent.notify(\"enableFullScreen\",{args:e});break;case\"Minimize\":this.parent.notify(\"disableFullScreen\",{args:e});break;case\"CreateLink\":this.parent.notify(\"insertLink\",{member:\"link\",args:e,selectNode:n,selection:t,selectParent:i});break;case\"RemoveLink\":this.parent.notify(\"unLink\",{member:\"link\",args:e,selectNode:n,selection:t,selectParent:i});break;case\"Print\":this.parent.print();break;case\"Image\":this.parent.notify(\"insertImage\",{member:\"image\",args:e,selectNode:n,selection:t,selectParent:i});break;case\"CreateTable\":this.parent.notify(\"createTable\",{member:\"table\",args:e,selection:t});break;case\"SourceCode\":this.parent.notify(\"sourceCode\",{member:\"viewSource\",args:e});break;case\"Preview\":this.parent.notify(\"updateSource\",{member:\"updateSource\",args:e});break;case\"FontColor\":case\"BackgroundColor\":break;case\"File\":this.parent.notify(\"renderFileManager\",{member:\"fileManager\",args:e,selectNode:n,selection:t,selectParent:i});break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}}},e.prototype.renderColorPicker=function(e){this.colorPickerModule.renderColorPickerInput(e)},e.prototype.instantiateRenderer=function(){this.parent.iframeSettings.enable?this.renderFactory.addRenderer(i.Content,new yn(this.parent,this.locator)):this.renderFactory.addRenderer(i.Content,new bn(this.parent,this.locator))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(d,this.render),this.parent.off(p,this.onPropertyChanged),this.parent.off(\"html-toolbar-click\",this.onToolbarClick),this.parent.off(\"render-color-picker\",this.renderColorPicker),this.parent.off(h,this.destroy),this.parent.off(m,this.onKeyDown),this.parent.off(\"initial-load\",this.instantiateRenderer),this.parent.off(\"selectAll\",this.selectAll),this.parent.off(\"selectRange\",this.selectRange),this.parent.off(\"getSelectedHtml\",this.getSelectedHtml),this.parent.off(\"selection-save\",this.onSelectionSave),this.parent.off(\"selection-restore\",this.onSelectionRestore),this.parent.off(\"readOnlyMode\",this.updateReadOnly),this.parent.off(g,this.onPaste))},e.prototype.render=function(){this.contentRenderer=this.renderFactory.getRenderer(i.Content);var e=this.contentRenderer.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};if(Object(l.W)(this.parent.formatter)){var n=new un({currentDocument:this.contentRenderer.getDocument(),element:e,options:t});this.parent.setProperties({formatter:n},!0)}else this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),t);this.parent.enableXhtml&&this.parent.notify(\"xhtmlValidation\",{}),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new gn(this.parent)),this.parent.notify(\"bind-on-end\",{})},e.prototype.onPropertyChanged=function(e){if(!Object(l.W)(e.newProp.formatter)){var t=this.contentRenderer.getEditPanel(),n={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),n)}},e.prototype.getModuleName=function(){return\"htmlEditor\"},e.prototype.selectAll=function(){var e=function e(t,n){var i=[];for(n=n.firstChild;n;n=n.nextSibling)3===n.nodeType?i.push(n):i=i.concat(e(t,n));return i}(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel());e.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),e[0],e[e.length-1],0,e[e.length-1].textContent.length)},e.prototype.selectRange=function(e){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(),e.range)},e.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString())},e}(),Sn=function(){function e(e){Object(l.J)(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"lists-commands\",this.applyListsHandler,this),this.parent.observer.on(\"keydown-handler\",this.keyDownHandler,this),this.parent.observer.on(\"keyup-handler\",this.keyUpHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.which){case 9:this.tabKey(e)}switch(e.event.action){case\"ordered-list\":this.applyListsHandler({subCommand:\"OL\",callBack:e.callBack}),e.event.preventDefault();break;case\"unordered-list\":this.applyListsHandler({subCommand:\"UL\",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.keyUpHandler=function(e){switch(e.event.which){case 13:this.enterKey(e)}},e.prototype.tabKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var n=t.selectionStart,i=t.selectionEnd,r=this.selection.getSelectedParentPoints(t),o=0,a=this.isNotFirstLine(t,r[0]);if(a||e.event.shiftKey){var s=this.olListType(),l=this.getListRegex();this.currentAction=this.getAction(r[0].text);for(var c=0;c<r.length;c++){var d=(e.event.shiftKey,r[c].line-1),h=this.selection.getLine(t,d);if(h&&(!e.event.shiftKey&&a||e.event.shiftKey)){var p=h.split(\". \"),u=e.event.shiftKey?-\"\\t\".length:\"\\t\".length,m=r[c].text.split(\"\\t\");if(e.event.shiftKey&&1===m.length)break;if(\"OL\"===this.currentAction&&/^\\d+$/.test(p[0].trim())&&s){e.event.preventDefault(),r[c].text=e.event.shiftKey?m.splice(1,m.length).join(\"\\t\"):\"\\t\"+r[c].text;var f=this.getTabSpace(r[c].text),g=this.getTabSpace(h),b=r[c].text.split(\". \");if(f===g)this.changeTextAreaValue(b,this.nextOrderedListValue(p[0].trim()),e,t,r,c,i);else if(g<f)this.changeTextAreaValue(b,\"1. \",e,t,r,c,i);else for(;g.length>f.length;null){d-=1;var v=(h=this.selection.getLine(t,d)).trim().split(\". \");if(/^\\d+$/.test(v[0])&&(g=this.getTabSpace(h)).length<=f.length){this.changeTextAreaValue(b,this.nextOrderedListValue(v[0]),e,t,r,c,i);break}}}else(\"UL\"===this.currentAction&&l.test(h.trim())||!s)&&(e.event.preventDefault(),r[c].text=e.event.shiftKey?m.splice(1,m.length).join(\"\\t\"):\"\\t\"+r[c].text,t.value=t.value.substr(0,r[c].start)+r[c].text+\"\\n\"+t.value.substr(r[c].end,t.value.length));if(n=0===c?n+u:n,o+=u,1!==r.length)for(var y=c;y<r.length;y++)r[y].start=0!==y?r[y].start+u:r[y].start,r[y].end=r[y].end+u}}this.restore(t,n,i+o,e)}else this.restore(t,n,i+o,e)},e.prototype.changeTextAreaValue=function(e,t,n,i,r,o,a){var s=t;e.splice(0,1);var c,d=this.selection.getAllParents(i.value).length,h=\"\",p=this.getTabSpace(r[o].text),u=parseInt(s.split(\".\")[0],null),m=this.getTabSpace(r[o].text),f=!0,g=!0,b=-1,v=!0,y=0,C=\"\";h=\"\"!==this.selection.getLine(i,r[0].line+1)?\"\":h+i.value.substr(r[0].end,i.value.length);for(var O=1;O<d&&!Object(l.W)(this.selection.getLine(i,r[0].line+O))&&\"\"!==this.selection.getLine(i,r[0].line+O);O++){var S=this.selection.getLine(i,r[0].line+O),k=this.getTabSpace(S),w=S.split(\". \");if(1===w.length){h+=i.value.substr(r[0].end+y,i.value.length);break}y+=S.length;var T=!1;if(c=n.event.shiftKey?p.length+1:p.length-1,k.length>m.length&&(v=!1),p.length!==k.length&&k.length<m.length?(g=!0,f=!1,T=!(!n.event.shiftKey||p.length!==k.length)&&(g=!1,!0)):v&&n.event.shiftKey&&p.length===k.length&&k.length===m.length&&(g=!1,T=!0),C=\"\"===h?\"\":\"\\n\",c===k.length&&g){var E=n.event.shiftKey?(b++,this.nextOrderedListValue(b.toString())):this.previousOrderedListValue(w[0]);w.splice(0,1),h=h+C+k+E+w.join(\". \")}else if(p.length===k.length&&f||T){E=this.nextOrderedListValue(u.toString());u++,w.splice(0,1),h=h+C+k+E+w.join(\". \")}else h=h+C+S,g=!1;m=this.getTabSpace(S)}r[o].text=this.getTabSpace(r[o].text)+s+e.join(\". \")+\"\\n\",i.value=i.value.substr(0,r[o].start)+r[o].text+h},e.prototype.getTabSpace=function(e){for(var t=e.split(\"\\t\"),n=\"\",i=0;i<t.length&&\"\"===t[i];i++)n+=\"\\t\";return n},e.prototype.isNotFirstLine=function(e,t){var n,i=t.text,r=t.line-1,o=this.selection.getLine(e,r),a=this.getListRegex(),s=!1;if(o){this.currentAction=this.getAction(o);var l=o.split(\". \");n=\"OL\"===this.currentAction?/^\\d+$/.test(l[0].trim()):a.test(o.trim())}if(o&&n){var c=this.getTabSpace(i),d=this.getTabSpace(o);for(s=c===d||s;d.length>c.length;null){r-=1;l=(o=this.selection.getLine(e,r)).trim().split(\". \");if((\"OL\"===this.currentAction?/^\\d+$/.test(l[0]):a.test(o.trim()))&&(d=this.getTabSpace(o)).length<=c.length){s=!0;break}}}return s},e.prototype.getAction=function(e){var t=e.split(\". \")[0],n=/^\\d+$/.test(t.trim()),i=e.trim().split(new RegExp(\"^(\"+this.selection.replaceSpecialChar(this.syntax.UL).trim()+\")\"))[1];return n?\"OL\":i?\"UL\":\"NOTLIST\"},e.prototype.nextOrderedListValue=function(e){return(parseInt(e,null)+1).toString()+\". \"},e.prototype.previousOrderedListValue=function(e){return(parseInt(e,null)-1).toString()+\". \"},e.prototype.enterKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var n=t.selectionStart,i=t.selectionEnd,r=this.selection.getSelectedParentPoints(t),o=this.selection.getLine(t,r[0].line-1),a=this.olListType(),s=this.getListRegex(),c=[];Object(l.W)(o)||(c=o.split(\". \"),this.currentAction=this.getAction(o));var d=0;if(\"OL\"===this.currentAction&&c.length>1&&/^\\d+$/.test(c[0].trim())&&a&&\"\"!==c[1]){var h=this.getTabSpace(o);this.currentAction=this.getAction(o);var p=this.nextOrderedListValue(c[0]);r[0].text=h+p+r[0].text;for(var u=this.selection.getAllParents(t.value).length,m=\"\\n\",f=this.getTabSpace(o),g=this.getTabSpace(r[0].text),b=!0,v=1;v<u&&\"\"!==t.value.substr(r[0].end,t.value.length);v++){var y=this.selection.getLine(t,r[0].line+v);if(Object(l.W)(y))m+=\"\";else{var C=y.split(\". \"),O=this.getTabSpace(y);if(O.length<g.length&&(b=!1),C.length>1&&/^\\d+$/.test(C[0].trim())&&f.length===O.length&&b){var S=this.nextOrderedListValue(C[0]);C.splice(0,1),m=m+O+S+C.join(\". \")+\"\\n\"}else m=m+y+\"\\n\",g=this.getTabSpace(y)}}t.value=t.value.substr(0,r[0].start)+f+p+this.selection.getLine(t,r[0].line)+m,n=n+p.length+h.length,d+=p.length+h.length}else if(\"UL\"===this.currentAction&&s.test(o.trim())&&\"\"!==o.trim().replace(s,\"\")||\"OL\"===this.currentAction&&!a){h=this.getTabSpace(o),p=this.syntax[this.currentAction];r[0].text=h+p+r[0].text+(r[0].text.trim().length>0?\"\\n\":\"\"),t.value=t.value.substr(0,r[0].start)+r[0].text+t.value.substr(r[0].end,t.value.length),n=n+p.length+h.length,d+=p.length+h.length}this.restore(t,n,i+d,e)},e.prototype.olListType=function(){var e=this.syntax.OL.split(\".,\");return(1===e.length?null:parseInt(e[2].trim(),null)-parseInt(e[0].trim(),null))?1:0},e.prototype.applyListsHandler=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd),this.currentAction=e.subCommand;var n,i,r=t.selectionStart,o=t.selectionEnd,a=0,s=0,c=0,d=this.selection.getSelectedParentPoints(t),h=\"\";n=this.olListType();for(var p={},u=0;u<d.length;u++)if(i=n?\"OL\"===this.currentAction?u+n+\". \":this.syntax[this.currentAction]:\"OL\"===this.currentAction?this.syntax.OL:this.syntax[this.currentAction],this.selection.isStartWith(d[u].text,i))d[u].text=d[u].text.replace(i,\"\"),t.value=t.value.substr(0,d[u].start+c)+d[u].text+\"\\n\"+t.value.substr(d[u].end+c,t.value.length),c-=i.length,s=i.length,this.restore(t,r-s,o+c,null);else{if(\"\"===d[u].text&&0===u&&(this.selection.save(r,o),1!==d.length))for(var m=u;m<d.length;m++)d[m].start=0!==m?1+d[m].start:d[m].start,d[m].end=1+d[m].end;var f=Object(l.W)(d[u-1])?0:this.getTabSpace(d[u-1].text).length,g=this.appliedLine(d[u].text,i,p,f);if(h=g.line?h:i,d[u].text=g.line?g.line:h+d[u].text,g.space=g.space?g.space:0,t.value=t.value.substr(0,d[u].start+c)+d[u].text+\"\\n\"+t.value.substr(d[u].end,t.value.length),r=0===u?r+h.length+g.space>0?r+h.length+g.space:0:r,a+=h.length+g.space,1!==d.length)for(m=u;m<d.length;m++)d[m].start=0!==m?h.length+d[m].start+g.space:d[m].start,d[m].end=h.length+d[m].end+g.space;this.restore(t,r,o+a,null)}this.restore(t,null,null,e)},e.prototype.appliedLine=function(e,t,n,i){var r={},o=new RegExp(\"^[\"+this.syntax.UL.trim()+\"]\"),a=e.split(\". \"),s=a[0]+\". \",c=o.test(e.trim())||e.trim()===this.syntax.OL.trim()||e.trim()===this.syntax.UL.trim()||/^\\d+$/.test(a[0].trim()),d=this.olListType(),h=this.getTabSpace(e).length;if(\"OL\"===this.currentAction&&d&&(n[h.toString()]=Object(l.W)(n[h.toString()])?1:n[h.toString()].valueOf()+1,t=n[h.toString()].valueOf().toString()+\". \",!Object(l.W)(i)&&i>h&&(n[i.toString()]=0)),c){var p=void 0,u=void 0;o.test(e.trim())?(u=this.syntax.UL,p=t,r.space=t.trim().length-this.syntax.UL.trim().length):/^\\d+$/.test(a[0].trim())&&d?(u=a[0].trim()+\". \",p=t,r.space=this.syntax.UL.trim().length-s.trim().length):/^\\d+$/.test(a[0].trim())&&(u=a[0].trim()+\". \",p=this.syntax.UL,r.space=this.syntax.UL.trim().length-s.trim().length),r.line=e.replace(u,p)}return r},e.prototype.restore=function(e,t,n,i){Object(l.W)(t)||Object(l.W)(t)||this.selection.save(t,n),Object(l.W)(i)||this.selection.restore(e),i&&i.callBack&&i.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:\"Markdown\",event:i.event})},e.prototype.getListRegex=function(){for(var e=\"\",t=Object.keys(this.syntax),n=0;n<t.length;n++){var i=this.selection.replaceSpecialChar(this.syntax[t[n]]);e+=\"\"===e?\"^(\"+i+\")|^(\"+i.trim()+\")\":\"|^(\"+i+\")|^(\"+i.trim()+\")\"}return new RegExp(e)},e}(),kn=function(){function e(e){Object(l.J)(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"format-type\",this.applyFormats,this)},e.prototype.applyFormats=function(e){e.subCommand=e.subCommand.toLowerCase();var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var n=this.selection.getSelectedParentPoints(t);if(this.isAppliedFormat(n)===e.subCommand){if(\"pre\"===e.subCommand){if(!(n.length>1))return;this.applyCodeBlock(t,e,n)}return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e)}if(\"p\"===e.subCommand)return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e);(\"pre\"===e.subCommand&&1!==n.length||\"pre\"!==e.subCommand)&&this.cleanFormat(t,e.subCommand);var i=t.selectionStart,r=t.selectionEnd,o=0;if(n=this.selection.getSelectedParentPoints(t),\"pre\"!==e.subCommand){for(var a=0;a<n.length;a++)if(\"\"===n[a].text||this.selection.isStartWith(n[a].text,\"\\\\\"+this.syntax[e.subCommand])){if(\"\"===n[a].text&&0===a&&(this.selection.save(i,r),1!==n.length))for(s=a;s<n.length;s++)n[s].start=0!==s?1+n[s].start:n[s].start,n[s].end=1+n[s].end}else if(n[a].text=this.syntax[e.subCommand]+n[a].text,t.value=t.value.substr(0,n[a].start)+n[a].text+\"\\n\"+t.value.substr(n[a].end,t.value.length),i=0===a?i+this.syntax[e.subCommand].length:i,o+=this.syntax[e.subCommand].length,1!==n.length)for(var s=a;s<n.length;s++)n[s].start=0!==s?this.syntax[e.subCommand].length+n[s].start:n[s].start,n[s].end=this.syntax[e.subCommand].length+n[s].end;this.restore(t,i,r+o,e)}else n.length>1?this.applyCodeBlock(t,e,n):(Object(l.J)(e,e,{subCommand:\"InlineCode\"},!0),this.parent.observer.notify(\"command-type\",e))},e.prototype.clearRegex=function(){for(var e=\"\",t=Object.keys(this.syntax),n=0;n<t.length&&\"pre\"!==t[n]&&\"p\"!==t[n];n++)e+=\"\"===e?\"^(\"+this.selection.replaceSpecialChar(this.syntax[t[n]].trim())+\")\":\"|^(\"+this.selection.replaceSpecialChar(this.syntax[t[n]].trim())+\")\";return e},e.prototype.cleanFormat=function(e,t){var n=this.selection.getSelectedParentPoints(e),i=e.selectionStart,r=e.selectionEnd,o=0;if(this.selection.isClear(n,this.clearRegex())){for(var a=0;a<n.length;a++){for(var s=Object.keys(this.syntax),l=0;\"\"!==n[a].text&&l<s.length;l++){var c=this.syntax[s[l]];if(s[l]!==t){var d=new RegExp(\"^(\"+this.selection.replaceSpecialChar(c)+\")\",\"gim\");if(d.test(n[a].text)){if(n[a].text=n[a].text.replace(d,\"\"),e.value=e.value.substr(0,n[a].start)+n[a].text+\"\\n\"+e.value.substr(n[a].end,e.value.length),i=0===a?i-c.length>0?i-c.length:0:i,o+=c.length,1!==n.length)for(var h=0;h<n.length;h++)n[h].start=0!==h?n[h].start-c.length:n[h].start,n[h].end=n[h].end-c.length;break}}}if(\"\"===n[a].text&&0===a&&(this.selection.save(i,r),1!==n.length))for(l=a;l<n.length;l++)n[l].start=0!==l?1+n[l].start:n[l].start,n[l].end=1+n[l].end}this.restore(e,i,r-o)}},e.prototype.applyCodeBlock=function(e,t,n){var i=t.subCommand,r=n[0].start,o=n[n.length-1].end,a=this.selection.getAllParents(e.value),s=a[n[0].line-1],l=a[n.length+1+1];if(this.selection.isStartWith(s,this.syntax.pre.split(\"\\n\")[0])||this.selection.isStartWith(l,this.syntax.pre.split(\"\\n\")[0])){var c=this.syntax[i],d=this.parent.markdownSelection.getSelectedInlinePoints(e),h=e.value.substr(0,e.selectionStart).lastIndexOf(c),p=e.value.substr(e.selectionEnd,e.selectionEnd).indexOf(c);p+=d.end;var u=this.replaceAt(e.value.substr(0,d.start),c,\"\",h,d.start),m=this.replaceAt(e.value.substr(d.end,e.value.length),c,\"\",0,p);e.value=u+d.text+m,r=this.selection.selectionStart-c.length,o=this.selection.selectionEnd-c.length}else{var f=e.value.substring(r,o).split(\"\\n\"),g=\"\"===f[f.length-1]?\"\":\"\\n\";e.value=e.value.substr(0,r)+this.syntax[i]+e.value.substring(r,o)+g+this.syntax[i]+e.value.substr(o,e.value.length),r=this.selection.selectionStart+this.syntax[i].length,o=this.selection.selectionEnd+this.syntax[i].length-1}this.restore(e,r,o,t)},e.prototype.replaceAt=function(e,t,n,i,r){return e.slice(0,i)+e.slice(i,r).replace(t,n)+e.slice(r)},e.prototype.restore=function(e,t,n,i){this.selection.save(t,n),this.selection.restore(e),i&&i.callBack&&i.callBack({requestType:i.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:\"Markdown\",event:i.event})},e.prototype.isAppliedFormat=function(e,t){for(var n=\"p\",i=(Object.keys(this.syntax),Object.keys(this.syntax)),r=\"backward\"===this.parent.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<i.length;o++){if(\"pre\"!==i[o]&&this.selection.isStartWith(r,this.syntax[i[o]])){n=i[o];break}if(\"pre\"===i[o]){var a=this.selection.getAllParents(this.parent.element.value),s=a[e[0].line-1],l=a[e.length+1];if(this.selection.isStartWith(s,this.syntax[i[o]].split(\"\\n\")[0])&&this.selection.isStartWith(l,this.syntax[i[o]].split(\"\\n\")[0])){n=i[o];break}}}return n},e}(),wn=function(){function e(e){Object(l.J)(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"command-type\",this.applyCommands,this),this.parent.observer.on(\"keydown-handler\",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.action){case\"bold\":this.applyCommands({subCommand:\"Bold\",callBack:e.callBack}),e.event.preventDefault();break;case\"italic\":this.applyCommands({subCommand:\"Italic\",callBack:e.callBack}),e.event.preventDefault();break;case\"strikethrough\":this.applyCommands({subCommand:\"StrikeThrough\",callBack:e.callBack}),e.event.preventDefault();break;case\"uppercase\":this.applyCommands({subCommand:\"UpperCase\",callBack:e.callBack}),e.event.preventDefault();break;case\"lowercase\":this.applyCommands({subCommand:\"LowerCase\",callBack:e.callBack}),e.event.preventDefault();break;case\"superscript\":this.applyCommands({subCommand:\"SuperScript\",callBack:e.callBack}),e.event.preventDefault();break;case\"subscript\":this.applyCommands({subCommand:\"SubScript\",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.isBold=function(e,t){return-1!==e.search(\"\\\\\"+t+\"\\\\\"+t)},e.prototype.isItalic=function(e,t){return-1!==e.search(\"\\\\\"+t)},e.prototype.isMatch=function(e,t){var n=[\"\"];switch(t){case this.syntax.Italic:case this.syntax.InlineCode:case this.syntax.StrikeThrough:n=e.match(this.singleCharRegx(t))}return n},e.prototype.multiCharRegx=function(e){return new RegExp(\"(\\\\\"+e+\"\\\\\"+e+\")\",\"g\")},e.prototype.singleCharRegx=function(e){return new RegExp(\"(\\\\\"+e+\")\",\"g\")},e.prototype.isAppliedCommand=function(e){var t,n=!1,i=this.parent.element,r=i.selectionStart,o=(t=r,function(e){return[e.slice(0,t),e.slice(t)]})(i.value),a=this.syntax.Bold.substr(0,1),s=this.syntax.Italic,c=this.parent.markdownSelection.getSelectedText(i);if(\"\"!==c&&c===c.toLocaleUpperCase()&&\"UpperCase\"===e)return!0;if(\"\"===c){var d=i.value.substr(o[0].length-1,1),h=o[1].substr(0,1);if(\"\"!==d&&\"\"!==h&&d.match(/[a-z]/i)&&d===d.toLocaleUpperCase()&&h===h.toLocaleUpperCase()&&\"UpperCase\"===e)return!0}return this.isBold(o[0],a)||this.isItalic(o[0],s)||this.isBold(o[1],a)||this.isItalic(o[1],s)||(Object(l.W)(this.isMatch(o[0],this.syntax.StrikeThrough))||Object(l.W)(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||\"StrikeThrough\"!==e||(n=!0),Object(l.W)(this.isMatch(o[0],this.syntax.InlineCode))||Object(l.W)(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||\"InlineCode\"!==e||(n=!0),Object(l.W)(o[0].match(/\\<sub>/g))||Object(l.W)(o[1].match(/\\<\\/sub>/g))||o[0].match(/\\<sub>/g).length%2!=1||o[1].match(/\\<\\/sub>/g).length%2!=1||\"SubScript\"!==e||(n=!0),Object(l.W)(o[0].match(/\\<sup>/g))||Object(l.W)(o[1].match(/\\<\\/sup>/g))||o[0].match(/\\<sup>/g).length%2!=1||o[1].match(/\\<\\/sup>/g).length%2!=1||\"SuperScript\"!==e||(n=!0)),this.isBold(o[0],a)&&this.isBold(o[1],a)&&o[0].match(this.multiCharRegx(a)).length%2==1&&o[1].match(this.multiCharRegx(a)).length%2==1&&\"Bold\"===e&&(n=!0),o[0]=this.isBold(o[0],a)?o[0].replace(this.multiCharRegx(a),\"$%@\"):o[0],o[1]=this.isBold(o[1],a)?o[1].replace(this.multiCharRegx(a),\"$%@\"):o[1],Object(l.W)(this.isMatch(o[0],this.syntax.Italic))||Object(l.W)(this.isMatch(o[1],this.syntax.Italic))||this.isMatch(o[0],this.syntax.Italic).length%2!=1||this.isMatch(o[1],this.syntax.Italic).length%2!=1||\"Italic\"!==e||(n=!0),Object(l.W)(this.isMatch(o[0],this.syntax.StrikeThrough))||Object(l.W)(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||\"StrikeThrough\"!==e||(n=!0),Object(l.W)(this.isMatch(o[0],this.syntax.InlineCode))||Object(l.W)(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||\"InlineCode\"!==e||(n=!0),Object(l.W)(o[0].match(/\\<sub>/g))||Object(l.W)(o[1].match(/\\<\\/sub>/g))||o[0].match(/\\<sub>/g).length%2!=1||o[1].match(/\\<\\/sub>/g).length%2!=1||\"SubScript\"!==e||(n=!0),Object(l.W)(o[0].match(/\\<sup>/g))||Object(l.W)(o[1].match(/\\<\\/sup>/g))||o[0].match(/\\<sup>/g).length%2!=1||o[1].match(/\\<\\/sup>/g).length%2!=1||\"SuperScript\"!==e||(n=!0),n},e.prototype.applyCommands=function(e){this.currentAction=e.subCommand;var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var n=t.selectionStart,i=t.selectionEnd,r=0,o=this.parent.markdownSelection.getSelectedInlinePoints(t);if(this.isAppliedCommand(e.subCommand)&&\"\"!==o.text){var a=this.syntax[e.subCommand],s=\"SubScript\"===e.subCommand?\"</sub>\":\"SuperScript\"===e.subCommand?\"</sup>\":this.syntax[e.subCommand],l=\"UpperCase\"===e.subCommand||\"LowerCase\"===e.subCommand?0:a.length,c=t.value.substr(0,o.start).lastIndexOf(a),d=t.value.substr(o.end,t.value.length).indexOf(s);d+=o.end;var h=this.replaceAt(t.value.substr(0,o.start),a,\"\",c,o.start),p=this.replaceAt(t.value.substr(o.end,t.value.length),s,\"\",0,d);return t.value=h+o.text+p,void this.restore(t,n-l,i-l,e)}if(\"\"===o.text||this.isApplied(o,e.subCommand))\"UpperCase\"!==e.subCommand&&\"LowerCase\"!==e.subCommand?(\"SubScript\"===e.subCommand||\"SuperScript\"===e.subCommand?(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+\"</\"+this.syntax[e.subCommand].substring(1,5)):(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand]),t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),r=this.syntax[e.subCommand].length,o.start===o.end?this.restore(t,n+r,i+r,e):this.restore(t,n+r,i-r,e)):this.restore(t,n,i,e);else{r=\"UpperCase\"===e.subCommand||\"LowerCase\"===e.subCommand?0:this.syntax[e.subCommand].length;var u=t.value.substr(o.start-this.syntax[e.subCommand].length,this.syntax[e.subCommand].length),m=void 0;if(u===e.subCommand||o.start-this.syntax[e.subCommand].length===t.value.indexOf(this.syntax[e.subCommand])&&(o.end===t.value.lastIndexOf(this.syntax[e.subCommand])||o.end===t.value.lastIndexOf(\"</\"+this.syntax[e.subCommand].substring(1,5)))){m=\"SubScript\"===e.subCommand||\"SuperScript\"===e.subCommand?t.value.substr(o.end,this.syntax[e.subCommand].length+1):t.value.substr(o.end,this.syntax[e.subCommand].length);h=this.replaceAt(t.value.substr(0,o.start),u,\"\",o.start-this.syntax[e.subCommand].length,o.start),p=this.replaceAt(t.value.substr(o.end,t.value.length),m,\"\",0,m.length);t.value=h+o.text+p,this.restore(t,n-r,i-r,e)}else\"SubScript\"===e.subCommand||\"SuperScript\"===e.subCommand?o.text=this.syntax[e.subCommand]+o.text+\"</\"+this.syntax[e.subCommand].substring(1,5):\"UpperCase\"===e.subCommand||\"LowerCase\"===e.subCommand?o.text=\"UpperCase\"===e.subCommand?o.text.toUpperCase():o.text.toLowerCase():o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand],t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),this.restore(t,n+r,i+r,e)}this.parent.undoRedoManager.saveData()},e.prototype.replaceAt=function(e,t,n,i,r){return e.slice(0,i)+e.slice(i,r).replace(t,n)+e.slice(r)},e.prototype.restore=function(e,t,n,i){this.selection.save(t,n),this.selection.restore(e),i&&i.callBack&&i.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:\"Markdown\",event:i.event})},e.prototype.textReplace=function(e,t){var n=this.singleCharRegx(this.syntax[t]);switch(t){case\"Bold\":n=this.multiCharRegx(this.syntax[t].substr(0,1)),e=e.replace(n,\"\");break;case\"Italic\":if(this.isBold(e,this.syntax[t].substr(0,1))){var i=this.multiCharRegx(this.syntax[t].substr(0,1)),r=e;r=r.replace(i,\"$%@\").replace(n,\"\");var o=new RegExp(\"\\\\$%@\",\"g\");e=r.replace(o,this.syntax[t].substr(0,1)+this.syntax[t].substr(0,1))}else e=e.replace(n,\"\");break;case\"StrikeThrough\":case\"InlineCode\":e=e.replace(n,\"\");break;case\"SubScript\":e=e.replace(/<sub>/g,\"\").replace(/<\\/sub>/g,\"\");break;case\"SuperScript\":e=e.replace(/<sup>/g,\"\").replace(/<\\/sup>/g,\"\")}return e},e.prototype.isApplied=function(e,t){var n=this.singleCharRegx(this.syntax[t]);switch(t){case\"SubScript\":case\"SuperScript\":return(n=this.singleCharRegx(this.syntax[t])).test(e.text);case\"Bold\":case\"StrikeThrough\":return(n=this.multiCharRegx(this.syntax[t].substr(0,1))).test(e.text);case\"UpperCase\":case\"LowerCase\":return(n=new RegExp(\"^[\"+this.syntax[t]+\"]*$\",\"g\")).test(e.text);case\"Italic\":var i=void 0,r=this.multiCharRegx(this.syntax[t].substr(0,1));if(r.test(e.text)){var o=e.text;o=o.replace(r,\"$%#\"),i=n.test(o)}else i=n.test(e.text);return i;case\"InlineCode\":return n.test(e.text)}},e}(),Tn=function(){function e(){}return e.prototype.getLineNumber=function(e,t){return e.value.substr(0,t).split(\"\\n\").length},e.prototype.getSelectedText=function(e){var t=e.selectionStart,n=e.selectionEnd;return e.value.substring(t,n)},e.prototype.getAllParents=function(e){return e.split(\"\\n\")},e.prototype.getSelectedLine=function(e){return this.getAllParents(e.value)[this.getLineNumber(e,e.selectionStart)-1]},e.prototype.getLine=function(e,t){return this.getAllParents(e.value)[t]},e.prototype.getSelectedParentPoints=function(e){var t=this.getAllParents(e.value),n=this.getLineNumber(e,e.selectionStart),i=this.getLineNumber(e,e.selectionEnd),r=this.getSelectedText(e).split(\"\\n\"),o=[],a=t[n-1],s=t.slice(0,n-1).join(\"\").length,l={};if(l.line=n-1,l.start=s+l.line,l.end=\"\"!==a?l.start+a.length+1:l.start+a.length,l.text=a,o.push(l),r.length>1){for(var c=1;c<r.length-1;c++){var d={};d.line=o[c-1].line+1,d.start=(r[c],o[c-1].end),d.end=d.start+r[c].length+1,d.text=r[c],o.push(d)}var h={};h.line=o[o.length-1].line+1,h.start=o[o.length-1].end,h.end=h.start+t[i-1].length+1,h.text=t[i-1],o.push(h)}return o},e.prototype.setSelection=function(e,t,n){e.setSelectionRange(t,n),e.focus()},e.prototype.save=function(e,t){this.selectionStart=e,this.selectionEnd=t},e.prototype.restore=function(e){this.setSelection(e,this.selectionStart,this.selectionEnd)},e.prototype.isStartWith=function(e,t){var n=!1;e&&(n=(e.trim()===t.trim()?new RegExp(\"^(\"+this.replaceSpecialChar(t.trim())+\")\",\"gim\"):new RegExp(\"^(\"+this.replaceSpecialChar(t)+\")\",\"gim\")).test(e.trim()));return n},e.prototype.replaceSpecialChar=function(e){return e.replace(/[`~!@#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/g,\"\\\\$&\")},e.prototype.isClear=function(e,t){for(var n=0;n<e.length;n++)if(new RegExp(t,\"gim\").test(e[n].text))return!0;return!1},e.prototype.getSelectedInlinePoints=function(e){return{start:e.selectionStart,end:e.selectionEnd,text:this.getSelectedText(e)}},e}(),En=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=Object(l.W)(t)?30:t.undoRedoSteps,this.undoRedoTimer=Object(l.W)(t)?300:t.undoRedoTimer,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){var e=Object(l.G)(this.keyUp,this.undoRedoTimer);this.parent.observer.on(\"keyup-handler\",e,this),this.parent.observer.on(\"keydown-handler\",this.keyDown,this),this.parent.observer.on(\"action\",this.onAction,this),this.parent.observer.on(\"model_changed_plugin\",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,n=Object.keys(e.newProp);t<n.length;t++){switch(n[t]){case\"undoRedoSteps\":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case\"undoRedoTimer\":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){var e=Object(l.G)(this.keyUp,300);this.parent.observer.off(\"keyup-handler\",e),this.parent.observer.off(\"keydown-handler\",this.keyDown),this.parent.observer.off(\"action\",this.onAction),this.parent.observer.off(\"model_changed_plugin\",this.onPropertyChanged)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onAction=function(e){\"Undo\"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case\"undo\":t.preventDefault(),this.undo(e);break;case\"redo\":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var n=t.selectionStart,i=t.selectionEnd,r={text:this.parent.element.value,start:n,end:i};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].start===n&&this.undoRedoStack[this.undoRedoStack.length-1].end===i||(this.undoRedoStack.push(r),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){this.currentAction=\"Undo\";var t=this.undoRedoStack[this.steps-1].start,n=this.undoRedoStack[this.steps-1].end,i=this.undoRedoStack[this.steps-1].text;this.parent.element.value=i,this.parent.element.focus(),this.steps--,this.restore(this.parent.element,t,n,e)}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){this.currentAction=\"Redo\";var t=this.undoRedoStack[this.steps+1].start,n=this.undoRedoStack[this.steps+1].end;this.parent.element.value=this.undoRedoStack[this.steps+1].text,this.parent.element.focus(),this.steps++,this.restore(this.parent.element,t,n,e)}},e.prototype.restore=function(e,t,n,i){this.selection.save(t,n),this.selection.restore(e),i&&i.callBack&&i.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:\"Markdown\",event:i.event})},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),jn=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"link-commands\",this.createLink,this)},e.prototype.createLink=function(e){var t=this.parent.element;t.focus();var n=t.selectionStart,i=t.selectionEnd,r=\"Image\"===e.subCommand?this.selection.getSelectedText(t):e.item.text,o=\"Image\"===e.subCommand?n+2:n+1,a=\"Image\"===e.subCommand?i+2:i+1;r=\"Image\"===e.subCommand?\"![\"+r+\"](\"+e.item.url+\")\":\"[\"+r+\"](\"+e.item.url+\")\",t.value=t.value.substr(0,n)+r+t.value.substr(i,t.value.length),this.parent.markdownSelection.setSelection(t,o,a),this.restore(t,o,a,e)},e.prototype.restore=function(e,t,n,i){this.selection.save(t,n),this.selection.restore(e),i&&i.callBack&&i.callBack({requestType:i.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:\"Markdown\",event:i.event})},e}(),xn=function(){function e(e){Object(l.J)(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"insert-table\",this.createTable,this),this.parent.observer.on(\"keydown-handler\",this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(\"insert-table\",this.createTable),this.parent.observer.off(\"keydown-handler\",this.onKeyDown)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onKeyDown=function(e){\"insert-table\"===e.event.action&&(e.item=e.value,this.createTable(e))},e.prototype.createTable=function(e){this.element=this.parent.element;var t,n=this.element.selectionStart,i=this.element.selectionEnd;t=this.element.value,this.locale=e,this.selection.save(n,i),this.restore(this.element.selectionStart,this.element.selectionEnd,null),this.insertTable(n,i,t,e)},e.prototype.getTable=function(){var e=\"\";return e+=this.textNonEmpty(),e+=this.tableHeader(this.locale),e+=this.tableCell(this.locale)},e.prototype.tableHeader=function(e){for(var t=\"\",n=1;n<=2;n++){t+=\"|\";for(var i=1;i<=2;i++)t+=1===n?e.item.headingText+\" \"+i+\"|\":\"---------|\";t+=this.insertLine()}return t},e.prototype.tableCell=function(e){for(var t=\"\",n=1;n<=2;n++){t+=\"|\";for(var i=1;i<=2;i++)t+=e.item.colText+\" \"+this.convertToLetters(n)+i+\"|\";t+=this.insertLine()}return t+=this.insertLine()},e.prototype.insertLine=function(){var e=document.createElement(\"div\");return e.innerHTML=\"\\n\",e.textContent},e.prototype.insertTable=function(e,t,n,i){var r=this.selection.getSelectedParentPoints(this.element),o=r[r.length-1].text.split(\" \",2),a=this.getFormatTag();o.length<2?(this.element.value=this.updateValue(this.getTable()),this.makeSelection(n,e,t)):this.ensureFormatApply(r[r.length-1].text)?this.checkValid(e,t,this.getTable(),n,i,o,r,a):(this.element.value=this.updateValue(this.getTable()),this.makeSelection(n,e,t)),this.restore(this.element.selectionStart,this.element.selectionEnd,i)},e.prototype.makeSelection=function(e,t,n){n=t+(e.length>0?12:10),t+=e.length>0?3:1,this.selection.setSelection(this.element,t,n)},e.prototype.getFormatTag=function(){for(var e=Object.keys(this.syntaxTag.Formats),t=Object.keys(this.syntaxTag.List),n=[],i=0;i<e.length;i++)n.push(this.syntaxTag.Formats[e[i]]);for(var r=0;r<t.length;r++)n.push(this.syntaxTag.List[t[r]]);return n},e.prototype.ensureFormatApply=function(e){for(var t=this.getFormatTag(),n=e.trim().split(\" \",2)[0]+\" \",i=0;i<t.length;i++)if(n===t[i]||/^[\\d.]+[ ]+$/.test(n))return!0;return!1},e.prototype.ensureStartValid=function(e,t){for(var n=t[0].text.split(\" \",2),i=e+1;i<=e+n[0].length+1;i++)if(this.element.selectionStart===i||this.element.selectionEnd===i)return!1;return!0},e.prototype.ensureEndValid=function(e,t){for(var n=e+1;n<=e+t+1;n++)if(this.element.selectionEnd===n)return!1;return!0},e.prototype.updateValueWithFormat=function(e,t){var n=this.element.value.substring(this.element.selectionEnd,this.element.value.length);return t+=n.replace(n,e[0]+\" \"+n),this.element.value.substr(0,this.element.selectionStart)+t},e.prototype.updateValue=function(e){return this.element.value.substr(0,this.element.selectionStart)+e+this.element.value.substr(this.element.selectionEnd,this.element.value.length)},e.prototype.checkValid=function(e,t,n,i,r,o,a,s){this.ensureStartValid(a[0].start,a)&&this.ensureEndValid(a[a.length-1].start,o[0].length)&&(e===a[0].start?e!==t&&t!==a[a.length-1].end-1?this.element.value=this.updateValueWithFormat(o,n):this.element.value=this.updateValue(n):t===a[a.length-1].end-1?this.element.value=this.updateValue(n):this.element.value=this.updateValueWithFormat(o,n),this.makeSelection(i,e,t))},e.prototype.convertToLetters=function(e){var t=\"A\".charCodeAt(0),n=\"\";do{e-=1,n=String.fromCharCode(t+e%26)+n,e=e/26>>0}while(e>0);return n},e.prototype.textNonEmpty=function(){var e=\"\";return(this.isCursorBased()||this.isSelectionBased())&&this.element.value.length>0&&(e+=this.insertLine(),e+=this.insertLine()),e},e.prototype.isCursorBased=function(){return this.element.selectionStart===this.element.selectionEnd},e.prototype.isSelectionBased=function(){return this.element.selectionStart!==this.element.selectionEnd},e.prototype.restore=function(e,t,n){this.selection.save(e,t),this.selection.restore(this.element),n&&n.callBack&&n.callBack({requestType:n.subCommand,selectedText:this.selection.getSelectedText(this.element),editorMode:\"Markdown\",event:n.event})},e}(),Nn=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(\"clear-commands\",this.clear,this)},e.prototype.replaceRegex=function(e){return e.replace(/\\*/gi,\"\\\\*\").replace(/\\&/gi,\"\\\\&\").replace(/\\-/gi,\"\\\\-\").replace(/\\^/gi,\"\\\\^\").replace(/\\$/gi,\"\\\\$\").replace(/\\./gi,\"\\\\.\").replace(/\\|/gi,\"\\\\|\").replace(/\\?/gi,\"\\\\?\").replace(/\\+/gi,\"\\\\+\").replace(/\\-/gi,\"\\\\-\").replace(/\\&/gi,\"\\\\&\")},e.prototype.clearSelectionTags=function(e){for(var t=this.parent.selectionTags,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];if(t.hasOwnProperty(r)&&\"\"!==t[r]){var o,a,s=this.replaceRegex(t[r]),l=void 0;l=\"<sup>\"===t[r]?new RegExp(\"<sup>(.*?)</sup>\",\"ig\"):\"<sub>\"===t[r]?new RegExp(\"<sub>(.*?)</sub>\",\"ig\"):new RegExp(s+\"(.*?)\"+s,\"ig\"),o=t[r].length,a=\"<sup>\"===t[r]||\"<sub>\"===t[r]?t[r].length+1:t[r].length;for(var c=e.match(l),d=0;c&&d<c.length&&\"\"!==c[d];d++)e=e.replace(c[d],c[d].substr(o,c[d].length-a-o))}}return e},e.prototype.clearFormatTags=function(e){var t=e.split(\"\\n\");return this.clearFormatLines(t)},e.prototype.clearFormatLines=function(e){for(var t=[this.parent.formatTags,this.parent.listTags],n=\"\",i=0;i<e.length;i++){for(var r=0;r<t.length;r++)for(var o=t[r],a=Object.keys(o),s=0;s<a.length;s++){var l=a[s];o.hasOwnProperty(l)&&\"\"!==o[l]&&0===e[i].indexOf(o[l])&&(e[i]=e[i].replace(o[l],\"\"),e[i]=this.clearFormatLines([e[i]]))}n=n+e[i]+(i!==e.length-1?\"\\n\":\"\")}return n},e.prototype.clear=function(e){var t=this.parent.element;t.focus();var n=t.selectionStart,i=t.selectionEnd,r=this.selection.getSelectedText(t);r=this.clearSelectionTags(r),r=this.clearFormatTags(r),t.value=t.value.substr(0,n)+r+t.value.substr(i,t.value.length),this.parent.markdownSelection.setSelection(t,n,n+r.length),this.restore(t,n,n+r.length,e)},e.prototype.restore=function(e,t,n,i){this.selection.save(t,n),this.selection.restore(e),i&&i.callBack&&i.callBack({requestType:i.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:\"Markdown\",event:i.event})},e}(),Ln=function(){function e(e){this.initialize(),Object(l.J)(this,this,e,!0),this.observer=new l.r(this),this.markdownSelection=new Tn,this.listObj=new Sn({parent:this,syntax:this.listTags}),this.formatObj=new kn({parent:this,syntax:this.formatTags}),this.undoRedoManager=new En(this,e.options),this.mdSelectionFormats=new wn({parent:this,syntax:this.selectionTags}),this.linkObj=new jn(this),this.tableObj=new xn({parent:this,syntaxTag:{Formats:this.formatTags,List:this.listTags}}),this.clearObj=new Nn(this),this.wireEvents()}return e.prototype.initialize=function(){this.formatTags=Rt,this.listTags=Bt,this.selectionTags=Pt},e.prototype.wireEvents=function(){this.observer.on(\"keydown\",this.editorKeyDown,this),this.observer.on(\"keyup\",this.editorKeyUp,this),this.observer.on(\"model_changed\",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){this.observer.notify(\"model_changed_plugin\",e)},e.prototype.editorKeyDown=function(e){this.observer.notify(\"keydown-handler\",e)},e.prototype.editorKeyUp=function(e){this.observer.notify(\"keyup-handler\",e)},e.prototype.execCommand=function(e,t,n,i,r,o){switch(e.toLocaleLowerCase()){case\"lists\":this.observer.notify(\"lists-commands\",{subCommand:t,event:n,callBack:i});break;case\"formats\":this.observer.notify(\"format-type\",{subCommand:t,event:n,callBack:i});break;case\"actions\":this.observer.notify(\"action\",{subCommand:t,event:n,callBack:i});break;case\"style\":case\"effects\":case\"casing\":this.observer.notify(\"command-type\",{subCommand:t,event:n,callBack:i});break;case\"links\":case\"images\":this.observer.notify(\"link-commands\",{subCommand:t,event:n,callBack:i,item:o});break;case\"table\":switch(t.toString().toLocaleLowerCase()){case\"createtable\":this.observer.notify(\"insert-table\",{subCommand:t,item:o,event:n,callBack:i})}break;case\"clear\":this.observer.notify(\"clear-commands\",{subCommand:t,event:n,callBack:i})}},e}(),Dn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Mn=function(e){function t(t){var n=e.call(this)||this;return n.initialize(),Object(l.J)(n,n,t,!0),t&&n.element&&n.updateFormatter(n.element,document,t.options),n}return Dn(t,e),t.prototype.initialize=function(){this.keyConfig=_t,this.formatTags=Rt,this.listTags=Bt,this.selectionTags=Pt},t.prototype.updateFormatter=function(e,t,n){e&&(this.editorManager=new Ln({element:e,formatTags:this.formatTags,listTags:this.listTags,selectionTags:this.selectionTags,options:n}))},t}(xt),In=function(){function e(e){this.toolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,uppercase:!1,inlinecode:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null},this.selection=new Tn,this.parent=e,this.element=this.parent.contentModule.getEditPanel(),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on(\"toolbar-refresh\",this.onRefreshHandler,this),this.parent.on(h,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.off(\"toolbar-refresh\",this.onRefreshHandler),this.parent.off(h,this.removeEventListener)},e.prototype.onRefreshHandler=function(e){var t=this.selection.getSelectedParentPoints(this.element);this.toolbarStatus={orderedlist:!e.documentNode&&this.isListsApplied(t,\"OL\"),unorderedlist:!e.documentNode&&this.isListsApplied(t,\"UL\"),formats:this.currentFormat(t,e.documentNode),bold:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand(\"Bold\"),italic:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand(\"Italic\"),inlinecode:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand(\"InlineCode\"),strikethrough:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand(\"StrikeThrough\"),subscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand(\"SubScript\"),superscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand(\"SuperScript\"),uppercase:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand(\"UpperCase\")},this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand(\"InlineCode\")&&(this.toolbarStatus.formats=\"pre\"),this.parent.notify(\"toolbar-updated\",this.toolbarStatus)},e.prototype.isListsApplied=function(e,t){var n=!0;if(\"OL\"===t)for(var i=0;i<e.length;i++){var r=e[i].text.trim().split(\" \",2)[0]+\" \";if(!/^[\\d.]+[ ]+$/.test(r)){n=!1;break}}else for(i=0;i<e.length;i++)if(!this.selection.isStartWith(e[i].text,this.parent.formatter.listTags[t])){n=!1;break}return n},e.prototype.currentFormat=function(e,t){for(var n=\"p\",i=Object.keys(this.parent.formatter.formatTags),r=\"backward\"===this.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<i.length;o++){if(\"pre\"!==i[o]&&this.selection.isStartWith(r,this.parent.formatter.formatTags[i[o]])){n=i[o];break}if(\"pre\"===i[o]&&this.codeFormat()){n=i[o];break}}return n},e.prototype.codeFormat=function(){var e,t=!1,n=this.parent.inputElement,i=n.selectionStart,r=(e=i,function(t){return[t.slice(0,e),t.slice(e)]})(n.value),o=this.parent.formatter.formatTags.pre,a=this.getSelectedText(n);if(\"\"!==a&&a===a.toLocaleUpperCase())return!0;if(\"\"===a){var s=n.value.substr(r[0].length-1,1),l=r[1].substr(0,1);if(\"\"!==s&&\"\"!==l&&s.match(/[a-z]/i)&&s===s.toLocaleUpperCase()&&l===l.toLocaleUpperCase())return!0}return this.isCode(r[0],o)&&this.isCode(r[1],o)&&r[0].match(this.multiCharRegx(o)).length%2==1&&r[1].match(this.multiCharRegx(o)).length%2==1&&(t=!0),t},e.prototype.getSelectedText=function(e){return e.value.substring(e.selectionStart,e.selectionEnd)},e.prototype.isCode=function(e,t){return-1!==e.search(\"\\\\\"+t)},e.prototype.multiCharRegx=function(e){return new RegExp(\"(\\\\\"+e+\")\",\"g\")},e}(),Rn=function(){function e(e){this.parent=e}return e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.createElement(\"div\",{id:this.parent.getID()+\"_view\",className:\"e-rte-content\"});this.editableElement=this.parent.createElement(\"textarea\",{className:\"e-content\",id:this.parent.getID()+\"_editable-content\"}),t.appendChild(this.editableElement),this.setPanel(t),e.element.appendChild(t)},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getEditPanel=function(){return this.editableElement},e.prototype.getText=function(){return this.getEditPanel().value},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},e}(),Pn=function(){function e(e,t){this.parent=e,this.locator=t,this.renderFactory=this.locator.getService(\"rendererFactory\"),this.addEventListener()}return e.prototype.destroy=function(){this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.saveSelection=new Tn,this.parent.on(\"initial-load\",this.instantiateRenderer,this),this.parent.on(d,this.render,this),this.parent.on(p,this.onPropertyChanged,this),this.parent.on(\"markdown-toolbar-click\",this.onToolbarClick,this),this.parent.on(h,this.destroy,this),this.parent.on(\"selectAll\",this.selectAll,this),this.parent.on(\"getSelectedHtml\",this.getSelectedHtml,this),this.parent.on(\"selection-save\",this.onSelectionSave,this),this.parent.on(\"selection-restore\",this.onSelectionRestore,this),this.parent.on(\"readOnlyMode\",this.updateReadOnly,this))},e.prototype.updateReadOnly=function(){this.parent.readonly?(this.parent.contentModule.getEditPanel().setAttribute(\"readonly\",\"readonly\"),Object(l.v)([this.parent.element],\"e-rte-readonly\")):(this.parent.contentModule.getEditPanel().removeAttribute(\"readonly\"),Object(l.hb)([this.parent.element],\"e-rte-readonly\"))},e.prototype.onSelectionSave=function(){var e=this.parent.contentModule.getEditPanel();this.saveSelection.save(e.selectionStart,e.selectionEnd)},e.prototype.onSelectionRestore=function(e){this.contentRenderer.getEditPanel().focus();var t=this.parent.contentModule.getEditPanel();this.saveSelection.restore(t)},e.prototype.onToolbarClick=function(e){var t,n,i,r=e.item,o=this.parent.contentModule.getEditPanel();switch(o.focus(),n=o.selectionStart,i=o.selectionEnd,t=o.value.substring(n,i),r.subCommand){case\"Maximize\":this.parent.notify(\"enableFullScreen\",{args:e});break;case\"Minimize\":this.parent.notify(\"disableFullScreen\",{args:e});break;case\"CreateLink\":this.parent.notify(\"insertLink\",{member:\"link\",args:e,text:t,module:\"Markdown\"});break;case\"Image\":this.parent.notify(\"insertImage\",{member:\"image\",args:e,text:t,module:\"Markdown\"});break;case\"CreateTable\":var a={headingText:this.parent.localeObj.getConstant(\"TableHeadingText\"),colText:this.parent.localeObj.getConstant(\"TableColText\")};this.parent.formatter.process(this.parent,e,e.originalEvent,a);break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}},e.prototype.instantiateRenderer=function(){this.renderFactory.addRenderer(i.Content,new Rn(this.parent))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(d,this.render),this.parent.off(p,this.onPropertyChanged),this.parent.off(h,this.destroy),this.parent.off(\"markdown-toolbar-click\",this.onToolbarClick),this.parent.off(\"initial-load\",this.instantiateRenderer),this.parent.off(\"selectAll\",this.selectAll),this.parent.off(\"getSelectedHtml\",this.getSelectedHtml),this.parent.off(\"selection-save\",this.onSelectionSave),this.parent.off(\"selection-restore\",this.onSelectionRestore),this.parent.off(\"readOnlyMode\",this.updateReadOnly))},e.prototype.render=function(){this.contentRenderer=this.renderFactory.getRenderer(i.Content);var e=this.contentRenderer.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};Object(l.W)(this.parent.formatter)?this.parent.formatter=new Mn({element:e,options:t}):this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),t),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new In(this.parent)),this.parent.notify(\"bind-on-end\",{})},e.prototype.onPropertyChanged=function(e){if(!Object(l.W)(e.newProp.formatter)){var t=this.contentRenderer.getEditPanel(),n={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),n)}},e.prototype.getModuleName=function(){return\"markdownEditor\"},e.prototype.selectAll=function(){this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.contentModule.getEditPanel(),0,this.parent.contentModule.getEditPanel().value.length)},e.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()))},e}(),Bn=function(){function e(e,t){this.ensureInsideTableList=!0,this.pageX=null,this.pageY=null,this.moveEle=null,this.parent=e,this.rteID=e.element.id,this.l10n=t.getService(\"rteLocale\"),this.rendererFactory=t.getService(\"rendererFactory\"),this.dialogRenderObj=t.getService(\"dialogRenderObject\"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(\"createTable\",this.renderDlgContent,this),this.parent.on(d,this.afterRender,this),this.parent.on(\"docClick\",this.docClick,this),this.parent.on(\"editAreaClick\",this.editAreaClickHandler,this),this.parent.on(\"table-toolbar-action\",this.onToolbarAction,this),this.parent.on(\"dropDownSelect\",this.dropdownSelect,this),this.parent.on(m,this.keyDown,this),this.parent.on(h,this.destroy,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(\"createTable\",this.renderDlgContent),this.parent.off(d,this.afterRender),this.parent.off(\"docClick\",this.docClick),this.parent.off(\"editAreaClick\",this.editAreaClickHandler),this.parent.off(\"table-toolbar-action\",this.onToolbarAction),this.parent.off(\"dropDownSelect\",this.dropdownSelect),this.parent.off(f,this.cellSelect),this.parent.off(\"tableColorPickerChanged\",this.setBGColor),this.parent.off(m,this.keyDown),this.parent.off(h,this.destroy))},e.prototype.afterRender=function(){this.contentModule=this.rendererFactory.getRenderer(i.Content),this.parent.on(\"tableColorPickerChanged\",this.setBGColor,this),this.parent.on(f,this.cellSelect,this),this.parent.tableSettings.resize&&l.l.add(this.parent.contentModule.getEditPanel(),l.d.touchStartEvent,this.resizeStart,this),!l.d.isDevice&&this.parent.tableSettings.resize&&l.l.add(this.contentModule.getEditPanel(),\"mouseover\",this.resizeHelper,this)},e.prototype.dropdownSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(\".e-rte-quick-toolbar\"))&&\"Table\"===t.command){var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),i={args:e,selection:this.parent.formatter.editorManager.nodeSelection.save(n,this.contentModule.getDocument()),selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(n)};switch(t.subCommand){case\"InsertRowBefore\":case\"InsertRowAfter\":this.addRow(i.selection,e);break;case\"InsertColumnLeft\":case\"InsertColumnRight\":this.addColumn(i.selection,e);break;case\"DeleteColumn\":case\"DeleteRow\":this.removeRowColumn(i.selection,e);break;case\"AlignTop\":case\"AlignMiddle\":case\"AlignBottom\":this.verticalAlign(i,e);break;case\"Dashed\":case\"Alternate\":this.tableStyles(i,t.subCommand)}}},e.prototype.keyDown=function(e){var t=e.args;switch(t.action){case\"escape\":break;case\"insert-table\":if(\"HTML\"===this.parent.editorMode){var n=this.parent.contentModule.getDocument(),i=this.parent.formatter.editorManager.nodeSelection.getRange(n),r=this.parent.formatter.editorManager.nodeSelection.save(i,n),o={originalEvent:e.args,item:{command:\"Table\",subCommand:\"CreateTable\"}};this.insertTableDialog({self:this,args:o,selection:r})}t.preventDefault()}if(!Object(l.W)(this.parent.formatter.editorManager.nodeSelection)&&this.contentModule&&\"KeyK\"!==t.code){i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(i,this.contentModule.getDocument());var a=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)[0];if(a=a&&\"TD\"!==a.tagName&&\"TH\"!==a.tagName?a.parentElement:a,(8===t.keyCode||46===t.keyCode||t.ctrlKey&&88===t.keyCode)&&(a&&\"TBODY\"===a.tagName?(t.preventDefault(),this.removeTable(r,t,!0)):a&&a.querySelectorAll(\"table\").length>0&&this.removeResizeElement()),a&&\"TD\"!==a.tagName&&\"TH\"!==a.tagName){var s=Object(l.C)(a,\"td\");a=!Object(l.W)(s)&&this.parent.inputElement.contains(s)?s:a}if(a&&(\"TD\"===a.tagName||\"TH\"===a.tagName))switch(t.keyCode){case 9:case 37:case 39:this.tabSelection(t,r,a);break;case 40:case 38:this.tableArrowNavigation(t,r,a)}}},e.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case\"TableHeader\":this.tableHeader(e.selection,e.args);break;case\"TableRemove\":this.removeTable(e.selection,e.args);break;case\"TableEditProperties\":this.editTable(e)}},e.prototype.verticalAlign=function(e,t){var n=Object(l.C)(e.selectParent[0],\"td\")||Object(l.C)(e.selectParent[0],\"th\");n&&this.parent.formatter.process(this.parent,t,t,{tableCell:n,subCommand:t.item.subCommand})},e.prototype.tableStyles=function(e,t){var n=Object(l.C)(e.selectParent[0],\"table\");\"Dashed\"===t&&(this.parent.element.classList.contains(\"e-dashed-border\")?this.parent.element.classList.remove(\"e-dashed-border\"):this.parent.element.classList.add(\"e-dashed-border\"),n.classList.contains(\"e-dashed-border\")?n.classList.remove(\"e-dashed-border\"):n.classList.add(\"e-dashed-border\")),\"Alternate\"===t&&(this.parent.element.classList.contains(\"e-alternate-border\")?this.parent.element.classList.remove(\"e-alternate-border\"):this.parent.element.classList.add(\"e-alternate-border\"),n.classList.contains(\"e-alternate-border\")?n.classList.remove(\"e-alternate-border\"):n.classList.add(\"e-alternate-border\")),this.parent.formatter.saveData(),this.parent.formatter.editorManager.nodeSelection.restore()},e.prototype.insideList=function(e){for(var t=this.parent.formatter.editorManager.domNode.blockNodes(),n=[],i=0;i<t.length;i++)\"LI\"===t[i].parentNode.tagName?n.push(t[i].parentNode):\"LI\"===t[i].tagName&&\"P\"!==t[i].childNodes[0].tagName&&\"OL\"!==t[i].childNodes[0].tagName&&\"UL\"!==t[i].childNodes[0].tagName&&n.push(t[i]);return n.length>1||n.length&&0===e.startOffset&&0===e.endOffset?(this.ensureInsideTableList=!0,!0):(this.ensureInsideTableList=!1,!1)},e.prototype.tabSelection=function(e,t,n){var i=this.insideList(t.range);if((37!==e.keyCode&&39!==e.keyCode||3!==t.range.startContainer.nodeType)&&!i)if(e.preventDefault(),n.classList.remove(\"e-cell-select\"),e.shiftKey||37===e.keyCode){var r=Object(l.W)(n.previousSibling)?Object(l.W)(Object(l.C)(n,\"tr\").previousSibling)?Object(l.W)(Object(l.C)(n,\"table\").previousSibling)?n:\"td\"===Object(l.C)(n,\"table\").previousSibling.nodeName.toLowerCase()?Object(l.C)(n,\"table\").previousSibling:n:Object(l.C)(n,\"tr\").previousSibling.childNodes[Object(l.C)(n,\"tr\").previousSibling.childNodes.length-1]:n.previousSibling;if(n===r&&0===n.cellIndex&&Object(l.C)(n,\"table\").tHead){var o=Object(l.C)(n,\"table\");r=o.rows[0].cells[o.rows[0].cells.length-1]}37===e.keyCode&&n===r&&(r=Object(l.C)(n,\"table\").previousSibling),r&&(\"\"!==r.textContent.trim()&&Object(l.C)(r,\"td\")?t.setSelectionNode(this.contentModule.getDocument(),r):t.setSelectionText(this.contentModule.getDocument(),r,r,0,0))}else{var a=Object(l.W)(n.nextSibling)?Object(l.W)(Object(l.C)(n,\"tr\").nextSibling)?Object(l.W)(Object(l.C)(n,\"table\").nextSibling)?n:\"td\"===Object(l.C)(n,\"table\").nextSibling.nodeName.toLowerCase()?Object(l.C)(n,\"table\").nextSibling:n:Object(l.C)(n,\"tr\").nextSibling.childNodes[0]:n.nextSibling;n===a&&\"TH\"===n.nodeName&&(a=Object(l.C)(n,\"table\").rows[1].cells[0]),39===e.keyCode&&n===a&&(a=Object(l.C)(n,\"table\").nextSibling),a&&(\"\"!==a.textContent.trim()&&Object(l.C)(a,\"td\")?t.setSelectionNode(this.contentModule.getDocument(),a):t.setSelectionText(this.contentModule.getDocument(),a,a,0,0)),n===a&&39!==e.keyCode&&a&&(this.addRow(t,e,!0),\"\"!==(a=a.parentElement.nextSibling.firstChild).textContent.trim()&&Object(l.C)(a,\"td\")?t.setSelectionNode(this.contentModule.getDocument(),a):t.setSelectionText(this.contentModule.getDocument(),a,a,0,0))}},e.prototype.tableArrowNavigation=function(e,t,n){var i=t.range.startContainer;40===e.keyCode&&3===i.nodeType&&(i.nextSibling&&\"BR\"===i.nextSibling.nodeName||i.parentNode&&\"TD\"!==i.parentNode.nodeName)||38===e.keyCode&&3===i.nodeType&&(i.previousSibling&&\"BR\"===i.previousSibling.nodeName||i.parentNode&&\"TD\"!==i.parentNode.nodeName)||(e.preventDefault(),n.classList.remove(\"e-cell-select\"),(n=40===e.keyCode?Object(l.W)(Object(l.C)(n,\"tr\").nextSibling)?Object(l.C)(n,\"table\").tHead&&\"TH\"===n.nodeName?Object(l.C)(n,\"table\").rows[1].cells[n.cellIndex]:Object(l.W)(Object(l.C)(n,\"table\").nextSibling)?n:Object(l.C)(n,\"table\").nextSibling:Object(l.C)(n,\"tr\").nextSibling.children[n.cellIndex]:Object(l.W)(Object(l.C)(n,\"tr\").previousSibling)?Object(l.C)(n,\"table\").tHead&&\"TH\"!==n.nodeName?Object(l.C)(n,\"table\").tHead.rows[0].cells[n.cellIndex]:Object(l.W)(Object(l.C)(n,\"table\").previousSibling)?n:Object(l.C)(n,\"table\").previousSibling:Object(l.C)(n,\"tr\").previousSibling.children[n.cellIndex])&&t.setSelectionText(this.contentModule.getDocument(),n,n,0,0))},e.prototype.setBGColor=function(e){var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.save(t,this.contentModule.getDocument()).range.startContainer;if((n=3===n.nodeType?Object(l.C)(n.parentNode,\"td,th\"):Object(l.C)(n,\"td, th\"))&&(\"TD\"===n.nodeName||\"TH\"===n.nodeName)){for(var i=Object(l.C)(n,\"table\").querySelectorAll(\".e-cell-select\"),r=0;r<i.length;r++)i[r].style.backgroundColor=e.item.value;this.parent.formatter.saveData()}},e.prototype.hideTableQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.tableQTBar&&document.body.contains(this.quickToolObj.tableQTBar.element)&&this.quickToolObj.tableQTBar.hidePopup()},e.prototype.tableHeader=function(e,t){this.parent.formatter.process(this.parent,t,t.originalEvent,{selection:e,subCommand:t.item.subCommand})},e.prototype.editAreaClickHandler=function(e){if(!this.parent.readonly){var t=e.args,n=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||n&&1===t.which||!n&&3===t.which)&&\"HTML\"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.tableQTBar){this.quickToolObj=this.parent.quickToolbarModule;var r=t.target;if(this.contentModule=this.rendererFactory.getRenderer(i.Content),this.quickToolObj.tableQTBar.element.classList.contains(\"e-rte-pop\"))return;var o=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument()),a=Object(l.C)(r,\"table\");if(r&&\"A\"!==r.nodeName&&\"IMG\"!==r.nodeName&&(\"TD\"===r.nodeName||\"TH\"===r.nodeName||\"TABLE\"===r.nodeName||a&&this.parent.contentModule.getEditPanel().contains(a))&&(3!==o.startContainer.nodeType||o.collapsed)){var s=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());this.parent.formatter.editorManager.nodeSelection.save(s,this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());var c=this.parent.iframeSettings.enable?window.pageYOffset+this.parent.element.getBoundingClientRect().top+t.clientY:t.pageY;this.quickToolObj.tableQTBar.showPopup(t.pageX,c,r),this.parent.formatter.editorManager.nodeSelection.restore()}else this.hideTableQuickToolbar()}}},e.prototype.tableCellSelect=function(e){var t=e.target,n=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),i=Array.prototype.slice.call(t.parentElement.children).indexOf(t),r=this.dlgDiv.querySelectorAll(\".e-rte-tablecell\");Array.prototype.forEach.call(r,(function(e){var t=Array.prototype.slice.call(e.parentElement.parentElement.children).indexOf(e.parentElement),r=Array.prototype.slice.call(e.parentElement.children).indexOf(e);Object(l.hb)([e],\"e-active\"),t<=n&&r<=i&&Object(l.v)([e],\"e-active\")})),this.tblHeader.innerHTML=i+1+\"x\"+(n+1)},e.prototype.tableCellLeave=function(e){Object(l.hb)(this.dlgDiv.querySelectorAll(\".e-rte-tablecell\"),\"e-active\"),Object(l.v)([this.dlgDiv.querySelector(\".e-rte-tablecell\")],\"e-active\"),this.tblHeader.innerHTML=\"1x1\"},e.prototype.tableCellClick=function(e){var t=e.target,n=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement)+1,i=Array.prototype.slice.call(t.parentElement.children).indexOf(t)+1;this.self.tableInsert(n,i,e,this)},e.prototype.tableInsert=function(e,t,n,i){var r=i.self?i.self:this,o=i.selection.range.startContainer;\"P\"!==o.nodeName||\"\"!==o.textContent.trim()||o.childNodes.length>0||(o.innerHTML=\"<br />\");var a=o.parentNode;if(\"HTML\"===r.parent.editorMode&&(r.parent.iframeSettings.enable&&!Pe(a.ownerDocument.querySelector(\"body\"),\"e-lib\")||!r.parent.iframeSettings.enable&&Object(l.W)(Object(l.C)(a,\"#\"+r.contentModule.getPanel().id)))){r.contentModule.getEditPanel().focus();var s=r.parent.formatter.editorManager.nodeSelection.getRange(r.contentModule.getDocument());i.selection=r.parent.formatter.editorManager.nodeSelection.save(s,r.contentModule.getDocument())}var c={row:e,columns:t,width:{minWidth:r.parent.tableSettings.minWidth,maxWidth:r.parent.tableSettings.maxWidth,width:r.parent.tableSettings.width},selection:i.selection};r.popupObj&&r.popupObj.hide(),r.editdlgObj&&r.editdlgObj.hide(),r.parent.formatter.process(r.parent,i.args,i.args.originalEvent,c),r.contentModule.getEditPanel().focus(),r.parent.on(f,r.cellSelect,r)},e.prototype.cellSelect=function(e){var t=e.args.target,n=Object(l.C)(t,\"td,th\");t=\"TD\"!==t.nodeName&&n&&this.parent.contentModule.getEditPanel().contains(n)?n:t,Object(l.hb)(this.contentModule.getEditPanel().querySelectorAll(\"table td, table th\"),\"e-cell-select\"),!t||\"TD\"!==t.tagName&&\"TH\"!==t.tagName||(t.removeAttribute(\"class\"),Object(l.v)([t],\"e-cell-select\"),this.curTable=this.curTable?this.curTable:Object(l.C)(t,\"table\"),this.removeResizeElement(),this.helper&&this.contentModule.getEditPanel().contains(this.helper)&&Object(l.I)(this.helper))},e.prototype.resizeHelper=function(e){if(!this.parent.readonly){var t=e.target||e.targetTouches[0].target,n=Object(l.C)(t,\"table\");\"TABLE\"!==t.nodeName&&\"TD\"!==t.nodeName&&\"TH\"!==t.nodeName||(this.curTable=n&&this.parent.contentModule.getEditPanel().contains(n)&&(\"TD\"===t.nodeName||\"TH\"===t.nodeName)?n:t,this.removeResizeElement(),this.tableResizeEleCreation(this.curTable,e))}},e.prototype.tableResizeEleCreation=function(e,t){this.parent.preventDefaultResize(t);for(var n=Array.prototype.slice.call(e.rows[0].cells,1),i=[],r=0;r<e.rows.length;r++)i.push(Array.prototype.slice.call(e.rows[r].cells,0,1)[0]);var o=parseInt(getComputedStyle(e).height,10),a=parseInt(getComputedStyle(e).width,10),s=this.calcPos(e);for(r=0;n.length>r;r++){var c=this.parent.createElement(\"span\",{attrs:{\"data-col\":(r+1).toString(),unselectable:\"on\",contenteditable:\"false\"}});c.classList.add(\"e-rte-table-resize\",\"e-column-resize\"),c.style.cssText=\"height: \"+o+\"px; width: 4px; top: \"+s.top+\"px; left:\"+(s.left+this.calcPos(n[r]).left)+\"px;\",this.contentModule.getEditPanel().appendChild(c)}for(r=0;i.length>r;r++){var d=this.parent.createElement(\"span\",{attrs:{\"data-row\":r.toString(),unselectable:\"on\",contenteditable:\"false\"}});d.classList.add(\"e-rte-table-resize\",\"e-row-resize\");var h=Object(l.W)(e.getAttribute(\"cellspacing\"))&&\"\"===e.getAttribute(\"cellspacing\")?this.calcPos(i[r]).left:0;d.style.cssText=\"width: \"+a+\"px; height: 4px; top: \"+(this.calcPos(i[r]).top+s.top+i[r].offsetHeight-2)+\"px; left:\"+(h+s.left)+\"px;\",this.contentModule.getEditPanel().appendChild(d)}var p=this.parent.createElement(\"span\",{className:\"e-table-box\",attrs:{\"data-col\":n.length.toString(),unselectable:\"on\",contenteditable:\"false\"}});p.style.cssText=\"top: \"+(s.top+o-4)+\"px; left:\"+(s.left+a-4)+\"px;\",l.d.isDevice&&p.classList.add(\"e-rmob\"),this.contentModule.getEditPanel().appendChild(p)},e.prototype.removeResizeElement=function(){var e=this.parent.contentModule.getEditPanel().querySelectorAll(\".e-column-resize, .e-row-resize, .e-table-box\");if(e.length>0)for(var t=0;t<e.length;t++)Object(l.I)(e[t])},e.prototype.calcPos=function(e){for(var t={top:0,left:0},n=e.getBoundingClientRect(),i=e.ownerDocument,r=e.offsetParent||i.documentElement;r&&(r===i.body||r===i.documentElement)&&\"static\"===r.style.position;)r=r.parentNode;return\"TD\"===r.nodeName&&\"TABLE\"===e.nodeName&&(r=Object(l.C)(r,\".e-control\")),r&&r!==e&&1===r.nodeType&&(t=r.getBoundingClientRect()),{top:n.top-t.top,left:n.left-t.left}},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},e.prototype.resizeStart=function(e){var t=this;if(!this.parent.readonly){l.d.isDevice&&this.resizeHelper(e);var n=e.target;if(n.classList.contains(\"e-column-resize\")||n.classList.contains(\"e-row-resize\")||n.classList.contains(\"e-table-box\")){if(e.preventDefault(),this.parent.preventDefaultResize(e),Object(l.hb)(this.curTable.querySelectorAll(\"td,th\"),\"e-cell-select\"),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),this.resizeBtnInit(),this.hideTableQuickToolbar(),n.classList.contains(\"e-column-resize\")&&(this.resizeBtnStat.column=!0,this.columnEle=this.curTable.rows[0].cells[parseInt(n.getAttribute(\"data-col\"),10)],this.colIndex=this.columnEle.cellIndex,this.moveEle=e.target,this.appendHelper()),n.classList.contains(\"e-row-resize\")&&(this.rowEle=this.curTable.rows[parseInt(n.getAttribute(\"data-row\"),10)],this.resizeBtnStat.row=!0,this.appendHelper()),n.classList.contains(\"e-table-box\")&&(this.resizeBtnStat.tableBox=!0),l.d.isDevice&&this.helper&&!this.helper.classList.contains(\"e-reicon\"))this.helper.classList.add(\"e-reicon\"),l.l.add(document,l.d.touchStartEvent,this.removeHelper,this),l.l.add(this.helper,l.d.touchStartEvent,this.resizeStart,this);else{var i=Object(l.V)()?{requestType:\"Table\"}:{event:e,requestType:\"Table\"};this.parent.trigger(\"resizeStart\",i,(function(e){e.cancel&&t.cancelResizeAction()}))}l.l.add(this.contentModule.getDocument(),l.d.touchMoveEvent,this.resizing,this),l.l.add(this.contentModule.getDocument(),l.d.touchEndEvent,this.resizeEnd,this)}}},e.prototype.removeHelper=function(e){!e.target.classList.contains(\"e-reicon\")&&this.helper&&(l.l.remove(document,l.d.touchStartEvent,this.removeHelper),l.l.remove(this.helper,l.d.touchStartEvent,this.resizeStart),this.helper&&this.contentModule.getEditPanel().contains(this.helper)&&Object(l.I)(this.helper),this.pageX=null,this.helper=null)},e.prototype.appendHelper=function(){this.helper=this.parent.createElement(\"div\",{className:\"e-table-rhelper\"}),l.d.isDevice&&this.helper.classList.add(\"e-reicon\"),this.contentModule.getEditPanel().appendChild(this.helper),this.setHelperHeight()},e.prototype.setHelperHeight=function(){var e=this.calcPos(this.curTable);this.resizeBtnStat.column?(this.helper.classList.add(\"e-column-helper\"),this.helper.style.cssText=\"height: \"+getComputedStyle(this.curTable).height+\"; top: \"+e.top+\"px; left:\"+(e.left+this.calcPos(this.columnEle).left-1)+\"px;\"):(this.helper.classList.add(\"e-row-helper\"),this.helper.style.cssText=\"width: \"+getComputedStyle(this.curTable).width+\"; top: \"+(this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight)+\"px; left:\"+(this.calcPos(this.rowEle).left+e.left)+\"px;\")},e.prototype.updateHelper=function(){var e=this.calcPos(this.curTable);if(this.resizeBtnStat.column){var t=e.left+this.calcPos(this.columnEle).left-1;this.helper.style.left=t+\"px\"}else{var n=this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight;this.helper.style.top=n+\"px\"}},e.prototype.resizing=function(e){var t=this,n=this.getPointX(e),i=this.getPointY(e),r=this.parent.enableRtl?-(n-this.pageX):n-this.pageX,o=this.parent.enableRtl?-(i-this.pageY):i-this.pageY;this.pageX=n,this.pageY=i;var a=Object(l.V)()?{requestType:\"table\"}:{event:e,requestType:\"table\"};this.parent.trigger(\"resizing\",a,(function(n){if(n.cancel)t.cancelResizeAction();else{var i=t.contentModule.getEditPanel().querySelector(\".e-table-box\"),a=parseInt(getComputedStyle(t.curTable).width,10),s=parseInt(getComputedStyle(t.curTable).height,10),c=+getComputedStyle(t.contentModule.getEditPanel()).paddingRight.match(/\\d/g).join(\"\"),d=t.contentModule.getEditPanel().offsetWidth-2*c;if(t.resizeBtnStat.column){for(var h=t.curTable.rows[0].cells,p=parseFloat(t.columnEle.offsetWidth.toString())-r,u=parseFloat(t.columnEle.offsetWidth.toString())+parseFloat(h[t.colIndex-1].offsetWidth.toString()),m=0;m<t.curTable.rows.length;m++)if(u-p>20&&p>20){var f=u-p,g=p;t.curTable.rows[m].cells[t.colIndex-1].style.width=t.convertPixelToPercentage(f,a)+\"%\",t.curTable.rows[m].cells[t.colIndex].style.width=t.convertPixelToPercentage(g,a)+\"%\"}t.updateHelper()}else if(t.resizeBtnStat.row){t.parent.preventDefaultResize(e);var b=parseFloat(t.rowEle.clientHeight.toString())+o;b>20&&(t.rowEle.style.height=b+\"px\"),t.curTable.style.height=\"\",i.style.cssText=\"top: \"+(t.calcPos(t.curTable).top+s-4)+\"px; left:\"+(t.calcPos(t.curTable).left+a-4)+\"px;\",t.updateHelper()}else if(t.resizeBtnStat.tableBox){l.d.isDevice||l.l.remove(t.contentModule.getEditPanel(),\"mouseover\",t.resizeHelper);var v=t.curTable.style.width.indexOf(\"%\")>-1;t.curTable.style.width=v?t.convertPixelToPercentage(a+r,d)+\"%\":a+r+\"px\",t.curTable.style.height=s+o+\"px\",i.classList.add(\"e-rbox-select\"),i.style.cssText=\"top: \"+(t.calcPos(t.curTable).top+s-4)+\"px; left:\"+(t.calcPos(t.curTable).left+a-4)+\"px;\"}}}))},e.prototype.convertPixelToPercentage=function(e,t){return e/t*100},e.prototype.cancelResizeAction=function(){l.l.remove(this.contentModule.getDocument(),l.d.touchMoveEvent,this.resizing),l.l.remove(this.contentModule.getDocument(),l.d.touchEndEvent,this.resizeEnd),this.removeResizeElement()},e.prototype.resizeEnd=function(e){this.resizeBtnInit(),l.l.remove(this.contentModule.getDocument(),l.d.touchMoveEvent,this.resizing),l.l.remove(this.contentModule.getDocument(),l.d.touchEndEvent,this.resizeEnd),this.contentModule.getEditPanel().querySelector(\".e-table-box\")&&this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector(\".e-table-box\"))&&(l.d.isDevice||l.l.add(this.contentModule.getEditPanel(),\"mouseover\",this.resizeHelper,this),this.removeResizeElement(),this.helper&&this.contentModule.getEditPanel().contains(this.helper)&&(Object(l.I)(this.helper),this.helper=null),this.pageX=null,this.pageY=null,this.moveEle=null);var t=Object(l.V)()?{requestType:\"table\"}:{event:e,requestType:\"table\"};this.parent.trigger(\"resizeStop\",t),this.parent.formatter.saveData()},e.prototype.resizeBtnInit=function(){return this.resizeBtnStat={column:!1,row:!1,tableBox:!1}},e.prototype.addRow=function(e,t,n){var i;n&&(i={item:{command:\"Table\",subCommand:\"InsertRowAfter\"}});var r={selection:e,subCommand:n?i.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,n?i:t,t,r)},e.prototype.addColumn=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,width:this.parent.tableSettings.width,subCommand:t.item.subCommand})},e.prototype.removeRowColumn=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,subCommand:t.item.subCommand}),this.hideTableQuickToolbar()},e.prototype.removeTable=function(e,t,n){var i;n&&(i={item:{command:\"Table\",subCommand:\"TableRemove\"}});var r={selection:e,subCommand:n?i.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,n?i:t,t.originalEvent,r),this.contentModule.getEditPanel().focus(),this.removeResizeElement(),this.hideTableQuickToolbar()},e.prototype.renderDlgContent=function(e){var t=this;if(l.d.isDevice||this.parent.inlineMode.enable)this.insertTableDialog(e);else if(this.popupObj)this.popupObj.hide();else{this.hideTableQuickToolbar();var n=this.l10n.getConstant(\"inserttablebtn\");this.dlgDiv=this.parent.createElement(\"div\",{className:\"e-rte-table-popup\",id:this.rteID+\"_table\"}),this.tblHeader=this.parent.createElement(\"div\",{className:\"e-rte-popup-header\"}),this.tblHeader.innerHTML=\"1X1\",this.dlgDiv.appendChild(this.tblHeader);var i=this.parent.createElement(\"div\",{className:\"e-rte-table-span\"});this.drawTable(i,e),this.dlgDiv.appendChild(i),this.dlgDiv.appendChild(this.parent.createElement(\"span\",{className:\"e-span-border\"}));var r=this.parent.createElement(\"button\",{className:\"e-insert-table-btn\",id:this.rteID+\"_insertTable\",attrs:{type:\"button\",tabindex:\"0\"}});Object(l.W)(this.parent.getToolbarElement().querySelector(\".e-expended-nav\"))||this.parent.getToolbarElement().querySelector(\".e-expended-nav\").setAttribute(\"tabindex\",\"1\"),this.dlgDiv.appendChild(r);var o=new Ct.a({iconCss:\"e-icons e-create-table\",content:n,cssClass:\"e-flat\",enableRtl:this.parent.enableRtl,locale:this.parent.locale});o.isStringTemplate=!0,o.appendTo(r),l.l.add(r,\"click\",this.insertTableDialog,{self:this,args:e.args,selection:e.selection}),this.parent.getToolbar().appendChild(this.dlgDiv);var a=e.args.originalEvent.target;a=a.classList.contains(\"e-toolbar-item\")?a.firstChild:a.parentElement,this.popupObj=new c.a(this.dlgDiv,{targetType:\"relative\",relateTo:a,collision:{X:\"fit\",Y:\"none\"},offsetY:8,viewPortElement:this.parent.element,position:{X:\"left\",Y:\"bottom\"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(e){t.parent.isBlur=!1,t.popupObj.destroy(),Object(l.I)(t.popupObj.element),t.popupObj=null}}),Object(l.v)([this.popupObj.element],\"e-popup-open\"),this.popupObj.refreshPosition(a)}},e.prototype.docClick=function(e){var t=e.args.target;t&&t.classList&&(this.popupObj&&!Object(l.C)(t,\"#\"+this.popupObj.element.id)||this.editdlgObj&&!Object(l.C)(t,\"#\"+this.editdlgObj.element.id))&&!t.classList.contains(\"e-create-table\")&&t.offsetParent&&!t.offsetParent.classList.contains(\"e-rte-backgroundcolor-dropdown\")&&(this.popupObj&&this.popupObj.hide(),this.editdlgObj&&this.editdlgObj.hide(),this.parent.isBlur=!0,Ue(this.parent.element,\"focusout\"));var n=Object(l.C)(t,\"td\"),i=!(!n||!this.parent.contentModule.getEditPanel().contains(n));!t||\"TD\"===t.tagName||\"TH\"===t.tagName||i||null!==Object(l.C)(t,\".e-rte-quick-popup\")||!t.offsetParent||t.offsetParent.classList.contains(\"e-quick-dropdown\")||t.offsetParent.classList.contains(\"e-rte-backgroundcolor-dropdown\")||Object(l.C)(t,\".e-rte-dropdown-popup\")||Object(l.C)(t,\".e-rte-elements\")||(Object(l.hb)(this.parent.element.querySelectorAll(\"table td\"),\"e-cell-select\"),l.d.isIE||this.hideTableQuickToolbar()),!t||!t.classList||t.classList.contains(\"e-column-resize\")||t.classList.contains(\"e-row-resize\")||t.classList.contains(\"e-table-box\")||this.removeResizeElement()},e.prototype.drawTable=function(e,t){for(var n,i,r=0;r<3;r++){n=this.parent.createElement(\"div\",{className:\"e-rte-table-row\",attrs:{\"data-column\":\"\"+r}});for(var o=0;o<10;o++){var a=r>2?\"none\":\"inline-block\";i=this.parent.createElement(\"div\",{className:\"e-rte-tablecell e-default\",attrs:{\"data-cell\":\"\"+o}}),n.appendChild(i),i.style.display=a,0===o&&0===r&&Object(l.v)([i],\"e-active\"),l.l.add(i,\"mousemove\",this.tableCellSelect,this),l.l.add(n,\"mouseleave\",this.tableCellLeave,this),l.l.add(i,\"mouseup\",this.tableCellClick,{self:this,args:t.args,selection:t.selection})}e.appendChild(n)}},e.prototype.editTable=function(e){var t=this;this.createDialog(e);var n=this.tableDlgContent(e),i=this.l10n.getConstant(\"dialogUpdate\"),r=this.l10n.getConstant(\"dialogCancel\"),o=this.l10n.getConstant(\"tableEditHeader\");this.editdlgObj.setProperties({height:\"initial\",width:\"290px\",content:n,header:o,buttons:[{click:this.applyProperties.bind(this,e),buttonModel:{content:i,cssClass:\"e-flat e-size-update\",isPrimary:!0}},{click:function(e){t.cancelDialog(e)},buttonModel:{cssClass:\"e-flat e-cancel\",content:r}}]}),this.editdlgObj.element.style.maxHeight=\"none\",this.editdlgObj.content.querySelector(\"input\").focus(),this.hideTableQuickToolbar()},e.prototype.insertTableDialog=function(e){var t=this.self?this.self:this;t.popupObj&&t.popupObj.hide(),t.createDialog(e);var n=t.tableCellDlgContent(),i=t.l10n.getConstant(\"dialogInsert\"),r=t.l10n.getConstant(\"dialogCancel\");t.editdlgObj.setProperties({height:\"initial\",width:\"290px\",content:n,buttons:[{click:t.customTable.bind(this,e),buttonModel:{content:i,cssClass:\"e-flat e-insert-table\",isPrimary:!0}},{click:function(e){t.cancelDialog(e)},buttonModel:{cssClass:\"e-flat e-cancel\",content:r}}]}),t.editdlgObj.element.style.maxHeight=\"none\",t.editdlgObj.content.querySelector(\"input\").focus()},e.prototype.tableCellDlgContent=function(){var e=this.l10n.getConstant(\"columns\"),t=this.l10n.getConstant(\"rows\"),n=this.parent.createElement(\"div\",{className:\"e-cell-wrap\"}),i=Ve('<div class=\"e-rte-field\"><input type=\"text\"  data-role =\"none\" id=\"tableColumn\" class=\"e-table-column\"/></div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableRow\" class=\"e-table-row\" /></div>');return n.appendChild(i),this.columnTextBox=new vt.a({format:\"n0\",min:1,value:3,placeholder:e,floatLabelType:\"Auto\",max:50,enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.columnTextBox.isStringTemplate=!0,this.columnTextBox.appendTo(n.querySelector(\"#tableColumn\")),this.rowTextBox=new vt.a({format:\"n0\",min:1,value:3,placeholder:t,floatLabelType:\"Auto\",max:50,enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.rowTextBox.isStringTemplate=!0,this.rowTextBox.appendTo(n.querySelector(\"#tableRow\")),n},e.prototype.createDialog=function(e){var t=this;if(this.editdlgObj)this.editdlgObj.hide({returnValue:!0});else{var n=this.parent.createElement(\"div\",{className:\"e-rte-edit-table\",id:this.rteID+\"_tabledialog\"});this.parent.element.appendChild(n);var i=this.l10n.getConstant(\"dialogInsert\"),r=this.l10n.getConstant(\"dialogCancel\"),o={header:this.l10n.getConstant(\"tabledialogHeader\"),cssClass:\"e-rte-elements\",enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:l.d.isDevice?\"290px\":\"340px\",height:\"initial\",position:{X:\"center\",Y:l.d.isDevice?\"center\":\"top\"},isModal:l.d.isDevice,buttons:[{buttonModel:{content:i,cssClass:\"e-flat e-insert-table\",isPrimary:!0}},{click:function(e){t.cancelDialog(e)},buttonModel:{cssClass:\"e-flat e-cancel\",content:r}}],target:l.d.isDevice?document.body:this.parent.element,animationSettings:{effect:\"None\"},close:function(e){t.parent.isBlur=!1,t.editdlgObj.destroy(),Object(l.I)(t.editdlgObj.element),t.dialogRenderObj.close(e),t.editdlgObj=null}};this.editdlgObj=this.dialogRenderObj.render(o),this.editdlgObj.appendTo(n),this.quickToolObj&&this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup()}},e.prototype.customTable=function(e,t){var n=this.self?this.self:this;if(n.rowTextBox.value&&n.columnTextBox.value){var i=l.d.isDevice||!Object(l.W)(e.args)&&!Object(l.W)(e.args.originalEvent)&&\"insert-table\"===e.args.originalEvent.action||n.parent.inlineMode.enable?e:this;n.tableInsert(n.rowTextBox.value,n.columnTextBox.value,t,i)}},e.prototype.cancelDialog=function(e){this.parent.isBlur=!1,this.editdlgObj.hide({returnValue:!0})},e.prototype.applyProperties=function(e,t){var n=this.editdlgObj.element,i=Object(l.C)(e.selectNode[0],\"table\");if(i.style.width=n.querySelector(\".e-table-width\").value+\"px\",\"\"!==n.querySelector(\".e-cell-padding\").value)for(var r=i.querySelectorAll(\"td\"),o=0;o<r.length;o++){var a=\"\";\"\"===r[o].style.padding?a=r[o].getAttribute(\"style\")+\" padding:\"+n.querySelector(\".e-cell-padding\").value+\"px;\":(r[o].style.padding=n.querySelector(\".e-cell-padding\").value+\"px\",a=r[o].getAttribute(\"style\")),r[o].setAttribute(\"style\",a)}i.cellSpacing=n.querySelector(\".e-cell-spacing\").value,Object(l.W)(i.cellSpacing)&&\"0\"===i.cellSpacing?Object(l.hb)([i],\"e-rte-table-border\"):Object(l.v)([i],\"e-rte-table-border\"),this.parent.formatter.saveData(),this.editdlgObj.hide({returnValue:!0})},e.prototype.tableDlgContent=function(e){var t=e.selectParent[0],n=this.l10n.getConstant(\"tableWidth\"),i=this.l10n.getConstant(\"cellpadding\"),r=this.l10n.getConstant(\"cellspacing\"),o=this.parent.createElement(\"div\",{className:\"e-table-sizewrap\"}),a=Object(l.C)(t,\"table\").getClientRects()[0].width,s=Object(l.C)(t,\"td\").style.padding,c=Object(l.C)(t,\"table\").getAttribute(\"cellspacing\"),d=Ve('<div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"tableWidth\" class=\"e-table-width\"  /></div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellPadding\" class=\"e-cell-padding\" /> </div><div class=\"e-rte-field\"><input type=\"text\" data-role =\"none\" id=\"cellSpacing\" class=\"e-cell-spacing\" /></div>');o.appendChild(d);var h=new vt.a({format:\"n0\",min:0,value:a,placeholder:n,floatLabelType:\"Auto\",enableRtl:this.parent.enableRtl,locale:this.parent.locale});h.isStringTemplate=!0,h.appendTo(o.querySelector(\"#tableWidth\"));var p=new vt.a({format:\"n0\",min:0,value:\"\"!==s?parseInt(s,null):0,placeholder:i,floatLabelType:\"Auto\",enableRtl:this.parent.enableRtl,locale:this.parent.locale});p.isStringTemplate=!0,p.appendTo(o.querySelector(\"#cellPadding\"));var u=new vt.a({format:\"n0\",min:0,value:\"\"===c||Object(l.W)(c)?0:parseInt(c,null),placeholder:r,floatLabelType:\"Auto\",enableRtl:this.parent.enableRtl,locale:this.parent.locale});return u.isStringTemplate=!0,u.appendTo(o.querySelector(\"#cellSpacing\")),o},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.getModuleName=function(){return\"table\"},e}(),An=n(\"Oby/\"),_n=function(){function e(e,t){this.inlineNode=[\"a\",\"abbr\",\"acronym\",\"audio\",\"b\",\"bdi\",\"bdo\",\"big\",\"br\",\"button\",\"canvas\",\"cite\",\"code\",\"data\",\"datalist\",\"del\",\"dfn\",\"em\",\"embed\",\"font\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"label\",\"map\",\"mark\",\"meter\",\"noscript\",\"object\",\"output\",\"picture\",\"progress\",\"q\",\"ruby\",\"s\",\"samp\",\"script\",\"select\",\"slot\",\"small\",\"span\",\"strong\",\"sub\",\"sup\",\"svg\",\"template\",\"textarea\",\"time\",\"u\",\"tt\",\"var\",\"video\",\"wbr\"],this.blockNode=[\"div\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"address\",\"blockquote\",\"button\",\"center\",\"dd\",\"dir\",\"dl\",\"dt\",\"fieldset\",\"frameset\",\"hr\",\"iframe\",\"isindex\",\"li\",\"map\",\"menu\",\"noframes\",\"noscript\",\"object\",\"ol\",\"pre\",\"td\",\"tr\",\"th\",\"tbody\",\"tfoot\",\"thead\",\"table\",\"ul\",\"header\",\"article\",\"nav\",\"footer\",\"section\",\"aside\",\"main\",\"figure\",\"figcaption\"],this.isNotFromHtml=!1,this.containsHtml=!1,this.parent=e,this.locator=t,this.renderFactory=this.locator.getService(\"rendererFactory\"),this.i10n=t.getService(\"rteLocale\"),this.dialogRenderObj=t.getService(\"dialogRenderObject\"),this.addEventListener()}return e.prototype.addEventListener=function(){this.nodeSelectionObj=new It,this.parent.isDestroyed||(this.parent.on(\"pasteClean\",this.pasteClean,this),this.parent.on(h,this.destroy,this))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(\"pasteClean\",this.pasteClean),this.parent.off(h,this.destroy))},e.prototype.pasteClean=function(e){var t,n=this,r={requestType:\"Paste\",editorMode:this.parent.editorMode,event:e},o=null;if(e.args&&!Object(l.W)(e.args.clipboardData)&&(o=e.args.clipboardData.getData(\"text/html\")),e.args&&null!==o&&\"HTML\"===this.parent.editorMode){if(0===o.length){var a=new RegExp(/<\\/[a-z][\\s\\S]*>/i);o=e.args.clipboardData.getData(\"text/plain\"),this.isNotFromHtml=\"\"!==o,o=(o=o.replace(/</g,\"&lt;\")).replace(/>/g,\"&gt;\"),this.containsHtml=a.test(o);var s=e&&e.args.clipboardData&&e.args.clipboardData.items.length>0?e.args.clipboardData.items[0].getAsFile():null;if(this.parent.notify(g,{file:s,args:e.args,text:o,callBack:function(i){\"object\"==typeof(t=i)?n.parent.formatter.editorManager.execCommand(\"Images\",\"Image\",e.args,n.imageFormatting.bind(n,r),\"pasteCleanup\",t,\"pasteCleanupModule\"):o=t}}),!a.test(o)){var c=this.parent.createElement(\"div\");c.innerHTML=this.splitBreakLine(o),o=c.innerHTML}}else o.length>0&&this.parent.formatter.editorManager.observer.notify(\"ms_word_cleanup\",{args:e.args,text:e.text,allowedStylePropertiesArray:this.parent.pasteCleanupSettings.allowedStyleProps,callBack:function(e){o=e}});this.contentRenderer=this.renderFactory.getRenderer(i.Content);var d=this.contentRenderer.getDocument(),h=this.nodeSelectionObj.getRange(d);if(this.saveSelection=this.nodeSelectionObj.save(h,d),this.parent.pasteCleanupSettings.prompt){e.args.preventDefault();var p=this.parent.createElement(\"div\");p.innerHTML=o,\"\"===p.textContent&&Object(l.W)(p.querySelector(\"img\"))&&Object(l.W)(p.querySelector(\"table\"))||this.pasteDialog(o,r)}else this.parent.pasteCleanupSettings.plainText?(e.args.preventDefault(),this.plainFormatting(o,r)):this.parent.pasteCleanupSettings.keepFormat?(e.args.preventDefault(),this.formatting(o,!1,r)):(e.args.preventDefault(),this.formatting(o,!0,r))}},e.prototype.splitBreakLine=function(e){for(var t=e.split(\"\\n\"),n=\"\",i=0;i<t.length;i++){if(\"\"===t[i].trim())n+=\"<p><br></p>\";else n+=\"<p>\"+this.makeSpace(t[i]).trim()+\"</p>\"}return n},e.prototype.makeSpace=function(e){for(var t=\"\",n=!0,i=e.split(\" \"),r=0;r<i.length;r++)\"\"===i[r].trim()?t+=n?\"&nbsp;\":\" \":(n=!1,t+=i[r]+\" \");return t},e.prototype.imgUploading=function(e){var t=e.querySelectorAll(\".pasteContent_Img\");if(this.parent.insertImageSettings.saveUrl&&t.length>0){for(var n=[],i=[],r=[],o=0;o<t.length;o++)t[o].getAttribute(\"src\").split(\",\")[0].indexOf(\"base64\")>=0&&(n.push(t[o].getAttribute(\"src\")),i.push(Object(l.T)(\"rte_image\")),r.push(t[o]));var a=[];for(o=0;o<n.length;o++)a.push(this.base64ToFile(n[o],i[o]));for(o=0;o<a.length;o++)this.uploadMethod(a[o],r[o]);Object(l.W)(this.parent.insertImageSettings.path)&&\"Blob\"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t)}else\"Blob\"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t);var s=e.querySelectorAll(\".pasteContent_Img\");for(o=0;o<s.length;o++)s[o].classList.remove(\"pasteContent_Img\"),\"\"===s[o].getAttribute(\"class\").trim()&&t[o].removeAttribute(\"class\")},e.prototype.getBlob=function(e){for(var t=0;t<e.length;t++)if(!Object(l.W)(e[t].getAttribute(\"src\"))&&e[t].getAttribute(\"src\").split(\",\")[0].indexOf(\"base64\")>=0){var n=URL.createObjectURL($e(e[t].getAttribute(\"src\")));e[t].setAttribute(\"src\",n)}},e.prototype.uploadMethod=function(e,t){var n=this,i=document.createElement(\"div\");document.body.appendChild(i),i.setAttribute(\"display\",\"none\"),t.style.opacity=\"0.5\";var r=this.parent.createElement(\"div\");this.parent.element.appendChild(r);var o=this.parent.createElement(\"input\",{id:this.parent.element.id+\"_upload\",attrs:{type:\"File\",name:\"UploadFiles\"}}),a=this.parent.iframeSettings.enable?-50:-90,s=new c.a(r,{relateTo:t,height:\"85px\",width:\"300px\",offsetY:a,content:o,viewPortElement:this.parent.element,position:{X:\"center\",Y:\"top\"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(e){n.parent.isBlur=!1,s.destroy(),Object(l.I)(s.element)}});s.element.style.display=\"none\",Object(l.v)([s.element],[\"e-popup-open\",\"e-rte-upload-popup\"]);var d,h,p=e.size>1e6?300:100;setTimeout((function(){n.refreshPopup(t,s)}),p);var u=new yt.a({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},cssClass:\"e-rte-dialog-upload\",dropArea:this.parent.inputElement,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),success:function(e){setTimeout((function(){n.popupClose(s,u,t,e)}),900)},uploading:function(e){n.parent.isServerRendered||(n.parent.trigger(\"imageUploading\",e),n.parent.inputElement.contentEditable=\"false\")},beforeUpload:function(e){n.parent.isServerRendered?((h=JSON.parse(JSON.stringify(e))).filesData=d,e.cancel=!0,n.parent.trigger(\"imageUploading\",h,(function(e){e.cancel||(u.currentRequestHeader=e.currentRequest?e.currentRequest:u.currentRequestHeader,u.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:u.customFormDatas,u.uploadFiles(d,null))}))):n.parent.trigger(\"beforeImageUpload\",e)},failure:function(e){setTimeout((function(){n.uploadFailure(t,u,s,e)}),900)},canceling:function(){n.parent.inputElement.contentEditable=\"true\",\" \"===t.nextSibling.textContent&&Object(l.I)(t.nextSibling),Object(l.I)(t),s.close()},selected:function(e){e.cancel=!0,n.parent.isServerRendered&&(d=e.filesData)},removing:function(){n.parent.inputElement.contentEditable=\"true\",\" \"===t.nextSibling.textContent&&Object(l.I)(t.nextSibling),Object(l.I)(t),s.close()}});u.appendTo(s.element.childNodes[0]);var m=[{name:e.name,rawFile:e,size:e.size,type:e.type,validationMessages:{minSize:\"\",maxSize:\"\"},statusCode:\"1\"}];u.createFileList(m),u.filesData.push(m[0]),d=m,u.upload(m),s.element.getElementsByClassName(\"e-file-select-wrap\")[0].style.display=\"none\",Object(l.I)(s.element.querySelector(\".e-rte-dialog-upload .e-file-select-wrap\"))},e.prototype.uploadFailure=function(e,t,n,i){this.parent.inputElement.contentEditable=\"true\",Object(l.I)(e),n&&n.close(),this.parent.trigger(\"imageUploadFailed\",i),t.destroy()},e.prototype.popupClose=function(e,t,n,i){var r=this;this.parent.inputElement.contentEditable=\"true\",i.element=n,this.parent.trigger(\"imageUploadSuccess\",i,(function(e){if(!Object(l.W)(r.parent.insertImageSettings.path)){var t=r.parent.insertImageSettings.path+e.file.name;n.src=t,n.setAttribute(\"alt\",e.file.name)}})),e.close(),n.style.opacity=\"1\",t.destroy()},e.prototype.refreshPopup=function(e,t){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+e.offsetTop:e.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(t.relateTo=this.parent.inputElement,t.offsetY=this.parent.iframeSettings.enable?-30:-65,t.element.style.display=\"block\"):t&&(t.refreshPosition(e),t.element.style.display=\"block\")},e.prototype.base64ToFile=function(e,t){for(var n=e.split(\",\"),i=n[0].match(/:(.*?);/)[1].split(\"/\")[1],r=atob(n[1]),o=r.length,a=new Uint8Array(o);o--;)a[o]=r.charCodeAt(o);if(l.d.isIE||navigator.appVersion.indexOf(\"Edge\")>-1){var s=new Blob([a],{type:i});return Object(l.J)(s,{name:t+\".\"+(Object(l.W)(i)?\"\":i)}),s}return new File([a],t+\".\"+(Object(l.W)(i)?\"\":i),{type:i})},e.prototype.imageFormatting=function(e,t){var n=this.parent.createElement(\"span\");n.appendChild(t.elements[0]);var r=n.innerHTML;this.contentRenderer=this.renderFactory.getRenderer(i.Content);var o=this.contentRenderer.getDocument(),a=this.nodeSelectionObj.getRange(o);this.saveSelection=this.nodeSelectionObj.save(a,o),this.parent.pasteCleanupSettings.prompt?this.pasteDialog(r,e):this.parent.pasteCleanupSettings.plainText?this.plainFormatting(r,e):this.parent.pasteCleanupSettings.keepFormat?this.formatting(r,!1,e):this.formatting(r,!0,e)},e.prototype.radioRender=function(){var e=new An.a({label:this.i10n.getConstant(\"keepFormat\"),name:\"pasteOption\",checked:!0});e.isStringTemplate=!0;var t=this.parent.element.querySelector(\"#keepFormating\");e.appendTo(t);var n=new An.a({label:this.i10n.getConstant(\"cleanFormat\"),name:\"pasteOption\"});n.isStringTemplate=!0;var i=this.parent.element.querySelector(\"#cleanFormat\");n.appendTo(i);var r=new An.a({label:this.i10n.getConstant(\"plainText\"),name:\"pasteOption\"});r.isStringTemplate=!0;var o=this.parent.element.querySelector(\"#plainTextFormat\");r.appendTo(o)},e.prototype.selectFormatting=function(e,t,n,i){n?this.formatting(e,!1,t):i?this.formatting(e,!0,t):this.plainFormatting(e,t)},e.prototype.pasteDialog=function(e,t){var n=this,i=!1,r=this.parent.height,o={buttons:[{click:function(){if(!a.isDestroyed){var o=n.parent.element.querySelector(\"#keepFormating\").checked,s=n.parent.element.querySelector(\"#cleanFormat\").checked;a.hide(),n.parent.height=i?r:n.parent.height,i=!1;var c=Object(l.V)()?null:a;n.dialogRenderObj.close(c),a.destroy(),n.selectFormatting(e,t,o,s)}},buttonModel:{isPrimary:!0,cssClass:\"e-flat e-rte-pasteok\",content:this.i10n.getConstant(\"pasteDialogOk\")}},{click:function(){if(!a.isDestroyed){a.hide(),n.parent.height=i?r:n.parent.height,i=!1;var e=Object(l.V)()?null:a;n.dialogRenderObj.close(e),a.destroy()}},buttonModel:{cssClass:\"e-flat e-rte-pastecancel\",content:this.i10n.getConstant(\"pasteDialogCancel\")}}],header:this.i10n.getConstant(\"pasteFormat\"),content:this.i10n.getConstant(\"pasteFormatContent\")+'<br/><div><div style=\"padding-top:24px;\"><input type=\"radio\" class=\"e-rte-keepformat\" id=\"keepFormating\"/></div><div style=\"padding-top:20px;\"><input type=\"radio\" class=\"e-rte-removeformat\" id=\"cleanFormat\"/></div><div style=\"padding-top:20px;\"><input type=\"radio\" class=\"e-rte-plainformat\" id=\"plainTextFormat\"/></div></div>',target:this.parent.element,width:\"300px\",height:\"265px\",cssClass:\"e-rte-dialog-minheight\",isModal:!0,visible:!1},a=this.dialogRenderObj.render(o),s=this.parent.element.querySelector(\"#\"+this.parent.getID()+\"_pasteCleanupDialog\");null!==s&&\"\"!==s.innerHTML&&this.destroyDialog(s),null===s&&(s=this.parent.createElement(\"div\",{id:this.parent.getID()+\"_pasteCleanupDialog\"}),this.parent.element.appendChild(s)),a.appendTo(s),this.radioRender(),this.parent.element.offsetHeight<parseInt(a.height.split(\"px\")[0],null)&&(this.parent.height=parseInt(a.height.split(\"px\")[0],null)+40,i=!0),a.show()},e.prototype.destroyDialog=function(e){var t=this.parent.element.querySelector(\".e-dlg-container\");Object(l.I)(t);for(var n=e.children.length,i=0;i<n;i++)Object(l.I)(e.children[0])},e.prototype.formatting=function(e,t,n){var i=this,r=this.parent.createElement(\"div\",{className:\"pasteContent\",styles:\"display:inline;\"});this.isNotFromHtml&&this.containsHtml&&(e=this.splitBreakLine(e)),r.innerHTML=e,null!==this.parent.pasteCleanupSettings.deniedTags&&(r=this.deniedTags(r)),(t||null!==this.parent.pasteCleanupSettings.deniedAttrs)&&(r=this.deniedAttributes(r,t)),null!==this.parent.pasteCleanupSettings.allowedStyleProps&&(r=this.allowedStyle(r)),this.saveSelection.restore(),r.innerHTML=this.sanitizeHelper(r.innerHTML);for(var o=r.querySelectorAll(\"img\"),a=0;a<o.length;a++)o[a].classList.add(\"pasteContent_Img\");this.addTempClass(r),\"\"===r.textContent&&Object(l.W)(r.querySelector(\"img\"))&&Object(l.W)(r.querySelector(\"table\"))||(this.parent.formatter.editorManager.execCommand(\"inserthtml\",\"pasteCleanup\",n,(function(e){Object(l.J)(n,{elements:e.elements,imageElements:e.imgElem},!0),i.parent.formatter.onSuccess(i.parent,n)}),r),this.removeTempClass(),this.parent.notify(\"toolbar-refresh\",{}),this.imgUploading(this.parent.inputElement),this.parent.iframeSettings.enable&&this.parent.updateValue())},e.prototype.addTempClass=function(e){for(var t=e.children,n=0;n<t.length;n++)t[n].classList.add(\"pasteContent_RTE\")},e.prototype.removeTempClass=function(){for(var e=this.parent.inputElement.querySelectorAll(\".pasteContent_RTE\"),t=0;t<e.length;t++)e[t].classList.remove(\"pasteContent_RTE\"),\"\"===e[t].getAttribute(\"class\")&&e[t].removeAttribute(\"class\")},e.prototype.sanitizeHelper=function(e){return e=Je(e,this.parent)},e.prototype.plainFormatting=function(e,t){var n=this,i=this.parent.createElement(\"div\",{className:\"pasteContent\",styles:\"display:inline;\"});if(i.innerHTML=e,this.detachInlineElements(i),this.getTextContent(i),\"\"!==i.textContent.trim()){if(!Object(l.W)(i.firstElementChild)&&\"BR\"!==i.firstElementChild.tagName){var r=i.firstElementChild;if(!Object(l.W)(i.firstElementChild)){for(var o=this.parent.createElement(\"span\"),a=0,s=0;a<r.childNodes.length;a++,s++)if(\"#text\"===r.childNodes[a].nodeName)o.appendChild(r.childNodes[a]),i.insertBefore(o,i.firstElementChild),a--;else{if(\"#text\"===r.childNodes[a].nodeName||0!==s)break;for(var c=0;c<r.childNodes[a].childNodes.length;c++)o.appendChild(r.childNodes[a].childNodes[c]),i.insertBefore(o,i.firstElementChild),c--;a--}r.hasChildNodes()||Object(l.I)(r)}}this.removeEmptyElements(i),this.saveSelection.restore(),i.innerHTML=this.sanitizeHelper(i.innerHTML),this.addTempClass(i),this.parent.formatter.editorManager.execCommand(\"inserthtml\",\"pasteCleanup\",t,(function(e){Object(l.J)(t,{elements:e.elements,imageElements:e.imgElem},!0),n.parent.formatter.onSuccess(n.parent,t)}),i),this.removeTempClass()}else this.saveSelection.restore(),Object(l.J)(t,{elements:[]},!0),this.parent.formatter.onSuccess(this.parent,t)},e.prototype.getTextContent=function(e){for(var t=0;t<this.blockNode.length;t++)for(var n=e.querySelectorAll(this.blockNode[t]),i=0;i<n.length;i++){for(var r=void 0,o=0,a=0,s=void 0;o<n[i].childNodes.length;o++,a++)if(\"DIV\"===n[i].childNodes[o].nodeName||\"P\"===n[i].childNodes[o].nodeName||\"#text\"===n[i].childNodes[o].nodeName&&\"&nbsp;\"!==n[i].childNodes[o].nodeValue.replace(/\\u00a0/g,\"&nbsp;\")&&\"\"===n[i].childNodes[o].textContent.trim())r=n[i].childNodes[o].parentElement,n[i].childNodes[o].parentElement.parentElement.insertBefore(n[i].childNodes[o],n[i].childNodes[o].parentElement),o--;else{if(r=n[i].childNodes[o].parentElement,\"text\"===s){r.previousElementSibling.appendChild(n[i].childNodes[o])}else{var c=this.parent.createElement(\"div\",{id:\"newDiv\"});c.appendChild(n[i].childNodes[o]),r.parentElement.insertBefore(c,r)}o--,s=\"text\"}Object(l.W)(r)||Object(l.I)(r)}var d=e.querySelectorAll(\"*\");for(t=0;t<d.length;t++){var h=d[t].attributes;for(i=0;i<h.length;i++)d[t].removeAttribute(h[i].name),i--}},e.prototype.detachInlineElements=function(e){for(var t=0;t<this.inlineNode.length;t++)for(var n=e.querySelectorAll(this.inlineNode[t]),i=0;i<n.length;i++){for(var r=void 0,o=0;o<n[i].childNodes.length;o++)r=n[i].childNodes[o].parentElement,n[i].childNodes[o].parentElement.parentElement.insertBefore(n[i].childNodes[o],n[i].childNodes[o].parentElement),o--;Object(l.W)(r)||Object(l.I)(r)}},e.prototype.findDetachEmptyElem=function(e){return Object(l.W)(e.parentElement)?null:\"\"===e.parentElement.textContent.trim()&&\"pasteContent\"!==e.parentElement.getAttribute(\"class\")?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(\":empty\"),n=0;n<t.length;n++)if(\"BR\"!==t[n].tagName){var i=this.findDetachEmptyElem(t[n]);Object(l.W)(i)||Object(l.I)(i)}},e.prototype.tagGrouping=function(e){for(var t=e.slice(),n=Object.keys(Ht),i=n.map((function(e){return Ht[e]})),r=[],o=0;o<t.length;o++)if(t[o].split(\"[\").length>1&&(t[o]=t[o].split(\"[\")[0].trim()),n.indexOf(t[o])>-1)for(var a=0;a<i[n.indexOf(t[o])].length;a++)t.indexOf(i[n.indexOf(t[o])][a])<0&&r.indexOf(i[n.indexOf(t[o])][a])<0&&r.push(i[n.indexOf(t[o])][a]);return e.concat(r)},e.prototype.attributesfilter=function(e){for(var t=0;t<e.length;t++)if(e[t].split(\"[\").length>1){for(var n=e[t].split(\"[\")[1].split(\"]\")[0].split(\",\"),i=[],r=[],o=0;o<n.length;o++)n[o].indexOf(\"!\")<0?i.push(n[o].trim()):r.push(n[o].split(\"!\")[1].trim());var a=i.length>1?i.join(\"][\"):i.join(),s=r.length>1?r.join(\"][\"):r.join();if(s.length>0){var l=\"\"!==a?e[t].split(\"[\")[0]+\"[\"+a+\"]\":e[t].split(\"[\")[0];e[t]=l+\":not([\"+s+\"])\"}else e[t]=e[t].split(\"[\")[0]+\"[\"+a+\"]\"}return e},e.prototype.deniedTags=function(e){var t=Object(l.W)(this.parent.pasteCleanupSettings.deniedTags)?[]:this.parent.pasteCleanupSettings.deniedTags.slice();t=this.attributesfilter(t),t=this.tagGrouping(t);for(var n=0;n<t.length;n++)for(var i=e.querySelectorAll(t[n]),r=i.length-1;r>=0;r--){for(var o=i[r].parentNode;i[r].firstChild;)o.insertBefore(i[r].firstChild,i[r]);o.removeChild(i[r])}return e},e.prototype.deniedAttributes=function(e,t){var n=Object(l.W)(this.parent.pasteCleanupSettings.deniedAttrs)?[]:this.parent.pasteCleanupSettings.deniedAttrs.slice();t&&n.push(\"style\");for(var i=0;i<n.length;i++)for(var r=e.querySelectorAll(\"[\"+n[i]+\"]\"),o=0;o<r.length;o++)r[o].removeAttribute(n[i]);return e},e.prototype.allowedStyle=function(e){var t=Object(l.W)(this.parent.pasteCleanupSettings.allowedStyleProps)?[]:this.parent.pasteCleanupSettings.allowedStyleProps.slice();t.push(\"list-style-type\",\"list-style\");for(var n=e.querySelectorAll(\"[style]\"),i=0;i<n.length;i++){for(var r,o=[],a=n[i].getAttribute(\"style\").split(\";\"),s=0;s<a.length;s++)t.indexOf(a[s].split(\":\")[0].trim())>=0&&o.push(a[s]);n[i].removeAttribute(\"style\"),(r=\"\"===o.join(\";\").trim()?o.join(\";\"):o.join(\";\")+\";\")&&n[i].setAttribute(\"style\",r)}return e},e.prototype.getModuleName=function(){return\"pasteCleanup\"},e}(),Hn=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(d,this.renderResizable,this),this.parent.on(h,this.destroy,this))},e.prototype.renderResizable=function(){this.resizer=this.parent.createElement(\"div\",{id:this.parent.getID()+\"-resizable\",className:\"e-icons e-resize-handle e-south-east\"}),this.parent.element.classList.add(\"e-rte-resize\"),this.parent.element.appendChild(this.resizer),this.touchStartEvent=\"msie\"===l.d.info.name?\"pointerdown\":\"touchstart\",l.l.add(this.resizer,\"mousedown\",this.resizeStart,this),l.l.add(this.resizer,this.touchStartEvent,this.resizeStart,this)},e.prototype.resizeStart=function(e){var t=this;e.cancelable&&e.preventDefault(),this.wireResizeEvents(),this.parent.notify(\"resizeInitialized\",{});var n=Object(l.V)()?{requestType:\"editor\"}:{event:e,requestType:\"editor\"};this.parent.trigger(\"resizeStart\",n,(function(e){e.cancel&&t.unwireResizeEvents()}))},e.prototype.performResize=function(e){var t=this,n=Object(l.V)()?{requestType:\"editor\"}:{event:e,requestType:\"editor\"};this.parent.trigger(\"resizing\",n,(function(e){e.cancel&&t.unwireResizeEvents()}));var i=this.parent.element.getBoundingClientRect();if(this.isMouseEvent(e))this.parent.element.style.height=e.clientY-i.top+\"px\",this.parent.element.style.width=e.clientX-i.left+\"px\";else{var r=\"msie\"!==l.d.info.name?e.touches[0]:e;this.parent.element.style.height=r.clientY-i.top+\"px\",this.parent.element.style.width=r.clientX-i.left+\"px\"}this.parent.refreshUI()},e.prototype.stopResize=function(e){this.parent.refreshUI(),this.unwireResizeEvents();var t=Object(l.V)()?{requestType:\"editor\"}:{event:e,requestType:\"editor\"};this.parent.trigger(\"resizeStop\",t)},e.prototype.getEventType=function(e){return e.indexOf(\"mouse\")>-1?\"mouse\":\"touch\"},e.prototype.isMouseEvent=function(e){var t=!1;return(\"mouse\"===this.getEventType(e.type)||!Object(l.W)(e.pointerType)&&\"mouse\"===this.getEventType(e.pointerType))&&(t=!0),t},e.prototype.wireResizeEvents=function(){l.l.add(document,\"mousemove\",this.performResize,this),l.l.add(document,\"mouseup\",this.stopResize,this),this.touchMoveEvent=\"msie\"===l.d.info.name?\"pointermove\":\"touchmove\",this.touchEndEvent=\"msie\"===l.d.info.name?\"pointerup\":\"touchend\",l.l.add(document,this.touchMoveEvent,this.performResize,this),l.l.add(document,this.touchEndEvent,this.stopResize,this)},e.prototype.unwireResizeEvents=function(){l.l.remove(document,\"mousemove\",this.performResize),l.l.remove(document,\"mouseup\",this.stopResize),l.l.remove(document,this.touchMoveEvent,this.performResize),l.l.remove(document,this.touchEndEvent,this.stopResize)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(d,this.renderResizable),this.parent.element.classList.remove(\"e-rte-resize\"),l.l.remove(this.resizer,\"mousedown\",this.resizeStart),l.l.remove(this.resizer,this.touchStartEvent,this.resizeStart),this.resizer&&Object(l.I)(this.resizer),this.parent.off(h,this.destroy))},e.prototype.getModuleName=function(){return\"resize\"},e}(),Wn=n(\"mOMw\"),zn=n(\"Wp/j\"),Fn=n(\"2IBi\"),qn=n(\"VZ9X\"),Un=n(\"zhUf\"),Vn=function(){function e(e,t){Wn.a.Inject(zn.a,Fn.a,qn.a,Un.a),this.parent=e,this.i10n=t.getService(\"rteLocale\"),this.dialogRenderObj=t.getService(\"dialogRenderObject\"),this.rendererFactory=t.getService(\"rendererFactory\"),this.addEventListener()}return e.prototype.initialize=function(){this.parent.fileManagerModule=this,this.contentModule=this.rendererFactory.getRenderer(i.Content)},e.prototype.render=function(e){var t,n=this;t=e.selectNode&&\"IMG\"===e.selectNode[0].nodeName?this.parent.localeObj.getConstant(\"dialogUpdate\"):this.i10n.getConstant(\"dialogInsert\");var i=this.parent.localeObj.getConstant(\"fileDialogHeader\"),r=this.i10n.getConstant(\"dialogCancel\");this.dlgButtons=[{click:this.insertImageUrl.bind(this),buttonModel:{content:t,cssClass:\"e-flat e-insertImage\",isPrimary:!0}},{click:function(e){n.cancelDialog()},buttonModel:{cssClass:\"e-flat e-cancel\",content:r}}],this.dlgButtons[0].buttonModel.disabled=!0,this.selectObj={selection:e.selection,args:e.args,selectParent:e.selectParent};var o=this.parent.createElement(\"div\",{className:\"e-rte-file-manager-dialog\",id:this.parent.getID()+\"_file-manager-dialog\",attrs:{\"aria-owns\":this.parent.getID()}});document.body.appendChild(o),this.fileWrap=this.parent.createElement(\"div\",{id:this.parent.getID()+\"_rte-file-manager\",className:\"e-img-file-wrap\"}),o.appendChild(this.fileWrap),o.appendChild(this.getInputUrlElement());var a={visible:!1,isModal:!0,header:i,target:document.body,locale:this.parent.locale,enableRtl:this.parent.enableRtl,cssClass:\"e-rte-elements\",animationSettings:{effect:\"None\"},showCloseIcon:!0,closeOnEscape:!0,width:\"720px\",height:\"auto\",position:{X:\"center\",Y:\"center\"},buttons:this.dlgButtons,created:this.renderFileManager.bind(this),close:function(e){n.parent.isBlur=!1,e&&e.event.returnValue&&n.selectObj.selection.restore(),n.destroyComponents(),n.dialogRenderObj.close(e)}};this.dialogObj=this.dialogRenderObj.render(a),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(o),this.dialogObj.show(!!l.d.isDevice)},e.prototype.renderFileManager=function(){var e=this,t=this;this.fileObj=new Wn.a({allowMultiSelection:!1,locale:this.parent.locale,enableRtl:this.parent.enableRtl,path:this.parent.fileManagerSettings.path,view:this.parent.fileManagerSettings.view,enablePersistence:this.parent.enablePersistence,cssClass:this.parent.fileManagerSettings.cssClass,sortOrder:this.parent.fileManagerSettings.sortOrder,ajaxSettings:this.parent.fileManagerSettings.ajaxSettings,showThumbnail:this.parent.fileManagerSettings.showThumbnail,rootAliasName:this.parent.fileManagerSettings.rootAliasName,uploadSettings:this.parent.fileManagerSettings.uploadSettings,searchSettings:this.parent.fileManagerSettings.searchSettings,toolbarSettings:this.parent.fileManagerSettings.toolbarSettings,showHiddenItems:this.parent.fileManagerSettings.showHiddenItems,allowDragAndDrop:this.parent.fileManagerSettings.allowDragAndDrop,showFileExtension:this.parent.fileManagerSettings.showFileExtension,detailsViewSettings:this.parent.fileManagerSettings.detailsViewSettings,contextMenuSettings:this.parent.fileManagerSettings.contextMenuSettings,navigationPaneSettings:this.parent.fileManagerSettings.navigationPaneSettings,fileSelect:function(n){var i=n.fileDetails;i.isFile&&t.parent.insertImageSettings.allowedTypes.indexOf(i.type)>-1?(t.inputUrl.value=t.parent.fileManagerSettings.ajaxSettings.getImageUrl+\"?path=\"+(i.filterPath&&i.filterPath.replace(/\\\\/g,\"/\"))+i.name,e.dlgButtons[0].buttonModel.disabled=!1):(t.inputUrl.value=\"\",e.dlgButtons[0].buttonModel.disabled=!0),e.dialogObj.buttons=e.dlgButtons},created:function(){e.inputUrl.removeAttribute(\"disabled\")},success:function(){e.fileObj.refreshLayout()}}),l.d.isDevice&&(this.fileObj.height=\"85%\"),this.fileObj.appendTo(this.fileWrap),l.l.add(this.parent.element.ownerDocument,\"mousedown\",this.onDocumentClick,this)},e.prototype.getInputUrlElement=function(){var e=this.parent.createElement(\"div\",{className:\"imgUrl\"}),t=this.parent.createElement(\"div\",{className:\"e-rte-label\"});t.innerHTML='<label for=\"rteSample_img_url\">'+this.i10n.getConstant(\"linkWebUrl\")+\"</label>\",e.appendChild(t);var n=this.i10n.getConstant(\"imageUrl\");return this.inputUrl=this.parent.createElement(\"input\",{className:\"e-input e-img-url\",attrs:{placeholder:n,spellcheck:\"false\",disabled:\"true\"}}),e.appendChild(this.inputUrl),e},e.prototype.insertImageUrl=function(e){var t=this.inputUrl.value;if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),\"\"!==t){if(\"HTML\"===this.parent.editorMode&&Object(l.W)(Object(l.C)(this.selectObj.selection.range.startContainer.parentNode,\"#\"+this.contentModule.getPanel().id))){this.contentModule.getEditPanel().focus();var n=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());this.selectObj.selection=this.parent.formatter.editorManager.nodeSelection.save(n,this.contentModule.getDocument()),this.selectObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(n)}var i=/[\\w-]+.(jpg|png|jpeg|gif)/g,r=Object(l.W)(t.match(i))||\"HTML\"!==this.parent.editorMode?\"\":t.match(i)[0],o={cssClass:\"inline\"===this.parent.insertImageSettings.display?\"e-imginline\":\"e-imgbreak\",url:t,selection:this.selectObj.selection,altText:r,selectParent:this.selectObj.selectParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.parent.getInsertImgMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}};this.parent.formatter.process(this.parent,this.selectObj.args,this.selectObj.args.originalEvent,o),this.dialogObj.hide({returnValue:!1})}},e.prototype.cancelDialog=function(){this.parent.isBlur=!1,this.dialogObj.hide({returnValue:!0})},e.prototype.onDocumentClick=function(e){var t=e.target,n=\"#document\"!==t.nodeName&&!Object(l.W)(t.previousElementSibling)&&t.previousElementSibling;Object(l.W)(this.dialogObj)||Object(l.C)(t,\"#\"+this.parent.getID()+\"_file-manager-dialog\")||Object(l.C)(t,\"#\"+this.parent.getID()+\"_rte-file-manager_tb_sortby-popup\")||Object(l.C)(t,\"#\"+this.parent.getID()+\"_rte-file-manager_tb_view-popup\")||Object(l.C)(t,\"#\"+this.parent.getID()+\"_rte-file-manager_contextmenu\")||!Object(l.W)(Object(l.C)(t,\".e-contextmenu-wrapper\"))&&Object(l.C)(t,\".e-contextmenu-wrapper\").querySelector(\"#\"+this.parent.getID()+\"_rte-file-manager_contextmenu\")||Object(l.W)(n)||n.classList.contains(\"e-rte-file-manager-dialog\")||Object(l.W)(n)||n.id===this.parent.getID()+\"_rte-file-manager_contextmenu\"?this.parent.isRTE=!0:(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,Ue(this.parent.element,\"focusout\"))},e.prototype.addEventListener=function(){this.parent.on(d,this.initialize,this),this.parent.on(\"renderFileManager\",this.render,this),this.parent.on(h,this.destroy,this)},e.prototype.removeEventListener=function(){l.l.remove(this.parent.element.ownerDocument,\"mousedown\",this.onDocumentClick),this.parent.off(d,this.initialize),this.parent.off(\"renderFileManager\",this.render),this.parent.off(h,this.destroy)},e.prototype.destroyComponents=function(){this.fileObj&&(this.fileObj.destroy(),this.fileObj=null),this.dialogObj&&(this.dialogObj.destroy(),Object(l.I)(this.dialogObj.element),this.dialogObj=null)},e.prototype.destroy=function(){this.parent.isDestroyed||(this.destroyComponents(),this.removeEventListener())},e.prototype.getModuleName=function(){return\"fileManager\"},e}(),Qn=n(\"Ip0R\");n.d(t,\"d\",(function(){return pi})),n.d(t,\"f\",(function(){return ti})),n.d(t,\"c\",(function(){return ni})),n.d(t,\"b\",(function(){return ii})),n.d(t,\"a\",(function(){return ai})),n.d(t,\"e\",(function(){return li}));var Gn,Kn=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xn=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Yn=function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Jn=[\"actionBegin\",\"actionComplete\",\"afterImageDelete\",\"beforeDialogClose\",\"beforeDialogOpen\",\"beforeImageUpload\",\"beforeQuickToolbarOpen\",\"beforeSanitizeHtml\",\"blur\",\"change\",\"created\",\"destroyed\",\"dialogClose\",\"dialogOpen\",\"focus\",\"imageRemoving\",\"imageSelected\",\"imageUploadFailed\",\"imageUploadSuccess\",\"imageUploading\",\"quickToolbarClose\",\"quickToolbarOpen\",\"resizeStart\",\"resizeStop\",\"resizing\",\"toolbarClick\",\"toolbarStatusUpdate\",\"valueChange\"],$n=[\"value\"],Zn=Gn=function(e){function t(t,n,i,r){var o=e.call(this)||this;o.ngEle=t,o.srenderer=n,o.viewContainerRef=i,o.injector=r,o.skipFromEvent=!0,o.element=o.ngEle.nativeElement,o.injectedModules=o.injectedModules||[];try{var a=o.injector.get(\"RichTextEditorToolbar\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(l){}try{a=o.injector.get(\"RichTextEditorLink\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(c){}try{a=o.injector.get(\"RichTextEditorImage\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(d){}try{a=o.injector.get(\"RichTextEditorCount\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(h){}try{a=o.injector.get(\"RichTextEditorQuickToolbar\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(p){}try{a=o.injector.get(\"RichTextEditorHtmlEditor\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(u){}try{a=o.injector.get(\"RichTextEditorMarkdownEditor\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(m){}try{a=o.injector.get(\"RichTextEditorTable\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(f){}try{a=o.injector.get(\"RichTextEditorPasteCleanup\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(g){}try{a=o.injector.get(\"RichTextEditorResize\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(b){}try{a=o.injector.get(\"RichTextEditorFileManager\");-1===o.injectedModules.indexOf(a)&&o.injectedModules.push(a)}catch(v){}return o.registerEvents(Jn),o.addTwoWay.call(o,$n),Object(s.g)(\"currentInstance\",o,o.viewContainerRef),o.formContext=new s.e,o.formCompContext=new s.c,o}return Kn(t,e),t.prototype.registerOnChange=function(e){},t.prototype.registerOnTouched=function(e){},t.prototype.writeValue=function(e){},t.prototype.setDisabledState=function(e){},t.prototype.ngOnInit=function(){this.formCompContext.ngOnInit(this)},t.prototype.ngAfterViewInit=function(){this.formContext.ngAfterViewInit(this)},t.prototype.ngOnDestroy=function(){this.formCompContext.ngOnDestroy(this)},t.prototype.ngAfterContentChecked=function(){this.formCompContext.ngAfterContentChecked(this)},t}(rt);Zn.decorators=[{type:o.Component,args:[{selector:\"ejs-richtexteditor\",inputs:[\"autoSaveOnIdle\",\"backgroundColor\",\"cssClass\",\"editorMode\",\"enableAutoUrl\",\"enableHtmlEncode\",\"enableHtmlSanitizer\",\"enablePersistence\",\"enableResize\",\"enableRtl\",\"enableTabKey\",\"enableXhtml\",\"enabled\",\"fileManagerSettings\",\"floatingToolbarOffset\",\"fontColor\",\"fontFamily\",\"fontSize\",\"format\",\"formatter\",\"height\",\"htmlAttributes\",\"iframeSettings\",\"inlineMode\",\"insertImageSettings\",\"keyConfig\",\"locale\",\"maxLength\",\"pasteCleanupSettings\",\"placeholder\",\"quickToolbarSettings\",\"readonly\",\"saveInterval\",\"showCharCount\",\"tableSettings\",\"toolbarSettings\",\"undoRedoSteps\",\"undoRedoTimer\",\"value\",\"valueTemplate\",\"width\"],outputs:Jn,template:\"\",changeDetection:o.ChangeDetectionStrategy.OnPush,providers:[{provide:a.i,useExisting:Object(o.forwardRef)((function(){return Gn})),multi:!0}],queries:{}}]}],Zn.ctorParameters=function(){return[{type:o.ElementRef},{type:o.Renderer2},{type:o.ViewContainerRef},{type:o.Injector}]},Zn.propDecorators={valueTemplate:[{type:o.ContentChild,args:[\"valueTemplate\"]}]},Xn([Object(s.f)(),Yn(\"design:type\",Object)],Zn.prototype,\"valueTemplate\",void 0),Zn=Gn=Xn([Object(s.d)([s.c,s.e]),Yn(\"design:paramtypes\",[o.ElementRef,o.Renderer2,o.ViewContainerRef,o.Injector])],Zn);var ei=function(){};ei.decorators=[{type:o.NgModule,args:[{imports:[Qn.CommonModule],declarations:[Zn],exports:[Zn]}]}],ei.ctorParameters=function(){return[]};var ti={provide:\"RichTextEditorToolbar\",useValue:pt},ni={provide:\"RichTextEditorLink\",useValue:bt},ii={provide:\"RichTextEditorImage\",useValue:Ot},ri={provide:\"RichTextEditorCount\",useValue:St},oi={provide:\"RichTextEditorQuickToolbar\",useValue:jt},ai={provide:\"RichTextEditorHtmlEditor\",useValue:On},si={provide:\"RichTextEditorMarkdownEditor\",useValue:Pn},li={provide:\"RichTextEditorTable\",useValue:Bn},ci={provide:\"RichTextEditorPasteCleanup\",useValue:_n},di={provide:\"RichTextEditorResize\",useValue:Hn},hi={provide:\"RichTextEditorFileManager\",useValue:Vn},pi=function(){};pi.decorators=[{type:o.NgModule,args:[{imports:[Qn.CommonModule,ei],exports:[ei],providers:[ti,ni,ii,ri,oi,ai,si,li,ci,di,hi]}]}],pi.ctorParameters=function(){return[]}}}]);","extractedComments":["/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */","/*!\n * Signature Pad v2.3.2\n * https://github.com/szimek/signature_pad\n *\n * Copyright 2017 Szymon Nowak\n * Released under the MIT license\n *\n * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:\n * http://corner.squareup.com/2012/07/smoother-signatures.html\n *\n * Implementation of interpolation using cubic Bézier curves is taken from:\n * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript\n *\n * Algorithm for approximated length of a Bézier curve is taken from:\n * http://www.lemoda.net/maths/bezier-length/index.html\n *\n */"]}